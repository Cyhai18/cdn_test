(function(Q,L){typeof exports=="object"&&typeof module!="undefined"?L(exports,require("@nocobase/client"),require("react/jsx-runtime"),require("@ant-design/icons"),require("@formily/shared"),require("react"),require("@formily/react"),require("@formily/reactive"),require("@nocobase/utils/client"),require("antd"),require("react-i18next"),require("react-router-dom"),require("@emotion/css"),require("lodash"),require("ahooks")):typeof define=="function"&&define.amd?define(["exports","@nocobase/client","react/jsx-runtime","@ant-design/icons","@formily/shared","react","@formily/react","@formily/reactive","@nocobase/utils/client","antd","react-i18next","react-router-dom","@emotion/css","lodash","ahooks"],L):(Q=typeof globalThis!="undefined"?globalThis:Q||self,L(Q["@nocobase/plugin-graph-collection-manager"]={},Q["@nocobase/client"],Q.jsxRuntime,Q["@ant-design/icons"],Q["@formily/shared"],Q.react,Q["@formily/react"],Q["@formily/reactive"],Q["@nocobase/utils"],Q.antd,Q["react-i18next"],Q["react-router-dom"],Q["@emotion/css"],Q.lodash,Q.ahooks))})(this,function(Q,L,_,ue,po,te,Ft,mo,dn,ce,el,tl,Pr,Yu,XM){"use strict";var QY=Object.defineProperty,ZY=Object.defineProperties;var eK=Object.getOwnPropertyDescriptors;var Xu=Object.getOwnPropertySymbols;var qM=Object.prototype.hasOwnProperty,GM=Object.prototype.propertyIsEnumerable;var VM=(Q,L,_)=>L in Q?QY(Q,L,{enumerable:!0,configurable:!0,writable:!0,value:_}):Q[L]=_,re=(Q,L)=>{for(var _ in L||(L={}))qM.call(L,_)&&VM(Q,_,L[_]);if(Xu)for(var _ of Xu(L))GM.call(L,_)&&VM(Q,_,L[_]);return Q},$e=(Q,L)=>ZY(Q,eK(L));var Ky=(Q,L)=>{var _={};for(var ue in Q)qM.call(Q,ue)&&L.indexOf(ue)<0&&(_[ue]=Q[ue]);if(Q!=null&&Xu)for(var ue of Xu(Q))L.indexOf(ue)<0&&GM.call(Q,ue)&&(_[ue]=Q[ue]);return _};var ze=(Q,L,_)=>new Promise((ue,po)=>{var te=dn=>{try{mo(_.next(dn))}catch(ce){po(ce)}},Ft=dn=>{try{mo(_.throw(dn))}catch(ce){po(ce)}},mo=dn=>dn.done?ue(dn.value):Promise.resolve(dn.value).then(te,Ft);mo((_=_.apply(Q,L)).next())});var nl=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Jy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function YM(){this.__data__=[],this.size=0}var KM=YM;function JM(n,e){return n===e||n!==n&&e!==e}var Ui=JM,QM=Ui;function ZM(n,e){for(var t=n.length;t--;)if(QM(n[t][0],e))return t;return-1}var rl=ZM,eT=rl,tT=Array.prototype,nT=tT.splice;function rT(n){var e=this.__data__,t=eT(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():nT.call(e,t,1),--this.size,!0}var iT=rT,sT=rl;function oT(n){var e=this.__data__,t=sT(e,n);return t<0?void 0:e[t][1]}var aT=oT,lT=rl;function cT(n){return lT(this.__data__,n)>-1}var uT=cT,hT=rl;function fT(n,e){var t=this.__data__,r=hT(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}var dT=fT,gT=KM,pT=iT,mT=aT,yT=uT,vT=dT;function Wi(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Wi.prototype.clear=gT,Wi.prototype.delete=pT,Wi.prototype.get=mT,Wi.prototype.has=yT,Wi.prototype.set=vT;var il=Wi,bT=il;function wT(){this.__data__=new bT,this.size=0}var xT=wT;function CT(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}var ST=CT;function PT(n){return this.__data__.get(n)}var ET=PT;function AT(n){return this.__data__.has(n)}var OT=AT,MT=typeof nl=="object"&&nl&&nl.Object===Object&&nl,Qy=MT,TT=Qy,_T=typeof self=="object"&&self&&self.Object===Object&&self,NT=TT||_T||Function("return this")(),gn=NT,kT=gn,$T=kT.Symbol,Xi=$T,Zy=Xi,ev=Object.prototype,IT=ev.hasOwnProperty,LT=ev.toString,yo=Zy?Zy.toStringTag:void 0;function RT(n){var e=IT.call(n,yo),t=n[yo];try{n[yo]=void 0;var r=!0}catch(s){}var i=LT.call(n);return r&&(e?n[yo]=t:delete n[yo]),i}var jT=RT,DT=Object.prototype,BT=DT.toString;function zT(n){return BT.call(n)}var FT=zT,tv=Xi,VT=jT,qT=FT,GT="[object Null]",HT="[object Undefined]",nv=tv?tv.toStringTag:void 0;function UT(n){return n==null?n===void 0?HT:GT:nv&&nv in Object(n)?VT(n):qT(n)}var fi=UT;function WT(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var Jt=WT,XT=fi,YT=Jt,KT="[object AsyncFunction]",JT="[object Function]",QT="[object GeneratorFunction]",ZT="[object Proxy]";function e2(n){if(!YT(n))return!1;var e=XT(n);return e==JT||e==QT||e==KT||e==ZT}var vo=e2,t2=gn,n2=t2["__core-js_shared__"],r2=n2,Ku=r2,rv=function(){var n=/[^.]+$/.exec(Ku&&Ku.keys&&Ku.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function i2(n){return!!rv&&rv in n}var s2=i2,o2=Function.prototype,a2=o2.toString;function l2(n){if(n!=null){try{return a2.call(n)}catch(e){}try{return n+""}catch(e){}}return""}var iv=l2,c2=vo,u2=s2,h2=Jt,f2=iv,d2=/[\\^$.*+?()[\]{}|]/g,g2=/^\[object .+?Constructor\]$/,p2=Function.prototype,m2=Object.prototype,y2=p2.toString,v2=m2.hasOwnProperty,b2=RegExp("^"+y2.call(v2).replace(d2,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function w2(n){if(!h2(n)||u2(n))return!1;var e=c2(n)?b2:g2;return e.test(f2(n))}var x2=w2;function C2(n,e){return n==null?void 0:n[e]}var S2=C2,P2=x2,E2=S2;function A2(n,e){var t=E2(n,e);return P2(t)?t:void 0}var di=A2,O2=di,M2=gn,T2=O2(M2,"Map"),Ju=T2,_2=di,N2=_2(Object,"create"),sl=N2,sv=sl;function k2(){this.__data__=sv?sv(null):{},this.size=0}var $2=k2;function I2(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var L2=I2,R2=sl,j2="__lodash_hash_undefined__",D2=Object.prototype,B2=D2.hasOwnProperty;function z2(n){var e=this.__data__;if(R2){var t=e[n];return t===j2?void 0:t}return B2.call(e,n)?e[n]:void 0}var F2=z2,V2=sl,q2=Object.prototype,G2=q2.hasOwnProperty;function H2(n){var e=this.__data__;return V2?e[n]!==void 0:G2.call(e,n)}var U2=H2,W2=sl,X2="__lodash_hash_undefined__";function Y2(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=W2&&e===void 0?X2:e,this}var K2=Y2,J2=$2,Q2=L2,Z2=F2,e_=U2,t_=K2;function Yi(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Yi.prototype.clear=J2,Yi.prototype.delete=Q2,Yi.prototype.get=Z2,Yi.prototype.has=e_,Yi.prototype.set=t_;var n_=Yi,ov=n_,r_=il,i_=Ju;function s_(){this.size=0,this.__data__={hash:new ov,map:new(i_||r_),string:new ov}}var o_=s_;function a_(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}var l_=a_,c_=l_;function u_(n,e){var t=n.__data__;return c_(e)?t[typeof e=="string"?"string":"hash"]:t.map}var ol=u_,h_=ol;function f_(n){var e=h_(this,n).delete(n);return this.size-=e?1:0,e}var d_=f_,g_=ol;function p_(n){return g_(this,n).get(n)}var m_=p_,y_=ol;function v_(n){return y_(this,n).has(n)}var b_=v_,w_=ol;function x_(n,e){var t=w_(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}var C_=x_,S_=o_,P_=d_,E_=m_,A_=b_,O_=C_;function Ki(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Ki.prototype.clear=S_,Ki.prototype.delete=P_,Ki.prototype.get=E_,Ki.prototype.has=A_,Ki.prototype.set=O_;var Qu=Ki,M_=il,T_=Ju,__=Qu,N_=200;function k_(n,e){var t=this.__data__;if(t instanceof M_){var r=t.__data__;if(!T_||r.length<N_-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new __(r)}return t.set(n,e),this.size=t.size,this}var $_=k_,I_=il,L_=xT,R_=ST,j_=ET,D_=OT,B_=$_;function Ji(n){var e=this.__data__=new I_(n);this.size=e.size}Ji.prototype.clear=L_,Ji.prototype.delete=R_,Ji.prototype.get=j_,Ji.prototype.has=D_,Ji.prototype.set=B_;var al=Ji;function z_(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}var Zu=z_,F_=di,V_=function(){try{var n=F_(Object,"defineProperty");return n({},"",{}),n}catch(e){}}(),av=V_,lv=av;function q_(n,e,t){e=="__proto__"&&lv?lv(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}var ll=q_,G_=ll,H_=Ui,U_=Object.prototype,W_=U_.hasOwnProperty;function X_(n,e,t){var r=n[e];(!(W_.call(n,e)&&H_(r,t))||t===void 0&&!(e in n))&&G_(n,e,t)}var cl=X_,Y_=cl,K_=ll;function J_(n,e,t,r){var i=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=r?r(t[a],n[a],a,t,n):void 0;l===void 0&&(l=n[a]),i?K_(t,a,l):Y_(t,a,l)}return t}var bo=J_;function Q_(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var Z_=Q_;function eN(n){return n!=null&&typeof n=="object"}var Rn=eN,tN=fi,nN=Rn,rN="[object Arguments]";function iN(n){return nN(n)&&tN(n)==rN}var sN=iN,cv=sN,oN=Rn,uv=Object.prototype,aN=uv.hasOwnProperty,lN=uv.propertyIsEnumerable,cN=cv(function(){return arguments}())?cv:function(n){return oN(n)&&aN.call(n,"callee")&&!lN.call(n,"callee")},wo=cN,uN=Array.isArray,Qe=uN,ul={exports:{}};function hN(){return!1}var fN=hN;ul.exports,function(n,e){var t=gn,r=fN,i=e&&!e.nodeType&&e,s=i&&!0&&n&&!n.nodeType&&n,o=s&&s.exports===i,a=o?t.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||r;n.exports=c}(ul,ul.exports);var Qi=ul.exports,dN=9007199254740991,gN=/^(?:0|[1-9]\d*)$/;function pN(n,e){var t=typeof n;return e=e==null?dN:e,!!e&&(t=="number"||t!="symbol"&&gN.test(n))&&n>-1&&n%1==0&&n<e}var hl=pN,mN=9007199254740991;function yN(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=mN}var eh=yN,vN=fi,bN=eh,wN=Rn,xN="[object Arguments]",CN="[object Array]",SN="[object Boolean]",PN="[object Date]",EN="[object Error]",AN="[object Function]",ON="[object Map]",MN="[object Number]",TN="[object Object]",_N="[object RegExp]",NN="[object Set]",kN="[object String]",$N="[object WeakMap]",IN="[object ArrayBuffer]",LN="[object DataView]",RN="[object Float32Array]",jN="[object Float64Array]",DN="[object Int8Array]",BN="[object Int16Array]",zN="[object Int32Array]",FN="[object Uint8Array]",VN="[object Uint8ClampedArray]",qN="[object Uint16Array]",GN="[object Uint32Array]",Te={};Te[RN]=Te[jN]=Te[DN]=Te[BN]=Te[zN]=Te[FN]=Te[VN]=Te[qN]=Te[GN]=!0,Te[xN]=Te[CN]=Te[IN]=Te[SN]=Te[LN]=Te[PN]=Te[EN]=Te[AN]=Te[ON]=Te[MN]=Te[TN]=Te[_N]=Te[NN]=Te[kN]=Te[$N]=!1;function HN(n){return wN(n)&&bN(n.length)&&!!Te[vN(n)]}var UN=HN;function WN(n){return function(e){return n(e)}}var fl=WN,dl={exports:{}};dl.exports,function(n,e){var t=Qy,r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,o=s&&t.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch(c){}}();n.exports=a}(dl,dl.exports);var th=dl.exports,XN=UN,YN=fl,hv=th,fv=hv&&hv.isTypedArray,KN=fv?YN(fv):XN,xo=KN,JN=Z_,QN=wo,ZN=Qe,ek=Qi,tk=hl,nk=xo,rk=Object.prototype,ik=rk.hasOwnProperty;function sk(n,e){var t=ZN(n),r=!t&&QN(n),i=!t&&!r&&ek(n),s=!t&&!r&&!i&&nk(n),o=t||r||i||s,a=o?JN(n.length,String):[],l=a.length;for(var c in n)(e||ik.call(n,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||tk(c,l)))&&a.push(c);return a}var dv=sk,ok=Object.prototype;function ak(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||ok;return n===t}var gl=ak;function lk(n,e){return function(t){return n(e(t))}}var gv=lk,ck=gv,uk=ck(Object.keys,Object),hk=uk,fk=gl,dk=hk,gk=Object.prototype,pk=gk.hasOwnProperty;function mk(n){if(!fk(n))return dk(n);var e=[];for(var t in Object(n))pk.call(n,t)&&t!="constructor"&&e.push(t);return e}var nh=mk,yk=vo,vk=eh;function bk(n){return n!=null&&vk(n.length)&&!yk(n)}var Yn=bk,wk=dv,xk=nh,Ck=Yn;function Sk(n){return Ck(n)?wk(n):xk(n)}var Er=Sk,Pk=bo,Ek=Er;function Ak(n,e){return n&&Pk(e,Ek(e),n)}var Ok=Ak;function Mk(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var Tk=Mk,_k=Jt,Nk=gl,kk=Tk,$k=Object.prototype,Ik=$k.hasOwnProperty;function Lk(n){if(!_k(n))return kk(n);var e=Nk(n),t=[];for(var r in n)r=="constructor"&&(e||!Ik.call(n,r))||t.push(r);return t}var Rk=Lk,jk=dv,Dk=Rk,Bk=Yn;function zk(n){return Bk(n)?jk(n,!0):Dk(n)}var gi=zk,Fk=bo,Vk=gi;function qk(n,e){return n&&Fk(e,Vk(e),n)}var Gk=qk,pl={exports:{}};pl.exports,function(n,e){var t=gn,r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,o=s?t.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(c,u){if(u)return c.slice();var h=c.length,f=a?a(h):new c.constructor(h);return c.copy(f),f}n.exports=l}(pl,pl.exports);var pv=pl.exports;function Hk(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var mv=Hk;function Uk(n,e){for(var t=-1,r=n==null?0:n.length,i=0,s=[];++t<r;){var o=n[t];e(o,t,n)&&(s[i++]=o)}return s}var yv=Uk;function Wk(){return[]}var vv=Wk,Xk=yv,Yk=vv,Kk=Object.prototype,Jk=Kk.propertyIsEnumerable,bv=Object.getOwnPropertySymbols,Qk=bv?function(n){return n==null?[]:(n=Object(n),Xk(bv(n),function(e){return Jk.call(n,e)}))}:Yk,rh=Qk,Zk=bo,e$=rh;function t$(n,e){return Zk(n,e$(n),e)}var n$=t$;function r$(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}var ih=r$,i$=gv,s$=i$(Object.getPrototypeOf,Object),ml=s$,o$=ih,a$=ml,l$=rh,c$=vv,u$=Object.getOwnPropertySymbols,h$=u$?function(n){for(var e=[];n;)o$(e,l$(n)),n=a$(n);return e}:c$,wv=h$,f$=bo,d$=wv;function g$(n,e){return f$(n,d$(n),e)}var p$=g$,m$=ih,y$=Qe;function v$(n,e,t){var r=e(n);return y$(n)?r:m$(r,t(n))}var xv=v$,b$=xv,w$=rh,x$=Er;function C$(n){return b$(n,x$,w$)}var Cv=C$,S$=xv,P$=wv,E$=gi;function A$(n){return S$(n,E$,P$)}var O$=A$,M$=di,T$=gn,_$=M$(T$,"DataView"),N$=_$,k$=di,$$=gn,I$=k$($$,"Promise"),L$=I$,R$=di,j$=gn,D$=R$(j$,"Set"),Sv=D$,B$=di,z$=gn,F$=B$(z$,"WeakMap"),V$=F$,sh=N$,oh=Ju,ah=L$,lh=Sv,ch=V$,Pv=fi,Zi=iv,Ev="[object Map]",q$="[object Object]",Av="[object Promise]",Ov="[object Set]",Mv="[object WeakMap]",Tv="[object DataView]",G$=Zi(sh),H$=Zi(oh),U$=Zi(ah),W$=Zi(lh),X$=Zi(ch),pi=Pv;(sh&&pi(new sh(new ArrayBuffer(1)))!=Tv||oh&&pi(new oh)!=Ev||ah&&pi(ah.resolve())!=Av||lh&&pi(new lh)!=Ov||ch&&pi(new ch)!=Mv)&&(pi=function(n){var e=Pv(n),t=e==q$?n.constructor:void 0,r=t?Zi(t):"";if(r)switch(r){case G$:return Tv;case H$:return Ev;case U$:return Av;case W$:return Ov;case X$:return Mv}return e});var es=pi,Y$=Object.prototype,K$=Y$.hasOwnProperty;function J$(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&K$.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var Q$=J$,Z$=gn,eI=Z$.Uint8Array,_v=eI,Nv=_v;function tI(n){var e=new n.constructor(n.byteLength);return new Nv(e).set(new Nv(n)),e}var uh=tI,nI=uh;function rI(n,e){var t=e?nI(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var iI=rI,sI=/\w*$/;function oI(n){var e=new n.constructor(n.source,sI.exec(n));return e.lastIndex=n.lastIndex,e}var aI=oI,kv=Xi,$v=kv?kv.prototype:void 0,Iv=$v?$v.valueOf:void 0;function lI(n){return Iv?Object(Iv.call(n)):{}}var cI=lI,uI=uh;function hI(n,e){var t=e?uI(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var Lv=hI,fI=uh,dI=iI,gI=aI,pI=cI,mI=Lv,yI="[object Boolean]",vI="[object Date]",bI="[object Map]",wI="[object Number]",xI="[object RegExp]",CI="[object Set]",SI="[object String]",PI="[object Symbol]",EI="[object ArrayBuffer]",AI="[object DataView]",OI="[object Float32Array]",MI="[object Float64Array]",TI="[object Int8Array]",_I="[object Int16Array]",NI="[object Int32Array]",kI="[object Uint8Array]",$I="[object Uint8ClampedArray]",II="[object Uint16Array]",LI="[object Uint32Array]";function RI(n,e,t){var r=n.constructor;switch(e){case EI:return fI(n);case yI:case vI:return new r(+n);case AI:return dI(n,t);case OI:case MI:case TI:case _I:case NI:case kI:case $I:case II:case LI:return mI(n,t);case bI:return new r;case wI:case SI:return new r(n);case xI:return gI(n);case CI:return new r;case PI:return pI(n)}}var jI=RI,DI=Jt,Rv=Object.create,BI=function(){function n(){}return function(e){if(!DI(e))return{};if(Rv)return Rv(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}(),jv=BI,zI=jv,FI=ml,VI=gl;function qI(n){return typeof n.constructor=="function"&&!VI(n)?zI(FI(n)):{}}var Dv=qI,GI=es,HI=Rn,UI="[object Map]";function WI(n){return HI(n)&&GI(n)==UI}var XI=WI,YI=XI,KI=fl,Bv=th,zv=Bv&&Bv.isMap,JI=zv?KI(zv):YI,QI=JI,ZI=es,eL=Rn,tL="[object Set]";function nL(n){return eL(n)&&ZI(n)==tL}var rL=nL,iL=rL,sL=fl,Fv=th,Vv=Fv&&Fv.isSet,oL=Vv?sL(Vv):iL,aL=oL,lL=al,cL=Zu,uL=cl,hL=Ok,fL=Gk,dL=pv,gL=mv,pL=n$,mL=p$,yL=Cv,vL=O$,bL=es,wL=Q$,xL=jI,CL=Dv,SL=Qe,PL=Qi,EL=QI,AL=Jt,OL=aL,ML=Er,TL=gi,_L=1,NL=2,kL=4,qv="[object Arguments]",$L="[object Array]",IL="[object Boolean]",LL="[object Date]",RL="[object Error]",Gv="[object Function]",jL="[object GeneratorFunction]",DL="[object Map]",BL="[object Number]",Hv="[object Object]",zL="[object RegExp]",FL="[object Set]",VL="[object String]",qL="[object Symbol]",GL="[object WeakMap]",HL="[object ArrayBuffer]",UL="[object DataView]",WL="[object Float32Array]",XL="[object Float64Array]",YL="[object Int8Array]",KL="[object Int16Array]",JL="[object Int32Array]",QL="[object Uint8Array]",ZL="[object Uint8ClampedArray]",eR="[object Uint16Array]",tR="[object Uint32Array]",Ce={};Ce[qv]=Ce[$L]=Ce[HL]=Ce[UL]=Ce[IL]=Ce[LL]=Ce[WL]=Ce[XL]=Ce[YL]=Ce[KL]=Ce[JL]=Ce[DL]=Ce[BL]=Ce[Hv]=Ce[zL]=Ce[FL]=Ce[VL]=Ce[qL]=Ce[QL]=Ce[ZL]=Ce[eR]=Ce[tR]=!0,Ce[RL]=Ce[Gv]=Ce[GL]=!1;function yl(n,e,t,r,i,s){var o,a=e&_L,l=e&NL,c=e&kL;if(t&&(o=i?t(n,r,i,s):t(n)),o!==void 0)return o;if(!AL(n))return n;var u=SL(n);if(u){if(o=wL(n),!a)return gL(n,o)}else{var h=bL(n),f=h==Gv||h==jL;if(PL(n))return dL(n,a);if(h==Hv||h==qv||f&&!i){if(o=l||f?{}:CL(n),!a)return l?mL(n,fL(o,n)):pL(n,hL(o,n))}else{if(!Ce[h])return i?n:{};o=xL(n,h,a)}}s||(s=new lL);var d=s.get(n);if(d)return d;s.set(n,o),OL(n)?n.forEach(function(b){o.add(yl(b,e,t,b,n,s))}):EL(n)&&n.forEach(function(b,m){o.set(m,yl(b,e,t,m,n,s))});var g=c?l?vL:yL:l?TL:ML,p=u?void 0:g(n);return cL(p||n,function(b,m){p&&(m=b,b=n[m]),uL(o,m,yl(b,e,t,m,n,s))}),o}var Uv=yl,nR=Uv,rR=1,iR=4;function sR(n){return nR(n,rR|iR)}var Wv=sR;const oR=Jy(Wv),Ar=te.createContext(null);Ar.displayName="GraphCollectionContext";const Xv=n=>{const{record:e,setTargetNode:t,node:r,handelOpenPorts:i}=n;return _.jsx(Ar.Provider,{value:{node:r,record:e,positionTargetNode:s=>{t(s||r)},openPorts:i},children:n.children})},aR=(n,e)=>{const t=L.useRequest(()=>Promise.resolve({data:oR(e)}),$e(re({},n),{manual:!0})),r=L.useActionContext();return te.useEffect(()=>{r.visible&&t.run()},[r.visible]),t};Ft.observer(()=>{const{record:n}=te.useContext(Ar),e=L.useCompile();return _.jsx("div",{children:_.jsx(ce.Select,{popupMatchSelectWidth:!1,disabled:!0,value:n.name,options:[{value:n.name,label:e(n.title)}]})})},{displayName:"SourceCollection"});const Kn=()=>{const n=Ft.useForm(),e=L.useActionContext();return{run(){return ze(this,null,function*(){e.setVisible(!1),n.reset()})}}},Yv=n=>{const e=Ft.useForm(),t=L.useAPIClient(),r=L.useActionContext(),{refreshCM:i}=L.useCollectionManager_deprecated();return{run(){return ze(this,null,function*(){yield e.submit(),yield t.resource("collections").create({values:e.values}),r.setVisible(!1),yield e.reset(),n("last"),yield i()})}}},Kv=(n,e)=>{const t=Ft.useForm(),r=L.useAPIClient(),i=L.useActionContext(),{refreshCM:s}=L.useCollectionManager_deprecated(),{positionTargetNode:o,openPorts:a}=te.useContext(Ar),{getValues:l}=L.useCollectionFieldFormValues();return{run(){return ze(this,null,function*(){yield t.submit();const u=l(),h=dn.lodash.omit(u,["key","uiSchemaUid","collectionName","autoCreateReverseField","uiSchema.x-uid","reverseField.key","reverseField.uiSchemaUid"]),f=!["obo","oho","o2o","o2m","m2o","m2m","linkTo","id"].includes(u.interface),{data:{data:d}}=yield r.resource("collections.fields",n).create({values:h});e&&(yield r.resource("fields").move({sourceId:d.key,targetId:e,targetScope:n,method:"insertAfter"})),i.setVisible(!1),yield t.reset(),o(),f&&a&&a(),yield s()})}}},lR=({collectionName:n,name:e,key:t})=>{const{refreshCM:r}=L.useCollectionManager_deprecated(),{t:i}=el.useTranslation(),s=Ft.useForm(),o=L.useActionContext(),a=L.useAPIClient(),{positionTargetNode:l,node:c}=te.useContext(Ar);return{run(){return ze(this,null,function*(){var h;yield s.submit(),yield a.resource("collections.fields",n).update({filterByTk:e,values:s.values}),o.setVisible(!1),ce.message.success(i("Saved successfully")),l(),r(),c.setPortProp(t,"uiSchema",{title:(h=s.values)==null?void 0:h.uiSchema.title}),yield s.reset()})}}},vl=()=>{const{t:n}=el.useTranslation(),e=Ft.useForm(),t=L.useActionContext(),{name:r}=e.values,i=L.useAPIClient(),{refreshCM:s}=L.useCollectionManager_deprecated(),{positionTargetNode:o}=te.useContext(Ar);return{run(){return ze(this,null,function*(){yield e.submit(),yield i.resource("collections").update({filterByTk:r,values:re({},dn.lodash.omit(e.values,["fields"]))}),t.setVisible(!1),ce.message.success(n("Saved successfully")),yield e.reset(),o(),s()})}}},cR=n=>{const e=L.useAPIClient(),t=Ft.useForm(),{cascade:r}=(t==null?void 0:t.values)||{};return{run(){return ze(this,null,function*(){yield e.resource("collections").destroy({filterByTk:n,cascade:r}),yield e.resource("graphPositions").destroy({filter:{collectionName:n}})})}}},uR=n=>{const{name:e}=n,{run:t}=cR(e),{refreshCM:r}=L.useCollectionManager_deprecated(),{positionTargetNode:i}=te.useContext(Ar);return{run(){return ze(this,null,function*(){yield t(),i("destory"),yield r()})}}},hR=(n,e)=>{const t=L.useAPIClient(),{positionTargetNode:r}=te.useContext(Ar);return{run(){return ze(this,null,function*(){yield t.resource("collections.fields",n).destroy({filterByTk:e}),r()})}}},fR=n=>{const{collectionName:e,name:t}=n,{refreshCM:r}=L.useCollectionManager_deprecated(),{run:i}=hR(e,t);return{run(){return ze(this,null,function*(){yield i(),yield r()})}}},hh=n=>(e,{targetScope:t})=>{e.loading=!0,n(t).then(mo.action.bound(r=>{e.dataSource=r,e.loading=!1})).catch(r=>{dn.error(r)})};typeof window=="object"&&window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),function(n){n.forEach(e=>{Object.prototype.hasOwnProperty.call(e,"append")||Object.defineProperty(e,"append",{configurable:!0,enumerable:!0,writable:!0,value(...t){const r=document.createDocumentFragment();t.forEach(i=>{const s=i instanceof Node;r.appendChild(s?i:document.createTextNode(String(i)))}),this.appendChild(r)}})})}([Element.prototype,Document.prototype,DocumentFragment.prototype]);class pn{get disposed(){return this._disposed===!0}dispose(){this._disposed=!0}}(function(n){function e(){return(t,r,i)=>{const s=i.value,o=t.__proto__;i.value=function(...a){this.disposed||(s.call(this,...a),o.dispose.call(this))}}}n.dispose=e})(pn||(pn={}));class Jv{constructor(){this.isDisposed=!1,this.items=new Set}get disposed(){return this.isDisposed}dispose(){this.isDisposed||(this.isDisposed=!0,this.items.forEach(e=>{e.dispose()}),this.items.clear())}contains(e){return this.items.has(e)}add(e){this.items.add(e)}remove(e){this.items.delete(e)}clear(){this.items.clear()}}(function(n){function e(t){const r=new n;return t.forEach(i=>{r.add(i)}),r}n.from=e})(Jv||(Jv={}));var dR=typeof global=="object"&&global&&global.Object===Object&&global;const Qv=dR;var gR=typeof self=="object"&&self&&self.Object===Object&&self,pR=Qv||gR||Function("return this")();const mn=pR;var mR=mn.Symbol;const Qt=mR;var Zv=Object.prototype,yR=Zv.hasOwnProperty,vR=Zv.toString,Co=Qt?Qt.toStringTag:void 0;function bR(n){var e=yR.call(n,Co),t=n[Co];try{n[Co]=void 0;var r=!0}catch(s){}var i=vR.call(n);return r&&(e?n[Co]=t:delete n[Co]),i}var wR=Object.prototype,xR=wR.toString;function CR(n){return xR.call(n)}var SR="[object Null]",PR="[object Undefined]",e0=Qt?Qt.toStringTag:void 0;function Or(n){return n==null?n===void 0?PR:SR:e0&&e0 in Object(n)?bR(n):CR(n)}function yn(n){return n!=null&&typeof n=="object"}var ER="[object Symbol]";function jn(n){return typeof n=="symbol"||yn(n)&&Or(n)==ER}function So(n,e){for(var t=-1,r=n==null?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i}var AR=Array.isArray;const Ct=AR;var OR=1/0,t0=Qt?Qt.prototype:void 0,n0=t0?t0.toString:void 0;function r0(n){if(typeof n=="string")return n;if(Ct(n))return So(n,r0)+"";if(jn(n))return n0?n0.call(n):"";var e=n+"";return e=="0"&&1/n==-OR?"-0":e}var MR=/\s/;function TR(n){for(var e=n.length;e--&&MR.test(n.charAt(e)););return e}var _R=/^\s+/;function NR(n){return n&&n.slice(0,TR(n)+1).replace(_R,"")}function Ze(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var i0=NaN,kR=/^[-+]0x[0-9a-f]+$/i,$R=/^0b[01]+$/i,IR=/^0o[0-7]+$/i,LR=parseInt;function Po(n){if(typeof n=="number")return n;if(jn(n))return i0;if(Ze(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=Ze(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=NR(n);var t=$R.test(n);return t||IR.test(n)?LR(n.slice(2),t?2:8):kR.test(n)?i0:+n}function ts(n){return n}var RR="[object AsyncFunction]",jR="[object Function]",DR="[object GeneratorFunction]",BR="[object Proxy]";function fh(n){if(!Ze(n))return!1;var e=Or(n);return e==jR||e==DR||e==RR||e==BR}var zR=mn["__core-js_shared__"];const dh=zR;var s0=function(){var n=/[^.]+$/.exec(dh&&dh.keys&&dh.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function FR(n){return!!s0&&s0 in n}var VR=Function.prototype,qR=VR.toString;function mi(n){if(n!=null){try{return qR.call(n)}catch(e){}try{return n+""}catch(e){}}return""}var GR=/[\\^$.*+?()[\]{}|]/g,HR=/^\[object .+?Constructor\]$/,UR=Function.prototype,WR=Object.prototype,XR=UR.toString,YR=WR.hasOwnProperty,KR=RegExp("^"+XR.call(YR).replace(GR,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function JR(n){if(!Ze(n)||FR(n))return!1;var e=fh(n)?KR:HR;return e.test(mi(n))}function QR(n,e){return n==null?void 0:n[e]}function yi(n,e){var t=QR(n,e);return JR(t)?t:void 0}var ZR=yi(mn,"WeakMap");const gh=ZR;var o0=Object.create,ej=function(){function n(){}return function(e){if(!Ze(e))return{};if(o0)return o0(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const tj=ej;function a0(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function nj(){}function l0(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var rj=800,ij=16,sj=Date.now;function oj(n){var e=0,t=0;return function(){var r=sj(),i=ij-(r-t);if(t=r,i>0){if(++e>=rj)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function aj(n){return function(){return n}}var lj=function(){try{var n=yi(Object,"defineProperty");return n({},"",{}),n}catch(e){}}();const bl=lj;var cj=bl?function(n,e){return bl(n,"toString",{configurable:!0,enumerable:!1,value:aj(e),writable:!0})}:ts,uj=oj(cj);const hj=uj;function fj(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}function dj(n,e,t,r){for(var i=n.length,s=t+(r?1:-1);r?s--:++s<i;)if(e(n[s],s,n))return s;return-1}function gj(n){return n!==n}function pj(n,e,t){for(var r=t-1,i=n.length;++r<i;)if(n[r]===e)return r;return-1}function mj(n,e,t){return e===e?pj(n,e,t):dj(n,gj,t)}function c0(n,e){var t=n==null?0:n.length;return!!t&&mj(n,e,0)>-1}var yj=9007199254740991,vj=/^(?:0|[1-9]\d*)$/;function ph(n,e){var t=typeof n;return e=e==null?yj:e,!!e&&(t=="number"||t!="symbol"&&vj.test(n))&&n>-1&&n%1==0&&n<e}function wl(n,e,t){e=="__proto__"&&bl?bl(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function ns(n,e){return n===e||n!==n&&e!==e}var bj=Object.prototype,wj=bj.hasOwnProperty;function u0(n,e,t){var r=n[e];(!(wj.call(n,e)&&ns(r,t))||t===void 0&&!(e in n))&&wl(n,e,t)}function Eo(n,e,t,r){var i=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=r?r(t[a],n[a],a,t,n):void 0;l===void 0&&(l=n[a]),i?wl(t,a,l):u0(t,a,l)}return t}var h0=Math.max;function xj(n,e,t){return e=h0(e===void 0?n.length-1:e,0),function(){for(var r=arguments,i=-1,s=h0(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=t(o),a0(n,this,a)}}function rs(n,e){return hj(xj(n,e,ts),n+"")}var Cj=9007199254740991;function mh(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Cj}function vi(n){return n!=null&&mh(n.length)&&!fh(n)}function xl(n,e,t){if(!Ze(t))return!1;var r=typeof e;return(r=="number"?vi(t)&&ph(e,t.length):r=="string"&&e in t)?ns(t[e],n):!1}function f0(n){return rs(function(e,t){var r=-1,i=t.length,s=i>1?t[i-1]:void 0,o=i>2?t[2]:void 0;for(s=n.length>3&&typeof s=="function"?(i--,s):void 0,o&&xl(t[0],t[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=t[r];a&&n(e,a,r,s)}return e})}var Sj=Object.prototype;function Cl(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||Sj;return n===t}function Pj(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var Ej="[object Arguments]";function d0(n){return yn(n)&&Or(n)==Ej}var g0=Object.prototype,Aj=g0.hasOwnProperty,Oj=g0.propertyIsEnumerable,Mj=d0(function(){return arguments}())?d0:function(n){return yn(n)&&Aj.call(n,"callee")&&!Oj.call(n,"callee")};const is=Mj;function Tj(){return!1}var p0=typeof Q=="object"&&Q&&!Q.nodeType&&Q,m0=p0&&typeof module=="object"&&module&&!module.nodeType&&module,_j=m0&&m0.exports===p0,y0=_j?mn.Buffer:void 0,Nj=y0?y0.isBuffer:void 0,kj=Nj||Tj;const ss=kj;var $j="[object Arguments]",Ij="[object Array]",Lj="[object Boolean]",Rj="[object Date]",jj="[object Error]",Dj="[object Function]",Bj="[object Map]",zj="[object Number]",Fj="[object Object]",Vj="[object RegExp]",qj="[object Set]",Gj="[object String]",Hj="[object WeakMap]",Uj="[object ArrayBuffer]",Wj="[object DataView]",Xj="[object Float32Array]",Yj="[object Float64Array]",Kj="[object Int8Array]",Jj="[object Int16Array]",Qj="[object Int32Array]",Zj="[object Uint8Array]",eD="[object Uint8ClampedArray]",tD="[object Uint16Array]",nD="[object Uint32Array]",_e={};_e[Xj]=_e[Yj]=_e[Kj]=_e[Jj]=_e[Qj]=_e[Zj]=_e[eD]=_e[tD]=_e[nD]=!0,_e[$j]=_e[Ij]=_e[Uj]=_e[Lj]=_e[Wj]=_e[Rj]=_e[jj]=_e[Dj]=_e[Bj]=_e[zj]=_e[Fj]=_e[Vj]=_e[qj]=_e[Gj]=_e[Hj]=!1;function rD(n){return yn(n)&&mh(n.length)&&!!_e[Or(n)]}function Ao(n){return function(e){return n(e)}}var v0=typeof Q=="object"&&Q&&!Q.nodeType&&Q,Oo=v0&&typeof module=="object"&&module&&!module.nodeType&&module,iD=Oo&&Oo.exports===v0,yh=iD&&Qv.process,sD=function(){try{var n=Oo&&Oo.require&&Oo.require("util").types;return n||yh&&yh.binding&&yh.binding("util")}catch(e){}}();const os=sD;var b0=os&&os.isTypedArray,oD=b0?Ao(b0):rD;const Sl=oD;var aD=Object.prototype,lD=aD.hasOwnProperty;function w0(n,e){var t=Ct(n),r=!t&&is(n),i=!t&&!r&&ss(n),s=!t&&!r&&!i&&Sl(n),o=t||r||i||s,a=o?Pj(n.length,String):[],l=a.length;for(var c in n)(e||lD.call(n,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||ph(c,l)))&&a.push(c);return a}function x0(n,e){return function(t){return n(e(t))}}var cD=x0(Object.keys,Object);const uD=cD;var hD=Object.prototype,fD=hD.hasOwnProperty;function C0(n){if(!Cl(n))return uD(n);var e=[];for(var t in Object(n))fD.call(n,t)&&t!="constructor"&&e.push(t);return e}function Mo(n){return vi(n)?w0(n):C0(n)}function dD(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var gD=Object.prototype,pD=gD.hasOwnProperty;function mD(n){if(!Ze(n))return dD(n);var e=Cl(n),t=[];for(var r in n)r=="constructor"&&(e||!pD.call(n,r))||t.push(r);return t}function as(n){return vi(n)?w0(n,!0):mD(n)}var yD=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vD=/^\w*$/;function vh(n,e){if(Ct(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||jn(n)?!0:vD.test(n)||!yD.test(n)||e!=null&&n in Object(e)}var bD=yi(Object,"create");const To=bD;function wD(){this.__data__=To?To(null):{},this.size=0}function xD(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var CD="__lodash_hash_undefined__",SD=Object.prototype,PD=SD.hasOwnProperty;function ED(n){var e=this.__data__;if(To){var t=e[n];return t===CD?void 0:t}return PD.call(e,n)?e[n]:void 0}var AD=Object.prototype,OD=AD.hasOwnProperty;function MD(n){var e=this.__data__;return To?e[n]!==void 0:OD.call(e,n)}var TD="__lodash_hash_undefined__";function _D(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=To&&e===void 0?TD:e,this}function bi(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}bi.prototype.clear=wD,bi.prototype.delete=xD,bi.prototype.get=ED,bi.prototype.has=MD,bi.prototype.set=_D;function ND(){this.__data__=[],this.size=0}function Pl(n,e){for(var t=n.length;t--;)if(ns(n[t][0],e))return t;return-1}var kD=Array.prototype,$D=kD.splice;function ID(n){var e=this.__data__,t=Pl(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():$D.call(e,t,1),--this.size,!0}function LD(n){var e=this.__data__,t=Pl(e,n);return t<0?void 0:e[t][1]}function RD(n){return Pl(this.__data__,n)>-1}function jD(n,e){var t=this.__data__,r=Pl(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}function Jn(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Jn.prototype.clear=ND,Jn.prototype.delete=ID,Jn.prototype.get=LD,Jn.prototype.has=RD,Jn.prototype.set=jD;var DD=yi(mn,"Map");const _o=DD;function BD(){this.size=0,this.__data__={hash:new bi,map:new(_o||Jn),string:new bi}}function zD(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function El(n,e){var t=n.__data__;return zD(e)?t[typeof e=="string"?"string":"hash"]:t.map}function FD(n){var e=El(this,n).delete(n);return this.size-=e?1:0,e}function VD(n){return El(this,n).get(n)}function qD(n){return El(this,n).has(n)}function GD(n,e){var t=El(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}function Qn(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Qn.prototype.clear=BD,Qn.prototype.delete=FD,Qn.prototype.get=VD,Qn.prototype.has=qD,Qn.prototype.set=GD;var HD="Expected a function";function bh(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(HD);var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=t.cache;if(s.has(i))return s.get(i);var o=n.apply(this,r);return t.cache=s.set(i,o)||s,o};return t.cache=new(bh.Cache||Qn),t}bh.Cache=Qn;var UD=500;function WD(n){var e=bh(n,function(r){return t.size===UD&&t.clear(),r}),t=e.cache;return e}var XD=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,YD=/\\(\\)?/g,KD=WD(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(XD,function(t,r,i,s){e.push(i?s.replace(YD,"$1"):r||t)}),e});const JD=KD;function No(n){return n==null?"":r0(n)}function S0(n,e){return Ct(n)?n:vh(n,e)?[n]:JD(No(n))}var QD=1/0;function Al(n){if(typeof n=="string"||jn(n))return n;var e=n+"";return e=="0"&&1/n==-QD?"-0":e}function wh(n,e){e=S0(e,n);for(var t=0,r=e.length;n!=null&&t<r;)n=n[Al(e[t++])];return t&&t==r?n:void 0}function ZD(n,e,t){var r=n==null?void 0:wh(n,e);return r===void 0?t:r}function xh(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}var P0=Qt?Qt.isConcatSpreadable:void 0;function eB(n){return Ct(n)||is(n)||!!(P0&&n&&n[P0])}function Ol(n,e,t,r,i){var s=-1,o=n.length;for(t||(t=eB),i||(i=[]);++s<o;){var a=n[s];e>0&&t(a)?e>1?Ol(a,e-1,t,r,i):xh(i,a):r||(i[i.length]=a)}return i}var tB=x0(Object.getPrototypeOf,Object);const Ch=tB;var nB="[object Object]",rB=Function.prototype,iB=Object.prototype,E0=rB.toString,sB=iB.hasOwnProperty,oB=E0.call(Object);function Dn(n){if(!yn(n)||Or(n)!=nB)return!1;var e=Ch(n);if(e===null)return!0;var t=sB.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&E0.call(t)==oB}function aB(n,e,t){var r=-1,i=n.length;e<0&&(e=-e>i?0:i+e),t=t>i?i:t,t<0&&(t+=i),i=e>t?0:t-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=n[r+e];return s}function lB(n,e,t){var r=n.length;return t=t===void 0?r:t,!e&&t>=r?n:aB(n,e,t)}var cB="\\ud800-\\udfff",uB="\\u0300-\\u036f",hB="\\ufe20-\\ufe2f",fB="\\u20d0-\\u20ff",dB=uB+hB+fB,gB="\\ufe0e\\ufe0f",pB="\\u200d",mB=RegExp("["+pB+cB+dB+gB+"]");function A0(n){return mB.test(n)}function yB(n){return n.split("")}var O0="\\ud800-\\udfff",vB="\\u0300-\\u036f",bB="\\ufe20-\\ufe2f",wB="\\u20d0-\\u20ff",xB=vB+bB+wB,CB="\\ufe0e\\ufe0f",SB="["+O0+"]",Sh="["+xB+"]",Ph="\\ud83c[\\udffb-\\udfff]",PB="(?:"+Sh+"|"+Ph+")",M0="[^"+O0+"]",T0="(?:\\ud83c[\\udde6-\\uddff]){2}",_0="[\\ud800-\\udbff][\\udc00-\\udfff]",EB="\\u200d",N0=PB+"?",k0="["+CB+"]?",AB="(?:"+EB+"(?:"+[M0,T0,_0].join("|")+")"+k0+N0+")*",OB=k0+N0+AB,MB="(?:"+[M0+Sh+"?",Sh,T0,_0,SB].join("|")+")",TB=RegExp(Ph+"(?="+Ph+")|"+MB+OB,"g");function _B(n){return n.match(TB)||[]}function NB(n){return A0(n)?_B(n):yB(n)}function $0(n){return function(e){e=No(e);var t=A0(e)?NB(e):void 0,r=t?t[0]:e.charAt(0),i=t?lB(t,1).join(""):e.slice(1);return r[n]()+i}}var kB=$0("toUpperCase");const Ml=kB;function $B(n){return Ml(No(n).toLowerCase())}function IB(n,e,t,r){var i=-1,s=n==null?0:n.length;for(r&&s&&(t=n[++i]);++i<s;)t=e(t,n[i],i,n);return t}function LB(n){return function(e){return n==null?void 0:n[e]}}var RB={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},jB=LB(RB);const DB=jB;var BB=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,zB="\\u0300-\\u036f",FB="\\ufe20-\\ufe2f",VB="\\u20d0-\\u20ff",qB=zB+FB+VB,GB="["+qB+"]",HB=RegExp(GB,"g");function UB(n){return n=No(n),n&&n.replace(BB,DB).replace(HB,"")}var WB=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function XB(n){return n.match(WB)||[]}var YB=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function KB(n){return YB.test(n)}var I0="\\ud800-\\udfff",JB="\\u0300-\\u036f",QB="\\ufe20-\\ufe2f",ZB="\\u20d0-\\u20ff",e3=JB+QB+ZB,L0="\\u2700-\\u27bf",R0="a-z\\xdf-\\xf6\\xf8-\\xff",t3="\\xac\\xb1\\xd7\\xf7",n3="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",r3="\\u2000-\\u206f",i3=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",j0="A-Z\\xc0-\\xd6\\xd8-\\xde",s3="\\ufe0e\\ufe0f",D0=t3+n3+r3+i3,B0="['’]",z0="["+D0+"]",o3="["+e3+"]",F0="\\d+",a3="["+L0+"]",V0="["+R0+"]",q0="[^"+I0+D0+F0+L0+R0+j0+"]",l3="\\ud83c[\\udffb-\\udfff]",c3="(?:"+o3+"|"+l3+")",u3="[^"+I0+"]",G0="(?:\\ud83c[\\udde6-\\uddff]){2}",H0="[\\ud800-\\udbff][\\udc00-\\udfff]",ls="["+j0+"]",h3="\\u200d",U0="(?:"+V0+"|"+q0+")",f3="(?:"+ls+"|"+q0+")",W0="(?:"+B0+"(?:d|ll|m|re|s|t|ve))?",X0="(?:"+B0+"(?:D|LL|M|RE|S|T|VE))?",Y0=c3+"?",K0="["+s3+"]?",d3="(?:"+h3+"(?:"+[u3,G0,H0].join("|")+")"+K0+Y0+")*",g3="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",p3="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",m3=K0+Y0+d3,y3="(?:"+[a3,G0,H0].join("|")+")"+m3,v3=RegExp([ls+"?"+V0+"+"+W0+"(?="+[z0,ls,"$"].join("|")+")",f3+"+"+X0+"(?="+[z0,ls+U0,"$"].join("|")+")",ls+"?"+U0+"+"+W0,ls+"+"+X0,p3,g3,F0,y3].join("|"),"g");function b3(n){return n.match(v3)||[]}function w3(n,e,t){return n=No(n),e=t?void 0:e,e===void 0?KB(n)?b3(n):XB(n):n.match(e)||[]}var x3="['’]",C3=RegExp(x3,"g");function J0(n){return function(e){return IB(w3(UB(e).replace(C3,"")),n,"")}}var S3=J0(function(n,e,t){return e=e.toLowerCase(),n+(t?$B(e):e)});const Tl=S3;function P3(n,e,t){return n===n&&(t!==void 0&&(n=n<=t?n:t),e!==void 0&&(n=n>=e?n:e)),n}function Zt(n,e,t){return t===void 0&&(t=e,e=void 0),t!==void 0&&(t=Po(t),t=t===t?t:0),e!==void 0&&(e=Po(e),e=e===e?e:0),P3(Po(n),e,t)}function E3(){this.__data__=new Jn,this.size=0}function A3(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function O3(n){return this.__data__.get(n)}function M3(n){return this.__data__.has(n)}var T3=200;function _3(n,e){var t=this.__data__;if(t instanceof Jn){var r=t.__data__;if(!_o||r.length<T3-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new Qn(r)}return t.set(n,e),this.size=t.size,this}function vn(n){var e=this.__data__=new Jn(n);this.size=e.size}vn.prototype.clear=E3,vn.prototype.delete=A3,vn.prototype.get=O3,vn.prototype.has=M3,vn.prototype.set=_3;function N3(n,e){return n&&Eo(e,Mo(e),n)}function k3(n,e){return n&&Eo(e,as(e),n)}var Q0=typeof Q=="object"&&Q&&!Q.nodeType&&Q,Z0=Q0&&typeof module=="object"&&module&&!module.nodeType&&module,$3=Z0&&Z0.exports===Q0,eb=$3?mn.Buffer:void 0,tb=eb?eb.allocUnsafe:void 0;function nb(n,e){if(e)return n.slice();var t=n.length,r=tb?tb(t):new n.constructor(t);return n.copy(r),r}function I3(n,e){for(var t=-1,r=n==null?0:n.length,i=0,s=[];++t<r;){var o=n[t];e(o,t,n)&&(s[i++]=o)}return s}function rb(){return[]}var L3=Object.prototype,R3=L3.propertyIsEnumerable,ib=Object.getOwnPropertySymbols,j3=ib?function(n){return n==null?[]:(n=Object(n),I3(ib(n),function(e){return R3.call(n,e)}))}:rb;const Eh=j3;function D3(n,e){return Eo(n,Eh(n),e)}var B3=Object.getOwnPropertySymbols,z3=B3?function(n){for(var e=[];n;)xh(e,Eh(n)),n=Ch(n);return e}:rb;const sb=z3;function F3(n,e){return Eo(n,sb(n),e)}function ob(n,e,t){var r=e(n);return Ct(n)?r:xh(r,t(n))}function Ah(n){return ob(n,Mo,Eh)}function V3(n){return ob(n,as,sb)}var q3=yi(mn,"DataView");const Oh=q3;var G3=yi(mn,"Promise");const Mh=G3;var H3=yi(mn,"Set");const cs=H3;var ab="[object Map]",U3="[object Object]",lb="[object Promise]",cb="[object Set]",ub="[object WeakMap]",hb="[object DataView]",W3=mi(Oh),X3=mi(_o),Y3=mi(Mh),K3=mi(cs),J3=mi(gh),wi=Or;(Oh&&wi(new Oh(new ArrayBuffer(1)))!=hb||_o&&wi(new _o)!=ab||Mh&&wi(Mh.resolve())!=lb||cs&&wi(new cs)!=cb||gh&&wi(new gh)!=ub)&&(wi=function(n){var e=Or(n),t=e==U3?n.constructor:void 0,r=t?mi(t):"";if(r)switch(r){case W3:return hb;case X3:return ab;case Y3:return lb;case K3:return cb;case J3:return ub}return e});const us=wi;var Q3=Object.prototype,Z3=Q3.hasOwnProperty;function ez(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&Z3.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var tz=mn.Uint8Array;const _l=tz;function Th(n){var e=new n.constructor(n.byteLength);return new _l(e).set(new _l(n)),e}function nz(n,e){var t=e?Th(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var rz=/\w*$/;function iz(n){var e=new n.constructor(n.source,rz.exec(n));return e.lastIndex=n.lastIndex,e}var fb=Qt?Qt.prototype:void 0,db=fb?fb.valueOf:void 0;function sz(n){return db?Object(db.call(n)):{}}function gb(n,e){var t=e?Th(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var oz="[object Boolean]",az="[object Date]",lz="[object Map]",cz="[object Number]",uz="[object RegExp]",hz="[object Set]",fz="[object String]",dz="[object Symbol]",gz="[object ArrayBuffer]",pz="[object DataView]",mz="[object Float32Array]",yz="[object Float64Array]",vz="[object Int8Array]",bz="[object Int16Array]",wz="[object Int32Array]",xz="[object Uint8Array]",Cz="[object Uint8ClampedArray]",Sz="[object Uint16Array]",Pz="[object Uint32Array]";function Ez(n,e,t){var r=n.constructor;switch(e){case gz:return Th(n);case oz:case az:return new r(+n);case pz:return nz(n,t);case mz:case yz:case vz:case bz:case wz:case xz:case Cz:case Sz:case Pz:return gb(n,t);case lz:return new r;case cz:case fz:return new r(n);case uz:return iz(n);case hz:return new r;case dz:return sz(n)}}function pb(n){return typeof n.constructor=="function"&&!Cl(n)?tj(Ch(n)):{}}var Az="[object Map]";function Oz(n){return yn(n)&&us(n)==Az}var mb=os&&os.isMap,Mz=mb?Ao(mb):Oz;const Tz=Mz;var _z="[object Set]";function Nz(n){return yn(n)&&us(n)==_z}var yb=os&&os.isSet,kz=yb?Ao(yb):Nz;const $z=kz;var Iz=1,Lz=2,Rz=4,vb="[object Arguments]",jz="[object Array]",Dz="[object Boolean]",Bz="[object Date]",zz="[object Error]",bb="[object Function]",Fz="[object GeneratorFunction]",Vz="[object Map]",qz="[object Number]",wb="[object Object]",Gz="[object RegExp]",Hz="[object Set]",Uz="[object String]",Wz="[object Symbol]",Xz="[object WeakMap]",Yz="[object ArrayBuffer]",Kz="[object DataView]",Jz="[object Float32Array]",Qz="[object Float64Array]",Zz="[object Int8Array]",eF="[object Int16Array]",tF="[object Int32Array]",nF="[object Uint8Array]",rF="[object Uint8ClampedArray]",iF="[object Uint16Array]",sF="[object Uint32Array]",Se={};Se[vb]=Se[jz]=Se[Yz]=Se[Kz]=Se[Dz]=Se[Bz]=Se[Jz]=Se[Qz]=Se[Zz]=Se[eF]=Se[tF]=Se[Vz]=Se[qz]=Se[wb]=Se[Gz]=Se[Hz]=Se[Uz]=Se[Wz]=Se[nF]=Se[rF]=Se[iF]=Se[sF]=!0,Se[zz]=Se[bb]=Se[Xz]=!1;function ko(n,e,t,r,i,s){var o,a=e&Iz,l=e&Lz,c=e&Rz;if(t&&(o=i?t(n,r,i,s):t(n)),o!==void 0)return o;if(!Ze(n))return n;var u=Ct(n);if(u){if(o=ez(n),!a)return l0(n,o)}else{var h=us(n),f=h==bb||h==Fz;if(ss(n))return nb(n,a);if(h==wb||h==vb||f&&!i){if(o=l||f?{}:pb(n),!a)return l?F3(n,k3(o,n)):D3(n,N3(o,n))}else{if(!Se[h])return i?n:{};o=Ez(n,h,a)}}s||(s=new vn);var d=s.get(n);if(d)return d;s.set(n,o),$z(n)?n.forEach(function(b){o.add(ko(b,e,t,b,n,s))}):Tz(n)&&n.forEach(function(b,m){o.set(m,ko(b,e,t,m,n,s))});var g=c?l?V3:Ah:l?as:Mo,p=u?void 0:g(n);return fj(p||n,function(b,m){p&&(m=b,b=n[m]),u0(o,m,ko(b,e,t,m,n,s))}),o}var oF=4;function _h(n){return ko(n,oF)}var aF=1,lF=4;function Fe(n){return ko(n,aF|lF)}var cF="__lodash_hash_undefined__";function uF(n){return this.__data__.set(n,cF),this}function hF(n){return this.__data__.has(n)}function hs(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new Qn;++e<t;)this.add(n[e])}hs.prototype.add=hs.prototype.push=uF,hs.prototype.has=hF;function fF(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}function Nh(n,e){return n.has(e)}var dF=1,gF=2;function xb(n,e,t,r,i,s){var o=t&dF,a=n.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(n),u=s.get(e);if(c&&u)return c==e&&u==n;var h=-1,f=!0,d=t&gF?new hs:void 0;for(s.set(n,e),s.set(e,n);++h<a;){var g=n[h],p=e[h];if(r)var b=o?r(p,g,h,e,n,s):r(g,p,h,n,e,s);if(b!==void 0){if(b)continue;f=!1;break}if(d){if(!fF(e,function(m,y){if(!Nh(d,y)&&(g===m||i(g,m,t,r,s)))return d.push(y)})){f=!1;break}}else if(!(g===p||i(g,p,t,r,s))){f=!1;break}}return s.delete(n),s.delete(e),f}function pF(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t}function kh(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var mF=1,yF=2,vF="[object Boolean]",bF="[object Date]",wF="[object Error]",xF="[object Map]",CF="[object Number]",SF="[object RegExp]",PF="[object Set]",EF="[object String]",AF="[object Symbol]",OF="[object ArrayBuffer]",MF="[object DataView]",Cb=Qt?Qt.prototype:void 0,$h=Cb?Cb.valueOf:void 0;function TF(n,e,t,r,i,s,o){switch(t){case MF:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case OF:return!(n.byteLength!=e.byteLength||!s(new _l(n),new _l(e)));case vF:case bF:case CF:return ns(+n,+e);case wF:return n.name==e.name&&n.message==e.message;case SF:case EF:return n==e+"";case xF:var a=pF;case PF:var l=r&mF;if(a||(a=kh),n.size!=e.size&&!l)return!1;var c=o.get(n);if(c)return c==e;r|=yF,o.set(n,e);var u=xb(a(n),a(e),r,i,s,o);return o.delete(n),u;case AF:if($h)return $h.call(n)==$h.call(e)}return!1}var _F=1,NF=Object.prototype,kF=NF.hasOwnProperty;function $F(n,e,t,r,i,s){var o=t&_F,a=Ah(n),l=a.length,c=Ah(e),u=c.length;if(l!=u&&!o)return!1;for(var h=l;h--;){var f=a[h];if(!(o?f in e:kF.call(e,f)))return!1}var d=s.get(n),g=s.get(e);if(d&&g)return d==e&&g==n;var p=!0;s.set(n,e),s.set(e,n);for(var b=o;++h<l;){f=a[h];var m=n[f],y=e[f];if(r)var v=o?r(y,m,f,e,n,s):r(m,y,f,n,e,s);if(!(v===void 0?m===y||i(m,y,t,r,s):v)){p=!1;break}b||(b=f=="constructor")}if(p&&!b){var w=n.constructor,x=e.constructor;w!=x&&"constructor"in n&&"constructor"in e&&!(typeof w=="function"&&w instanceof w&&typeof x=="function"&&x instanceof x)&&(p=!1)}return s.delete(n),s.delete(e),p}var IF=1,Sb="[object Arguments]",Pb="[object Array]",Nl="[object Object]",LF=Object.prototype,Eb=LF.hasOwnProperty;function RF(n,e,t,r,i,s){var o=Ct(n),a=Ct(e),l=o?Pb:us(n),c=a?Pb:us(e);l=l==Sb?Nl:l,c=c==Sb?Nl:c;var u=l==Nl,h=c==Nl,f=l==c;if(f&&ss(n)){if(!ss(e))return!1;o=!0,u=!1}if(f&&!u)return s||(s=new vn),o||Sl(n)?xb(n,e,t,r,i,s):TF(n,e,l,t,r,i,s);if(!(t&IF)){var d=u&&Eb.call(n,"__wrapped__"),g=h&&Eb.call(e,"__wrapped__");if(d||g){var p=d?n.value():n,b=g?e.value():e;return s||(s=new vn),i(p,b,t,r,s)}}return f?(s||(s=new vn),$F(n,e,t,r,i,s)):!1}function kl(n,e,t,r,i){return n===e?!0:n==null||e==null||!yn(n)&&!yn(e)?n!==n&&e!==e:RF(n,e,t,r,kl,i)}var jF=1,DF=2;function BF(n,e,t,r){var i=t.length,s=i,o=!r;if(n==null)return!s;for(n=Object(n);i--;){var a=t[i];if(o&&a[2]?a[1]!==n[a[0]]:!(a[0]in n))return!1}for(;++i<s;){a=t[i];var l=a[0],c=n[l],u=a[1];if(o&&a[2]){if(c===void 0&&!(l in n))return!1}else{var h=new vn;if(r)var f=r(c,u,l,n,e,h);if(!(f===void 0?kl(u,c,jF|DF,r,h):f))return!1}}return!0}function Ab(n){return n===n&&!Ze(n)}function zF(n){for(var e=Mo(n),t=e.length;t--;){var r=e[t],i=n[r];e[t]=[r,i,Ab(i)]}return e}function Ob(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function FF(n){var e=zF(n);return e.length==1&&e[0][2]?Ob(e[0][0],e[0][1]):function(t){return t===n||BF(t,n,e)}}function VF(n,e){return n!=null&&e in Object(n)}function Mb(n,e,t){e=S0(e,n);for(var r=-1,i=e.length,s=!1;++r<i;){var o=Al(e[r]);if(!(s=n!=null&&t(n,o)))break;n=n[o]}return s||++r!=i?s:(i=n==null?0:n.length,!!i&&mh(i)&&ph(o,i)&&(Ct(n)||is(n)))}function qF(n,e){return n!=null&&Mb(n,e,VF)}var GF=1,HF=2;function UF(n,e){return vh(n)&&Ab(e)?Ob(Al(n),e):function(t){var r=ZD(t,n);return r===void 0&&r===e?qF(t,n):kl(e,r,GF|HF)}}function WF(n){return function(e){return e==null?void 0:e[n]}}function XF(n){return function(e){return wh(e,n)}}function YF(n){return vh(n)?WF(Al(n)):XF(n)}function Ih(n){return typeof n=="function"?n:n==null?ts:typeof n=="object"?Ct(n)?UF(n[0],n[1]):FF(n):YF(n)}function KF(n,e,t,r){for(var i=-1,s=n==null?0:n.length;++i<s;){var o=n[i];e(r,o,t(o),n)}return r}function JF(n){return function(e,t,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[n?a:++i];if(t(s[l],l,s)===!1)break}return e}}var QF=JF();const Tb=QF;function ZF(n,e){return n&&Tb(n,e,Mo)}function eV(n,e){return function(t,r){if(t==null)return t;if(!vi(t))return n(t,r);for(var i=t.length,s=e?i:-1,o=Object(t);(e?s--:++s<i)&&r(o[s],s,o)!==!1;);return t}}var tV=eV(ZF);const _b=tV;function nV(n,e,t,r){return _b(n,function(i,s,o){e(r,i,t(i),o)}),r}function rV(n,e){return function(t,r){var i=Ct(t)?KF:nV,s=e?e():{};return i(t,n,Ih(r),s)}}var iV=function(){return mn.Date.now()};const Lh=iV;var sV="Expected a function",oV=Math.max,aV=Math.min;function Rh(n,e,t){var r,i,s,o,a,l,c=0,u=!1,h=!1,f=!0;if(typeof n!="function")throw new TypeError(sV);e=Po(e)||0,Ze(t)&&(u=!!t.leading,h="maxWait"in t,s=h?oV(Po(t.maxWait)||0,e):s,f="trailing"in t?!!t.trailing:f);function d(C){var S=r,E=i;return r=i=void 0,c=C,o=n.apply(E,S),o}function g(C){return c=C,a=setTimeout(m,e),u?d(C):o}function p(C){var S=C-l,E=C-c,A=e-S;return h?aV(A,s-E):A}function b(C){var S=C-l,E=C-c;return l===void 0||S>=e||S<0||h&&E>=s}function m(){var C=Lh();if(b(C))return y(C);a=setTimeout(m,p(C))}function y(C){return a=void 0,f&&r?d(C):(r=i=void 0,o)}function v(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function w(){return a===void 0?o:y(Lh())}function x(){var C=Lh(),S=b(C);if(r=arguments,i=this,l=C,S){if(a===void 0)return g(l);if(h)return clearTimeout(a),a=setTimeout(m,e),d(l)}return a===void 0&&(a=setTimeout(m,e)),o}return x.cancel=v,x.flush=w,x}var Nb=Object.prototype,lV=Nb.hasOwnProperty,cV=rs(function(n,e){n=Object(n);var t=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&xl(e[0],e[1],i)&&(r=1);++t<r;)for(var s=e[t],o=as(s),a=-1,l=o.length;++a<l;){var c=o[a],u=n[c];(u===void 0||ns(u,Nb[c])&&!lV.call(n,c))&&(n[c]=s[c])}return n});const uV=cV;function jh(n,e,t){(t!==void 0&&!ns(n[e],t)||t===void 0&&!(e in n))&&wl(n,e,t)}function $l(n){return yn(n)&&vi(n)}function Dh(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}function hV(n){return Eo(n,as(n))}function fV(n,e,t,r,i,s,o){var a=Dh(n,t),l=Dh(e,t),c=o.get(l);if(c){jh(n,t,c);return}var u=s?s(a,l,t+"",n,e,o):void 0,h=u===void 0;if(h){var f=Ct(l),d=!f&&ss(l),g=!f&&!d&&Sl(l);u=l,f||d||g?Ct(a)?u=a:$l(a)?u=l0(a):d?(h=!1,u=nb(l,!0)):g?(h=!1,u=gb(l,!0)):u=[]:Dn(l)||is(l)?(u=a,is(a)?u=hV(a):(!Ze(a)||fh(a))&&(u=pb(l))):h=!1}h&&(o.set(l,u),i(u,l,r,s,o),o.delete(l)),jh(n,t,u)}function Il(n,e,t,r,i){n!==e&&Tb(e,function(s,o){if(i||(i=new vn),Ze(s))fV(n,e,o,t,Il,r,i);else{var a=r?r(Dh(n,o),s,o+"",n,e,i):void 0;a===void 0&&(a=s),jh(n,o,a)}},as)}function kb(n,e,t,r,i,s){return Ze(n)&&Ze(e)&&(s.set(e,n),Il(n,e,void 0,kb,s),s.delete(e)),n}var dV=f0(function(n,e,t,r){Il(n,e,t,r)});const gV=dV;var pV=rs(function(n){return n.push(void 0,kb),a0(gV,void 0,n)});const $b=pV;function Ib(n,e,t){for(var r=-1,i=n==null?0:n.length;++r<i;)if(t(e,n[r]))return!0;return!1}var mV=200;function yV(n,e,t,r){var i=-1,s=c0,o=!0,a=n.length,l=[],c=e.length;if(!a)return l;t&&(e=So(e,Ao(t))),r?(s=Ib,o=!1):e.length>=mV&&(s=Nh,o=!1,e=new hs(e));e:for(;++i<a;){var u=n[i],h=t==null?u:t(u);if(u=r||u!==0?u:0,o&&h===h){for(var f=c;f--;)if(e[f]===h)continue e;l.push(u)}else s(e,h,r)||l.push(u)}return l}var vV=rs(function(n,e){return $l(n)?yV(n,Ol(e,1,$l,!0)):[]});const bV=vV;function wV(n,e){var t=-1,r=vi(n)?Array(n.length):[];return _b(n,function(i,s,o){r[++t]=e(i,s,o)}),r}var xV=Object.prototype,CV=xV.hasOwnProperty,SV=rV(function(n,e,t){CV.call(n,t)?n[t].push(e):wl(n,t,[e])});const Lb=SV;function PV(n,e){return n>e}var EV=Object.prototype,AV=EV.hasOwnProperty;function OV(n,e){return n!=null&&AV.call(n,e)}function Ll(n,e){return n!=null&&Mb(n,e,OV)}var MV="[object Map]",TV="[object Set]",_V=Object.prototype,NV=_V.hasOwnProperty;function Rb(n){if(n==null)return!0;if(vi(n)&&(Ct(n)||typeof n=="string"||typeof n.splice=="function"||ss(n)||Sl(n)||is(n)))return!n.length;var e=us(n);if(e==MV||e==TV)return!n.size;if(Cl(n))return!C0(n).length;for(var t in n)if(NV.call(n,t))return!1;return!0}function Zn(n,e){return kl(n,e)}var kV="[object Number]";function jb(n){return typeof n=="number"||yn(n)&&Or(n)==kV}var $V=$0("toLowerCase");const IV=$V;function LV(n,e,t){for(var r=-1,i=n.length;++r<i;){var s=n[r],o=e(s);if(o!=null&&(a===void 0?o===o&&!jn(o):t(o,a)))var a=o,l=s}return l}function RV(n){return n&&n.length?LV(n,ts,PV):void 0}var jV=f0(function(n,e,t){Il(n,e,t)});const Re=jV;function DV(n,e){var t=n.length;for(n.sort(e);t--;)n[t]=n[t].value;return n}function BV(n,e){if(n!==e){var t=n!==void 0,r=n===null,i=n===n,s=jn(n),o=e!==void 0,a=e===null,l=e===e,c=jn(e);if(!a&&!c&&!s&&n>e||s&&o&&l&&!a&&!c||r&&o&&l||!t&&l||!i)return 1;if(!r&&!s&&!c&&n<e||c&&t&&i&&!r&&!s||a&&t&&i||!o&&i||!l)return-1}return 0}function zV(n,e,t){for(var r=-1,i=n.criteria,s=e.criteria,o=i.length,a=t.length;++r<o;){var l=BV(i[r],s[r]);if(l){if(r>=a)return l;var c=t[r];return l*(c=="desc"?-1:1)}}return n.index-e.index}function FV(n,e,t){e.length?e=So(e,function(s){return Ct(s)?function(o){return wh(o,s.length===1?s[0]:s)}:s}):e=[ts];var r=-1;e=So(e,Ao(Ih));var i=wV(n,function(s,o,a){var l=So(e,function(c){return c(s)});return{criteria:l,index:++r,value:s}});return DV(i,function(s,o){return zV(s,o,t)})}var VV=rs(function(n,e){if(n==null)return[];var t=e.length;return t>1&&xl(n,e[0],e[1])?e=[]:t>2&&xl(e[0],e[1],e[2])&&(e=[e[0]]),FV(n,Ol(e,1),[])});const Db=VV;var qV=4294967295,GV=qV-1,HV=Math.floor,UV=Math.min;function Bb(n,e,t,r){var i=0,s=n==null?0:n.length;if(s===0)return 0;e=t(e);for(var o=e!==e,a=e===null,l=jn(e),c=e===void 0;i<s;){var u=HV((i+s)/2),h=t(n[u]),f=h!==void 0,d=h===null,g=h===h,p=jn(h);if(o)var b=r||g;else c?b=g&&(r||f):a?b=g&&f&&(r||!d):l?b=g&&f&&!d&&(r||!p):d||p?b=!1:b=r?h<=e:h<e;b?i=u+1:s=u}return UV(s,GV)}var WV=4294967295,XV=WV>>>1;function YV(n,e,t){var r=0,i=n==null?r:n.length;if(typeof e=="number"&&e===e&&i<=XV){for(;r<i;){var s=r+i>>>1,o=n[s];o!==null&&!jn(o)&&(t?o<=e:o<e)?r=s+1:i=s}return i}return Bb(n,e,ts,t)}function KV(n,e){return YV(n,e)}function JV(n,e,t){return Bb(n,e,Ih(t))}var QV=J0(function(n,e,t){return n+(t?" ":"")+Ml(e)});const ZV=QV;var e4="Expected a function";function t4(n,e,t){var r=!0,i=!0;if(typeof n!="function")throw new TypeError(e4);return Ze(t)&&(r="leading"in t?!!t.leading:r,i="trailing"in t?!!t.trailing:i),Rh(n,e,{leading:r,maxWait:e,trailing:i})}var n4=1/0,r4=cs&&1/kh(new cs([,-0]))[1]==n4?function(n){return new cs(n)}:nj;const i4=r4;var s4=200;function zb(n,e,t){var r=-1,i=c0,s=n.length,o=!0,a=[],l=a;if(t)o=!1,i=Ib;else if(s>=s4){var c=e?null:i4(n);if(c)return kh(c);o=!1,i=Nh,l=new hs}else l=e?[]:a;e:for(;++r<s;){var u=n[r],h=e?e(u):u;if(u=t||u!==0?u:0,o&&h===h){for(var f=l.length;f--;)if(l[f]===h)continue e;e&&l.push(h),a.push(u)}else i(l,h,t)||(l!==a&&l.push(h),a.push(u))}return a}var o4=rs(function(n){return zb(Ol(n,1,$l,!0))});const Fb=o4;function Vb(n){return n&&n.length?zb(n):[]}function qb(n,e,t){if(t)switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2]);case 4:return n.call(e,t[0],t[1],t[2],t[3]);case 5:return n.call(e,t[0],t[1],t[2],t[3],t[4]);case 6:return n.call(e,t[0],t[1],t[2],t[3],t[4],t[5]);default:return n.apply(e,t)}return n.call(e)}function K(n,e,...t){return qb(n,e,t)}function a4(n){return typeof n=="object"&&n.then&&typeof n.then=="function"}function Gb(n){return n!=null&&(n instanceof Promise||a4(n))}function Hb(...n){const e=[];if(n.forEach(r=>{Array.isArray(r)?e.push(...r):e.push(r)}),e.some(r=>Gb(r))){const r=e.map(i=>Gb(i)?i:Promise.resolve(i!==!1));return Promise.all(r).then(i=>i.reduce((s,o)=>o!==!1&&s,!0))}return e.every(r=>r!==!1)}function Bh(n,e){const t=[];for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1],o=Array.isArray(e)?e:[e],a=qb(i,s,o);t.push(a)}return Hb(t)}class l4{constructor(){this.listeners={}}on(e,t,r){return t==null?this:(this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t,r),this)}once(e,t,r){const i=(...s)=>(this.off(e,i),Bh([t,r],s));return this.on(e,i,this)}off(e,t,r){if(!(e||t||r))return this.listeners={},this;const i=this.listeners;return(e?[e]:Object.keys(i)).forEach(o=>{const a=i[o];if(a){if(!(t||r)){delete i[o];return}for(let l=a.length-2;l>=0;l-=2)t&&a[l]!==t||r&&a[l+1]!==r||a.splice(l,2)}}),this}trigger(e,...t){let r=!0;if(e!=="*"){const s=this.listeners[e];s!=null&&(r=Bh([...s],t))}const i=this.listeners["*"];return i!=null?Hb([r,Bh([...i],[e,...t])]):r}emit(e,...t){return this.trigger(e,...t)}}function c4(n,...e){e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(r=>{r!=="constructor"&&Object.defineProperty(n.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r))})})}const u4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])};function h4(n,e){u4(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}let f4=class{};const d4=/^\s*class\s+/.test(`${f4}`)||/^\s*class\s*\{/.test(`${class{}}`);function zh(n,e){let t;return d4?t=class extends e{}:(t=function(){return e.apply(this,arguments)},h4(t,e)),Object.defineProperty(t,"name",{value:n}),t}function Ub(n){return n==="__proto__"}function Fh(n,e,t="/"){let r;const i=Array.isArray(e)?e:e.split(t);if(i.length)for(r=n;i.length;){const s=i.shift();if(Object(r)===r&&s&&s in r)r=r[s];else return}return r}function fs(n,e,t,r="/"){const i=Array.isArray(e)?e:e.split(r),s=i.pop();if(s&&!Ub(s)){let o=n;i.forEach(a=>{Ub(a)||(o[a]==null&&(o[a]={}),o=o[a])}),o[s]=t}return n}function Wb(n,e,t="/"){const r=Array.isArray(e)?e.slice():e.split(t),i=r.pop();if(i)if(r.length>0){const s=Fh(n,r);s&&delete s[i]}else delete n[i];return n}var g4=function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};class mt extends l4{dispose(){this.off()}}g4([pn.dispose()],mt.prototype,"dispose",null),function(n){n.dispose=pn.dispose}(mt||(mt={})),c4(mt,pn);const Xb=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},Yb=Xb(n=>n.replace(/\B([A-Z])/g,"-$1").toLowerCase()),Vh=Xb(n=>ZV(Tl(n)).replace(/ /g,""));function qh(n){let e=2166136261,t=!1,r=n;for(let i=0,s=r.length;i<s;i+=1){let o=r.charCodeAt(i);o>127&&!t&&(r=unescape(encodeURIComponent(r)),o=r.charCodeAt(i),t=!0),e^=o,e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24)}return e>>>0}function Rl(){let n="";const e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";for(let t=0,r=e.length;t<r;t+=1){const i=e[t],s=Math.random()*16|0,o=i==="x"?s:i==="y"?s&3|8:i;n+=o.toString(16)}return n}function p4(n,e,t){const r=Math.min(2,Math.floor(n.length*.34));let i=Math.floor(n.length*.4)+1,s,o=!1;const a=n.toLowerCase();for(const l of e){const c=t(l);if(c!==void 0&&Math.abs(c.length-a.length)<=r){const u=c.toLowerCase();if(u===a){if(c===n)continue;return l}if(o||c.length<3)continue;const h=m4(a,u,i-1);if(h===void 0)continue;h<3?(o=!0,s=l):(i=h,s=l)}}return s}function m4(n,e,t){let r=new Array(e.length+1),i=new Array(e.length+1);const s=t+1;for(let a=0;a<=e.length;a+=1)r[a]=a;for(let a=1;a<=n.length;a+=1){const l=n.charCodeAt(a-1),c=a>t?a-t:1,u=e.length>t+a?t+a:e.length;i[0]=a;let h=a;for(let d=1;d<c;d+=1)i[d]=s;for(let d=c;d<=u;d+=1){const g=l===e.charCodeAt(d-1)?r[d-1]:Math.min(r[d]+1,i[d-1]+1,r[d-1]+2);i[d]=g,h=Math.min(h,g)}for(let d=u+1;d<=e.length;d+=1)i[d]=s;if(h>t)return;const f=r;r=i,i=f}const o=r[e.length];return o>t?void 0:o}function er(n){return typeof n=="string"&&n.slice(-1)==="%"}function Vt(n,e){if(n==null)return 0;let t;if(typeof n=="string"){if(t=parseFloat(n),er(n)&&(t/=100,Number.isFinite(t)))return t*e}else t=n;return Number.isFinite(t)?t>0&&t<1?t*e:t:0}function Bn(n){if(typeof n=="object"){let t=0,r=0,i=0,s=0;return n.vertical!=null&&Number.isFinite(n.vertical)&&(r=s=n.vertical),n.horizontal!=null&&Number.isFinite(n.horizontal)&&(i=t=n.horizontal),n.left!=null&&Number.isFinite(n.left)&&(t=n.left),n.top!=null&&Number.isFinite(n.top)&&(r=n.top),n.right!=null&&Number.isFinite(n.right)&&(i=n.right),n.bottom!=null&&Number.isFinite(n.bottom)&&(s=n.bottom),{top:r,right:i,bottom:s,left:t}}let e=0;return n!=null&&Number.isFinite(n)&&(e=n),{top:e,right:e,bottom:e,left:e}}let Gh=!1,Kb=!1,Jb=!1,Qb=!1,Zb=!1,e1=!1,t1=!1,n1=!1,r1=!1,i1=!1,s1=!1,o1=!1,a1=!1,l1=!1,c1=!1,u1=!1;if(typeof navigator=="object"){const n=navigator.userAgent;Gh=n.indexOf("Macintosh")>=0,Kb=!!n.match(/(iPad|iPhone|iPod)/g),Jb=n.indexOf("Windows")>=0,Qb=n.indexOf("MSIE")>=0,Zb=!!n.match(/Trident\/7\./),e1=!!n.match(/Edge\//),t1=n.indexOf("Mozilla/")>=0&&n.indexOf("MSIE")<0&&n.indexOf("Edge/")<0,r1=n.indexOf("Chrome/")>=0&&n.indexOf("Edge/")<0,i1=n.indexOf("Opera/")>=0||n.indexOf("OPR/")>=0,s1=n.indexOf("Firefox/")>=0,o1=n.indexOf("AppleWebKit/")>=0&&n.indexOf("Chrome/")<0&&n.indexOf("Edge/")<0,typeof document=="object"&&(u1=!document.createElementNS||`${document.createElementNS("http://www.w3.org/2000/svg","foreignObject")}`!="[object SVGForeignObjectElement]"||n.indexOf("Opera/")>=0)}if(typeof window=="object"&&(n1=window.chrome!=null&&window.chrome.app!=null&&window.chrome.app.runtime!=null,l1=window.PointerEvent!=null&&!Gh),typeof document=="object"){a1="ontouchstart"in document.documentElement;try{const n=Object.defineProperty({},"passive",{get(){c1=!0}}),e=document.createElement("div");e.addEventListener&&e.addEventListener("click",()=>{},n)}catch(n){}}var en;(function(n){n.IS_MAC=Gh,n.IS_IOS=Kb,n.IS_WINDOWS=Jb,n.IS_IE=Qb,n.IS_IE11=Zb,n.IS_EDGE=e1,n.IS_NETSCAPE=t1,n.IS_CHROME_APP=n1,n.IS_CHROME=r1,n.IS_OPERA=i1,n.IS_FIREFOX=s1,n.IS_SAFARI=o1,n.SUPPORT_TOUCH=a1,n.SUPPORT_POINTER=l1,n.SUPPORT_PASSIVE=c1,n.NO_FOREIGNOBJECT=u1,n.SUPPORT_FOREIGNOBJECT=!n.NO_FOREIGNOBJECT})(en||(en={})),function(n){function e(){const s=window.module;return s!=null&&s.hot!=null&&s.hot.status!=null?s.hot.status():"unkonwn"}n.getHMRStatus=e;function t(){return e()==="apply"}n.isApplyingHMR=t;const r={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};function i(s){const o=document.createElement(r[s]||"div"),a=`on${s}`;let l=a in o;return l||(o.setAttribute(a,"return;"),l=typeof o[a]=="function"),l}n.isEventSupported=i}(en||(en={}));const Hh=/[\t\r\n\f]/g,Uh=/\S+/g,ds=n=>` ${n} `;function gs(n){return n&&n.getAttribute&&n.getAttribute("class")||""}function ps(n,e){if(n==null||e==null)return!1;const t=ds(gs(n)),r=ds(e);return n.nodeType===1?t.replace(Hh," ").includes(r):!1}function J(n,e){if(!(n==null||e==null)){if(typeof e=="function")return J(n,e(gs(n)));if(typeof e=="string"&&n.nodeType===1){const t=e.match(Uh)||[],r=ds(gs(n)).replace(Hh," ");let i=t.reduce((s,o)=>s.indexOf(ds(o))<0?`${s}${o} `:s,r);i=i.trim(),r!==i&&n.setAttribute("class",i)}}}function yt(n,e){if(n!=null){if(typeof e=="function")return yt(n,e(gs(n)));if((!e||typeof e=="string")&&n.nodeType===1){const t=(e||"").match(Uh)||[],r=ds(gs(n)).replace(Hh," ");let i=t.reduce((s,o)=>{const a=ds(o);return s.indexOf(a)>-1?s.replace(a," "):s},r);i=e?i.trim():"",r!==i&&n.setAttribute("class",i)}}}function h1(n,e,t){if(!(n==null||e==null)){if(t!=null&&typeof e=="string"){t?J(n,e):yt(n,e);return}if(typeof e=="function")return h1(n,e(gs(n),t),t);typeof e=="string"&&(e.match(Uh)||[]).forEach(i=>{ps(n,i)?yt(n,i):J(n,i)})}}let f1=0;function y4(){return f1+=1,`v${f1}`}function Wh(n){return(n.id==null||n.id==="")&&(n.id=y4()),n.id}function Mr(n){return n==null?!1:typeof n.getScreenCTM=="function"&&n instanceof SVGElement}const ct={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},d1="1.1";function g1(n,e=document){return e.createElement(n)}function Xh(n,e=ct.xhtml,t=document){return t.createElementNS(e,n)}function tr(n,e=document){return Xh(n,ct.svg,e)}function jl(n){if(n){const t=`<svg xmlns="${ct.svg}" xmlns:xlink="${ct.xlink}" version="${d1}">${n}</svg>`,{documentElement:r}=v4(t,{async:!1});return r}const e=document.createElementNS(ct.svg,"svg");return e.setAttributeNS(ct.xmlns,"xmlns:xlink",ct.xlink),e.setAttribute("version",d1),e}function v4(n,e={}){let t;try{const r=new DOMParser;if(e.async!=null){const i=r;i.async=e.async}t=r.parseFromString(n,e.mimeType||"text/xml")}catch(r){t=void 0}if(!t||t.getElementsByTagName("parsererror").length)throw new Error(`Invalid XML: ${n}`);return t}function b4(n,e=!0){const t=n.nodeName;return e?t.toLowerCase():t.toUpperCase()}function Yh(n){let e=0,t=n.previousSibling;for(;t;)t.nodeType===1&&(e+=1),t=t.previousSibling;return e}function w4(n,e){return n.querySelectorAll(e)}function x4(n,e){return n.querySelector(e)}function p1(n,e,t){const r=n.ownerSVGElement;let i=n.parentNode;for(;i&&i!==t&&i!==r;){if(ps(i,e))return i;i=i.parentNode}return null}function m1(n,e){const t=e&&e.parentNode;return n===t||!!(t&&t.nodeType===1&&n.compareDocumentPosition(t)&16)}function nr(n){n&&(Array.isArray(n)?n:[n]).forEach(t=>{t.parentNode&&t.parentNode.removeChild(t)})}function $o(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function zn(n,e){(Array.isArray(e)?e:[e]).forEach(r=>{r!=null&&n.appendChild(r)})}function y1(n,e){const t=n.firstChild;return t?Io(t,e):zn(n,e)}function Io(n,e){const t=n.parentNode;t&&(Array.isArray(e)?e:[e]).forEach(i=>{i!=null&&t.insertBefore(i,n)})}function C4(n,e){const t=n.parentNode;t&&(Array.isArray(e)?e:[e]).forEach(i=>{i!=null&&t.insertBefore(i,n.nextSibling)})}function Tr(n,e){e!=null&&e.appendChild(n)}function S4(n){return!!n&&n.nodeType===1}function v1(n){try{return n instanceof HTMLElement}catch(e){return typeof n=="object"&&n.nodeType===1&&typeof n.style=="object"&&typeof n.ownerDocument=="object"}}function P4(n,e){const t=[];let r=n.firstChild;for(;r;r=r.nextSibling)r.nodeType===1&&(!e||ps(r,e))&&t.push(r);return t}const b1=["viewBox","attributeName","attributeType","repeatCount","textLength","lengthAdjust","gradientUnits"];function E4(n,e){return n.getAttribute(e)}function Kh(n,e){const t=x1(e);t.ns?n.hasAttributeNS(t.ns,t.local)&&n.removeAttributeNS(t.ns,t.local):n.hasAttribute(e)&&n.removeAttribute(e)}function Jh(n,e,t){if(t==null)return Kh(n,e);const r=x1(e);r.ns&&typeof t=="string"?n.setAttributeNS(r.ns,e,t):e==="id"?n.id=`${t}`:n.setAttribute(e,`${t}`)}function w1(n,e){Object.keys(e).forEach(t=>{Jh(n,t,e[t])})}function fe(n,e,t){if(e==null){const r=n.attributes,i={};for(let s=0;s<r.length;s+=1)i[r[s].name]=r[s].value;return i}if(typeof e=="string"&&t===void 0)return n.getAttribute(e);typeof e=="object"?w1(n,e):Jh(n,e,t)}function x1(n){if(n.indexOf(":")!==-1){const e=n.split(":");return{ns:ct[e[0]],local:e[1]}}return{ns:null,local:n}}function Lo(n){const e={};return Object.keys(n).forEach(t=>{const r=b1.includes(t)?t:Yb(t);e[r]=n[t]}),e}function Dl(n){const e={};return n.split(";").forEach(r=>{const i=r.trim();if(i){const s=i.split("=");s.length&&(e[s[0].trim()]=s[1]?s[1].trim():"")}}),e}function Qh(n,e){return Object.keys(e).forEach(t=>{if(t==="class")n[t]=n[t]?`${n[t]} ${e[t]}`:e[t];else if(t==="style"){const r=typeof n[t]=="object",i=typeof e[t]=="object";let s,o;r&&i?(s=n[t],o=e[t]):r?(s=n[t],o=Dl(e[t])):i?(s=Dl(n[t]),o=e[t]):(s=Dl(n[t]),o=Dl(e[t])),n[t]=Qh(s,o)}else n[t]=e[t]}),n}function A4(n,e,t={}){const r=t.offset||0,i=[],s=[];let o,a,l=null;for(let c=0;c<n.length;c+=1){o=s[c]=n[c];for(let u=0,h=e.length;u<h;u+=1){const f=e[u],d=f.start+r,g=f.end+r;c>=d&&c<g&&(typeof o=="string"?o=s[c]={t:n[c],attrs:f.attrs}:o.attrs=Qh(Qh({},o.attrs),f.attrs),t.includeAnnotationIndices&&(o.annotations==null&&(o.annotations=[]),o.annotations.push(u)))}a=s[c-1],a?Ze(o)&&Ze(a)?(l=l,JSON.stringify(o.attrs)===JSON.stringify(a.attrs)?l.t+=o.t:(i.push(l),l=o)):Ze(o)||Ze(a)?(l=l,i.push(l),l=o):l=(l||"")+o:l=o}return l!=null&&i.push(l),i}function O4(n){return n.replace(/ /g," ")}var C1;(function(n){function e(c){const u="data:";return c.substr(0,u.length)===u}n.isDataUrl=e;function t(c,u){if(!c||e(c)){setTimeout(()=>u(null,c));return}const h=()=>{u(new Error(`Failed to load image: ${c}`))},f=window.FileReader?g=>{if(g.status===200){const p=new FileReader;p.onload=b=>{const m=b.target.result;u(null,m)},p.onerror=h,p.readAsDataURL(g.response)}else h()}:g=>{const p=b=>{const y=[];for(let v=0;v<b.length;v+=32768)y.push(String.fromCharCode.apply(null,b.subarray(v,v+32768)));return y.join("")};if(g.status===200){let b=c.split(".").pop()||"png";b==="svg"&&(b="svg+xml");const m=`data:image/${b};base64,`,y=new Uint8Array(g.response),v=m+btoa(p(y));u(null,v)}else h()},d=new XMLHttpRequest;d.responseType=window.FileReader?"blob":"arraybuffer",d.open("GET",c,!0),d.addEventListener("error",h),d.addEventListener("load",()=>f(d)),d.send()}n.imageToDataUri=t;function r(c){let u=c.replace(/\s/g,"");u=decodeURIComponent(u);const h=u.indexOf(","),f=u.slice(0,h),d=f.split(":")[1].split(";")[0],g=u.slice(h+1);let p;f.indexOf("base64")>=0?p=atob(g):p=unescape(encodeURIComponent(g));const b=new Uint8Array(p.length);for(let m=0;m<p.length;m+=1)b[m]=p.charCodeAt(m);return new Blob([b],{type:d})}n.dataUriToBlob=r;function i(c,u){const h=window.navigator.msSaveBlob;if(h)h(c,u);else{const f=window.URL.createObjectURL(c),d=document.createElement("a");d.href=f,d.download=u,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(f)}}n.downloadBlob=i;function s(c,u){const h=r(c);i(h,u)}n.downloadDataUri=s;function o(c){const u=c.match(/<svg[^>]*viewBox\s*=\s*(["']?)(.+?)\1[^>]*>/i);return u&&u[2]?u[2].replace(/\s+/," ").split(" "):null}function a(c){const u=parseFloat(c);return Number.isNaN(u)?null:u}function l(c,u={}){let h=null;const f=v=>(h==null&&(h=o(c)),h!=null?a(h[v]):null),d=v=>{const w=c.match(v);return w&&w[2]?a(w[2]):null};let g=u.width;if(g==null&&(g=d(/<svg[^>]*width\s*=\s*(["']?)(.+?)\1[^>]*>/i)),g==null&&(g=f(2)),g==null)throw new Error("Can not parse width from svg string");let p=u.height;if(p==null&&(p=d(/<svg[^>]*height\s*=\s*(["']?)(.+?)\1[^>]*>/i)),p==null&&(p=f(3)),p==null)throw new Error("Can not parse height from svg string");return`data:image/svg+xml,${encodeURIComponent(c).replace(/'/g,"%27").replace(/"/g,"%22")}`}n.svgToDataUrl=l})(C1||(C1={}));let xi;const M4={px(n){return n},mm(n){return xi*n},cm(n){return xi*n*10},in(n){return xi*n*25.4},pt(n){return xi*(25.4*n/72)},pc(n){return xi*(25.4*n/6)}};var S1;(function(n){function e(r,i,s){const o=document.createElement("div"),a=o.style;a.display="inline-block",a.position="absolute",a.left="-15000px",a.top="-15000px",a.width=r+(s||"px"),a.height=i+(s||"px"),document.body.appendChild(o);const l=o.getBoundingClientRect(),c={width:l.width||0,height:l.height||0};return document.body.removeChild(o),c}n.measure=e;function t(r,i){xi==null&&(xi=e("1","1","mm").width);const s=i?M4[i]:null;return s?s(r):r}n.toPx=t})(S1||(S1={}));const T4=/-(.)/g;function _4(n){return n.replace(T4,(e,t)=>t.toUpperCase())}const Zh={},P1=["webkit","ms","moz","o"],E1=document?document.createElement("div").style:{};function N4(n){for(let e=0;e<P1.length;e+=1){const t=P1[e]+n;if(t in E1)return t}return null}function k4(n){const e=_4(n);if(Zh[e]==null){const t=e.charAt(0).toUpperCase()+e.slice(1);Zh[e]=e in E1?e:N4(t)}return Zh[e]}function A1(n,e){const t=n.ownerDocument&&n.ownerDocument.defaultView&&n.ownerDocument.defaultView.opener?n.ownerDocument.defaultView.getComputedStyle(n,null):window.getComputedStyle(n,null);return t&&e?t.getPropertyValue(e)||t[e]:t}const $4={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function I4(n){return/^--/.test(n)}function Bl(n,e,t){const r=window.getComputedStyle(n,null);return t?r.getPropertyValue(e)||void 0:r[e]||n.style[e]}function zl(n,e){return parseInt(Bl(n,e),10)||0}function L4(n,e){return!$4[n]&&typeof e=="number"?`${e}px`:e}function ye(n,e,t){if(typeof e=="string"){const r=I4(e);if(r||(e=k4(e)),t===void 0)return Bl(n,e,r);r||(t=L4(e,t));const i=n.style;r?i.setProperty(e,t):i[e]=t;return}for(const r in e)ye(n,r,e[r])}const Fl=new WeakMap;function O1(n,e){const t=Tl(e),r=Fl.get(n);if(r)return r[t]}function R4(n,e,t){const r=Tl(e),i=Fl.get(n);i?i[r]=t:Fl.set(n,{[r]:t})}function Ci(n,e,t){if(!e){const r={};return Object.keys(Fl).forEach(i=>{r[i]=O1(n,i)}),r}if(typeof e=="string"){if(t===void 0)return O1(n,e);R4(n,e,t);return}for(const r in e)Ci(n,r,e[r])}const j4={class:"className",contenteditable:"contentEditable",for:"htmlFor",readonly:"readOnly",maxlength:"maxLength",tabindex:"tabIndex",colspan:"colSpan",rowspan:"rowSpan",usemap:"useMap"};function ef(n,e,t){if(e){if(typeof e=="string"){if(e=j4[e]||e,arguments.length<3)return n[e];n[e]=t;return}for(const r in e)ef(n,r,e[r])}}class Z{get[Symbol.toStringTag](){return Z.toStringTag}get type(){return this.node.nodeName}get id(){return this.node.id}set id(e){this.node.id=e}constructor(e,t,r){if(!e)throw new TypeError("Invalid element to create vector");let i;if(Z.isVector(e))i=e.node;else if(typeof e=="string")if(e.toLowerCase()==="svg")i=jl();else if(e[0]==="<"){const s=jl(e);i=document.importNode(s.firstChild,!0)}else i=document.createElementNS(ct.svg,e);else i=e;this.node=i,t&&this.setAttributes(t),r&&this.append(r)}transform(e,t){return e==null?ys(this.node):(ys(this.node,e,t),this)}translate(e,t=0,r={}){return e==null?j1(this.node):(j1(this.node,e,t,r),this)}rotate(e,t,r,i={}){return e==null?rf(this.node):(rf(this.node,e,t,r,i),this)}scale(e,t){return e==null?sf(this.node):(sf(this.node,e,t),this)}getTransformToElement(e){const t=Z.toNode(e);return Bo(this.node,t)}removeAttribute(e){return Kh(this.node,e),this}getAttribute(e){return E4(this.node,e)}setAttribute(e,t){return Jh(this.node,e,t),this}setAttributes(e){return w1(this.node,e),this}attr(e,t){return e==null?fe(this.node):typeof e=="string"&&t===void 0?fe(this.node,e):(typeof e=="object"?fe(this.node,e):fe(this.node,e,t),this)}svg(){return this.node instanceof SVGSVGElement?this:Z.create(this.node.ownerSVGElement)}defs(){const e=this.svg()||this,t=e.node.getElementsByTagName("defs")[0];return t?Z.create(t):Z.create("defs").appendTo(e)}text(e,t={}){return _1(this.node,e,t),this}tagName(){return b4(this.node)}clone(){return Z.create(this.node.cloneNode(!0))}remove(){return nr(this.node),this}empty(){return $o(this.node),this}append(e){return zn(this.node,Z.toNodes(e)),this}appendTo(e){return Tr(this.node,Z.isVector(e)?e.node:e),this}prepend(e){return y1(this.node,Z.toNodes(e)),this}before(e){return Io(this.node,Z.toNodes(e)),this}replace(e){return this.node.parentNode&&this.node.parentNode.replaceChild(Z.toNode(e),this.node),Z.create(e)}first(){return this.node.firstChild?Z.create(this.node.firstChild):null}last(){return this.node.lastChild?Z.create(this.node.lastChild):null}get(e){const t=this.node.childNodes[e];return t?Z.create(t):null}indexOf(e){return Array.prototype.slice.call(this.node.childNodes).indexOf(Z.toNode(e))}find(e){const t=[],r=w4(this.node,e);if(r)for(let i=0,s=r.length;i<s;i+=1)t.push(Z.create(r[i]));return t}findOne(e){const t=x4(this.node,e);return t?Z.create(t):null}findParentByClass(e,t){const r=p1(this.node,e,t);return r?Z.create(r):null}matches(e){const t=this.node;this.node.matches;const r=t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector||null;return r&&r.call(t,e)}contains(e){return m1(this.node,Z.isVector(e)?e.node:e)}wrap(e){const t=Z.create(e),r=this.node.parentNode;return r!=null&&r.insertBefore(t.node,this.node),t.append(this)}parent(e){let t=this;if(t.node.parentNode==null)return null;if(t=Z.create(t.node.parentNode),e==null)return t;do if(typeof e=="string"?t.matches(e):t instanceof e)return t;while(t=Z.create(t.node.parentNode));return t}children(){const e=this.node.childNodes,t=[];for(let r=0;r<e.length;r+=1)e[r].nodeType===1&&t.push(Z.create(e[r]));return t}eachChild(e,t){const r=this.children();for(let i=0,s=r.length;i<s;i+=1)e.call(r[i],r[i],i,r),t&&r[i].eachChild(e,t);return this}index(){return Yh(this.node)}hasClass(e){return ps(this.node,e)}addClass(e){return J(this.node,e),this}removeClass(e){return yt(this.node,e),this}toggleClass(e,t){return h1(this.node,e,t),this}toLocalPoint(e,t){return rq(this.node,e,t)}sample(e=1){return this.node instanceof SVGPathElement?F4(this.node,e):[]}toPath(){return Z.create(X4(this.node))}toPathData(){return L1(this.node)}}(function(n){n.toStringTag=`X6.${n.name}`;function e(o){if(o==null)return!1;if(o instanceof n)return!0;const a=o[Symbol.toStringTag],l=o;return(a==null||a===n.toStringTag)&&l.node instanceof SVGElement&&typeof l.sample=="function"&&typeof l.toPath=="function"}n.isVector=e;function t(o,a,l){return new n(o,a,l)}n.create=t;function r(o){if(o[0]==="<"){const a=jl(o),l=[];for(let c=0,u=a.childNodes.length;c<u;c+=1){const h=a.childNodes[c];l.push(t(document.importNode(h,!0)))}return l}return[t(o)]}n.createVectors=r;function i(o){return e(o)?o.node:o}n.toNode=i;function s(o){return Array.isArray(o)?o.map(a=>i(a)):[i(o)]}n.toNodes=s})(Z||(Z={}));const M1=document.createElement("canvas").getContext("2d");function D4(n,e){const t=Z.create(e),r=Z.create("textPath"),i=n.d;if(i&&n["xlink:href"]===void 0){const s=Z.create("path").attr("d",i).appendTo(t.defs());r.attr("xlink:href",`#${s.id}`)}return typeof n=="object"&&r.attr(n),r.node}function B4(n,e,t){const r=t.eol,i=t.baseSize,s=t.lineHeight;let o=0,a;const l={},c=e.length-1;for(let u=0;u<=c;u+=1){let h=e[u],f=null;if(typeof h=="object"){const d=h.attrs,g=Z.create("tspan",d);a=g.node;let p=h.t;r&&u===c&&(p+=r),a.textContent=p;const b=d.class;b&&g.addClass(b),t.includeAnnotationIndices&&g.attr("annotations",h.annotations.join(",")),f=parseFloat(d["font-size"]),f===void 0&&(f=i),f&&f>o&&(o=f)}else r&&u===c&&(h+=r),a=document.createTextNode(h||" "),i&&i>o&&(o=i);n.appendChild(a)}return o&&(l.maxFontSize=o),s?l.lineHeight=s:o&&(l.lineHeight=o*1.2),l}const T1=/em$/;function Vl(n,e){const t=parseFloat(n);return T1.test(n)?t*e:t}function z4(n,e,t,r){if(!Array.isArray(e))return 0;const i=e.length;if(!i)return 0;let s=e[0];const o=Vl(s.maxFontSize,t)||t;let a=0;const l=Vl(r,t);for(let h=1;h<i;h+=1){s=e[h];const f=Vl(s.lineHeight,t)||l;a+=f}const c=Vl(s.maxFontSize,t)||t;let u;switch(n){case"middle":u=o/2-.15*c-a/2;break;case"bottom":u=-(.25*c)-a;break;case"top":default:u=.8*o;break}return u}function _1(n,e,t={}){e=O4(e);const r=t.eol;let i=t.textPath;const s=t.textVerticalAnchor,o=s==="middle"||s==="bottom"||s==="top";let a=t.x;a===void 0&&(a=n.getAttribute("x")||0);const l=t.includeAnnotationIndices;let c=t.annotations;c&&!Array.isArray(c)&&(c=[c]);const u=t.lineHeight,h=u==="auto",f=h?"1.5em":u||"1em";let d=!0;const g=n.childNodes;if(g.length===1){const A=g[0];A&&A.tagName.toUpperCase()==="TITLE"&&(d=!1)}d&&$o(n),fe(n,{"xml:space":"preserve",display:e||t.displayEmpty?null:"none"});const p=fe(n,"font-size");let b=parseFloat(p);b||(b=16,(o||c)&&!p&&fe(n,"font-size",`${b}`));let m;i?(typeof i=="string"&&(i={d:i}),m=D4(i,n)):m=document.createDocumentFragment();let y,v=0,w;const x=e.split(`
`),C=[],S=x.length-1;for(let A=0;A<=S;A+=1){y=f;let O="v-line";const T=tr("tspan");let k,B=x[A];if(B)if(c){const W=A4(B,c,{offset:-v,includeAnnotationIndices:l});k=B4(T,W,{eol:A!==S&&r,baseSize:b,lineHeight:h?null:f,includeAnnotationIndices:l});const M=k.lineHeight;M&&h&&A!==0&&(y=M),A===0&&(w=k.maxFontSize*.8)}else r&&A!==S&&(B+=r),T.textContent=B;else{T.textContent="-",O+=" v-empty-line";const W=T.style;W.fillOpacity=0,W.strokeOpacity=0,c&&(k={})}k&&C.push(k),A>0&&T.setAttribute("dy",y),(A>0||i)&&T.setAttribute("x",a),T.className.baseVal=O,m.appendChild(T),v+=B.length+1}if(o)if(c)y=z4(s,C,b,f);else if(s==="top")y="0.8em";else{let A;switch(S>0?(A=parseFloat(f)||1,A*=S,T1.test(f)||(A/=b)):A=0,s){case"middle":y=`${.3-A/2}em`;break;case"bottom":y=`${-A-.3}em`;break}}else s===0?y="0em":s?y=s:(y=0,n.getAttribute("y")==null&&n.setAttribute("y",`${w||"0.8em"}`));m.firstChild.setAttribute("dy",y),n.appendChild(m)}function Ro(n,e={}){if(!n)return{width:0};const t=[],r=e["font-size"]?`${parseFloat(e["font-size"])}px`:"14px";return t.push(e["font-style"]||"normal"),t.push(e["font-variant"]||"normal"),t.push(e["font-weight"]||400),t.push(r),t.push(e["font-family"]||"sans-serif"),M1.font=t.join(" "),M1.measureText(n)}function N1(n,e,t,r={}){if(e>=t)return[n,""];const i=n.length,s={};let o=Math.round(e/t*i-1);for(o<0&&(o=0);o>=0&&o<i;){const a=n.slice(0,o),l=s[a]||Ro(a,r).width,c=n.slice(0,o+1),u=s[c]||Ro(c,r).width;if(s[a]=l,s[c]=u,l>e)o-=1;else if(u<=e)o+=1;else break}return[n.slice(0,o),n.slice(o)]}function k1(n,e,t={},r={}){const i=e.width,s=e.height,o=r.eol||`
`,a=t.fontSize||14,l=t.lineHeight?parseFloat(t.lineHeight):Math.ceil(a*1.4),c=Math.floor(s/l);if(n.indexOf(o)>-1){const b=Rl(),m=[];return n.split(o).map(y=>{const v=k1(y,Object.assign(Object.assign({},e),{height:Number.MAX_SAFE_INTEGER}),t,Object.assign(Object.assign({},r),{eol:b}));v&&m.push(...v.split(b))}),m.slice(0,c).join(o)}const{width:u}=Ro(n,t);if(u<i)return n;const h=[];let f=n,d=u,g=r.ellipsis,p=0;g&&(typeof g!="string"&&(g="…"),p=Ro(g,t).width);for(let b=0;b<c;b+=1)if(d>i)if(b===c-1){const[y]=N1(f,i-p,d,t);h.push(g?`${y}${g}`:y)}else{const[y,v]=N1(f,i,d,t);h.push(y),f=v,d=Ro(f,t).width}else{h.push(f);break}return h.join(o)}const tf=.551784;function vt(n,e,t=NaN){const r=n.getAttribute(e);if(r==null)return t;const i=parseFloat(r);return Number.isNaN(i)?t:i}function F4(n,e=1){const t=n.getTotalLength(),r=[];let i=0,s;for(;i<t;)s=n.getPointAtLength(i),r.push({distance:i,x:s.x,y:s.y}),i+=e;return r}function V4(n){return["M",vt(n,"x1"),vt(n,"y1"),"L",vt(n,"x2"),vt(n,"y2")].join(" ")}function q4(n){const e=ql(n);return e.length===0?null:`${$1(e)} Z`}function G4(n){const e=ql(n);return e.length===0?null:$1(e)}function $1(n){return`M ${n.map(t=>`${t.x} ${t.y}`).join(" L")}`}function ql(n){const e=[],t=n.points;if(t)for(let r=0,i=t.numberOfItems;r<i;r+=1)e.push(t.getItem(r));return e}function H4(n){const e=vt(n,"cx",0),t=vt(n,"cy",0),r=vt(n,"r"),i=r*tf;return["M",e,t-r,"C",e+i,t-r,e+r,t-i,e+r,t,"C",e+r,t+i,e+i,t+r,e,t+r,"C",e-i,t+r,e-r,t+i,e-r,t,"C",e-r,t-i,e-i,t-r,e,t-r,"Z"].join(" ")}function U4(n){const e=vt(n,"cx",0),t=vt(n,"cy",0),r=vt(n,"rx"),i=vt(n,"ry")||r,s=r*tf,o=i*tf;return["M",e,t-i,"C",e+s,t-i,e+r,t-o,e+r,t,"C",e+r,t+o,e+s,t+i,e,t+i,"C",e-s,t+i,e-r,t+o,e-r,t,"C",e-r,t-o,e-s,t-i,e,t-i,"Z"].join(" ")}function W4(n){return I1({x:vt(n,"x",0),y:vt(n,"y",0),width:vt(n,"width",0),height:vt(n,"height",0),rx:vt(n,"rx",0),ry:vt(n,"ry",0)})}function I1(n){let e;const t=n.x,r=n.y,i=n.width,s=n.height,o=Math.min(n.rx||n["top-rx"]||0,i/2),a=Math.min(n.rx||n["bottom-rx"]||0,i/2),l=Math.min(n.ry||n["top-ry"]||0,s/2),c=Math.min(n.ry||n["bottom-ry"]||0,s/2);return o||a||l||c?e=["M",t,r+l,"v",s-l-c,"a",a,c,0,0,0,a,c,"h",i-2*a,"a",a,c,0,0,0,a,-c,"v",-(s-c-l),"a",o,l,0,0,0,-o,-l,"h",-(i-2*o),"a",o,l,0,0,0,-o,l,"Z"]:e=["M",t,r,"H",t+i,"V",r+s,"H",t,"V",r,"Z"],e.join(" ")}function X4(n){const e=tr("path");fe(e,fe(n));const t=L1(n);return t&&e.setAttribute("d",t),e}function L1(n){const e=n.tagName.toLowerCase();switch(e){case"path":return n.getAttribute("d");case"line":return V4(n);case"polygon":return q4(n);case"polyline":return G4(n);case"ellipse":return U4(n);case"circle":return H4(n);case"rect":return W4(n)}throw new Error(`"${e}" cannot be converted to svg path element.`)}const Gl=tr("svg"),Y4=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,R1=/[ ,]+/,K4=/^(\w+)\((.*)\)/;function J4(n,e){const t=Gl.createSVGPoint();return t.x=n,t.y=e,t}function ut(n){const e=Gl.createSVGMatrix();if(n!=null){const t=n,r=e;for(const i in t)r[i]=t[i]}return e}function jo(n){return n!=null?(n instanceof DOMMatrix||(n=ut(n)),Gl.createSVGTransformFromMatrix(n)):Gl.createSVGTransform()}function Do(n){let e=ut();const t=n!=null&&n.match(Y4);if(!t)return e;for(let r=0,i=t.length;r<i;r+=1){const o=t[r].match(K4);if(o){let a,l,c,u,h,f=ut();const d=o[2].split(R1);switch(o[1].toLowerCase()){case"scale":a=parseFloat(d[0]),l=d[1]===void 0?a:parseFloat(d[1]),f=f.scaleNonUniform(a,l);break;case"translate":c=parseFloat(d[0]),u=parseFloat(d[1]),f=f.translate(c,u);break;case"rotate":h=parseFloat(d[0]),c=parseFloat(d[1])||0,u=parseFloat(d[2])||0,c!==0||u!==0?f=f.translate(c,u).rotate(h).translate(-c,-u):f=f.rotate(h);break;case"skewx":h=parseFloat(d[0]),f=f.skewX(h);break;case"skewy":h=parseFloat(d[0]),f=f.skewY(h);break;case"matrix":f.a=parseFloat(d[0]),f.b=parseFloat(d[1]),f.c=parseFloat(d[2]),f.d=parseFloat(d[3]),f.e=parseFloat(d[4]),f.f=parseFloat(d[5]);break;default:continue}e=e.multiply(f)}}return e}function ms(n){const e=n||{},t=e.a!=null?e.a:1,r=e.b!=null?e.b:0,i=e.c!=null?e.c:0,s=e.d!=null?e.d:1,o=e.e!=null?e.e:0,a=e.f!=null?e.f:0;return`matrix(${t},${r},${i},${s},${o},${a})`}function Hl(n){let e,t,r;if(n){const s=R1;if(n.trim().indexOf("matrix")>=0){const o=Do(n),a=Q4(o);e=[a.translateX,a.translateY],t=[a.rotation],r=[a.scaleX,a.scaleY];const l=[];(e[0]!==0||e[1]!==0)&&l.push(`translate(${e.join(",")})`),(r[0]!==1||r[1]!==1)&&l.push(`scale(${r.join(",")})`),t[0]!==0&&l.push(`rotate(${t[0]})`),n=l.join(" ")}else{const o=n.match(/translate\((.*?)\)/);o&&(e=o[1].split(s));const a=n.match(/rotate\((.*?)\)/);a&&(t=a[1].split(s));const l=n.match(/scale\((.*?)\)/);l&&(r=l[1].split(s))}}const i=r&&r[0]?parseFloat(r[0]):1;return{raw:n||"",translation:{tx:e&&e[0]?parseInt(e[0],10):0,ty:e&&e[1]?parseInt(e[1],10):0},rotation:{angle:t&&t[0]?parseInt(t[0],10):0,cx:t&&t[1]?parseInt(t[1],10):void 0,cy:t&&t[2]?parseInt(t[2],10):void 0},scale:{sx:i,sy:r&&r[1]?parseFloat(r[1]):i}}}function nf(n,e){const t=e.x*n.a+e.y*n.c+0,r=e.x*n.b+e.y*n.d+0;return{x:t,y:r}}function Q4(n){const e=nf(n,{x:0,y:1}),t=nf(n,{x:1,y:0}),r=180/Math.PI*Math.atan2(e.y,e.x)-90,i=180/Math.PI*Math.atan2(t.y,t.x);return{skewX:r,skewY:i,translateX:n.e,translateY:n.f,scaleX:Math.sqrt(n.a*n.a+n.b*n.b),scaleY:Math.sqrt(n.c*n.c+n.d*n.d),rotation:r}}function Z4(n){let e,t,r,i;return n?(e=n.a==null?1:n.a,i=n.d==null?1:n.d,t=n.b,r=n.c):e=i=1,{sx:t?Math.sqrt(e*e+t*t):e,sy:r?Math.sqrt(r*r+i*i):i}}function eq(n){let e={x:0,y:1};n&&(e=nf(n,e));const t=180*Math.atan2(e.y,e.x)/Math.PI%360-90;return{angle:t%360+(t<0?360:0)}}function tq(n){return{tx:n&&n.e||0,ty:n&&n.f||0}}function ys(n,e,t={}){if(e==null)return Do(fe(n,"transform"));if(t.absolute){n.setAttribute("transform",ms(e));return}const r=n.transform,i=jo(e);r.baseVal.appendItem(i)}function j1(n,e,t=0,r={}){let i=fe(n,"transform");const s=Hl(i);if(e==null)return s.translation;i=s.raw,i=i.replace(/translate\([^)]*\)/g,"").trim();const o=r.absolute?e:s.translation.tx+e,a=r.absolute?t:s.translation.ty+t,l=`translate(${o},${a})`;n.setAttribute("transform",`${l} ${i}`.trim())}function rf(n,e,t,r,i={}){let s=fe(n,"transform");const o=Hl(s);if(e==null)return o.rotation;s=o.raw,s=s.replace(/rotate\([^)]*\)/g,"").trim(),e%=360;const a=i.absolute?e:o.rotation.angle+e,l=t!=null&&r!=null?`,${t},${r}`:"",c=`rotate(${a}${l})`;n.setAttribute("transform",`${s} ${c}`.trim())}function sf(n,e,t){let r=fe(n,"transform");const i=Hl(r);if(e==null)return i.scale;t=t==null?e:t,r=i.raw,r=r.replace(/scale\([^)]*\)/g,"").trim();const s=`scale(${e},${t})`;n.setAttribute("transform",`${r} ${s}`.trim())}function Bo(n,e){if(Mr(e)&&Mr(n)){const t=e.getScreenCTM(),r=n.getScreenCTM();if(t&&r)return t.inverse().multiply(r)}return ut()}function nq(n,e){let t=ut();if(Mr(e)&&Mr(n)){let r=n;const i=[];for(;r&&r!==e;){const s=r.getAttribute("transform")||null,o=Do(s);i.push(o),r=r.parentNode}i.reverse().forEach(s=>{t=t.multiply(s)})}return t}function rq(n,e,t){const r=n instanceof SVGSVGElement?n:n.ownerSVGElement,i=r.createSVGPoint();i.x=e,i.y=t;try{const s=r.getScreenCTM(),o=i.matrixTransform(s.inverse()),a=Bo(n,r).inverse();return o.matrixTransform(a)}catch(s){return i}}var tn;(function(n){const e={};function t(s){return e[s]||{}}n.get=t;function r(s,o){e[s]=o}n.register=r;function i(s){delete e[s]}n.unregister=i})(tn||(tn={}));var Si;(function(n){const e=new WeakMap;function t(s){return e.has(s)||e.set(s,{events:Object.create(null)}),e.get(s)}n.ensure=t;function r(s){return e.get(s)}n.get=r;function i(s){return e.delete(s)}n.remove=i})(Si||(Si={}));var ie;(function(n){n.returnTrue=()=>!0,n.returnFalse=()=>!1;function e(i){i.stopPropagation()}n.stopPropagationCallback=e;function t(i,s,o){i.addEventListener!=null&&i.addEventListener(s,o)}n.addEventListener=t;function r(i,s,o){i.removeEventListener!=null&&i.removeEventListener(s,o)}n.removeEventListener=r})(ie||(ie={})),function(n){const e=/[^\x20\t\r\n\f]+/g,t=/^([^.]*)(?:\.(.+)|)/;function r(a){return(a||"").match(e)||[""]}n.splitType=r;function i(a){const l=t.exec(a)||[];return{originType:l[1]?l[1].trim():l[1],namespaces:l[2]?l[2].split(".").map(c=>c.trim()).sort():[]}}n.normalizeType=i;function s(a){return a.nodeType===1||a.nodeType===9||!+a.nodeType}n.isValidTarget=s;function o(a,l){if(l){const c=a;return c.querySelector!=null&&c.querySelector(l)!=null}return!0}n.isValidSelector=o}(ie||(ie={})),function(n){let e=0;const t=new WeakMap;function r(a){return t.has(a)||(t.set(a,e),e+=1),t.get(a)}n.ensureHandlerId=r;function i(a){return t.get(a)}n.getHandlerId=i;function s(a){return t.delete(a)}n.removeHandlerId=s;function o(a,l){return t.set(a,l)}n.setHandlerId=o}(ie||(ie={})),function(n){function e(t,r){const i=[],s=Si.get(t),o=s&&s.events&&s.events[r.type],a=o&&o.handlers||[],l=o?o.delegateCount:0;if(l>0&&!(r.type==="click"&&typeof r.button=="number"&&r.button>=1)){for(let c=r.target;c!==t;c=c.parentNode||t)if(c.nodeType===1&&!(r.type==="click"&&c.disabled===!0)){const u=[],h={};for(let f=0;f<l;f+=1){const d=a[f],g=d.selector;if(g!=null&&h[g]==null){const p=t,b=[];p.querySelectorAll(g).forEach(m=>{b.push(m)}),h[g]=b.includes(c)}h[g]&&u.push(d)}u.length&&i.push({elem:c,handlers:u})}}return l<a.length&&i.push({elem:t,handlers:a.slice(l)}),i}n.getHandlerQueue=e}(ie||(ie={})),function(n){function e(t){return t!=null&&t===t.window}n.isWindow=e}(ie||(ie={})),function(n){function e(t,r){const i=t.nodeType===9?t.documentElement:t,s=r&&r.parentNode;return t===s||!!(s&&s.nodeType===1&&(i.contains?i.contains(s):t.compareDocumentPosition&&t.compareDocumentPosition(s)&16))}n.contains=e}(ie||(ie={}));class Fn{constructor(e,t){this.isDefaultPrevented=ie.returnFalse,this.isPropagationStopped=ie.returnFalse,this.isImmediatePropagationStopped=ie.returnFalse,this.isSimulated=!1,this.preventDefault=()=>{const r=this.originalEvent;this.isDefaultPrevented=ie.returnTrue,r&&!this.isSimulated&&r.preventDefault()},this.stopPropagation=()=>{const r=this.originalEvent;this.isPropagationStopped=ie.returnTrue,r&&!this.isSimulated&&r.stopPropagation()},this.stopImmediatePropagation=()=>{const r=this.originalEvent;this.isImmediatePropagationStopped=ie.returnTrue,r&&!this.isSimulated&&r.stopImmediatePropagation(),this.stopPropagation()},typeof e=="string"?this.type=e:e.type&&(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?ie.returnTrue:ie.returnFalse,this.target=e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget,this.timeStamp=e.timeStamp),t&&Object.assign(this,t),this.timeStamp||(this.timeStamp=Date.now())}}(function(n){function e(t){return t instanceof n?t:new n(t)}n.create=e})(Fn||(Fn={})),function(n){function e(t,r){Object.defineProperty(n.prototype,t,{enumerable:!0,configurable:!0,get:typeof r=="function"?function(){if(this.originalEvent)return r(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set(i){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:i})}})}n.addProperty=e}(Fn||(Fn={})),function(n){const e={bubbles:!0,cancelable:!0,eventPhase:!0,detail:!0,view:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pageX:!0,pageY:!0,screenX:!0,screenY:!0,toElement:!0,pointerId:!0,pointerType:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,touches:!0,changedTouches:!0,targetTouches:!0,which:!0,altKey:!0,ctrlKey:!0,metaKey:!0,shiftKey:!0};Object.keys(e).forEach(t=>n.addProperty(t,e[t]))}(Fn||(Fn={})),function(n){tn.register("load",{noBubble:!0})}(),function(n){tn.register("beforeunload",{postDispatch(e,t){t.result!==void 0&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}})}(),function(n){tn.register("mouseenter",{delegateType:"mouseover",bindType:"mouseover",handle(e,t){let r;const i=t.relatedTarget,s=t.handleObj;return(!i||i!==e&&!ie.contains(e,i))&&(t.type=s.originType,r=s.handler.call(e,t),t.type="mouseover"),r}}),tn.register("mouseleave",{delegateType:"mouseout",bindType:"mouseout",handle(e,t){let r;const i=t.relatedTarget,s=t.handleObj;return(!i||i!==e&&!ie.contains(e,i))&&(t.type=s.originType,r=s.handler.call(e,t),t.type="mouseout"),r}})}();var iq=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},zo;(function(n){let e;function t(o,a,l,c,u){if(!ie.isValidTarget(o))return;let h;if(typeof l!="function"){const{handler:p,selector:b}=l,m=iq(l,["handler","selector"]);l=p,u=b,h=m}const f=Si.ensure(o);let d=f.handler;d==null&&(d=f.handler=function(p,...b){return e!==p.type?i(o,p,...b):void 0});const g=ie.ensureHandlerId(l);ie.splitType(a).forEach(p=>{const{originType:b,namespaces:m}=ie.normalizeType(p);if(!b)return;let y=b,v=tn.get(y);y=(u?v.delegateType:v.bindType)||y,v=tn.get(y);const w=Object.assign({type:y,originType:b,data:c,selector:u,guid:g,handler:l,namespace:m.join(".")},h),x=f.events;let C=x[y];C||(C=x[y]={handlers:[],delegateCount:0},(!v.setup||v.setup(o,c,m,d)===!1)&&ie.addEventListener(o,y,d)),v.add&&(ie.removeHandlerId(w.handler),v.add(o,w),ie.setHandlerId(w.handler,g)),u?(C.handlers.splice(C.delegateCount,0,w),C.delegateCount+=1):C.handlers.push(w)})}n.on=t;function r(o,a,l,c,u){const h=Si.get(o);if(!h)return;const f=h.events;f&&(ie.splitType(a).forEach(d=>{const{originType:g,namespaces:p}=ie.normalizeType(d);if(!g){Object.keys(f).forEach(x=>{r(o,x+d,l,c,!0)});return}let b=g;const m=tn.get(b);b=(c?m.delegateType:m.bindType)||b;const y=f[b];if(!y)return;const v=p.length>0?new RegExp(`(^|\\.)${p.join("\\.(?:.*\\.|)")}(\\.|$)`):null,w=y.handlers.length;for(let x=y.handlers.length-1;x>=0;x-=1){const C=y.handlers[x];(u||g===C.originType)&&(!l||ie.getHandlerId(l)===C.guid)&&(v==null||C.namespace&&v.test(C.namespace))&&(c==null||c===C.selector||c==="**"&&C.selector)&&(y.handlers.splice(x,1),C.selector&&(y.delegateCount-=1),m.remove&&m.remove(o,C))}w&&y.handlers.length===0&&((!m.teardown||m.teardown(o,p,h.handler)===!1)&&ie.removeEventListener(o,b,h.handler),delete f[b])}),Object.keys(f).length===0&&Si.remove(o))}n.off=r;function i(o,a,...l){const c=Fn.create(a);c.delegateTarget=o;const u=tn.get(c.type);if(u.preDispatch&&u.preDispatch(o,c)===!1)return;const h=ie.getHandlerQueue(o,c);for(let f=0,d=h.length;f<d&&!c.isPropagationStopped();f+=1){const g=h[f];c.currentTarget=g.elem;for(let p=0,b=g.handlers.length;p<b&&!c.isImmediatePropagationStopped();p+=1){const m=g.handlers[p];if(c.rnamespace==null||m.namespace&&c.rnamespace.test(m.namespace)){c.handleObj=m,c.data=m.data;const y=tn.get(m.originType).handle,v=y?y(g.elem,c,...l):m.handler.call(g.elem,c,...l);v!==void 0&&(c.result=v,v===!1&&(c.preventDefault(),c.stopPropagation()))}}}return u.postDispatch&&u.postDispatch(o,c),c.result}n.dispatch=i;function s(o,a,l,c){let u=o,h=typeof o=="string"?o:o.type,f=typeof o=="string"||u.namespace==null?[]:u.namespace.split(".");const d=l;if(d.nodeType===3||d.nodeType===8)return;h.indexOf(".")>-1&&(f=h.split("."),h=f.shift(),f.sort());const g=h.indexOf(":")<0&&`on${h}`;u=o instanceof Fn?o:new Fn(h,typeof o=="object"?o:null),u.namespace=f.join("."),u.rnamespace=u.namespace?new RegExp(`(^|\\.)${f.join("\\.(?:.*\\.|)")}(\\.|$)`):null,u.result=void 0,u.target||(u.target=d);const p=[u];Array.isArray(a)?p.push(...a):p.push(a);const b=tn.get(h);if(!c&&b.trigger&&b.trigger(d,u,a)===!1)return;let m;const y=[d];if(!c&&!b.noBubble&&!ie.isWindow(d)){m=b.delegateType||h;let w=d,x=d.parentNode;for(;x!=null;)y.push(x),w=x,x=x.parentNode;const C=d.ownerDocument||document;if(w===C){const S=w.defaultView||w.parentWindow||window;y.push(S)}}let v=d;for(let w=0,x=y.length;w<x&&!u.isPropagationStopped();w+=1){const C=y[w];v=C,u.type=w>1?m:b.bindType||h;const S=Si.get(C);S&&S.events[u.type]&&S.handler&&S.handler.call(C,...p);const E=g&&C[g]||null;E&&ie.isValidTarget(C)&&(u.result=E.call(C,...p),u.result===!1&&u.preventDefault())}if(u.type=h,!c&&!u.isDefaultPrevented()){const w=b.preventDefault;if((w==null||w(y.pop(),u,a)===!1)&&ie.isValidTarget(d)&&g&&typeof d[h]=="function"&&!ie.isWindow(d)){const x=d[g];x&&(d[g]=null),e=h,u.isPropagationStopped()&&v.addEventListener(h,ie.stopPropagationCallback),d[h](),u.isPropagationStopped()&&v.removeEventListener(h,ie.stopPropagationCallback),e=void 0,x&&(d[g]=x)}}return u.result}n.trigger=s})(zo||(zo={}));var Pe;(function(n){function e(s,o,a,l,c){return Fo.on(s,o,a,l,c),s}n.on=e;function t(s,o,a,l,c){return Fo.on(s,o,a,l,c,!0),s}n.once=t;function r(s,o,a,l){return Fo.off(s,o,a,l),s}n.off=r;function i(s,o,a,l){return zo.trigger(o,a,s,l),s}n.trigger=i})(Pe||(Pe={}));var Fo;(function(n){function e(r,i,s,o,a,l){if(typeof i=="object"){typeof s!="string"&&(o=o||s,s=void 0),Object.keys(i).forEach(c=>e(r,c,s,o,i[c],l));return}if(o==null&&a==null?(a=s,o=s=void 0):a==null&&(typeof s=="string"?(a=o,o=void 0):(a=o,o=s,s=void 0)),a===!1)a=ie.returnFalse;else if(!a)return;if(l){const c=a;a=function(u,...h){return n.off(r,u),c.call(this,u,...h)},ie.setHandlerId(a,ie.ensureHandlerId(c))}zo.on(r,i,a,o,s)}n.on=e;function t(r,i,s,o){const a=i;if(a&&a.preventDefault!=null&&a.handleObj!=null){const l=a.handleObj;t(a.delegateTarget,l.namespace?`${l.originType}.${l.namespace}`:l.originType,l.selector,l.handler);return}if(typeof i=="object"){const l=i;Object.keys(l).forEach(c=>t(r,c,s,l[c]));return}(s===!1||typeof s=="function")&&(o=s,s=void 0),o===!1&&(o=ie.returnFalse),zo.off(r,i,o,s)}n.off=t})(Fo||(Fo={}));class D1{constructor(e,t,r){this.animationFrameId=0,this.deltaX=0,this.deltaY=0,this.eventName=en.isEventSupported("wheel")?"wheel":"mousewheel",this.target=e,this.onWheelCallback=t,this.onWheelGuard=r,this.onWheel=this.onWheel.bind(this),this.didWheel=this.didWheel.bind(this)}enable(){this.target.addEventListener(this.eventName,this.onWheel,{passive:!1})}disable(){this.target.removeEventListener(this.eventName,this.onWheel)}onWheel(e){if(this.onWheelGuard!=null&&!this.onWheelGuard(e))return;this.deltaX+=e.deltaX,this.deltaY+=e.deltaY,e.preventDefault();let t;(this.deltaX!==0||this.deltaY!==0)&&(e.stopPropagation(),t=!0),t===!0&&this.animationFrameId===0&&(this.animationFrameId=requestAnimationFrame(()=>{this.didWheel(e)}))}didWheel(e){this.animationFrameId=0,this.onWheelCallback(e,this.deltaX,this.deltaY),this.deltaX=0,this.deltaY=0}}function Vo(n){const e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView;return{top:e.top+t.pageYOffset,left:e.left+t.pageXOffset}}function sq(n){return n.getBoundingClientRect().width}function oq(n){return n.getBoundingClientRect().height}function aq(n){const e=Bl(n,"position")==="fixed";let t;if(e){const r=n.getBoundingClientRect();t={left:r.left,top:r.top}}else t=Vo(n);if(!e){const r=n.ownerDocument;let i=n.offsetParent||r.documentElement;for(;(i===r.body||i===r.documentElement)&&Bl(i,"position")==="static";)i=i.parentNode;if(i!==n&&S4(i)){const s=Vo(i);t.top-=s.top+zl(i,"borderTopWidth"),t.left-=s.left+zl(i,"borderLeftWidth")}}return{top:t.top-zl(n,"marginTop"),left:t.left-zl(n,"marginLeft")}}function B1(n,e=60){let t=null;return(...r)=>{t&&clearTimeout(t),t=window.setTimeout(()=>{n.apply(this,r)},e)}}function lq(n){let e=null,t=[];const r=()=>{if(getComputedStyle(n).position==="static"){const c=n.style;c.position="relative"}const l=document.createElement("object");return l.onload=()=>{l.contentDocument.defaultView.addEventListener("resize",i),i()},l.style.display="block",l.style.position="absolute",l.style.top="0",l.style.left="0",l.style.height="100%",l.style.width="100%",l.style.overflow="hidden",l.style.pointerEvents="none",l.style.zIndex="-1",l.style.opacity="0",l.setAttribute("tabindex","-1"),l.type="text/html",n.appendChild(l),l.data="about:blank",l},i=B1(()=>{t.forEach(l=>l(n))}),s=l=>{e||(e=r()),t.indexOf(l)===-1&&t.push(l)},o=()=>{e&&e.parentNode&&(e.contentDocument&&e.contentDocument.defaultView.removeEventListener("resize",i),e.parentNode.removeChild(e),e=null,t=[])};return{element:n,bind:s,destroy:o,unbind:l=>{const c=t.indexOf(l);c!==-1&&t.splice(c,1),t.length===0&&e&&o()}}}function cq(n){let e=null,t=[];const r=B1(()=>{t.forEach(l=>{l(n)})}),i=()=>{const l=new ResizeObserver(r);return l.observe(n),r(),l},s=l=>{e||(e=i()),t.indexOf(l)===-1&&t.push(l)},o=()=>{e&&(e.disconnect(),t=[],e=null)};return{element:n,bind:s,destroy:o,unbind:l=>{const c=t.indexOf(l);c!==-1&&t.splice(c,1),t.length===0&&e&&o()}}}const uq=typeof ResizeObserver!="undefined"?cq:lq;var Ul;(function(n){const e=new WeakMap;function t(i){let s=e.get(i);return s||(s=uq(i),e.set(i,s),s)}function r(i){i.destroy(),e.delete(i.element)}n.bind=(i,s)=>{const o=t(i);return o.bind(s),()=>o.unbind(s)},n.clear=i=>{const s=t(i);r(s)}})(Ul||(Ul={}));class qo{constructor(e={}){this.comparator=e.comparator||qo.defaultComparator,this.index={},this.data=e.data||[],this.heapify()}isEmpty(){return this.data.length===0}insert(e,t,r){const i={priority:e,value:t},s=this.data.length;return r&&(i.id=r,this.index[r]=s),this.data.push(i),this.bubbleUp(s),this}peek(){return this.data[0]?this.data[0].value:null}peekPriority(){return this.data[0]?this.data[0].priority:null}updatePriority(e,t){const r=this.index[e];if(typeof r=="undefined")throw new Error(`Node with id '${e}' was not found in the heap.`);const i=this.data,s=i[r].priority,o=this.comparator(t,s);o<0?(i[r].priority=t,this.bubbleUp(r)):o>0&&(i[r].priority=t,this.bubbleDown(r))}remove(){const e=this.data,t=e[0],r=e.pop();return t.id&&delete this.index[t.id],e.length>0&&(e[0]=r,r.id&&(this.index[r.id]=0),this.bubbleDown(0)),t?t.value:null}heapify(){for(let e=0;e<this.data.length;e+=1)this.bubbleUp(e)}bubbleUp(e){const t=this.data;let r,i,s=e;for(;s>0&&(i=s-1>>>1,this.comparator(t[s].priority,t[i].priority)<0);){r=t[i],t[i]=t[s];let o=t[s].id;o!=null&&(this.index[o]=i),t[s]=r,o=t[s].id,o!=null&&(this.index[o]=s),s=i}}bubbleDown(e){const t=this.data,r=t.length-1;let i=e;for(;;){const s=(i<<1)+1,o=s+1;let a=i;if(s<=r&&this.comparator(t[s].priority,t[a].priority)<0&&(a=s),o<=r&&this.comparator(t[o].priority,t[a].priority)<0&&(a=o),a!==i){const l=t[a];t[a]=t[i];let c=t[i].id;c!=null&&(this.index[c]=a),t[i]=l,c=t[i].id,c!=null&&(this.index[c]=i),i=a}else break}}}(function(n){n.defaultComparator=(e,t)=>e-t})(qo||(qo={}));var of;(function(n){function e(t,r,i=(s,o)=>1){const s={},o={},a={},l=new qo;for(s[r]=0,Object.keys(t).forEach(c=>{c!==r&&(s[c]=1/0),l.insert(s[c],c,c)});!l.isEmpty();){const c=l.remove();a[c]=!0;const u=t[c]||[];for(let h=0;h<u.length;h+=1){const f=u[h];if(!a[f]){const d=s[c]+i(c,f);d<s[f]&&(s[f]=d,o[f]=c,l.updatePriority(f,d))}}}return o}n.run=e})(of||(of={}));class rr{constructor(e,t,r,i){if(e==null)return this.set(255,255,255,1);if(typeof e=="number")return this.set(e,t,r,i);if(typeof e=="string")return rr.fromString(e)||this;if(Array.isArray(e))return this.set(e);this.set(e.r,e.g,e.b,e.a==null?1:e.a)}blend(e,t,r){this.set(e.r+(t.r-e.r)*r,e.g+(t.g-e.g)*r,e.b+(t.b-e.b)*r,e.a+(t.a-e.a)*r)}lighten(e){const t=rr.lighten(this.toArray(),e);this.r=t[0],this.g=t[1],this.b=t[2],this.a=t[3]}darken(e){this.lighten(-e)}set(e,t,r,i){const s=Array.isArray(e)?e[0]:e,o=Array.isArray(e)?e[1]:t,a=Array.isArray(e)?e[2]:r,l=Array.isArray(e)?e[3]:i;return this.r=Math.round(Zt(s,0,255)),this.g=Math.round(Zt(o,0,255)),this.b=Math.round(Zt(a,0,255)),this.a=l==null?1:Zt(l,0,1),this}toHex(){return`#${["r","g","b"].map(t=>{const r=this[t].toString(16);return r.length<2?`0${r}`:r}).join("")}`}toRGBA(){return this.toArray()}toHSLA(){return rr.rgba2hsla(this.r,this.g,this.b,this.a)}toCSS(e){const t=`${this.r},${this.g},${this.b},`;return e?`rgb(${t})`:`rgba(${t},${this.a})`}toGrey(){return rr.makeGrey(Math.round((this.r+this.g+this.b)/3),this.a)}toArray(){return[this.r,this.g,this.b,this.a]}toString(){return this.toCSS()}}(function(n){function e(v){return new n(v)}n.fromArray=e;function t(v){return new n([...g(v),1])}n.fromHex=t;function r(v){const w=v.toLowerCase().match(/^rgba?\(([\s.,0-9]+)\)/);if(w){const x=w[1].split(/\s*,\s*/).map(C=>parseInt(C,10));return new n(x)}return null}n.fromRGBA=r;function i(v,w,x){x<0&&++x,x>1&&--x;const C=6*x;return C<1?v+(w-v)*C:2*x<1?w:3*x<2?v+(w-v)*(2/3-x)*6:v}function s(v){const w=v.toLowerCase().match(/^hsla?\(([\s.,0-9]+)\)/);if(w){const x=w[2].split(/\s*,\s*/),C=(parseFloat(x[0])%360+360)%360/360,S=parseFloat(x[1])/100,E=parseFloat(x[2])/100,A=x[3]==null?1:parseInt(x[3],10);return new n(c(C,S,E,A))}return null}n.fromHSLA=s;function o(v){if(v.startsWith("#"))return t(v);if(v.startsWith("rgb"))return r(v);const w=n.named[v];return w?t(w):s(v)}n.fromString=o;function a(v,w){return n.fromArray([v,v,v,w])}n.makeGrey=a;function l(v,w,x,C){const S=Array.isArray(v)?v[0]:v,E=Array.isArray(v)?v[1]:w,A=Array.isArray(v)?v[2]:x,O=Array.isArray(v)?v[3]:C,T=Math.max(S,E,A),k=Math.min(S,E,A),B=(T+k)/2;let W=0,M=0;if(k!==T){const $=T-k;switch(M=B>.5?$/(2-T-k):$/(T+k),T){case S:W=(E-A)/$+(E<A?6:0);break;case E:W=(A-S)/$+2;break;case A:W=(S-E)/$+4;break}W/=6}return[W,M,B,O==null?1:O]}n.rgba2hsla=l;function c(v,w,x,C){const S=Array.isArray(v)?v[0]:v,E=Array.isArray(v)?v[1]:w,A=Array.isArray(v)?v[2]:x,O=Array.isArray(v)?v[3]:C,T=A<=.5?A*(E+1):A+E-A*E,k=2*A-T;return[i(k,T,S+1/3)*256,i(k,T,S)*256,i(k,T,S-1/3)*256,O==null?1:O]}n.hsla2rgba=c;function u(v){return new n(Math.round(Math.random()*256),Math.round(Math.random()*256),Math.round(Math.random()*256),v?void 0:parseFloat(Math.random().toFixed(2)))}n.random=u;function h(){const v="0123456789ABCDEF";let w="#";for(let x=0;x<6;x+=1)w+=v[Math.floor(Math.random()*16)];return w}n.randomHex=h;function f(v){return u(v).toString()}n.randomRGBA=f;function d(v,w){if(typeof v=="string"){const A=v[0]==="#",[O,T,k]=g(v);return w?O*.299+T*.587+k*.114>186?"#000000":"#ffffff":`${A?"#":""}${p(255-O,255-T,255-k)}`}const x=v[0],C=v[1],S=v[2],E=v[3];return w?x*.299+C*.587+S*.114>186?[0,0,0,E]:[255,255,255,E]:[255-x,255-C,255-S,E]}n.invert=d;function g(v){const w=v.indexOf("#")===0?v:`#${v}`;let x=+`0x${w.substr(1)}`;if(!(w.length===4||w.length===7)||Number.isNaN(x))throw new Error("Invalid hex color.");const C=w.length===4?4:8,S=(1<<C)-1,E=["b","g","r"].map(()=>{const A=x&S;return x>>=C,C===4?17*A:A});return[E[2],E[1],E[0]]}function p(v,w,x){const C=S=>S.length<2?`0${S}`:S;return`${C(v.toString(16))}${C(w.toString(16))}${C(x.toString(16))}`}function b(v,w){return y(v,w)}n.lighten=b;function m(v,w){return y(v,-w)}n.darken=m;function y(v,w){if(typeof v=="string"){const S=v[0]==="#",E=parseInt(S?v.substr(1):v,16),A=Zt((E>>16)+w,0,255),O=Zt((E>>8&255)+w,0,255),T=Zt((E&255)+w,0,255);return`${S?"#":""}${(T|O<<8|A<<16).toString(16)}`}const x=p(v[0],v[1],v[2]),C=g(y(x,w));return[C[0],C[1],C[2],v[3]]}})(rr||(rr={})),function(n){n.named={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",burntsienna:"#ea7e5d",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}(rr||(rr={}));class af{constructor(){this.clear()}clear(){this.map=new WeakMap,this.arr=[]}has(e){return this.map.has(e)}get(e){return this.map.get(e)}set(e,t){this.map.set(e,t),this.arr.push(e)}delete(e){const t=this.arr.indexOf(e);t>=0&&this.arr.splice(t,1);const r=this.map.get(e);return this.map.delete(e),r}each(e){this.arr.forEach(t=>{const r=this.map.get(t);e(r,t)})}dispose(){this.clear()}}var ir;(function(n){function e(i){const s=[],o=[];return Array.isArray(i)?s.push(...i):i.split("|").forEach(a=>{a.indexOf("&")===-1?s.push(a):o.push(...a.split("&"))}),{or:s,and:o}}n.parse=e;function t(i,s){if(i!=null&&s!=null){const o=e(i),a=e(s),l=o.or.sort(),c=a.or.sort(),u=o.and.sort(),h=a.and.sort(),f=(d,g)=>d.length===g.length&&(d.length===0||d.every((p,b)=>p===g[b]));return f(l,c)&&f(u,h)}return i==null&&s==null}n.equals=t;function r(i,s,o){if(s==null||Array.isArray(s)&&s.length===0)return o?i.altKey!==!0&&i.ctrlKey!==!0&&i.metaKey!==!0&&i.shiftKey!==!0:!0;const{or:a,and:l}=e(s),c=u=>{const h=`${u.toLowerCase()}Key`;return i[h]===!0};return a.some(u=>c(u))&&l.every(u=>c(u))}n.isMatch=r})(ir||(ir={}));var Pi;(function(n){n.linear=e=>e,n.quad=e=>e*e,n.cubic=e=>e*e*e,n.inout=e=>{if(e<=0)return 0;if(e>=1)return 1;const t=e*e,r=t*e;return 4*(e<.5?r:3*(e-t)+r-.75)},n.exponential=e=>Math.pow(2,10*(e-1)),n.bounce=e=>{for(let t=0,r=1;;t+=r,r/=2)if(e>=(7-4*t)/11){const i=(11-6*t-11*e)/4;return-i*i+r*r}}})(Pi||(Pi={})),function(n){n.decorators={reverse(e){return t=>1-e(1-t)},reflect(e){return t=>.5*(t<.5?e(2*t):2-e(2-2*t))},clamp(e,t=0,r=1){return i=>{const s=e(i);return s<t?t:s>r?r:s}},back(e=1.70158){return t=>t*t*((e+1)*t-e)},elastic(e=1.5){return t=>Math.pow(2,10*(t-1))*Math.cos(20*Math.PI*e/3*t)}}}(Pi||(Pi={})),function(n){function e(M){return-1*Math.cos(M*(Math.PI/2))+1}n.easeInSine=e;function t(M){return Math.sin(M*(Math.PI/2))}n.easeOutSine=t;function r(M){return-.5*(Math.cos(Math.PI*M)-1)}n.easeInOutSine=r;function i(M){return M*M}n.easeInQuad=i;function s(M){return M*(2-M)}n.easeOutQuad=s;function o(M){return M<.5?2*M*M:-1+(4-2*M)*M}n.easeInOutQuad=o;function a(M){return M*M*M}n.easeInCubic=a;function l(M){const $=M-1;return $*$*$+1}n.easeOutCubic=l;function c(M){return M<.5?4*M*M*M:(M-1)*(2*M-2)*(2*M-2)+1}n.easeInOutCubic=c;function u(M){return M*M*M*M}n.easeInQuart=u;function h(M){const $=M-1;return 1-$*$*$*$}n.easeOutQuart=h;function f(M){const $=M-1;return M<.5?8*M*M*M*M:1-8*$*$*$*$}n.easeInOutQuart=f;function d(M){return M*M*M*M*M}n.easeInQuint=d;function g(M){const $=M-1;return 1+$*$*$*$*$}n.easeOutQuint=g;function p(M){const $=M-1;return M<.5?16*M*M*M*M*M:1+16*$*$*$*$*$}n.easeInOutQuint=p;function b(M){return M===0?0:Math.pow(2,10*(M-1))}n.easeInExpo=b;function m(M){return M===1?1:-Math.pow(2,-10*M)+1}n.easeOutExpo=m;function y(M){if(M===0||M===1)return M;const $=M*2,Y=$-1;return $<1?.5*Math.pow(2,10*Y):.5*(-Math.pow(2,-10*Y)+2)}n.easeInOutExpo=y;function v(M){const $=M/1;return-1*(Math.sqrt(1-$*M)-1)}n.easeInCirc=v;function w(M){const $=M-1;return Math.sqrt(1-$*$)}n.easeOutCirc=w;function x(M){const $=M*2,Y=$-2;return $<1?-.5*(Math.sqrt(1-$*$)-1):.5*(Math.sqrt(1-Y*Y)+1)}n.easeInOutCirc=x;function C(M,$=1.70158){return M*M*(($+1)*M-$)}n.easeInBack=C;function S(M,$=1.70158){const Y=M/1-1;return Y*Y*(($+1)*Y+$)+1}n.easeOutBack=S;function E(M,$=1.70158){const Y=M*2,j=Y-2,F=$*1.525;return Y<1?.5*Y*Y*((F+1)*Y-F):.5*(j*j*((F+1)*j+F)+2)}n.easeInOutBack=E;function A(M,$=.7){if(M===0||M===1)return M;const j=M/1-1,F=1-$,U=F/(2*Math.PI)*Math.asin(1);return-(Math.pow(2,10*j)*Math.sin((j-U)*(2*Math.PI)/F))}n.easeInElastic=A;function O(M,$=.7){const Y=1-$,j=M*2;if(M===0||M===1)return M;const F=Y/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*j)*Math.sin((j-F)*(2*Math.PI)/Y)+1}n.easeOutElastic=O;function T(M,$=.65){const Y=1-$;if(M===0||M===1)return M;const j=M*2,F=j-1,U=Y/(2*Math.PI)*Math.asin(1);return j<1?-.5*(Math.pow(2,10*F)*Math.sin((F-U)*(2*Math.PI)/Y)):Math.pow(2,-10*F)*Math.sin((F-U)*(2*Math.PI)/Y)*.5+1}n.easeInOutElastic=T;function k(M){const $=M/1;if($<1/2.75)return 7.5625*$*$;if($<2/2.75){const Y=$-.5454545454545454;return 7.5625*Y*Y+.75}if($<2.5/2.75){const Y=$-.8181818181818182;return 7.5625*Y*Y+.9375}{const Y=$-.9545454545454546;return 7.5625*Y*Y+.984375}}n.easeOutBounce=k;function B(M){return 1-k(1-M)}n.easeInBounce=B;function W(M){return M<.5?B(M*2)*.5:k(M*2-1)*.5+.5}n.easeInOutBounce=W}(Pi||(Pi={}));var Ei;(function(n){n.number=(e,t)=>{const r=t-e;return i=>e+r*i},n.object=(e,t)=>{const r=Object.keys(e);return i=>{const s={};for(let o=r.length-1;o!==-1;o-=1){const a=r[o];s[a]=e[a]+(t[a]-e[a])*i}return s}},n.unit=(e,t)=>{const r=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,i=r.exec(e),s=r.exec(t),o=s?s[1]:"",a=i?+i[1]:0,l=s?+s[1]:0,c=o.indexOf("."),u=c>0?o[1].length-c-1:0,h=l-a,f=i?i[2]:"";return d=>(a+h*d).toFixed(u)+f},n.color=(e,t)=>{const r=parseInt(e.slice(1),16),i=parseInt(t.slice(1),16),s=r&255,o=(i&255)-s,a=r&65280,l=(i&65280)-a,c=r&16711680,u=(i&16711680)-c;return h=>{const f=s+o*h&255,d=a+l*h&65280,g=c+u*h&16711680;return`#${(1<<24|f|d|g).toString(16).slice(1)}`}}})(Ei||(Ei={}));const Go=[];function Ho(n,e){const t=Go.find(r=>r.name===n);if(!(t&&(t.loadTimes+=1,t.loadTimes>1))&&!en.isApplyingHMR()){const r=document.createElement("style");r.setAttribute("type","text/css"),r.textContent=e;const i=document.querySelector("head");i&&i.insertBefore(r,i.firstChild),Go.push({name:n,loadTimes:1,styleElement:r})}}function Uo(n){const e=Go.findIndex(t=>t.name===n);if(e>-1){const t=Go[e];if(t.loadTimes-=1,t.loadTimes>0)return;let r=t.styleElement;r&&r.parentNode&&r.parentNode.removeChild(r),r=null,Go.splice(e,1)}}var we;(function(n){function e(r){return 180*r/Math.PI%360}n.toDeg=e,n.toRad=function(r,i=!1){return(i?r:r%360)*Math.PI/180};function t(r){return r%360+(r<0?360:0)}n.normalize=t})(we||(we={}));var xe;(function(n){function e(a,l=0){return Number.isInteger(a)?a:+a.toFixed(l)}n.round=e;function t(a,l){let c,u;if(l==null?(u=a==null?1:a,c=0):(u=l,c=a==null?0:a),u<c){const h=c;c=u,u=h}return Math.floor(Math.random()*(u-c+1)+c)}n.random=t;function r(a,l,c){return Number.isNaN(a)?NaN:Number.isNaN(l)||Number.isNaN(c)?0:l<c?a<l?l:a>c?c:a:a<c?c:a>l?l:a}n.clamp=r;function i(a,l){return l*Math.round(a/l)}n.snapToGrid=i;function s(a,l){return l!=null&&a!=null&&l.x>=a.x&&l.x<=a.x+a.width&&l.y>=a.y&&l.y<=a.y+a.height}n.containsPoint=s;function o(a,l){const c=a.x-l.x,u=a.y-l.y;return c*c+u*u}n.squaredLength=o})(xe||(xe={}));class _r{valueOf(){return this.toJSON()}toString(){return JSON.stringify(this.toJSON())}}class P extends _r{constructor(e,t){super(),this.x=e==null?0:e,this.y=t==null?0:t}round(e=0){return this.x=xe.round(this.x,e),this.y=xe.round(this.y,e),this}add(e,t){const r=P.create(e,t);return this.x+=r.x,this.y+=r.y,this}update(e,t){const r=P.create(e,t);return this.x=r.x,this.y=r.y,this}translate(e,t){const r=P.create(e,t);return this.x+=r.x,this.y+=r.y,this}rotate(e,t){const r=P.rotate(this,e,t);return this.x=r.x,this.y=r.y,this}scale(e,t,r=new P){const i=P.create(r);return this.x=i.x+e*(this.x-i.x),this.y=i.y+t*(this.y-i.y),this}closest(e){if(e.length===1)return P.create(e[0]);let t=null,r=1/0;return e.forEach(i=>{const s=this.squaredDistance(i);s<r&&(t=i,r=s)}),t?P.create(t):null}distance(e){return Math.sqrt(this.squaredDistance(e))}squaredDistance(e){const t=P.create(e),r=this.x-t.x,i=this.y-t.y;return r*r+i*i}manhattanDistance(e){const t=P.create(e);return Math.abs(t.x-this.x)+Math.abs(t.y-this.y)}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)||.01}theta(e=new P){const t=P.create(e),r=-(t.y-this.y),i=t.x-this.x;let s=Math.atan2(r,i);return s<0&&(s=2*Math.PI+s),180*s/Math.PI}angleBetween(e,t){if(this.equals(e)||this.equals(t))return NaN;let r=this.theta(t)-this.theta(e);return r<0&&(r+=360),r}vectorAngle(e){return new P(0,0).angleBetween(this,e)}toPolar(e){return this.update(P.toPolar(this,e)),this}changeInAngle(e,t,r=new P){return this.clone().translate(-e,-t).theta(r)-this.theta(r)}adhereToRect(e){return xe.containsPoint(e,this)||(this.x=Math.min(Math.max(this.x,e.x),e.x+e.width),this.y=Math.min(Math.max(this.y,e.y),e.y+e.height)),this}bearing(e){const t=P.create(e),r=we.toRad(this.y),i=we.toRad(t.y),s=this.x,o=t.x,a=we.toRad(o-s),l=Math.sin(a)*Math.cos(i),c=Math.cos(r)*Math.sin(i)-Math.sin(r)*Math.cos(i)*Math.cos(a),u=we.toDeg(Math.atan2(l,c)),h=["NE","E","SE","S","SW","W","NW","N"];let f=u-22.5;return f<0&&(f+=360),f=parseInt(f/45,10),h[f]}cross(e,t){if(e!=null&&t!=null){const r=P.create(e),i=P.create(t);return(i.x-this.x)*(r.y-this.y)-(i.y-this.y)*(r.x-this.x)}return NaN}dot(e){const t=P.create(e);return this.x*t.x+this.y*t.y}diff(e,t){if(typeof e=="number")return new P(this.x-e,this.y-t);const r=P.create(e);return new P(this.x-r.x,this.y-r.y)}lerp(e,t){const r=P.create(e);return new P((1-t)*this.x+t*r.x,(1-t)*this.y+t*r.y)}normalize(e=1){const t=e/this.magnitude();return this.scale(t,t)}move(e,t){const r=P.create(e),i=we.toRad(r.theta(this));return this.translate(Math.cos(i)*t,-Math.sin(i)*t)}reflection(e){return P.create(e).move(this,this.distance(e))}snapToGrid(e,t){return this.x=xe.snapToGrid(this.x,e),this.y=xe.snapToGrid(this.y,t==null?e:t),this}equals(e){const t=P.create(e);return t!=null&&t.x===this.x&&t.y===this.y}clone(){return P.clone(this)}toJSON(){return P.toJSON(this)}serialize(){return`${this.x} ${this.y}`}}(function(n){function e(t){return t!=null&&t instanceof n}n.isPoint=e})(P||(P={})),function(n){function e(r){return r!=null&&typeof r=="object"&&typeof r.x=="number"&&typeof r.y=="number"}n.isPointLike=e;function t(r){return r!=null&&Array.isArray(r)&&r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"}n.isPointData=t}(P||(P={})),function(n){function e(h,f){return h==null||typeof h=="number"?new n(h,f):t(h)}n.create=e;function t(h){return n.isPoint(h)?new n(h.x,h.y):Array.isArray(h)?new n(h[0],h[1]):new n(h.x,h.y)}n.clone=t;function r(h){return n.isPoint(h)?{x:h.x,y:h.y}:Array.isArray(h)?{x:h[0],y:h[1]}:{x:h.x,y:h.y}}n.toJSON=r;function i(h,f,d=new n){let g=Math.abs(h*Math.cos(f)),p=Math.abs(h*Math.sin(f));const b=t(d),m=we.normalize(we.toDeg(f));return m<90?p=-p:m<180?(g=-g,p=-p):m<270&&(g=-g),new n(b.x+g,b.y+p)}n.fromPolar=i;function s(h,f=new n){const d=t(h),g=t(f),p=d.x-g.x,b=d.y-g.y;return new n(Math.sqrt(p*p+b*b),we.toRad(g.theta(d)))}n.toPolar=s;function o(h,f){return h===f?!0:h!=null&&f!=null?h.x===f.x&&h.y===f.y:!1}n.equals=o;function a(h,f){if(h==null&&f!=null||h!=null&&f==null||h!=null&&f!=null&&h.length!==f.length)return!1;if(h!=null&&f!=null){for(let d=0,g=h.length;d<g;d+=1)if(!o(h[d],f[d]))return!1}return!0}n.equalPoints=a;function l(h,f,d,g){return new n(xe.random(h,f),xe.random(d,g))}n.random=l;function c(h,f,d){const g=we.toRad(we.normalize(-f)),p=Math.sin(g),b=Math.cos(g);return u(h,b,p,d)}n.rotate=c;function u(h,f,d,g=new n){const p=t(h),b=t(g),m=p.x-b.x,y=p.y-b.y,v=m*f-y*d,w=y*f+m*d;return new n(v+b.x,w+b.y)}n.rotateEx=u}(P||(P={}));class D extends _r{get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get origin(){return new P(this.x,this.y)}get topLeft(){return new P(this.x,this.y)}get topCenter(){return new P(this.x+this.width/2,this.y)}get topRight(){return new P(this.x+this.width,this.y)}get center(){return new P(this.x+this.width/2,this.y+this.height/2)}get bottomLeft(){return new P(this.x,this.y+this.height)}get bottomCenter(){return new P(this.x+this.width/2,this.y+this.height)}get bottomRight(){return new P(this.x+this.width,this.y+this.height)}get corner(){return new P(this.x+this.width,this.y+this.height)}get rightMiddle(){return new P(this.x+this.width,this.y+this.height/2)}get leftMiddle(){return new P(this.x,this.y+this.height/2)}get topLine(){return new V(this.topLeft,this.topRight)}get rightLine(){return new V(this.topRight,this.bottomRight)}get bottomLine(){return new V(this.bottomLeft,this.bottomRight)}get leftLine(){return new V(this.topLeft,this.bottomLeft)}constructor(e,t,r,i){super(),this.x=e==null?0:e,this.y=t==null?0:t,this.width=r==null?0:r,this.height=i==null?0:i}getOrigin(){return this.origin}getTopLeft(){return this.topLeft}getTopCenter(){return this.topCenter}getTopRight(){return this.topRight}getCenter(){return this.center}getCenterX(){return this.x+this.width/2}getCenterY(){return this.y+this.height/2}getBottomLeft(){return this.bottomLeft}getBottomCenter(){return this.bottomCenter}getBottomRight(){return this.bottomRight}getCorner(){return this.corner}getRightMiddle(){return this.rightMiddle}getLeftMiddle(){return this.leftMiddle}getTopLine(){return this.topLine}getRightLine(){return this.rightLine}getBottomLine(){return this.bottomLine}getLeftLine(){return this.leftLine}bbox(e){if(!e)return this.clone();const t=we.toRad(e),r=Math.abs(Math.sin(t)),i=Math.abs(Math.cos(t)),s=this.width*i+this.height*r,o=this.width*r+this.height*i;return new D(this.x+(this.width-s)/2,this.y+(this.height-o)/2,s,o)}round(e=0){return this.x=xe.round(this.x,e),this.y=xe.round(this.y,e),this.width=xe.round(this.width,e),this.height=xe.round(this.height,e),this}add(e,t,r,i){const s=D.create(e,t,r,i),o=Math.min(this.x,s.x),a=Math.min(this.y,s.y),l=Math.max(this.x+this.width,s.x+s.width),c=Math.max(this.y+this.height,s.y+s.height);return this.x=o,this.y=a,this.width=l-o,this.height=c-a,this}update(e,t,r,i){const s=D.create(e,t,r,i);return this.x=s.x,this.y=s.y,this.width=s.width,this.height=s.height,this}inflate(e,t){const r=e,i=t!=null?t:e;return this.x-=r,this.y-=i,this.width+=2*r,this.height+=2*i,this}snapToGrid(e,t){const r=this.origin.snapToGrid(e,t),i=this.corner.snapToGrid(e,t);return this.x=r.x,this.y=r.y,this.width=i.x-r.x,this.height=i.y-r.y,this}translate(e,t){const r=P.create(e,t);return this.x+=r.x,this.y+=r.y,this}scale(e,t,r=new P){const i=this.origin.scale(e,t,r);return this.x=i.x,this.y=i.y,this.width*=e,this.height*=t,this}rotate(e,t=this.getCenter()){if(e!==0){const r=we.toRad(e),i=Math.cos(r),s=Math.sin(r);let o=this.getOrigin(),a=this.getTopRight(),l=this.getBottomRight(),c=this.getBottomLeft();o=P.rotateEx(o,i,s,t),a=P.rotateEx(a,i,s,t),l=P.rotateEx(l,i,s,t),c=P.rotateEx(c,i,s,t);const u=new D(o.x,o.y,0,0);u.add(a.x,a.y,0,0),u.add(l.x,l.y,0,0),u.add(c.x,c.y,0,0),this.update(u)}return this}rotate90(){const e=(this.width-this.height)/2;this.x+=e,this.y-=e;const t=this.width;return this.width=this.height,this.height=t,this}moveAndExpand(e){const t=D.clone(e);return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this}getMaxScaleToFit(e,t=this.center){const r=D.clone(e),i=t.x,s=t.y;let o=1/0,a=1/0,l=1/0,c=1/0,u=1/0,h=1/0,f=1/0,d=1/0;const g=r.topLeft;g.x<i&&(o=(this.x-i)/(g.x-i)),g.y<s&&(u=(this.y-s)/(g.y-s));const p=r.bottomRight;p.x>i&&(a=(this.x+this.width-i)/(p.x-i)),p.y>s&&(h=(this.y+this.height-s)/(p.y-s));const b=r.topRight;b.x>i&&(l=(this.x+this.width-i)/(b.x-i)),b.y<s&&(f=(this.y-s)/(b.y-s));const m=r.bottomLeft;return m.x<i&&(c=(this.x-i)/(m.x-i)),m.y>s&&(d=(this.y+this.height-s)/(m.y-s)),{sx:Math.min(o,a,l,c),sy:Math.min(u,h,f,d)}}getMaxUniformScaleToFit(e,t=this.center){const r=this.getMaxScaleToFit(e,t);return Math.min(r.sx,r.sy)}containsPoint(e,t){return xe.containsPoint(this,P.create(e,t))}containsRect(e,t,r,i){const s=D.create(e,t,r,i),o=this.x,a=this.y,l=this.width,c=this.height,u=s.x,h=s.y,f=s.width,d=s.height;return l===0||c===0||f===0||d===0?!1:u>=o&&h>=a&&u+f<=o+l&&h+d<=a+c}intersectsWithLine(e){const t=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],r=[],i=[];return t.forEach(s=>{const o=e.intersectsWithLine(s);o!==null&&i.indexOf(o.toString())<0&&(r.push(o),i.push(o.toString()))}),r.length>0?r:null}intersectsWithLineFromCenterToPoint(e,t){const r=P.clone(e),i=this.center;let s=null;t!=null&&t!==0&&r.rotate(t,i);const o=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],a=new V(i,r);for(let l=o.length-1;l>=0;l-=1){const c=o[l].intersectsWithLine(a);if(c!==null){s=c;break}}return s&&t!=null&&t!==0&&s.rotate(-t,i),s}intersectsWithRect(e,t,r,i){const s=D.create(e,t,r,i);if(!this.isIntersectWithRect(s))return null;const o=this.origin,a=this.corner,l=s.origin,c=s.corner,u=Math.max(o.x,l.x),h=Math.max(o.y,l.y);return new D(u,h,Math.min(a.x,c.x)-u,Math.min(a.y,c.y)-h)}isIntersectWithRect(e,t,r,i){const s=D.create(e,t,r,i),o=this.origin,a=this.corner,l=s.origin,c=s.corner;return!(c.x<=o.x||c.y<=o.y||l.x>=a.x||l.y>=a.y)}normalize(){let e=this.x,t=this.y,r=this.width,i=this.height;return this.width<0&&(e=this.x+this.width,r=-this.width),this.height<0&&(t=this.y+this.height,i=-this.height),this.x=e,this.y=t,this.width=r,this.height=i,this}union(e){const t=D.clone(e),r=this.origin,i=this.corner,s=t.origin,o=t.corner,a=Math.min(r.x,s.x),l=Math.min(r.y,s.y),c=Math.max(i.x,o.x),u=Math.max(i.y,o.y);return new D(a,l,c-a,u-l)}getNearestSideToPoint(e){const t=P.clone(e),r=t.x-this.x,i=this.x+this.width-t.x,s=t.y-this.y,o=this.y+this.height-t.y;let a=r,l="left";return i<a&&(a=i,l="right"),s<a&&(a=s,l="top"),o<a&&(l="bottom"),l}getNearestPointToPoint(e){const t=P.clone(e);if(this.containsPoint(t)){const r=this.getNearestSideToPoint(t);if(r==="left")return new P(this.x,t.y);if(r==="top")return new P(t.x,this.y);if(r==="right")return new P(this.x+this.width,t.y);if(r==="bottom")return new P(t.x,this.y+this.height)}return t.adhereToRect(this)}equals(e){return e!=null&&e.x===this.x&&e.y===this.y&&e.width===this.width&&e.height===this.height}clone(){return new D(this.x,this.y,this.width,this.height)}toJSON(){return{x:this.x,y:this.y,width:this.width,height:this.height}}serialize(){return`${this.x} ${this.y} ${this.width} ${this.height}`}}(function(n){function e(t){return t!=null&&t instanceof n}n.isRectangle=e})(D||(D={})),function(n){function e(t){return t!=null&&typeof t=="object"&&typeof t.x=="number"&&typeof t.y=="number"&&typeof t.width=="number"&&typeof t.height=="number"}n.isRectangleLike=e}(D||(D={})),function(n){function e(o,a,l,c){return o==null||typeof o=="number"?new n(o,a,l,c):t(o)}n.create=e;function t(o){return n.isRectangle(o)?o.clone():Array.isArray(o)?new n(o[0],o[1],o[2],o[3]):new n(o.x,o.y,o.width,o.height)}n.clone=t;function r(o){return new n(o.x-o.a,o.y-o.b,2*o.a,2*o.b)}n.fromEllipse=r;function i(o){return new n(0,0,o.width,o.height)}n.fromSize=i;function s(o,a){return new n(o.x,o.y,a.width,a.height)}n.fromPositionAndSize=s}(D||(D={}));class V extends _r{get center(){return new P((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}constructor(e,t,r,i){super(),typeof e=="number"&&typeof t=="number"?(this.start=new P(e,t),this.end=new P(r,i)):(this.start=P.create(e),this.end=P.create(t))}getCenter(){return this.center}round(e=0){return this.start.round(e),this.end.round(e),this}translate(e,t){return typeof e=="number"?(this.start.translate(e,t),this.end.translate(e,t)):(this.start.translate(e),this.end.translate(e)),this}rotate(e,t){return this.start.rotate(e,t),this.end.rotate(e,t),this}scale(e,t,r){return this.start.scale(e,t,r),this.end.scale(e,t,r),this}length(){return Math.sqrt(this.squaredLength())}squaredLength(){const e=this.start.x-this.end.x,t=this.start.y-this.end.y;return e*e+t*t}setLength(e){const t=this.length();if(!t)return this;const r=e/t;return this.scale(r,r,this.start)}parallel(e){const t=this.clone();if(!t.isDifferentiable())return t;const{start:r,end:i}=t,s=r.clone().rotate(270,i),o=i.clone().rotate(90,r);return r.move(o,e),i.move(s,e),t}vector(){return new P(this.end.x-this.start.x,this.end.y-this.start.y)}angle(){const e=new P(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)}bbox(){const e=Math.min(this.start.x,this.end.x),t=Math.min(this.start.y,this.end.y),r=Math.max(this.start.x,this.end.x),i=Math.max(this.start.y,this.end.y);return new D(e,t,r-e,i-t)}bearing(){return this.start.bearing(this.end)}closestPoint(e){return this.pointAt(this.closestPointNormalizedLength(e))}closestPointLength(e){return this.closestPointNormalizedLength(e)*this.length()}closestPointTangent(e){return this.tangentAt(this.closestPointNormalizedLength(e))}closestPointNormalizedLength(e){const t=this.vector().dot(new V(this.start,e).vector()),r=Math.min(1,Math.max(0,t/this.squaredLength()));return Number.isNaN(r)?0:r}pointAt(e){const t=this.start,r=this.end;return e<=0?t.clone():e>=1?r.clone():t.lerp(r,e)}pointAtLength(e){const t=this.start,r=this.end;let i=!0;e<0&&(i=!1,e=-e);const s=this.length();if(e>=s)return i?r.clone():t.clone();const o=(i?e:s-e)/s;return this.pointAt(o)}divideAt(e){const t=this.pointAt(e);return[new V(this.start,t),new V(t,this.end)]}divideAtLength(e){const t=this.pointAtLength(e);return[new V(this.start,t),new V(t,this.end)]}containsPoint(e){const t=this.start,r=this.end;if(t.cross(e,r)!==0)return!1;const i=this.length();return!(new V(t,e).length()>i||new V(e,r).length()>i)}intersect(e,t){const r=e.intersectsWithLine(this,t);return r?Array.isArray(r)?r:[r]:null}intersectsWithLine(e){const t=new P(this.end.x-this.start.x,this.end.y-this.start.y),r=new P(e.end.x-e.start.x,e.end.y-e.start.y),i=t.x*r.y-t.y*r.x,s=new P(e.start.x-this.start.x,e.start.y-this.start.y),o=s.x*r.y-s.y*r.x,a=s.x*t.y-s.y*t.x;if(i===0||o*i<0||a*i<0)return null;if(i>0){if(o>i||a>i)return null}else if(o<i||a<i)return null;return new P(this.start.x+o*t.x/i,this.start.y+o*t.y/i)}isDifferentiable(){return!this.start.equals(this.end)}pointOffset(e){const t=P.clone(e),r=this.start,i=this.end;return((i.x-r.x)*(t.y-r.y)-(i.y-r.y)*(t.x-r.x))/this.length()}pointSquaredDistance(e,t){const r=P.create(e,t);return this.closestPoint(r).squaredDistance(r)}pointDistance(e,t){const r=P.create(e,t);return this.closestPoint(r).distance(r)}tangentAt(e){if(!this.isDifferentiable())return null;const t=this.start,r=this.end,i=this.pointAt(e),s=new V(t,r);return s.translate(i.x-t.x,i.y-t.y),s}tangentAtLength(e){if(!this.isDifferentiable())return null;const t=this.start,r=this.end,i=this.pointAtLength(e),s=new V(t,r);return s.translate(i.x-t.x,i.y-t.y),s}relativeCcw(e,t){const r=P.create(e,t);let i=r.x-this.start.x,s=r.y-this.start.y;const o=this.end.x-this.start.x,a=this.end.y-this.start.y;let l=i*a-s*o;return l===0&&(l=i*o+s*a,l>0&&(i-=o,s-=a,l=i*o+s*a,l<0&&(l=0))),l<0?-1:l>0?1:0}equals(e){return e!=null&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y}clone(){return new V(this.start,this.end)}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.end.serialize()].join(" ")}}(function(n){function e(t){return t!=null&&t instanceof n}n.isLine=e})(V||(V={}));class bn extends _r{get center(){return new P(this.x,this.y)}constructor(e,t,r,i){super(),this.x=e==null?0:e,this.y=t==null?0:t,this.a=r==null?0:r,this.b=i==null?0:i}bbox(){return D.fromEllipse(this)}getCenter(){return this.center}inflate(e,t){const r=e,i=t!=null?t:e;return this.a+=2*r,this.b+=2*i,this}normalizedDistance(e,t){const r=P.create(e,t),i=r.x-this.x,s=r.y-this.y,o=this.a,a=this.b;return i*i/(o*o)+s*s/(a*a)}containsPoint(e,t){return this.normalizedDistance(e,t)<=1}intersectsWithLine(e){const t=[],r=this.a,i=this.b,s=e.start,o=e.end,a=e.vector(),l=s.diff(new P(this.x,this.y)),c=new P(a.x/(r*r),a.y/(i*i)),u=new P(l.x/(r*r),l.y/(i*i)),h=a.dot(c),f=a.dot(u),d=l.dot(u)-1,g=f*f-h*d;if(g<0)return null;if(g>0){const p=Math.sqrt(g),b=(-f-p)/h,m=(-f+p)/h;if((b<0||b>1)&&(m<0||m>1))return null;b>=0&&b<=1&&t.push(s.lerp(o,b)),m>=0&&m<=1&&t.push(s.lerp(o,m))}else{const p=-f/h;if(p>=0&&p<=1)t.push(s.lerp(o,p));else return null}return t}intersectsWithLineFromCenterToPoint(e,t=0){const r=P.clone(e);t&&r.rotate(t,this.getCenter());const i=r.x-this.x,s=r.y-this.y;let o;if(i===0)return o=this.bbox().getNearestPointToPoint(r),t?o.rotate(-t,this.getCenter()):o;const a=s/i,l=a*a,c=this.a*this.a,u=this.b*this.b;let h=Math.sqrt(1/(1/c+l/u));h=i<0?-h:h;const f=a*h;return o=new P(this.x+h,this.y+f),t?o.rotate(-t,this.getCenter()):o}tangentTheta(e){const t=P.clone(e),r=t.x,i=t.y,s=this.a,o=this.b,a=this.bbox().center,l=a.x,c=a.y,u=30,h=r>a.x+s/2,f=r<a.x-s/2;let d,g;return h||f?(g=r>a.x?i-u:i+u,d=s*s/(r-l)-s*s*(i-c)*(g-c)/(o*o*(r-l))+l):(d=i>a.y?r+u:r-u,g=o*o/(i-c)-o*o*(r-l)*(d-l)/(s*s*(i-c))+c),new P(d,g).theta(t)}scale(e,t){return this.a*=e,this.b*=t,this}rotate(e,t){const r=D.fromEllipse(this);r.rotate(e,t);const i=bn.fromRect(r);return this.a=i.a,this.b=i.b,this.x=i.x,this.y=i.y,this}translate(e,t){const r=P.create(e,t);return this.x+=r.x,this.y+=r.y,this}equals(e){return e!=null&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b}clone(){return new bn(this.x,this.y,this.a,this.b)}toJSON(){return{x:this.x,y:this.y,a:this.a,b:this.b}}serialize(){return`${this.x} ${this.y} ${this.a} ${this.b}`}}(function(n){function e(t){return t!=null&&t instanceof n}n.isEllipse=e})(bn||(bn={})),function(n){function e(i,s,o,a){return i==null||typeof i=="number"?new n(i,s,o,a):t(i)}n.create=e;function t(i){return n.isEllipse(i)?i.clone():Array.isArray(i)?new n(i[0],i[1],i[2],i[3]):new n(i.x,i.y,i.a,i.b)}n.parse=t;function r(i){const s=i.center;return new n(s.x,s.y,i.width/2,i.height/2)}n.fromRect=r}(bn||(bn={}));const hq=new RegExp("^[\\s\\dLMCZz,.]*$");function fq(n){return typeof n!="string"?!1:hq.test(n)}function lf(n,e){return(n%e+e)%e}function dq(n,e,t,r,i){const s=[],o=n[n.length-1],a=e!=null&&e>0,l=e||0;if(r&&a){n=n.slice();const h=n[0],f=new P(o.x+(h.x-o.x)/2,o.y+(h.y-o.y)/2);n.splice(0,0,f)}let c=n[0],u=1;for(t?s.push("M",c.x,c.y):s.push("L",c.x,c.y);u<(r?n.length:n.length-1);){let h=n[lf(u,n.length)],f=c.x-h.x,d=c.y-h.y;if(a&&(f!==0||d!==0)&&(i==null||i.indexOf(u-1)<0)){let g=Math.sqrt(f*f+d*d);const p=f*Math.min(l,g/2)/g,b=d*Math.min(l,g/2)/g,m=h.x+p,y=h.y+b;s.push("L",m,y);let v=n[lf(u+1,n.length)];for(;u<n.length-2&&Math.round(v.x-h.x)===0&&Math.round(v.y-h.y)===0;)v=n[lf(u+2,n.length)],u+=1;f=v.x-h.x,d=v.y-h.y,g=Math.max(1,Math.sqrt(f*f+d*d));const w=f*Math.min(l,g/2)/g,x=d*Math.min(l,g/2)/g,C=h.x+w,S=h.y+x;s.push("Q",h.x,h.y,C,S),h=new P(C,S)}else s.push("L",h.x,h.y);c=h,u+=1}return r?s.push("Z"):s.push("L",o.x,o.y),s.map(h=>typeof h=="string"?h:+h.toFixed(3)).join(" ")}function z1(n,e={}){const t=[];return n&&n.length&&n.forEach(r=>{Array.isArray(r)?t.push({x:r[0],y:r[1]}):t.push({x:r.x,y:r.y})}),dq(t,e.round,e.initialMove==null||e.initialMove,e.close,e.exclude)}function Wl(n,e,t,r,i=0,s=0,o=0,a,l){if(t===0||r===0)return[];a-=n,l-=e,t=Math.abs(t),r=Math.abs(r);const c=-a/2,u=-l/2,h=Math.cos(i*Math.PI/180),f=Math.sin(i*Math.PI/180),d=h*c+f*u,g=-1*f*c+h*u,p=d*d,b=g*g,m=t*t,y=r*r,v=p/m+b/y;let w;if(v>1)t=Math.sqrt(v)*t,r=Math.sqrt(v)*r,w=0;else{let pt=1;s===o&&(pt=-1),w=pt*Math.sqrt((m*y-m*b-y*p)/(m*b+y*p))}const x=w*t*g/r,C=-1*w*r*d/t,S=h*x-f*C+a/2,E=f*x+h*C+l/2;let A=Math.atan2((g-C)/r,(d-x)/t)-Math.atan2(0,1),O=A>=0?A:2*Math.PI+A;A=Math.atan2((-g-C)/r,(-d-x)/t)-Math.atan2((g-C)/r,(d-x)/t);let T=A>=0?A:2*Math.PI+A;o===0&&T>0?T-=2*Math.PI:o!==0&&T<0&&(T+=2*Math.PI);const k=T*2/Math.PI,B=Math.ceil(k<0?-1*k:k),W=T/B,M=8/3*Math.sin(W/4)*Math.sin(W/4)/Math.sin(W/2),$=h*t,Y=h*r,j=f*t,F=f*r;let U=Math.cos(O),ne=Math.sin(O),Oe=-M*($*ne+F*U),Nn=-M*(j*ne-Y*U),at=0,kn=0;const lt=[];for(let pt=0;pt<B;pt+=1){O+=W,U=Math.cos(O),ne=Math.sin(O),at=$*U-F*ne+S,kn=j*U+Y*ne+E;const ho=-M*($*ne+F*U),fo=-M*(j*ne-Y*U),$n=pt*6;lt[$n]=Number(Oe+n),lt[$n+1]=Number(Nn+e),lt[$n+2]=Number(at-ho+n),lt[$n+3]=Number(kn-fo+e),lt[$n+4]=Number(at+n),lt[$n+5]=Number(kn+e),Oe=at+ho,Nn=kn+fo}return lt.map(pt=>+pt.toFixed(2))}function gq(n,e,t,r,i=0,s=0,o=0,a,l){const c=[],u=Wl(n,e,t,r,i,s,o,a,l);if(u!=null)for(let h=0,f=u.length;h<f;h+=6)c.push("C",u[h],u[h+1],u[h+2],u[h+3],u[h+4],u[h+5]);return c.join(" ")}class Ue extends _r{get start(){return this.points[0]||null}get end(){return this.points[this.points.length-1]||null}constructor(e){if(super(),e!=null){if(typeof e=="string")return Ue.parse(e);this.points=e.map(t=>P.create(t))}else this.points=[]}scale(e,t,r=new P){return this.points.forEach(i=>i.scale(e,t,r)),this}rotate(e,t){return this.points.forEach(r=>r.rotate(e,t)),this}translate(e,t){const r=P.create(e,t);return this.points.forEach(i=>i.translate(r.x,r.y)),this}round(e=0){return this.points.forEach(t=>t.round(e)),this}bbox(){if(this.points.length===0)return new D;let e=1/0,t=-1/0,r=1/0,i=-1/0;const s=this.points;for(let o=0,a=s.length;o<a;o+=1){const l=s[o],c=l.x,u=l.y;c<e&&(e=c),c>t&&(t=c),u<r&&(r=u),u>i&&(i=u)}return new D(e,r,t-e,i-r)}closestPoint(e){const t=this.closestPointLength(e);return this.pointAtLength(t)}closestPointLength(e){const t=this.points,r=t.length;if(r===0||r===1)return 0;let i=0,s=0,o=1/0;for(let a=0,l=r-1;a<l;a+=1){const c=new V(t[a],t[a+1]),u=c.length(),h=c.closestPointNormalizedLength(e),d=c.pointAt(h).squaredDistance(e);d<o&&(o=d,s=i+h*u),i+=u}return s}closestPointNormalizedLength(e){const t=this.length();return t===0?0:this.closestPointLength(e)/t}closestPointTangent(e){const t=this.closestPointLength(e);return this.tangentAtLength(t)}containsPoint(e){if(this.points.length===0)return!1;const t=P.clone(e),r=t.x,i=t.y,s=this.points,o=s.length;let a=o-1,l=0;for(let c=0;c<o;c+=1){const u=s[a],h=s[c];if(t.equals(u))return!0;const f=new V(u,h);if(f.containsPoint(e))return!0;if(i<=u.y&&i>h.y||i>u.y&&i<=h.y){const d=u.x-r>h.x-r?u.x-r:h.x-r;if(d>=0){const g=new P(r+d,i),p=new V(e,g);f.intersectsWithLine(p)&&(l+=1)}}a=c}return l%2===1}intersectsWithLine(e){const t=[];for(let r=0,i=this.points.length-1;r<i;r+=1){const s=this.points[r],o=this.points[r+1],a=e.intersectsWithLine(new V(s,o));a&&t.push(a)}return t.length>0?t:null}isDifferentiable(){for(let e=0,t=this.points.length-1;e<t;e+=1){const r=this.points[e],i=this.points[e+1];if(new V(r,i).isDifferentiable())return!0}return!1}length(){let e=0;for(let t=0,r=this.points.length-1;t<r;t+=1){const i=this.points[t],s=this.points[t+1];e+=i.distance(s)}return e}pointAt(e){const t=this.points,r=t.length;if(r===0)return null;if(r===1||e<=0)return t[0].clone();if(e>=1)return t[r-1].clone();const s=this.length()*e;return this.pointAtLength(s)}pointAtLength(e){const t=this.points,r=t.length;if(r===0)return null;if(r===1)return t[0].clone();let i=!0;e<0&&(i=!1,e=-e);let s=0;for(let a=0,l=r-1;a<l;a+=1){const c=i?a:l-1-a,u=t[c],h=t[c+1],f=new V(u,h),d=u.distance(h);if(e<=s+d)return f.pointAtLength((i?1:-1)*(e-s));s+=d}return(i?t[r-1]:t[0]).clone()}tangentAt(e){const r=this.points.length;if(r===0||r===1)return null;e<0&&(e=0),e>1&&(e=1);const s=this.length()*e;return this.tangentAtLength(s)}tangentAtLength(e){const t=this.points,r=t.length;if(r===0||r===1)return null;let i=!0;e<0&&(i=!1,e=-e);let s,o=0;for(let a=0,l=r-1;a<l;a+=1){const c=i?a:l-1-a,u=t[c],h=t[c+1],f=new V(u,h),d=u.distance(h);if(f.isDifferentiable()){if(e<=o+d)return f.tangentAtLength((i?1:-1)*(e-o));s=f}o+=d}if(s){const a=i?1:0;return s.tangentAt(a)}return null}simplify(e={}){const t=this.points;if(t.length<3)return this;const r=e.threshold||0;let i=0;for(;t[i+2];){const s=i,o=i+1,a=i+2,l=t[s],c=t[o],u=t[a];new V(l,u).closestPoint(c).distance(c)<=r?t.splice(o,1):i+=1}return this}toHull(){const e=this.points,t=e.length;if(t===0)return new Ue;let r=e[0];for(let f=1;f<t;f+=1)(e[f].y<r.y||e[f].y===r.y&&e[f].x>r.x)&&(r=e[f]);const i=[];for(let f=0;f<t;f+=1){let d=r.theta(e[f]);d===0&&(d=360),i.push([e[f],f,d])}if(i.sort((f,d)=>{let g=f[2]-d[2];return g===0&&(g=d[1]-f[1]),g}),i.length>2){const f=i[i.length-1];i.unshift(f)}const s={},o=[],a=f=>`${f[0].toString()}@${f[1]}`;for(;i.length!==0;){const f=i.pop(),d=f[0];if(s[a(f)])continue;let g=!1;for(;!g;)if(o.length<2)o.push(f),g=!0;else{const p=o.pop(),b=p[0],m=o.pop(),y=m[0],v=y.cross(b,d);if(v<0)o.push(m),o.push(p),o.push(f),g=!0;else if(v===0){const x=b.angleBetween(y,d);Math.abs(x-180)<1e-10||b.equals(d)||y.equals(b)?(s[a(p)]=b,o.push(m)):Math.abs((x+1)%360-1)<1e-10&&(o.push(m),i.push(p))}else s[a(p)]=b,o.push(m)}}o.length>2&&o.pop();let l,c=-1;for(let f=0,d=o.length;f<d;f+=1){const g=o[f][1];(l===void 0||g<l)&&(l=g,c=f)}let u=[];if(c>0){const f=o.slice(c),d=o.slice(0,c);u=f.concat(d)}else u=o;const h=[];for(let f=0,d=u.length;f<d;f+=1)h.push(u[f][0]);return new Ue(h)}equals(e){return e==null||e.points.length!==this.points.length?!1:e.points.every((t,r)=>t.equals(this.points[r]))}clone(){return new Ue(this.points.map(e=>e.clone()))}toJSON(){return this.points.map(e=>e.toJSON())}serialize(){return this.points.map(e=>`${e.serialize()}`).join(" ")}}(function(n){function e(t){return t!=null&&t instanceof n}n.isPolyline=e})(Ue||(Ue={})),function(n){function e(t){const r=t.trim();if(r==="")return new n;const i=[],s=r.split(/\s*,\s*|\s+/);for(let o=0,a=s.length;o<a;o+=2)i.push({x:+s[o],y:+s[o+1]});return new n(i)}n.parse=e}(Ue||(Ue={}));class Ve extends _r{constructor(e,t,r,i){super(),this.PRECISION=3,this.start=P.create(e),this.controlPoint1=P.create(t),this.controlPoint2=P.create(r),this.end=P.create(i)}bbox(){const e=this.start,t=this.controlPoint1,r=this.controlPoint2,i=this.end,s=e.x,o=e.y,a=t.x,l=t.y,c=r.x,u=r.y,h=i.x,f=i.y,d=[],g=[[],[]];let p,b,m,y,v,w,x,C;for(let $=0;$<2;$+=1){if($===0?(b=6*s-12*a+6*c,p=-3*s+9*a-9*c+3*h,m=3*a-3*s):(b=6*o-12*l+6*u,p=-3*o+9*l-9*u+3*f,m=3*l-3*o),Math.abs(p)<1e-12){if(Math.abs(b)<1e-12)continue;y=-m/b,y>0&&y<1&&d.push(y);continue}x=b*b-4*m*p,C=Math.sqrt(x),!(x<0)&&(v=(-b+C)/(2*p),v>0&&v<1&&d.push(v),w=(-b-C)/(2*p),w>0&&w<1&&d.push(w))}let S,E,A,O=d.length;const T=O;for(;O;)O-=1,y=d[O],A=1-y,S=A*A*A*s+3*A*A*y*a+3*A*y*y*c+y*y*y*h,g[0][O]=S,E=A*A*A*o+3*A*A*y*l+3*A*y*y*u+y*y*y*f,g[1][O]=E;d[T]=0,d[T+1]=1,g[0][T]=s,g[1][T]=o,g[0][T+1]=h,g[1][T+1]=f,d.length=T+2,g[0].length=T+2,g[1].length=T+2;const k=Math.min.apply(null,g[0]),B=Math.min.apply(null,g[1]),W=Math.max.apply(null,g[0]),M=Math.max.apply(null,g[1]);return new D(k,B,W-k,M-B)}closestPoint(e,t={}){return this.pointAtT(this.closestPointT(e,t))}closestPointLength(e,t={}){const r=this.getOptions(t);return this.lengthAtT(this.closestPointT(e,r),r)}closestPointNormalizedLength(e,t={}){const r=this.getOptions(t),i=this.closestPointLength(e,r);if(!i)return 0;const s=this.length(r);return s===0?0:i/s}closestPointT(e,t={}){const r=this.getPrecision(t),i=this.getDivisions(t),s=Math.pow(10,-r);let o=null,a=0,l=0,c=0,u=0,h=0,f=null;const d=i.length;let g=d>0?1/d:0;for(i.forEach((p,b)=>{const m=p.start.distance(e),y=p.end.distance(e),v=m+y;(f==null||v<f)&&(o=p,a=b*g,l=(b+1)*g,c=m,u=y,f=v,h=p.endpointDistance())});;){const p=c?Math.abs(c-u)/c:0,b=u!=null?Math.abs(c-u)/u:0,m=p<s||b<s,y=c?c<h*s:!0,v=u?u<h*s:!0;if(m||(y||v))return c<=u?a:l;const x=o.divide(.5);g/=2;const C=x[0].start.distance(e),S=x[0].end.distance(e),E=C+S,A=x[1].start.distance(e),O=x[1].end.distance(e),T=A+O;E<=T?(o=x[0],l-=g,c=C,u=S):(o=x[1],a+=g,c=A,u=O)}}closestPointTangent(e,t={}){return this.tangentAtT(this.closestPointT(e,t))}containsPoint(e,t={}){return this.toPolyline(t).containsPoint(e)}divideAt(e,t={}){if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);const r=this.tAt(e,t);return this.divideAtT(r)}divideAtLength(e,t={}){const r=this.tAtLength(e,t);return this.divideAtT(r)}divide(e){return this.divideAtT(e)}divideAtT(e){const t=this.start,r=this.controlPoint1,i=this.controlPoint2,s=this.end;if(e<=0)return[new Ve(t,t,t,t),new Ve(t,r,i,s)];if(e>=1)return[new Ve(t,r,i,s),new Ve(s,s,s,s)];const o=this.getSkeletonPoints(e),a=o.startControlPoint1,l=o.startControlPoint2,c=o.divider,u=o.dividerControlPoint1,h=o.dividerControlPoint2;return[new Ve(t,a,l,c),new Ve(c,u,h,s)]}endpointDistance(){return this.start.distance(this.end)}getSkeletonPoints(e){const t=this.start,r=this.controlPoint1,i=this.controlPoint2,s=this.end;if(e<=0)return{startControlPoint1:t.clone(),startControlPoint2:t.clone(),divider:t.clone(),dividerControlPoint1:r.clone(),dividerControlPoint2:i.clone()};if(e>=1)return{startControlPoint1:r.clone(),startControlPoint2:i.clone(),divider:s.clone(),dividerControlPoint1:s.clone(),dividerControlPoint2:s.clone()};const o=new V(t,r).pointAt(e),a=new V(r,i).pointAt(e),l=new V(i,s).pointAt(e),c=new V(o,a).pointAt(e),u=new V(a,l).pointAt(e),h=new V(c,u).pointAt(e);return{startControlPoint1:o,startControlPoint2:c,divider:h,dividerControlPoint1:u,dividerControlPoint2:l}}getSubdivisions(e={}){const t=this.getPrecision(e);let r=[new Ve(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(t===0)return r;let i=this.endpointDistance();const s=Math.pow(10,-t);let o=0;for(;;){o+=1;const a=[];r.forEach(u=>{const h=u.divide(.5);a.push(h[0],h[1])});const l=a.reduce((u,h)=>u+h.endpointDistance(),0),c=l!==0?(l-i)/l:0;if(o>1&&c<s)return a;r=a,i=l}}length(e={}){return this.getDivisions(e).reduce((r,i)=>r+i.endpointDistance(),0)}lengthAtT(e,t={}){if(e<=0)return 0;const r=t.precision===void 0?this.PRECISION:t.precision;return this.divide(e)[0].length({precision:r})}pointAt(e,t={}){if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();const r=this.tAt(e,t);return this.pointAtT(r)}pointAtLength(e,t={}){const r=this.tAtLength(e,t);return this.pointAtT(r)}pointAtT(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider}isDifferentiable(){const e=this.start,t=this.controlPoint1,r=this.controlPoint2,i=this.end;return!(e.equals(t)&&t.equals(r)&&r.equals(i))}tangentAt(e,t={}){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);const r=this.tAt(e,t);return this.tangentAtT(r)}tangentAtLength(e,t={}){if(!this.isDifferentiable())return null;const r=this.tAtLength(e,t);return this.tangentAtT(r)}tangentAtT(e){if(!this.isDifferentiable())return null;e<0&&(e=0),e>1&&(e=1);const t=this.getSkeletonPoints(e),r=t.startControlPoint2,i=t.dividerControlPoint1,s=t.divider,o=new V(r,i);return o.translate(s.x-r.x,s.y-r.y),o}getPrecision(e={}){return e.precision==null?this.PRECISION:e.precision}getDivisions(e={}){if(e.subdivisions!=null)return e.subdivisions;const t=this.getPrecision(e);return this.getSubdivisions({precision:t})}getOptions(e={}){const t=this.getPrecision(e),r=this.getDivisions(e);return{precision:t,subdivisions:r}}tAt(e,t={}){if(e<=0)return 0;if(e>=1)return 1;const r=this.getOptions(t),s=this.length(r)*e;return this.tAtLength(s,r)}tAtLength(e,t={}){let r=!0;e<0&&(r=!1,e=-e);const i=this.getPrecision(t),s=this.getDivisions(t),o={precision:i,subdivisions:s};let a=null,l,c,u=0,h=0,f=0;const d=s.length;let g=d>0?1/d:0;for(let m=0;m<d;m+=1){const y=r?m:d-1-m,v=s[m],w=v.endpointDistance();if(e<=f+w){a=v,l=y*g,c=(y+1)*g,u=r?e-f:w+f-e,h=r?w+f-e:e-f;break}f+=w}if(a==null)return r?1:0;const p=this.length(o),b=Math.pow(10,-i);for(;;){let m;if(m=p!==0?u/p:0,m<b)return l;if(m=p!==0?h/p:0,m<b)return c;let y,v;const w=a.divide(.5);g/=2;const x=w[0].endpointDistance(),C=w[1].endpointDistance();u<=x?(a=w[0],c-=g,y=u,v=x-y):(a=w[1],l+=g,y=u-x,v=C-y),u=y,h=v}}toPoints(e={}){const t=this.getDivisions(e),r=[t[0].start.clone()];return t.forEach(i=>r.push(i.end.clone())),r}toPolyline(e={}){return new Ue(this.toPoints(e))}scale(e,t,r){return this.start.scale(e,t,r),this.controlPoint1.scale(e,t,r),this.controlPoint2.scale(e,t,r),this.end.scale(e,t,r),this}rotate(e,t){return this.start.rotate(e,t),this.controlPoint1.rotate(e,t),this.controlPoint2.rotate(e,t),this.end.rotate(e,t),this}translate(e,t){return typeof e=="number"?(this.start.translate(e,t),this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t)):(this.start.translate(e),this.controlPoint1.translate(e),this.controlPoint2.translate(e),this.end.translate(e)),this}equals(e){return e!=null&&this.start.equals(e.start)&&this.controlPoint1.equals(e.controlPoint1)&&this.controlPoint2.equals(e.controlPoint2)&&this.end.equals(e.end)}clone(){return new Ve(this.start,this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.controlPoint1.serialize(),this.controlPoint2.serialize(),this.end.serialize()].join(" ")}}(function(n){function e(t){return t!=null&&t instanceof n}n.isCurve=e})(Ve||(Ve={})),function(n){function e(i){const s=i.length,o=[],a=[];let l=2;o[0]=i[0]/l;for(let c=1;c<s;c+=1)a[c]=1/l,l=(c<s-1?4:3.5)-a[c],o[c]=(i[c]-o[c-1])/l;for(let c=1;c<s;c+=1)o[s-c-1]-=a[s-c]*o[s-c];return o}function t(i){const s=i.map(f=>P.clone(f)),o=[],a=[],l=s.length-1;if(l===1)return o[0]=new P((2*s[0].x+s[1].x)/3,(2*s[0].y+s[1].y)/3),a[0]=new P(2*o[0].x-s[0].x,2*o[0].y-s[0].y),[o,a];const c=[];for(let f=1;f<l-1;f+=1)c[f]=4*s[f].x+2*s[f+1].x;c[0]=s[0].x+2*s[1].x,c[l-1]=(8*s[l-1].x+s[l].x)/2;const u=e(c);for(let f=1;f<l-1;f+=1)c[f]=4*s[f].y+2*s[f+1].y;c[0]=s[0].y+2*s[1].y,c[l-1]=(8*s[l-1].y+s[l].y)/2;const h=e(c);for(let f=0;f<l;f+=1)o.push(new P(u[f],h[f])),f<l-1?a.push(new P(2*s[f+1].x-u[f+1],2*s[f+1].y-h[f+1])):a.push(new P((s[l].x+u[l-1])/2,(s[l].y+h[l-1])/2));return[o,a]}function r(i){if(i==null||Array.isArray(i)&&i.length<2)throw new Error("At least 2 points are required");const s=t(i),o=[];for(let a=0,l=s[0].length;a<l;a+=1){const c=new P(s[0][a].x,s[0][a].y),u=new P(s[1][a].x,s[1][a].y);o.push(new n(i[a],c,u,i[a+1]))}return o}n.throughPoints=r}(Ve||(Ve={}));class Xl extends _r{constructor(){super(...arguments),this.isVisible=!0,this.isSegment=!0,this.isSubpathStart=!1}get end(){return this.endPoint}get start(){if(this.previousSegment==null)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path, or segment has not yet been added to a path.)");return this.previousSegment.end}closestPointT(e,t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.")}lengthAtT(e,t){if(e<=0)return 0;const r=this.length();return e>=1?r:r*e}divideAtT(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither `divideAtT` nor `divideAt` method is implemented.")}pointAtT(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither `pointAtT` nor `pointAt` method is implemented.")}tangentAtT(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither `tangentAtT` nor `tangentAt` method is implemented.")}}class St extends Xl{constructor(e,t){super(),V.isLine(e)?this.endPoint=e.end.clone().round(2):this.endPoint=P.create(e,t).round(2)}get type(){return"L"}get line(){return new V(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(e){return this.line.closestPoint(e)}closestPointLength(e){return this.line.closestPointLength(e)}closestPointNormalizedLength(e){return this.line.closestPointNormalizedLength(e)}closestPointTangent(e){return this.line.closestPointTangent(e)}length(){return this.line.length()}divideAt(e){const t=this.line.divideAt(e);return[new St(t[0]),new St(t[1])]}divideAtLength(e){const t=this.line.divideAtLength(e);return[new St(t[0]),new St(t[1])]}getSubdivisions(){return[]}pointAt(e){return this.line.pointAt(e)}pointAtLength(e){return this.line.pointAtLength(e)}tangentAt(e){return this.line.tangentAt(e)}tangentAtLength(e){return this.line.tangentAtLength(e)}isDifferentiable(){return this.previousSegment==null?!1:!this.start.equals(this.end)}clone(){return new St(this.end)}scale(e,t,r){return this.end.scale(e,t,r),this}rotate(e,t){return this.end.rotate(e,t),this}translate(e,t){return typeof e=="number"?this.end.translate(e,t):this.end.translate(e),this}equals(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){const e=this.end;return`${this.type} ${e.x} ${e.y}`}}(function(n){function e(...t){const r=t.length,i=t[0];if(V.isLine(i))return new n(i);if(P.isPointLike(i))return r===1?new n(i):t.map(o=>new n(o));if(r===2)return new n(+t[0],+t[1]);const s=[];for(let o=0;o<r;o+=2){const a=+t[o],l=+t[o+1];s.push(new n(a,l))}return s}n.create=e})(St||(St={}));class vs extends Xl{get end(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. MoveTo), or segment has not yet been added to a path.)");return this.subpathStartSegment.end}get type(){return"Z"}get line(){return new V(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(e){return this.line.closestPoint(e)}closestPointLength(e){return this.line.closestPointLength(e)}closestPointNormalizedLength(e){return this.line.closestPointNormalizedLength(e)}closestPointTangent(e){return this.line.closestPointTangent(e)}length(){return this.line.length()}divideAt(e){const t=this.line.divideAt(e);return[t[1].isDifferentiable()?new St(t[0]):this.clone(),new St(t[1])]}divideAtLength(e){const t=this.line.divideAtLength(e);return[t[1].isDifferentiable()?new St(t[0]):this.clone(),new St(t[1])]}getSubdivisions(){return[]}pointAt(e){return this.line.pointAt(e)}pointAtLength(e){return this.line.pointAtLength(e)}tangentAt(e){return this.line.tangentAt(e)}tangentAtLength(e){return this.line.tangentAtLength(e)}isDifferentiable(){return!this.previousSegment||!this.subpathStartSegment?!1:!this.start.equals(this.end)}scale(){return this}rotate(){return this}translate(){return this}equals(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}clone(){return new vs}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return this.type}}(function(n){function e(){return new n}n.create=e})(vs||(vs={}));class bs extends Xl{constructor(e,t){super(),this.isVisible=!1,this.isSubpathStart=!0,V.isLine(e)||Ve.isCurve(e)?this.endPoint=e.end.clone().round(2):this.endPoint=P.create(e,t).round(2)}get start(){throw new Error("Illegal access. Moveto segments should not need a start property.")}get type(){return"M"}bbox(){return null}closestPoint(){return this.end.clone()}closestPointLength(){return 0}closestPointNormalizedLength(){return 0}closestPointT(){return 1}closestPointTangent(){return null}length(){return 0}lengthAtT(){return 0}divideAt(){return[this.clone(),this.clone()]}divideAtLength(){return[this.clone(),this.clone()]}getSubdivisions(){return[]}pointAt(){return this.end.clone()}pointAtLength(){return this.end.clone()}pointAtT(){return this.end.clone()}tangentAt(){return null}tangentAtLength(){return null}tangentAtT(){return null}isDifferentiable(){return!1}scale(e,t,r){return this.end.scale(e,t,r),this}rotate(e,t){return this.end.rotate(e,t),this}translate(e,t){return typeof e=="number"?this.end.translate(e,t):this.end.translate(e),this}clone(){return new bs(this.end)}equals(e){return this.type===e.type&&this.end.equals(e.end)}toJSON(){return{type:this.type,end:this.end.toJSON()}}serialize(){const e=this.end;return`${this.type} ${e.x} ${e.y}`}}(function(n){function e(...t){const r=t.length,i=t[0];if(V.isLine(i))return new n(i);if(Ve.isCurve(i))return new n(i);if(P.isPointLike(i)){if(r===1)return new n(i);const o=[];for(let a=0;a<r;a+=1)a===0?o.push(new n(t[a])):o.push(new St(t[a]));return o}if(r===2)return new n(+t[0],+t[1]);const s=[];for(let o=0;o<r;o+=2){const a=+t[o],l=+t[o+1];o===0?s.push(new n(a,l)):s.push(new St(a,l))}return s}n.create=e})(bs||(bs={}));class nn extends Xl{constructor(e,t,r,i,s,o){super(),Ve.isCurve(e)?(this.controlPoint1=e.controlPoint1.clone().round(2),this.controlPoint2=e.controlPoint2.clone().round(2),this.endPoint=e.end.clone().round(2)):typeof e=="number"?(this.controlPoint1=new P(e,t).round(2),this.controlPoint2=new P(r,i).round(2),this.endPoint=new P(s,o).round(2)):(this.controlPoint1=P.create(e).round(2),this.controlPoint2=P.create(t).round(2),this.endPoint=P.create(r).round(2))}get type(){return"C"}get curve(){return new Ve(this.start,this.controlPoint1,this.controlPoint2,this.end)}bbox(){return this.curve.bbox()}closestPoint(e){return this.curve.closestPoint(e)}closestPointLength(e){return this.curve.closestPointLength(e)}closestPointNormalizedLength(e){return this.curve.closestPointNormalizedLength(e)}closestPointTangent(e){return this.curve.closestPointTangent(e)}length(){return this.curve.length()}divideAt(e,t={}){const r=this.curve.divideAt(e,t);return[new nn(r[0]),new nn(r[1])]}divideAtLength(e,t={}){const r=this.curve.divideAtLength(e,t);return[new nn(r[0]),new nn(r[1])]}divideAtT(e){const t=this.curve.divideAtT(e);return[new nn(t[0]),new nn(t[1])]}getSubdivisions(){return[]}pointAt(e){return this.curve.pointAt(e)}pointAtLength(e){return this.curve.pointAtLength(e)}tangentAt(e){return this.curve.tangentAt(e)}tangentAtLength(e){return this.curve.tangentAtLength(e)}isDifferentiable(){if(!this.previousSegment)return!1;const e=this.start,t=this.controlPoint1,r=this.controlPoint2,i=this.end;return!(e.equals(t)&&t.equals(r)&&r.equals(i))}scale(e,t,r){return this.controlPoint1.scale(e,t,r),this.controlPoint2.scale(e,t,r),this.end.scale(e,t,r),this}rotate(e,t){return this.controlPoint1.rotate(e,t),this.controlPoint2.rotate(e,t),this.end.rotate(e,t),this}translate(e,t){return typeof e=="number"?(this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t)):(this.controlPoint1.translate(e),this.controlPoint2.translate(e),this.end.translate(e)),this}equals(e){return this.start.equals(e.start)&&this.end.equals(e.end)&&this.controlPoint1.equals(e.controlPoint1)&&this.controlPoint2.equals(e.controlPoint2)}clone(){return new nn(this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){const e=this.controlPoint1,t=this.controlPoint2,r=this.end;return[this.type,e.x,e.y,t.x,t.y,r.x,r.y].join(" ")}}(function(n){function e(...t){const r=t.length,i=t[0];if(Ve.isCurve(i))return new n(i);if(P.isPointLike(i)){if(r===3)return new n(t[0],t[1],t[2]);const o=[];for(let a=0;a<r;a+=3)o.push(new n(t[a],t[a+1],t[a+2]));return o}if(r===6)return new n(t[0],t[1],t[2],t[3],t[4],t[5]);const s=[];for(let o=0;o<r;o+=6)s.push(new n(t[o],t[o+1],t[o+2],t[o+3],t[o+4],t[o+5]));return s}n.create=e})(nn||(nn={}));function Yl(n,e,t){return{x:n*Math.cos(t)-e*Math.sin(t),y:n*Math.sin(t)+e*Math.cos(t)}}function F1(n,e,t,r,i,s){const o=.3333333333333333,a=2/3;return[o*n+a*t,o*e+a*r,o*i+a*t,o*s+a*r,i,s]}function V1(n,e,t,r,i,s,o,a,l,c){const u=Math.PI*120/180,h=Math.PI/180*(+i||0);let f=[],d,g,p,b,m;if(c)g=c[0],p=c[1],b=c[2],m=c[3];else{d=Yl(n,e,-h),n=d.x,e=d.y,d=Yl(a,l,-h),a=d.x,l=d.y;const W=(n-a)/2,M=(e-l)/2;let $=W*W/(t*t)+M*M/(r*r);$>1&&($=Math.sqrt($),t=$*t,r=$*r);const Y=t*t,j=r*r,F=(s===o?-1:1)*Math.sqrt(Math.abs((Y*j-Y*M*M-j*W*W)/(Y*M*M+j*W*W)));b=F*t*M/r+(n+a)/2,m=F*-r*W/t+(e+l)/2,g=Math.asin((e-m)/r),p=Math.asin((l-m)/r),g=n<b?Math.PI-g:g,p=a<b?Math.PI-p:p,g<0&&(g=Math.PI*2+g),p<0&&(p=Math.PI*2+p),o&&g>p&&(g-=Math.PI*2),!o&&p>g&&(p-=Math.PI*2)}let y=p-g;if(Math.abs(y)>u){const W=p,M=a,$=l;p=g+u*(o&&p>g?1:-1),a=b+t*Math.cos(p),l=m+r*Math.sin(p),f=V1(a,l,t,r,i,0,o,M,$,[p,W,b,m])}y=p-g;const v=Math.cos(g),w=Math.sin(g),x=Math.cos(p),C=Math.sin(p),S=Math.tan(y/4),E=4/3*(t*S),A=4/3*(r*S),O=[n,e],T=[n+E*w,e-A*v],k=[a+E*C,l-A*x],B=[a,l];if(T[0]=2*O[0]-T[0],T[1]=2*O[1]-T[1],c)return[T,k,B].concat(f);{f=[T,k,B].concat(f).join().split(",");const W=[],M=f.length;for(let $=0;$<M;$+=1)W[$]=$%2?Yl(+f[$-1],+f[$],h).y:Yl(+f[$],+f[$+1],h).x;return W}}function pq(n){if(!n)return null;const e=`	
\v\f\r   ᠎             　\u2028\u2029`,t=new RegExp(`([a-z])[${e},]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[${e}]*,?[${e}]*)+)`,"ig"),r=new RegExp(`(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[${e}]*,?[${e}]*`,"ig"),i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},s=[];return n.replace(t,(o,a,l)=>{const c=[];let u=a.toLowerCase();l.replace(r,(f,d)=>(d&&c.push(+d),f)),u==="m"&&c.length>2&&(s.push([a,...c.splice(0,2)]),u="l",a=a==="m"?"l":"L");const h=i[u];for(;c.length>=h&&(s.push([a,...c.splice(0,h)]),!!h););return o}),s}function mq(n){const e=pq(n);if(!e||!e.length)return[["M",0,0]];let t=0,r=0,i=0,s=0;const o=[];for(let a=0,l=e.length;a<l;a+=1){const c=[];o.push(c);const u=e[a],h=u[0];if(h!==h.toUpperCase())switch(c[0]=h.toUpperCase(),c[0]){case"A":c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=+u[6]+t,c[7]=+u[7]+r;break;case"V":c[1]=+u[1]+r;break;case"H":c[1]=+u[1]+t;break;case"M":i=+u[1]+t,s=+u[2]+r;for(let f=1,d=u.length;f<d;f+=1)c[f]=+u[f]+(f%2?t:r);break;default:for(let f=1,d=u.length;f<d;f+=1)c[f]=+u[f]+(f%2?t:r);break}else for(let f=0,d=u.length;f<d;f+=1)c[f]=u[f];switch(c[0]){case"Z":t=+i,r=+s;break;case"H":t=c[1];break;case"V":r=c[1];break;case"M":i=c[c.length-2],s=c[c.length-1],t=c[c.length-2],r=c[c.length-1];break;default:t=c[c.length-2],r=c[c.length-1];break}}return o}function yq(n){const e=mq(n),t={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function r(l,c,u){let h,f;if(!l)return["C",c.x,c.y,c.x,c.y,c.x,c.y];switch(l[0]in{T:1,Q:1}||(c.qx=null,c.qy=null),l[0]){case"M":c.X=l[1],c.Y=l[2];break;case"A":return parseFloat(l[1])===0||parseFloat(l[2])===0?["L",l[6],l[7]]:["C"].concat(V1.apply(0,[c.x,c.y].concat(l.slice(1))));case"S":return u==="C"||u==="S"?(h=c.x*2-c.bx,f=c.y*2-c.by):(h=c.x,f=c.y),["C",h,f].concat(l.slice(1));case"T":return u==="Q"||u==="T"?(c.qx=c.x*2-c.qx,c.qy=c.y*2-c.qy):(c.qx=c.x,c.qy=c.y),["C"].concat(F1(c.x,c.y,c.qx,c.qy,l[1],l[2]));case"Q":return c.qx=l[1],c.qy=l[2],["C"].concat(F1(c.x,c.y,l[1],l[2],l[3],l[4]));case"H":return["L"].concat(l[1],c.y);case"V":return["L"].concat(c.x,l[1])}return l}function i(l,c){if(l[c].length>7){l[c].shift();const u=l[c];for(;u.length;)s[c]="A",c+=1,l.splice(c,0,["C"].concat(u.splice(0,6)));l.splice(c,1),a=e.length}}const s=[];let o="",a=e.length;for(let l=0;l<a;l+=1){let c="";e[l]&&(c=e[l][0]),c!=="C"&&(s[l]=c,l>0&&(o=s[l-1])),e[l]=r(e[l],t,o),s[l]!=="A"&&c==="C"&&(s[l]="C"),i(e,l);const u=e[l],h=u.length;t.x=u[h-2],t.y=u[h-1],t.bx=parseFloat(u[h-4])||t.x,t.by=parseFloat(u[h-3])||t.y}return(!e[0][0]||e[0][0]!=="M")&&e.unshift(["M",0,0]),e}function vq(n){return yq(n).map(e=>e.map(t=>typeof t=="string"?t:xe.round(t,2))).join(",").split(",").join(" ")}class X extends _r{constructor(e){if(super(),this.PRECISION=3,this.segments=[],Array.isArray(e))if(V.isLine(e[0])||Ve.isCurve(e[0])){let t=null;e.forEach((i,s)=>{s===0&&this.appendSegment(X.createSegment("M",i.start)),t!=null&&!t.end.equals(i.start)&&this.appendSegment(X.createSegment("M",i.start)),V.isLine(i)?this.appendSegment(X.createSegment("L",i.end)):Ve.isCurve(i)&&this.appendSegment(X.createSegment("C",i.controlPoint1,i.controlPoint2,i.end)),t=i})}else e.forEach(r=>{r.isSegment&&this.appendSegment(r)});else e!=null&&(V.isLine(e)?(this.appendSegment(X.createSegment("M",e.start)),this.appendSegment(X.createSegment("L",e.end))):Ve.isCurve(e)?(this.appendSegment(X.createSegment("M",e.start)),this.appendSegment(X.createSegment("C",e.controlPoint1,e.controlPoint2,e.end))):Ue.isPolyline(e)?e.points&&e.points.length&&e.points.forEach((t,r)=>{const i=r===0?X.createSegment("M",t):X.createSegment("L",t);this.appendSegment(i)}):e.isSegment&&this.appendSegment(e))}get start(){const e=this.segments,t=e.length;if(t===0)return null;for(let r=0;r<t;r+=1){const i=e[r];if(i.isVisible)return i.start}return e[t-1].end}get end(){const e=this.segments,t=e.length;if(t===0)return null;for(let r=t-1;r>=0;r-=1){const i=e[r];if(i.isVisible)return i.end}return e[t-1].end}moveTo(...e){return this.appendSegment(bs.create.call(null,...e))}lineTo(...e){return this.appendSegment(St.create.call(null,...e))}curveTo(...e){return this.appendSegment(nn.create.call(null,...e))}arcTo(e,t,r,i,s,o,a){const l=this.end||new P,c=typeof o=="number"?Wl(l.x,l.y,e,t,r,i,s,o,a):Wl(l.x,l.y,e,t,r,i,s,o.x,o.y);if(c!=null)for(let u=0,h=c.length;u<h;u+=6)this.curveTo(c[u],c[u+1],c[u+2],c[u+3],c[u+4],c[u+5]);return this}quadTo(e,t,r,i){const s=this.end||new P,o=["M",s.x,s.y];if(typeof e=="number")o.push("Q",e,t,r,i);else{const l=t;o.push("Q",e.x,e.y,l.x,l.y)}const a=X.parse(o.join(" "));return this.appendSegment(a.segments.slice(1)),this}close(){return this.appendSegment(vs.create())}drawPoints(e,t={}){const r=z1(e,t),i=X.parse(r);i&&i.segments&&this.appendSegment(i.segments)}bbox(){const e=this.segments,t=e.length;if(t===0)return null;let r;for(let s=0;s<t;s+=1){const o=e[s];if(o.isVisible){const a=o.bbox();a!=null&&(r=r?r.union(a):a)}}if(r!=null)return r;const i=e[t-1];return new D(i.end.x,i.end.y,0,0)}appendSegment(e){const t=this.segments.length;let r=t!==0?this.segments[t-1]:null,i;const s=null;if(Array.isArray(e))for(let o=0,a=e.length;o<a;o+=1){const l=e[o];i=this.prepareSegment(l,r,s),this.segments.push(i),r=i}else e!=null&&e.isSegment&&(i=this.prepareSegment(e,r,s),this.segments.push(i));return this}insertSegment(e,t){const r=this.segments.length;if(e<0&&(e=r+e+1),e>r||e<0)throw new Error("Index out of range.");let i,s=null,o=null;if(r!==0&&(e>=1?(s=this.segments[e-1],o=s.nextSegment):(s=null,o=this.segments[0])),!Array.isArray(t))i=this.prepareSegment(t,s,o),this.segments.splice(e,0,i);else for(let a=0,l=t.length;a<l;a+=1){const c=t[a];i=this.prepareSegment(c,s,o),this.segments.splice(e+a,0,i),s=i}return this}removeSegment(e){const t=this.fixIndex(e),r=this.segments.splice(t,1)[0],i=r.previousSegment,s=r.nextSegment;return i&&(i.nextSegment=s),s&&(s.previousSegment=i),r.isSubpathStart&&s&&this.updateSubpathStartSegment(s),r}replaceSegment(e,t){const r=this.fixIndex(e);let i;const s=this.segments[r];let o=s.previousSegment;const a=s.nextSegment;let l=s.isSubpathStart;if(!Array.isArray(t))i=this.prepareSegment(t,o,a),this.segments.splice(r,1,i),l&&i.isSubpathStart&&(l=!1);else{this.segments.splice(e,1);for(let c=0,u=t.length;c<u;c+=1){const h=t[c];i=this.prepareSegment(h,o,a),this.segments.splice(e+c,0,i),o=i,l&&i.isSubpathStart&&(l=!1)}}l&&a&&this.updateSubpathStartSegment(a)}getSegment(e){const t=this.fixIndex(e);return this.segments[t]}fixIndex(e){const t=this.segments.length;if(t===0)throw new Error("Path has no segments.");let r=e;for(;r<0;)r=t+r;if(r>=t||r<0)throw new Error("Index out of range.");return r}segmentAt(e,t={}){const r=this.segmentIndexAt(e,t);return r?this.getSegment(r):null}segmentAtLength(e,t={}){const r=this.segmentIndexAtLength(e,t);return r?this.getSegment(r):null}segmentIndexAt(e,t={}){if(this.segments.length===0)return null;const r=xe.clamp(e,0,1),i=this.getOptions(t),o=this.length(i)*r;return this.segmentIndexAtLength(o,i)}segmentIndexAtLength(e,t={}){const r=this.segments.length;if(r===0)return null;let i=!0;e<0&&(i=!1,e=-e);const s=this.getPrecision(t),o=this.getSubdivisions(t);let a=0,l=null;for(let c=0;c<r;c+=1){const u=i?c:r-1-c,h=this.segments[u],f=o[u],d=h.length({precision:s,subdivisions:f});if(h.isVisible){if(e<=a+d)return u;l=u}a+=d}return l}getSegmentSubdivisions(e={}){const t=this.getPrecision(e),r=[];for(let i=0,s=this.segments.length;i<s;i+=1){const a=this.segments[i].getSubdivisions({precision:t});r.push(a)}return r}updateSubpathStartSegment(e){let t=e.previousSegment,r=e;for(;r&&!r.isSubpathStart;)t!=null?r.subpathStartSegment=t.subpathStartSegment:r.subpathStartSegment=null,t=r,r=r.nextSegment}prepareSegment(e,t,r){e.previousSegment=t,e.nextSegment=r,t!=null&&(t.nextSegment=e),r!=null&&(r.previousSegment=e);let i=e;return e.isSubpathStart&&(e.subpathStartSegment=e,i=r),i!=null&&this.updateSubpathStartSegment(i),e}closestPoint(e,t={}){const r=this.closestPointT(e,t);return r?this.pointAtT(r):null}closestPointLength(e,t={}){const r=this.getOptions(t),i=this.closestPointT(e,r);return i?this.lengthAtT(i,r):0}closestPointNormalizedLength(e,t={}){const r=this.getOptions(t),i=this.closestPointLength(e,r);if(i===0)return 0;const s=this.length(r);return s===0?0:i/s}closestPointT(e,t={}){if(this.segments.length===0)return null;const r=this.getPrecision(t),i=this.getSubdivisions(t);let s,o=1/0;for(let a=0,l=this.segments.length;a<l;a+=1){const c=this.segments[a],u=i[a];if(c.isVisible){const h=c.closestPointT(e,{precision:r,subdivisions:u}),f=c.pointAtT(h),d=xe.squaredLength(f,e);d<o&&(s={segmentIndex:a,value:h},o=d)}}return s||{segmentIndex:this.segments.length-1,value:1}}closestPointTangent(e,t={}){if(this.segments.length===0)return null;const r=this.getPrecision(t),i=this.getSubdivisions(t);let s,o=1/0;for(let a=0,l=this.segments.length;a<l;a+=1){const c=this.segments[a],u=i[a];if(c.isDifferentiable()){const h=c.closestPointT(e,{precision:r,subdivisions:u}),f=c.pointAtT(h),d=xe.squaredLength(f,e);d<o&&(s=c.tangentAtT(h),o=d)}}return s||null}containsPoint(e,t={}){const r=this.toPolylines(t);if(!r)return!1;let i=0;for(let s=0,o=r.length;s<o;s+=1)r[s].containsPoint(e)&&(i+=1);return i%2===1}pointAt(e,t={}){if(this.segments.length===0)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();const r=this.getOptions(t),s=this.length(r)*e;return this.pointAtLength(s,r)}pointAtLength(e,t={}){if(this.segments.length===0)return null;if(e===0)return this.start.clone();let r=!0;e<0&&(r=!1,e=-e);const i=this.getPrecision(t),s=this.getSubdivisions(t);let o,a=0;for(let c=0,u=this.segments.length;c<u;c+=1){const h=r?c:u-1-c,f=this.segments[h],d=s[h],g=f.length({precision:i,subdivisions:d});if(f.isVisible){if(e<=a+g)return f.pointAtLength((r?1:-1)*(e-a),{precision:i,subdivisions:d});o=f}a+=g}return o?r?o.end:o.start:this.segments[this.segments.length-1].end.clone()}pointAtT(e){const t=this.segments,r=t.length;if(r===0)return null;const i=e.segmentIndex;if(i<0)return t[0].pointAtT(0);if(i>=r)return t[r-1].pointAtT(1);const s=xe.clamp(e.value,0,1);return t[i].pointAtT(s)}divideAt(e,t={}){if(this.segments.length===0)return null;const r=xe.clamp(e,0,1),i=this.getOptions(t),o=this.length(i)*r;return this.divideAtLength(o,i)}divideAtLength(e,t={}){if(this.segments.length===0)return null;let r=!0;e<0&&(r=!1,e=-e);const i=this.getPrecision(t),s=this.getSubdivisions(t);let o=0,a,l,c,u,h;for(let x=0,C=this.segments.length;x<C;x+=1){const S=r?x:C-1-x,E=this.getSegment(S),A=s[S],O={precision:i,subdivisions:A},T=E.length(O);if(E.isDifferentiable()&&(c=E,u=S,e<=o+T)){l=S,a=E.divideAtLength((r?1:-1)*(e-o),O);break}o+=T}if(!c)return null;a||(l=u,h=r?1:0,a=c.divideAtT(h));const f=this.clone(),d=l;f.replaceSegment(d,a);const g=d;let p=d+1,b=d+2;a[0].isDifferentiable()||(f.removeSegment(g),p-=1,b-=1);const m=f.getSegment(p).start;f.insertSegment(p,X.createSegment("M",m)),b+=1,a[1].isDifferentiable()||(f.removeSegment(b-1),b-=1);const y=b-g-1;for(let x=b,C=f.segments.length;x<C;x+=1){const S=this.getSegment(x-y),E=f.getSegment(x);if(E.type==="Z"&&!S.subpathStartSegment.end.equals(E.subpathStartSegment.end)){const A=X.createSegment("L",S.end);f.replaceSegment(x,A)}}const v=new X(f.segments.slice(0,p)),w=new X(f.segments.slice(p));return[v,w]}intersectsWithLine(e,t={}){const r=this.toPolylines(t);if(r==null)return null;let i=null;for(let s=0,o=r.length;s<o;s+=1){const a=r[s],l=e.intersect(a);l&&(i==null&&(i=[]),Array.isArray(l)?i.push(...l):i.push(l))}return i}isDifferentiable(){for(let e=0,t=this.segments.length;e<t;e+=1)if(this.segments[e].isDifferentiable())return!0;return!1}isValid(){const e=this.segments;return e.length===0||e[0].type==="M"}length(e={}){if(this.segments.length===0)return 0;const t=this.getSubdivisions(e);let r=0;for(let i=0,s=this.segments.length;i<s;i+=1){const o=this.segments[i],a=t[i];r+=o.length({subdivisions:a})}return r}lengthAtT(e,t={}){const r=this.segments.length;if(r===0)return 0;let i=e.segmentIndex;if(i<0)return 0;let s=xe.clamp(e.value,0,1);i>=r&&(i=r-1,s=1);const o=this.getPrecision(t),a=this.getSubdivisions(t);let l=0;for(let h=0;h<i;h+=1){const f=this.segments[h],d=a[h];l+=f.length({precision:o,subdivisions:d})}const c=this.segments[i],u=a[i];return l+=c.lengthAtT(s,{precision:o,subdivisions:u}),l}tangentAt(e,t={}){if(this.segments.length===0)return null;const r=xe.clamp(e,0,1),i=this.getOptions(t),o=this.length(i)*r;return this.tangentAtLength(o,i)}tangentAtLength(e,t={}){if(this.segments.length===0)return null;let r=!0;e<0&&(r=!1,e=-e);const i=this.getPrecision(t),s=this.getSubdivisions(t);let o,a=0;for(let l=0,c=this.segments.length;l<c;l+=1){const u=r?l:c-1-l,h=this.segments[u],f=s[u],d=h.length({precision:i,subdivisions:f});if(h.isDifferentiable()){if(e<=a+d)return h.tangentAtLength((r?1:-1)*(e-a),{precision:i,subdivisions:f});o=h}a+=d}if(o){const l=r?1:0;return o.tangentAtT(l)}return null}tangentAtT(e){const t=this.segments.length;if(t===0)return null;const r=e.segmentIndex;if(r<0)return this.segments[0].tangentAtT(0);if(r>=t)return this.segments[t-1].tangentAtT(1);const i=xe.clamp(e.value,0,1);return this.segments[r].tangentAtT(i)}getPrecision(e={}){return e.precision==null?this.PRECISION:e.precision}getSubdivisions(e={}){if(e.segmentSubdivisions==null){const t=this.getPrecision(e);return this.getSegmentSubdivisions({precision:t})}return e.segmentSubdivisions}getOptions(e={}){const t=this.getPrecision(e),r=this.getSubdivisions(e);return{precision:t,segmentSubdivisions:r}}toPoints(e={}){const t=this.segments,r=t.length;if(r===0)return null;const i=this.getSubdivisions(e),s=[];let o=[];for(let a=0;a<r;a+=1){const l=t[a];if(l.isVisible){const c=i[a];c.length>0?c.forEach(u=>o.push(u.start)):o.push(l.start)}else o.length>0&&(o.push(t[a-1].end),s.push(o),o=[])}return o.length>0&&(o.push(this.end),s.push(o)),s}toPolylines(e={}){const t=this.toPoints(e);return t?t.map(r=>new Ue(r)):null}scale(e,t,r){return this.segments.forEach(i=>i.scale(e,t,r)),this}rotate(e,t){return this.segments.forEach(r=>r.rotate(e,t)),this}translate(e,t){return typeof e=="number"?this.segments.forEach(r=>r.translate(e,t)):this.segments.forEach(r=>r.translate(e)),this}clone(){const e=new X;return this.segments.forEach(t=>e.appendSegment(t.clone())),e}equals(e){if(e==null)return!1;const t=this.segments,r=e.segments,i=t.length;if(r.length!==i)return!1;for(let s=0;s<i;s+=1){const o=t[s],a=r[s];if(o.type!==a.type||!o.equals(a))return!1}return!0}toJSON(){return this.segments.map(e=>e.toJSON())}serialize(){if(!this.isValid())throw new Error("Invalid path segments.");return this.segments.map(e=>e.serialize()).join(" ")}toString(){return this.serialize()}}(function(n){function e(t){return t!=null&&t instanceof n}n.isPath=e})(X||(X={})),function(n){function e(r){if(!r)return new n;const i=new n,s=/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g,o=n.normalize(r).match(s);if(o!=null)for(let a=0,l=o.length;a<l;a+=1){const c=o[a],u=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,h=c.match(u);if(h!=null){const f=h[0],d=h.slice(1).map(p=>+p),g=t.call(null,f,...d);i.appendSegment(g)}}return i}n.parse=e;function t(r,...i){if(r==="M")return bs.create.call(null,...i);if(r==="L")return St.create.call(null,...i);if(r==="C")return nn.create.call(null,...i);if(r==="z"||r==="Z")return vs.create();throw new Error(`Invalid path segment type "${r}"`)}n.createSegment=t}(X||(X={})),function(n){n.normalize=vq,n.isValid=fq,n.drawArc=gq,n.drawPoints=z1,n.arcToCurves=Wl}(X||(X={}));class We{constructor(e){this.options=Object.assign({},e),this.data=this.options.data||{},this.register=this.register.bind(this),this.unregister=this.unregister.bind(this)}get names(){return Object.keys(this.data)}register(e,t,r=!1){if(typeof e=="object"){Object.entries(e).forEach(([o,a])=>{this.register(o,a,t)});return}this.exist(e)&&!r&&!en.isApplyingHMR()&&this.onDuplicated(e);const i=this.options.process,s=i?K(i,this,e,t):t;return this.data[e]=s,s}unregister(e){const t=e?this.data[e]:null;return delete this.data[e],t}get(e){return e?this.data[e]:null}exist(e){return e?this.data[e]!=null:!1}onDuplicated(e){try{throw this.options.onConflict&&K(this.options.onConflict,this,e),new Error(`${Ml(this.options.type)} with name '${e}' already registered.`)}catch(t){throw t}}onNotFound(e,t){throw new Error(this.getSpellingSuggestion(e,t))}getSpellingSuggestion(e,t){const r=this.getSpellingSuggestionForName(e),i=t?`${t} ${IV(this.options.type)}`:this.options.type;return`${Ml(i)} with name '${e}' does not exist.${r?` Did you mean '${r}'?`:""}`}getSpellingSuggestionForName(e){return p4(e,Object.keys(this.data),t=>t)}}(function(n){function e(t){return new n(t)}n.create=e})(We||(We={}));const bq=Object.freeze(Object.defineProperty({__proto__:null,dot:{color:"#aaaaaa",thickness:1,markup:"rect",update(n,e){const t=e.thickness*e.sx,r=e.thickness*e.sy;fe(n,{width:t,height:r,rx:t,ry:r,fill:e.color})}},doubleMesh:[{color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(n,e){let t;const r=e.width,i=e.height,s=e.thickness;r-s>=0&&i-s>=0?t=["M",r,0,"H0 M0 0 V0",i].join(" "):t="M 0 0 0 0",fe(n,{d:t,stroke:e.color,"stroke-width":e.thickness})}},{color:"rgba(224,224,224,0.2)",thickness:3,factor:4,markup:"path",update(n,e){let t;const r=e.factor||1,i=e.width*r,s=e.height*r,o=e.thickness;i-o>=0&&s-o>=0?t=["M",i,0,"H0 M0 0 V0",s].join(" "):t="M 0 0 0 0",e.width=i,e.height=s,fe(n,{d:t,stroke:e.color,"stroke-width":e.thickness})}}],fixedDot:{color:"#aaaaaa",thickness:1,markup:"rect",update(n,e){const t=e.sx<=1?e.thickness*e.sx:e.thickness;fe(n,{width:t,height:t,rx:t,ry:t,fill:e.color})}},mesh:{color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(n,e){let t;const r=e.width,i=e.height,s=e.thickness;r-s>=0&&i-s>=0?t=["M",r,0,"H0 M0 0 V0",i].join(" "):t="M 0 0 0 0",fe(n,{d:t,stroke:e.color,"stroke-width":e.thickness})}}},Symbol.toStringTag,{value:"Module"}));class Nr{constructor(){this.patterns={},this.root=Z.create(jl(),{width:"100%",height:"100%"},[tr("defs")]).node}add(e,t){const r=this.root.childNodes[0];r&&r.appendChild(t),this.patterns[e]=t,Z.create("rect",{width:"100%",height:"100%",fill:`url(#${e})`}).appendTo(this.root)}get(e){return this.patterns[e]}has(e){return this.patterns[e]!=null}}(function(n){n.presets=bq,n.registry=We.create({type:"grid"}),n.registry.register(n.presets,!0)})(Nr||(Nr={}));const q1=function(n){const e=document.createElement("canvas"),t=n.width,r=n.height;e.width=t*2,e.height=r;const i=e.getContext("2d");return i.drawImage(n,0,0,t,r),i.translate(2*t,0),i.scale(-1,1),i.drawImage(n,0,0,t,r),e},G1=function(n){const e=document.createElement("canvas"),t=n.width,r=n.height;e.width=t,e.height=r*2;const i=e.getContext("2d");return i.drawImage(n,0,0,t,r),i.translate(0,2*r),i.scale(1,-1),i.drawImage(n,0,0,t,r),e},H1=function(n){const e=document.createElement("canvas"),t=n.width,r=n.height;e.width=2*t,e.height=2*r;const i=e.getContext("2d");return i.drawImage(n,0,0,t,r),i.setTransform(-1,0,0,-1,e.width,e.height),i.drawImage(n,0,0,t,r),i.setTransform(-1,0,0,1,e.width,0),i.drawImage(n,0,0,t,r),i.setTransform(1,0,0,-1,0,e.height),i.drawImage(n,0,0,t,r),e},wq=Object.freeze(Object.defineProperty({__proto__:null,flipX:q1,flipXY:H1,flipY:G1,watermark:function(n,e){const t=n.width,r=n.height,i=document.createElement("canvas");i.width=t*3,i.height=r*3;const s=i.getContext("2d"),o=e.angle!=null?-e.angle:-20,a=we.toRad(o),l=i.width/4,c=i.height/4;for(let u=0;u<4;u+=1)for(let h=0;h<4;h+=1)(u+h)%2>0&&(s.setTransform(1,0,0,1,(2*u-1)*l,(2*h-1)*c),s.rotate(a),s.drawImage(n,-t/2,-r/2,t,r));return i}},Symbol.toStringTag,{value:"Module"}));var Wo;(function(n){n.presets=Object.assign({},wq),n.presets["flip-x"]=q1,n.presets["flip-y"]=G1,n.presets["flip-xy"]=H1,n.registry=We.create({type:"background pattern"}),n.registry.register(n.presets,!0)})(Wo||(Wo={}));function cf(n,e){return n!=null?n:e}function ht(n,e){return n!=null&&Number.isFinite(n)?n:e}function xq(n={}){const e=cf(n.color,"blue"),t=ht(n.width,1),r=ht(n.margin,2),i=ht(n.opacity,1),s=r,o=r+t;return`
    <filter>
      <feFlood flood-color="${e}" flood-opacity="${i}" result="colored"/>
      <feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${o}" />
      <feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${s}" />
      <feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/>
      <feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/>
      <feMerge>
        <feMergeNode in="outline"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  `.trim()}function Cq(n={}){const e=cf(n.color,"red"),t=ht(n.blur,0),r=ht(n.width,1),i=ht(n.opacity,1);return`
      <filter>
        <feFlood flood-color="${e}" flood-opacity="${i}" result="colored"/>
        <feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${r}"/>
        <feComposite result="composed" in="colored" in2="morphed" operator="in"/>
        <feGaussianBlur result="blured" in="composed" stdDeviation="${t}"/>
        <feBlend in="SourceGraphic" in2="blured" mode="normal"/>
      </filter>
    `.trim()}function Sq(n={}){const e=ht(n.x,2);return`
    <filter>
      <feGaussianBlur stdDeviation="${n.y!=null&&Number.isFinite(n.y)?[e,n.y]:e}"/>
    </filter>
  `.trim()}function Pq(n={}){const e=ht(n.dx,0),t=ht(n.dy,0),r=cf(n.color,"black"),i=ht(n.blur,4),s=ht(n.opacity,1);return"SVGFEDropShadowElement"in window?`<filter>
         <feDropShadow stdDeviation="${i}" dx="${e}" dy="${t}" flood-color="${r}" flood-opacity="${s}" />
       </filter>`.trim():`<filter>
         <feGaussianBlur in="SourceAlpha" stdDeviation="${i}" />
         <feOffset dx="${e}" dy="${t}" result="offsetblur" />
         <feFlood flood-color="${r}" />
         <feComposite in2="offsetblur" operator="in" />
         <feComponentTransfer>
           <feFuncA type="linear" slope="${s}" />
         </feComponentTransfer>
         <feMerge>
           <feMergeNode/>
           <feMergeNode in="SourceGraphic"/>
         </feMerge>
       </filter>`.trim()}function Eq(n={}){const e=ht(n.amount,1),t=.2126+.7874*(1-e),r=.7152-.7152*(1-e),i=.0722-.0722*(1-e),s=.2126-.2126*(1-e),o=.7152+.2848*(1-e),a=.0722-.0722*(1-e),l=.2126-.2126*(1-e),c=.0722+.9278*(1-e);return`
    <filter>
      <feColorMatrix type="matrix" values="${t} ${r} ${i} 0 0 ${s} ${o} ${a} 0 0 ${l} ${r} ${c} 0 0 0 0 0 1 0"/>
    </filter>
  `.trim()}function Aq(n={}){const e=ht(n.amount,1),t=.393+.607*(1-e),r=.769-.769*(1-e),i=.189-.189*(1-e),s=.349-.349*(1-e),o=.686+.314*(1-e),a=.168-.168*(1-e),l=.272-.272*(1-e),c=.534-.534*(1-e),u=.131+.869*(1-e);return`
      <filter>
        <feColorMatrix type="matrix" values="${t} ${r} ${i} 0 0 ${s} ${o} ${a} 0 0 ${l} ${c} ${u} 0 0 0 0 0 1 0"/>
      </filter>
    `.trim()}function Oq(n={}){return`
      <filter>
        <feColorMatrix type="saturate" values="${1-ht(n.amount,1)}"/>
      </filter>
    `.trim()}function Mq(n={}){return`
      <filter>
        <feColorMatrix type="hueRotate" values="${ht(n.angle,0)}"/>
      </filter>
    `.trim()}function Tq(n={}){const e=ht(n.amount,1),t=1-e;return`
      <filter>
        <feComponentTransfer>
          <feFuncR type="table" tableValues="${e} ${t}"/>
          <feFuncG type="table" tableValues="${e} ${t}"/>
          <feFuncB type="table" tableValues="${e} ${t}"/>
        </feComponentTransfer>
      </filter>
    `.trim()}function _q(n={}){const e=ht(n.amount,1);return`
    <filter>
      <feComponentTransfer>
        <feFuncR type="linear" slope="${e}"/>
        <feFuncG type="linear" slope="${e}"/>
        <feFuncB type="linear" slope="${e}"/>
      </feComponentTransfer>
    </filter>
  `.trim()}function Nq(n={}){const e=ht(n.amount,1),t=.5-e/2;return`
    <filter>
     <feComponentTransfer>
        <feFuncR type="linear" slope="${e}" intercept="${t}"/>
        <feFuncG type="linear" slope="${e}" intercept="${t}"/>
        <feFuncB type="linear" slope="${e}" intercept="${t}"/>
      </feComponentTransfer>
    </filter>
  `.trim()}const kq=Object.freeze(Object.defineProperty({__proto__:null,blur:Sq,brightness:_q,contrast:Nq,dropShadow:Pq,grayScale:Eq,highlight:Cq,hueRotate:Mq,invert:Tq,outline:xq,saturate:Oq,sepia:Aq},Symbol.toStringTag,{value:"Module"}));var ws;(function(n){n.presets=kq,n.registry=We.create({type:"filter"}),n.registry.register(n.presets,!0)})(ws||(ws={}));const $q={xlinkHref:"xlink:href",xlinkShow:"xlink:show",xlinkRole:"xlink:role",xlinkType:"xlink:type",xlinkArcrole:"xlink:arcrole",xlinkTitle:"xlink:title",xlinkActuate:"xlink:actuate",xmlSpace:"xml:space",xmlBase:"xml:base",xmlLang:"xml:lang",preserveAspectRatio:"preserveAspectRatio",requiredExtension:"requiredExtension",requiredFeatures:"requiredFeatures",systemLanguage:"systemLanguage",externalResourcesRequired:"externalResourceRequired"},Iq={},U1={position:Kl("x","width","origin")},W1={position:Kl("y","height","origin")},Lq={position:Kl("x","width","corner")},Rq={position:Kl("y","height","corner")},X1={set:kr("width","width")},Y1={set:kr("height","height")},jq={set:kr("rx","width")},Dq={set:kr("ry","height")},K1={set:(n=>{const e=kr(n,"width"),t=kr(n,"height");return function(r,i){const s=i.refBBox,o=s.height>s.width?e:t;return K(o,this,r,i)}})("r")},Bq={set(n,{refBBox:e}){let t=parseFloat(n);const r=er(n);r&&(t/=100);const i=Math.sqrt(e.height*e.height+e.width*e.width);let s;return Number.isFinite(t)&&(r||t>=0&&t<=1?s=t*i:s=Math.max(t+i,0)),{r:s}}},zq={set:kr("cx","width")},Fq={set:kr("cy","height")},J1={set:ew({resetOffset:!0})},Vq={set:ew({resetOffset:!1})},Q1={set:tw({resetOffset:!0})},qq={set:tw({resetOffset:!1})},Gq=K1,Hq=J1,Uq=Q1,Wq=U1,Xq=W1,Yq=X1,Kq=Y1;function Kl(n,e,t){return(r,{refBBox:i})=>{if(r==null)return null;let s=parseFloat(r);const o=er(r);o&&(s/=100);let a;if(Number.isFinite(s)){const c=i[t];o||s>0&&s<1?a=c[n]+i[e]*s:a=c[n]+s}const l=new P;return l[n]=a||0,l}}function kr(n,e){return function(t,{refBBox:r}){let i=parseFloat(t);const s=er(t);s&&(i/=100);const o={};if(Number.isFinite(i)){const a=s||i>=0&&i<=1?i*r[e]:Math.max(i+r[e],0);o[n]=a}return o}}function Z1(n,e){const t="x6-shape",r=e&&e.resetOffset;return function(i,{elem:s,refBBox:o}){let a=Ci(s,t);if(!a||a.value!==i){const p=n(i);a={value:i,shape:p,shapeBBox:p.bbox()},Ci(s,t,a)}const l=a.shape.clone(),c=a.shapeBBox.clone(),u=c.getOrigin(),h=o.getOrigin();c.x=h.x,c.y=h.y;const f=o.getMaxScaleToFit(c,h),d=c.width===0||o.width===0?1:f.sx,g=c.height===0||o.height===0?1:f.sy;return l.scale(d,g,u),r&&l.translate(-u.x,-u.y),l}}function ew(n){function e(r){return X.parse(r)}const t=Z1(e,n);return(r,i)=>({d:t(r,i).serialize()})}function tw(n){const e=Z1(t=>new Ue(t),n);return(t,r)=>({points:e(t,r).serialize()})}const Jq={qualify:Dn,set(n,{view:e}){return`url(#${e.graph.defineGradient(n)})`}},Qq={qualify:Dn,set(n,{view:e}){const t=e.cell,r=Object.assign({},n);if(t.isEdge()&&r.type==="linearGradient"){const i=e,s=i.sourcePoint,o=i.targetPoint;r.id=`gradient-${r.type}-${t.id}`,r.attrs=Object.assign(Object.assign({},r.attrs),{x1:s.x,y1:s.y,x2:o.x,y2:o.y,gradientUnits:"userSpaceOnUse"}),e.graph.defs.remove(r.id)}return`url(#${e.graph.defineGradient(r)})`}},nw={qualify(n,{attrs:e}){return e.textWrap==null||!Dn(e.textWrap)},set(n,{view:e,elem:t,attrs:r}){const i="x6-text",s=Ci(t,i),o=u=>{try{return JSON.parse(u)}catch(h){return u}},a={x:r.x,eol:r.eol,annotations:o(r.annotations),textPath:o(r["text-path"]||r.textPath),textVerticalAnchor:r["text-vertical-anchor"]||r.textVerticalAnchor,displayEmpty:(r["display-empty"]||r.displayEmpty)==="true",lineHeight:r["line-height"]||r.lineHeight},l=r["font-size"]||r.fontSize,c=JSON.stringify([n,a]);if(l&&t.setAttribute("font-size",l),s==null||s!==c){const u=a.textPath;if(u!=null&&typeof u=="object"){const h=u.selector;if(typeof h=="string"){const f=e.find(h)[0];f instanceof SVGPathElement&&(Wh(f),a.textPath=Object.assign({"xlink:href":`#${f.id}`},u))}}_1(t,`${n}`,a),Ci(t,i,c)}}},Zq={qualify:Dn,set(n,{view:e,elem:t,attrs:r,refBBox:i}){const s=n,o=s.width||0;er(o)?i.width*=parseFloat(o)/100:o<=0?i.width+=o:i.width=o;const a=s.height||0;er(a)?i.height*=parseFloat(a)/100:a<=0?i.height+=a:i.height=a;let l,c=s.text;c==null&&(c=r.text||(t==null?void 0:t.textContent)),c!=null?l=k1(`${c}`,i,{"font-weight":r["font-weight"]||r.fontWeight,"font-size":r["font-size"]||r.fontSize,"font-family":r["font-family"]||r.fontFamily,lineHeight:r.lineHeight},{ellipsis:s.ellipsis}):l="",K(nw.set,this,l,{view:e,elem:t,attrs:r,refBBox:i,cell:e.cell})}},xs=(n,{attrs:e})=>e.text!==void 0,e6={qualify:xs},t6={qualify:xs},n6={qualify:xs},r6={qualify:xs},i6={qualify:xs},s6={qualify:xs},o6={qualify(n,{elem:e}){return e instanceof SVGElement},set(n,{elem:e}){const t="x6-title",r=`${n}`,i=Ci(e,t);if(i==null||i!==r){Ci(e,t,r);const s=e.firstChild;if(s&&s.tagName.toUpperCase()==="TITLE"){const o=s;o.textContent=r}else{const o=document.createElementNS(e.namespaceURI,"title");o.textContent=r,e.insertBefore(o,s)}}}},a6={offset:rw("x","width","right")},l6={offset:rw("y","height","bottom")},c6={offset(n,{refBBox:e}){return n?{x:-e.x,y:-e.y}:{x:0,y:0}}};function rw(n,e,t){return(r,{refBBox:i})=>{const s=new P;let o;return r==="middle"?o=i[e]/2:r===t?o=i[e]:typeof r=="number"&&Number.isFinite(r)?o=r>-1&&r<1?-i[e]*r:-r:er(r)?o=i[e]*parseFloat(r)/100:o=0,s[n]=-(i[n]+o),s}}const u6={qualify:Dn,set(n,{elem:e}){ye(e,n)}},h6={set(n,{elem:e}){e.innerHTML=`${n}`}},f6={qualify:Dn,set(n,{view:e}){return`url(#${e.graph.defineFilter(n)})`}},d6={set(n){return n!=null&&typeof n=="object"&&n.id?n.id:n}};function $r(n,e,t){let r,i;typeof e=="object"?(r=e.x,i=e.y):(r=e,i=t);const s=X.parse(n),o=s.bbox();if(o){let a=-o.height/2-o.y,l=-o.width/2-o.x;typeof r=="number"&&(l-=r),typeof i=="number"&&(a-=i),s.translate(l,a)}return s.serialize()}var iw=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const g6=n=>{var{size:e,width:t,height:r,offset:i,open:s}=n,o=iw(n,["size","width","height","offset","open"]);return sw({size:e,width:t,height:r,offset:i},s===!0,!0,void 0,o)},p6=n=>{var{size:e,width:t,height:r,offset:i,factor:s}=n,o=iw(n,["size","width","height","offset","factor"]);return sw({size:e,width:t,height:r,offset:i},!1,!1,s,o)};function sw(n,e,t,r=3/4,i={}){const s=n.size||10,o=n.width||s,a=n.height||s,l=new X,c={};if(e)l.moveTo(o,0).lineTo(0,a/2).lineTo(o,a),c.fill="none";else{if(l.moveTo(0,a/2),l.lineTo(o,0),!t){const u=Zt(r,0,1);l.lineTo(o*u,a/2)}l.lineTo(o,a),l.close()}return Object.assign(Object.assign(Object.assign({},c),i),{tagName:"path",d:$r(l.serialize(),{x:n.offset!=null?n.offset:-o/2})})}var m6=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const y6=n=>{var{size:e,width:t,height:r,offset:i}=n,s=m6(n,["size","width","height","offset"]);const o=e||10,a=t||o,l=r||o,c=new X;return c.moveTo(0,l/2).lineTo(a/2,0).lineTo(a,l/2).lineTo(a/2,l).close(),Object.assign(Object.assign({},s),{tagName:"path",d:$r(c.serialize(),i==null?-a/2:i)})};var v6=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const b6=n=>{var{d:e,offsetX:t,offsetY:r}=n,i=v6(n,["d","offsetX","offsetY"]);return Object.assign(Object.assign({},i),{tagName:"path",d:$r(e,t,r)})};var w6=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const x6=n=>{var{size:e,width:t,height:r,offset:i}=n,s=w6(n,["size","width","height","offset"]);const o=e||10,a=t||o,l=r||o,c=new X;return c.moveTo(0,0).lineTo(a,l).moveTo(0,l).lineTo(a,0),Object.assign(Object.assign({},s),{tagName:"path",fill:"none",d:$r(c.serialize(),i||-a/2)})};var C6=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const S6=n=>{var{width:e,height:t,offset:r,open:i,flip:s}=n,o=C6(n,["width","height","offset","open","flip"]);let a=t||6;const l=e||10,c=i===!0,u=s===!0,h=Object.assign(Object.assign({},o),{tagName:"path"});u&&(a=-a);const f=new X;return f.moveTo(0,a).lineTo(l,0),c?h.fill="none":(f.lineTo(l,a),f.close()),h.d=$r(f.serialize(),{x:r||-l/2,y:a/2}),h};var ow=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const aw=n=>{var{r:e}=n,t=ow(n,["r"]);const r=e||5;return Object.assign(Object.assign({cx:r},t),{tagName:"circle",r})},P6=n=>{var{r:e}=n,t=ow(n,["r"]);const r=e||5,i=new X;return i.moveTo(r,0).lineTo(r,r*2),i.moveTo(0,r).lineTo(r*2,r),{children:[Object.assign(Object.assign({},aw({r})),{fill:"none"}),Object.assign(Object.assign({},t),{tagName:"path",d:$r(i.serialize(),-r)})]}};var E6=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const A6=Object.freeze(Object.defineProperty({__proto__:null,async:S6,block:g6,circle:aw,circlePlus:P6,classic:p6,cross:x6,diamond:y6,ellipse:n=>{var{rx:e,ry:t}=n,r=E6(n,["rx","ry"]);const i=e||5,s=t||5;return Object.assign(Object.assign({cx:i},r),{tagName:"ellipse",rx:i,ry:s})},path:b6},Symbol.toStringTag,{value:"Module"}));var Ir;(function(n){n.presets=A6,n.registry=We.create({type:"marker"}),n.registry.register(n.presets,!0)})(Ir||(Ir={})),function(n){n.normalize=$r}(Ir||(Ir={}));var O6=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};function uf(n){return typeof n=="string"||Dn(n)}const M6={qualify:uf,set(n,{view:e,attrs:t}){return hf("marker-start",n,e,t)}},T6={qualify:uf,set(n,{view:e,attrs:t}){return hf("marker-end",n,e,t,{transform:"rotate(180)"})}},_6={qualify:uf,set(n,{view:e,attrs:t}){return hf("marker-mid",n,e,t)}};function hf(n,e,t,r,i={}){const s=typeof e=="string"?{name:e}:e,{name:o,args:a}=s,l=O6(s,["name","args"]);let c=l;if(o&&typeof o=="string"){const h=Ir.registry.get(o);if(h)c=h(Object.assign(Object.assign({},l),a));else return Ir.registry.onNotFound(o)}const u=Object.assign(Object.assign(Object.assign({},N6(r,n)),i),c);return{[n]:`url(#${t.graph.defineMarker(u)})`}}function N6(n,e){const t={},r=n.stroke;typeof r=="string"&&(t.stroke=r,t.fill=r);let i=n.strokeOpacity;if(i==null&&(i=n["stroke-opacity"]),i==null&&(i=n.opacity),i!=null&&(t["stroke-opacity"]=i,t["fill-opacity"]=i),e!=="marker-mid"){const s=parseFloat(n.strokeWidth||n["stroke-width"]);if(Number.isFinite(s)&&s>1){const o=Math.ceil(s/2);t.refX=e==="marker-start"?o:-o}}return t}const Xo=(n,{view:e})=>e.cell.isEdge(),k6={qualify:Xo,set(n,e){var t,r,i,s;const o=e.view,a=n.reverse||!1,l=n.stubs||0;let c;if(Number.isFinite(l)&&l!==0)if(a){let u,h;const f=o.getConnectionLength()||0;l<0?(u=(f+l)/2,h=-l):(u=l,h=f-l*2);const d=o.getConnection();c=(s=(i=(r=(t=d==null?void 0:d.divideAtLength(u))===null||t===void 0?void 0:t[1])===null||r===void 0?void 0:r.divideAtLength(h))===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.serialize()}else{let u;l<0?u=((o.getConnectionLength()||0)+l)/2:u=l;const h=o.getConnection();if(h){const f=h.divideAtLength(u),d=h.divideAtLength(-u);f&&d&&(c=`${f[0].serialize()} ${d[1].serialize()}`)}}return{d:c||o.getConnectionPathData()}}},lw={qualify:Xo,set:Jl("getTangentAtLength",{rotate:!0})},$6={qualify:Xo,set:Jl("getTangentAtLength",{rotate:!1})},cw={qualify:Xo,set:Jl("getTangentAtRatio",{rotate:!0})},I6={qualify:Xo,set:Jl("getTangentAtRatio",{rotate:!1})},L6=lw,R6=cw;function Jl(n,e){const t={x:1,y:0};return(r,i)=>{let s,o;const a=i.view,l=a[n](Number(r));return l?(o=e.rotate?l.vector().vectorAngle(t):0,s=l.start):(s=a.path.start,o=0),o===0?{transform:`translate(${s.x},${s.y}')`}:{transform:`translate(${s.x},${s.y}') rotate(${o})`}}}const j6=Object.freeze(Object.defineProperty({__proto__:null,annotations:r6,atConnectionLength:L6,atConnectionLengthIgnoreGradient:$6,atConnectionLengthKeepGradient:lw,atConnectionRatio:R6,atConnectionRatioIgnoreGradient:I6,atConnectionRatioKeepGradient:cw,connection:k6,displayEmpty:s6,eol:i6,fill:Jq,filter:f6,html:h6,lineHeight:e6,port:d6,ref:Iq,refCx:zq,refCy:Fq,refD:Hq,refDKeepOffset:Vq,refDResetOffset:J1,refDx:Lq,refDy:Rq,refHeight:Y1,refHeight2:Kq,refPoints:Uq,refPointsKeepOffset:qq,refPointsResetOffset:Q1,refR:Gq,refRCircumscribed:Bq,refRInscribed:K1,refRx:jq,refRy:Dq,refWidth:X1,refWidth2:Yq,refX:U1,refX2:Wq,refY:W1,refY2:Xq,resetOffset:c6,sourceMarker:M6,stroke:Qq,style:u6,targetMarker:T6,text:nw,textPath:n6,textVerticalAnchor:t6,textWrap:Zq,title:o6,vertexMarker:_6,xAlign:a6,yAlign:l6},Symbol.toStringTag,{value:"Module"}));var Vn;(function(n){function e(t,r,i){return!!(t!=null&&(typeof t=="string"||typeof t.qualify!="function"||K(t.qualify,this,r,i)))}n.isValidDefinition=e})(Vn||(Vn={})),function(n){n.presets=Object.assign(Object.assign({},$q),j6),n.registry=We.create({type:"attribute definition"}),n.registry.register(n.presets,!0)}(Vn||(Vn={}));const rn={prefixCls:"x6",autoInsertCSS:!0,useCSSSelector:!0,prefix(n){return`${rn.prefixCls}-${n}`}},uw=rn.prefix("highlighted"),D6={highlight(n,e,t){const r=t&&t.className||uw;J(e,r)},unhighlight(n,e,t){const r=t&&t.className||uw;yt(e,r)}},hw=rn.prefix("highlight-opacity"),B6={highlight(n,e){J(e,hw)},unhighlight(n,e){yt(e,hw)}};var de;(function(n){const e=tr("svg");n.normalizeMarker=$r;function t(d,g){const p=J4(d.x,d.y).matrixTransform(g);return new P(p.x,p.y)}n.transformPoint=t;function r(d,g){return new V(t(d.start,g),t(d.end,g))}n.transformLine=r;function i(d,g){let p=d instanceof Ue?d.points:d;return Array.isArray(p)||(p=[]),new Ue(p.map(b=>t(b,g)))}n.transformPolyline=i;function s(d,g){const p=e.createSVGPoint();p.x=d.x,p.y=d.y;const b=p.matrixTransform(g);p.x=d.x+d.width,p.y=d.y;const m=p.matrixTransform(g);p.x=d.x+d.width,p.y=d.y+d.height;const y=p.matrixTransform(g);p.x=d.x,p.y=d.y+d.height;const v=p.matrixTransform(g),w=Math.min(b.x,m.x,y.x,v.x),x=Math.max(b.x,m.x,y.x,v.x),C=Math.min(b.y,m.y,y.y,v.y),S=Math.max(b.y,m.y,y.y,v.y);return new D(w,C,x-w,S-C)}n.transformRectangle=s;function o(d,g,p){let b;const m=d.ownerSVGElement;if(!m)return new D(0,0,0,0);try{b=d.getBBox()}catch(v){b={x:d.clientLeft,y:d.clientTop,width:d.clientWidth,height:d.clientHeight}}if(g)return D.create(b);const y=Bo(d,p||m);return s(b,y)}n.bbox=o;function a(d,g={}){let p;if(!d.ownerSVGElement||!Mr(d)){if(v1(d)){const{left:v,top:w,width:x,height:C}=l(d);return new D(v,w,x,C)}return new D(0,0,0,0)}let m=g.target;if(!g.recursive){try{p=d.getBBox()}catch(w){p={x:d.clientLeft,y:d.clientTop,width:d.clientWidth,height:d.clientHeight}}if(!m)return D.create(p);const v=Bo(d,m);return s(p,v)}{const v=d.childNodes,w=v.length;if(w===0)return a(d,{target:m});m||(m=d);for(let x=0;x<w;x+=1){const C=v[x];let S;C.childNodes.length===0?S=a(C,{target:m}):S=a(C,{target:m,recursive:!0}),p?p=p.union(S):p=S}return p}}n.getBBox=a;function l(d){let g=0,p=0,b=0,m=0;if(d){let y=d;for(;y;)g+=y.offsetLeft,p+=y.offsetTop,y=y.offsetParent,y&&(g+=parseInt(A1(y,"borderLeft"),10),p+=parseInt(A1(y,"borderTop"),10));b=d.offsetWidth,m=d.offsetHeight}return{left:g,top:p,width:b,height:m}}n.getBoundingOffsetRect=l;function c(d){const g=p=>{const b=d.getAttribute(p),m=b?parseFloat(b):0;return Number.isNaN(m)?0:m};switch(d instanceof SVGElement&&d.nodeName.toLowerCase()){case"rect":return new D(g("x"),g("y"),g("width"),g("height"));case"circle":return new bn(g("cx"),g("cy"),g("r"),g("r"));case"ellipse":return new bn(g("cx"),g("cy"),g("rx"),g("ry"));case"polyline":{const p=ql(d);return new Ue(p)}case"polygon":{const p=ql(d);return p.length>1&&p.push(p[0]),new Ue(p)}case"path":{let p=d.getAttribute("d");return X.isValid(p)||(p=X.normalize(p)),X.parse(p)}case"line":return new V(g("x1"),g("y1"),g("x2"),g("y2"))}return a(d)}n.toGeometryShape=c;function u(d,g,p,b){const m=P.create(g),y=P.create(p);b||(b=d instanceof SVGSVGElement?d:d.ownerSVGElement);const v=sf(d);d.setAttribute("transform","");const w=a(d,{target:b}).scale(v.sx,v.sy),x=jo();x.setTranslate(-w.x-w.width/2,-w.y-w.height/2);const C=jo(),S=m.angleBetween(y,m.clone().translate(1,0));S&&C.setRotate(S,0,0);const E=jo(),A=m.clone().move(y,w.width/2);E.setTranslate(2*m.x-A.x,2*m.y-A.y);const O=Bo(d,b),T=jo();T.setMatrix(E.matrix.multiply(C.matrix.multiply(x.matrix.multiply(O.scale(v.sx,v.sy))))),d.setAttribute("transform",ms(T.matrix))}n.translateAndAutoOrient=u;function h(d){if(d==null)return null;let g=d;do{let p=g.tagName;if(typeof p!="string")return null;if(p=p.toUpperCase(),ps(g,"x6-port"))g=g.nextElementSibling;else if(p==="G")g=g.firstElementChild;else if(p==="TITLE")g=g.nextElementSibling;else break}while(g);return g}n.findShapeNode=h;function f(d){const g=h(d);if(!Mr(g)){if(v1(d)){const{left:m,top:y,width:v,height:w}=l(d);return new D(m,y,v,w)}return new D(0,0,0,0)}return c(g).bbox()||D.create()}n.getBBoxV2=f})(de||(de={}));const z6={padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},F6={highlight(n,e,t){const r=Lr.getHighlighterId(e,t);if(Lr.hasCache(r))return;t=$b({},t,z6);const i=Z.create(e);let s,o;try{s=i.toPathData()}catch(u){o=de.bbox(i.node,!0),s=I1(Object.assign(Object.assign({},t),o))}const a=tr("path");if(fe(a,Object.assign({d:s,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},t.attrs?Lo(t.attrs):null)),n.isEdgeElement(e))fe(a,"d",n.getConnectionPathData());else{let u=i.getTransformToElement(n.container);const h=t.padding;if(h){o==null&&(o=de.bbox(i.node,!0));const f=o.x+o.width/2,d=o.y+o.height/2;o=de.transformRectangle(o,u);const g=Math.max(o.width,1),p=Math.max(o.height,1),b=(g+h)/g,m=(p+h)/p,y=ut({a:b,b:0,c:0,d:m,e:f-b*f,f:d-m*d});u=u.multiply(y)}ys(a,u)}J(a,rn.prefix("highlight-stroke"));const l=n.cell,c=()=>Lr.removeHighlighter(r);l.on("removed",c),l.model&&l.model.on("reseted",c),n.container.appendChild(a),Lr.setCache(r,a)},unhighlight(n,e,t){Lr.removeHighlighter(Lr.getHighlighterId(e,t))}};var Lr;(function(n){function e(o,a){return Wh(o),o.id+JSON.stringify(a)}n.getHighlighterId=e;const t={};function r(o,a){t[o]=a}n.setCache=r;function i(o){return t[o]!=null}n.hasCache=i;function s(o){const a=t[o];a&&(nr(a),delete t[o])}n.removeHighlighter=s})(Lr||(Lr={}));const V6=Object.freeze(Object.defineProperty({__proto__:null,className:D6,opacity:B6,stroke:F6},Symbol.toStringTag,{value:"Module"}));var sr;(function(n){function e(t,r){if(typeof r.highlight!="function")throw new Error(`Highlighter '${t}' is missing required \`highlight()\` method`);if(typeof r.unhighlight!="function")throw new Error(`Highlighter '${t}' is missing required \`unhighlight()\` method`)}n.check=e})(sr||(sr={})),function(n){n.presets=V6,n.registry=We.create({type:"highlighter"}),n.registry.register(n.presets,!0)}(sr||(sr={}));function ff(n,e={}){return new P(Vt(e.x,n.width),Vt(e.y,n.height))}function df(n,e,t){return Object.assign({angle:e,position:n.toJSON()},t)}const q6=(n,e)=>n.map(({x:t,y:r,angle:i})=>df(ff(e,{x:t,y:r}),i||0)),G6=(n,e,t)=>{const r=t.start||0,i=t.step||20;return fw(n,e,r,(s,o)=>(s+.5-o/2)*i)},H6=(n,e,t)=>{const r=t.start||0,i=t.step||360/n.length;return fw(n,e,r,s=>s*i)};function fw(n,e,t,r){const i=e.getCenter(),s=e.getTopCenter(),o=e.width/e.height,a=bn.fromRect(e),l=n.length;return n.map((c,u)=>{const h=t+r(u,l),f=s.clone().rotate(-h,i).scale(o,1,i),d=c.compensateRotate?-a.tangentTheta(f):0;return(c.dx||c.dy)&&f.translate(c.dx||0,c.dy||0),c.dr&&f.move(i,c.dr),df(f.round(),d,c)})}var U6=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const W6=(n,e,t)=>{const r=ff(e,t.start||e.getOrigin()),i=ff(e,t.end||e.getCorner());return Yo(n,r,i,t)},X6=(n,e,t)=>Yo(n,e.getTopLeft(),e.getBottomLeft(),t),Y6=(n,e,t)=>Yo(n,e.getTopRight(),e.getBottomRight(),t),K6=(n,e,t)=>Yo(n,e.getTopLeft(),e.getTopRight(),t),J6=(n,e,t)=>Yo(n,e.getBottomLeft(),e.getBottomRight(),t);function Yo(n,e,t,r){const i=new V(e,t),s=n.length;return n.map((o,a)=>{var{strict:l}=o,c=U6(o,["strict"]);const u=l||r.strict?(a+1)/(s+1):(a+.5)/s,h=i.pointAt(u);return(c.dx||c.dy)&&h.translate(c.dx||0,c.dy||0),df(h.round(),0,c)})}const Q6=Object.freeze(Object.defineProperty({__proto__:null,absolute:q6,bottom:J6,ellipse:G6,ellipseSpread:H6,left:X6,line:W6,right:Y6,top:K6},Symbol.toStringTag,{value:"Module"}));var Ai;(function(n){n.presets=Q6,n.registry=We.create({type:"port layout"}),n.registry.register(n.presets,!0)})(Ai||(Ai={}));const Z6={position:{x:0,y:0},angle:0,attrs:{".":{y:"0","text-anchor":"start"}}};function Rr(n,e){const{x:t,y:r,angle:i,attrs:s}=e||{};return $b({},{angle:i,attrs:s,position:{x:t,y:r}},n,Z6)}const e5=(n,e,t)=>Rr({position:e.getTopLeft()},t),t5=(n,e,t)=>Rr({position:{x:-15,y:0},attrs:{".":{y:".3em","text-anchor":"end"}}},t),n5=(n,e,t)=>Rr({position:{x:15,y:0},attrs:{".":{y:".3em","text-anchor":"start"}}},t),r5=(n,e,t)=>Rr({position:{x:0,y:-15},attrs:{".":{"text-anchor":"middle"}}},t),i5=(n,e,t)=>Rr({position:{x:0,y:15},attrs:{".":{y:".6em","text-anchor":"middle"}}},t),s5=(n,e,t)=>dw(n,e,!1,t),o5=(n,e,t)=>dw(n,e,!0,t),a5=(n,e,t)=>gw(n,e,!1,t),l5=(n,e,t)=>gw(n,e,!0,t);function dw(n,e,t,r){const i=r.offset!=null?r.offset:15,s=e.getCenter().theta(n),o=pw(e);let a,l,c,u,h=0;return s<o[1]||s>o[2]?(a=".3em",l=i,c=0,u="start"):s<o[0]?(a="0",l=0,c=-i,t?(h=-90,u="start"):u="middle"):s<o[3]?(a=".3em",l=-i,c=0,u="end"):(a=".6em",l=0,c=i,t?(h=90,u="start"):u="middle"),Rr({position:{x:Math.round(l),y:Math.round(c)},angle:h,attrs:{".":{y:a,"text-anchor":u}}},r)}function gw(n,e,t,r){const i=r.offset!=null?r.offset:15,s=e.getCenter().theta(n),o=pw(e);let a,l,c,u,h=0;return s<o[1]||s>o[2]?(a=".3em",l=-i,c=0,u="end"):s<o[0]?(a=".6em",l=0,c=i,t?(h=90,u="start"):u="middle"):s<o[3]?(a=".3em",l=i,c=0,u="start"):(a="0em",l=0,c=-i,t?(h=-90,u="start"):u="middle"),Rr({position:{x:Math.round(l),y:Math.round(c)},angle:h,attrs:{".":{y:a,"text-anchor":u}}},r)}function pw(n){const e=n.getCenter(),t=e.theta(n.getTopLeft()),r=e.theta(n.getBottomLeft()),i=e.theta(n.getBottomRight()),s=e.theta(n.getTopRight());return[t,s,i,r]}const c5=(n,e,t)=>mw(n.diff(e.getCenter()),!1,t),u5=(n,e,t)=>mw(n.diff(e.getCenter()),!0,t);function mw(n,e,t){const r=t.offset!=null?t.offset:20,i=new P(0,0),s=-n.theta(i),o=n.clone().move(i,r).diff(n).round();let a=".3em",l,c=s;return(s+90)%180===0?(l=e?"end":"middle",!e&&s===-270&&(a="0em")):s>-270&&s<-90?(l="start",c=s-180):l="end",Rr({position:o.round().toJSON(),angle:e?c:0,attrs:{".":{y:a,"text-anchor":l}}},t)}const h5=Object.freeze(Object.defineProperty({__proto__:null,bottom:i5,inside:a5,insideOriented:l5,left:t5,manual:e5,outside:s5,outsideOriented:o5,radial:c5,radialOriented:u5,right:n5,top:r5},Symbol.toStringTag,{value:"Module"}));var Cs;(function(n){n.presets=h5,n.registry=We.create({type:"port label layout"}),n.registry.register(n.presets,!0)})(Cs||(Cs={}));class ge extends mt{get priority(){return 2}constructor(){super(),this.cid=gf.uniqueId(),ge.views[this.cid]=this}confirmUpdate(e,t){return 0}empty(e=this.container){return $o(e),this}unmount(e=this.container){return nr(e),this}remove(e=this.container){return e===this.container&&(this.removeEventListeners(document),this.onRemove(),delete ge.views[this.cid]),this.unmount(e),this}onRemove(){}setClass(e,t=this.container){t.classList.value=Array.isArray(e)?e.join(" "):e}addClass(e,t=this.container){return J(t,Array.isArray(e)?e.join(" "):e),this}removeClass(e,t=this.container){return yt(t,Array.isArray(e)?e.join(" "):e),this}setStyle(e,t=this.container){return ye(t,e),this}setAttrs(e,t=this.container){return e!=null&&t!=null&&fe(t,e),this}findAttr(e,t=this.container){let r=t;for(;r&&r.nodeType===1;){const i=r.getAttribute(e);if(i!=null)return i;if(r===this.container)return null;r=r.parentNode}return null}find(e,t=this.container,r=this.selectors){return ge.find(e,t,r).elems}findOne(e,t=this.container,r=this.selectors){const i=this.find(e,t,r);return i.length>0?i[0]:null}findByAttr(e,t=this.container){let r=t;for(;r&&r.getAttribute;){const i=r.getAttribute(e);if((i!=null||r===this.container)&&i!=="false")return r;r=r.parentNode}return null}getSelector(e,t){let r;if(e===this.container)return typeof t=="string"&&(r=`> ${t}`),r;if(e){const i=Yh(e)+1;r=`${e.tagName.toLowerCase()}:nth-child(${i})`,t&&(r+=` > ${t}`),r=this.getSelector(e.parentNode,r)}return r}prefixClassName(e){return rn.prefix(e)}delegateEvents(e,t){if(e==null)return this;t||this.undelegateEvents();const r=/^(\S+)\s*(.*)$/;return Object.keys(e).forEach(i=>{const s=i.match(r);if(s==null)return;const o=this.getEventHandler(e[i]);typeof o=="function"&&this.delegateEvent(s[1],s[2],o)}),this}undelegateEvents(){return Pe.off(this.container,this.getEventNamespace()),this}delegateDocumentEvents(e,t){return this.addEventListeners(document,e,t),this}undelegateDocumentEvents(){return this.removeEventListeners(document),this}delegateEvent(e,t,r){return Pe.on(this.container,e+this.getEventNamespace(),t,r),this}undelegateEvent(e,t,r){const i=e+this.getEventNamespace();return t==null?Pe.off(this.container,i):typeof t=="string"?Pe.off(this.container,i,t,r):Pe.off(this.container,i,t),this}addEventListeners(e,t,r){if(t==null)return this;const i=this.getEventNamespace();return Object.keys(t).forEach(s=>{const o=this.getEventHandler(t[s]);typeof o=="function"&&Pe.on(e,s+i,r,o)}),this}removeEventListeners(e){return e!=null&&Pe.off(e,this.getEventNamespace()),this}getEventNamespace(){return`.${rn.prefixCls}-event-${this.cid}`}getEventHandler(e){let t;if(typeof e=="string"){const r=this[e];typeof r=="function"&&(t=(...i)=>r.call(this,...i))}else t=(...r)=>e.call(this,...r);return t}getEventTarget(e,t={}){const{target:r,type:i,clientX:s=0,clientY:o=0}=e;return t.fromPoint||i==="touchmove"||i==="touchend"?document.elementFromPoint(s,o):r}stopPropagation(e){return this.setEventData(e,{propagationStopped:!0}),this}isPropagationStopped(e){return this.getEventData(e).propagationStopped===!0}getEventData(e){return this.eventData(e)}setEventData(e,t){return this.eventData(e,t)}eventData(e,t){if(e==null)throw new TypeError("Event object required");let r=e.data;const i=`__${this.cid}__`;return t==null?r==null?{}:r[i]||{}:(r==null&&(r=e.data={}),r[i]==null?r[i]=Object.assign({},t):r[i]=Object.assign(Object.assign({},r[i]),t),r[i])}normalizeEvent(e){return ge.normalizeEvent(e)}}(function(n){function e(i,s){return s?tr(i||"g"):Xh(i||"div")}n.createElement=e;function t(i,s,o){if(!i||i===".")return{elems:[s]};if(o){const a=o[i];if(a)return{elems:Array.isArray(a)?a:[a]}}{const a=i.includes(">")?`:scope ${i}`:i;return{isCSSSelector:!0,elems:Array.prototype.slice.call(s.querySelectorAll(a))}}}n.find=t;function r(i){let s=i;const o=i.originalEvent,a=o&&o.changedTouches&&o.changedTouches[0];if(a){for(const l in i)a[l]===void 0&&(a[l]=i[l]);s=a}return s}n.normalizeEvent=r})(ge||(ge={})),function(n){n.views={};function e(t){return n.views[t]||null}n.getView=e}(ge||(ge={}));var gf;(function(n){let e=0;function t(){const r=`v${e}`;return e+=1,r}n.uniqueId=t})(gf||(gf={}));class f5{constructor(e){this.view=e,this.clean()}clean(){this.elemCache&&this.elemCache.dispose(),this.elemCache=new af,this.pathCache={}}get(e){return this.elemCache.has(e)||this.elemCache.set(e,{}),this.elemCache.get(e)}getData(e){const t=this.get(e);return t.data||(t.data={}),t.data}getMatrix(e){const t=this.get(e);if(t.matrix==null){const r=this.view.container;t.matrix=nq(e,r)}return ut(t.matrix)}getShape(e){const t=this.get(e);return t.shape==null&&(t.shape=de.toGeometryShape(e)),t.shape.clone()}getBoundingRect(e){const t=this.get(e);return t.boundingRect==null&&(t.boundingRect=de.getBBoxV2(e)),t.boundingRect.clone()}}var Ee;(function(n){function e(c){return c!=null&&!t(c)}n.isJSONMarkup=e;function t(c){return c!=null&&typeof c=="string"}n.isStringMarkup=t;function r(c){return c==null||t(c)?c:Fe(c)}n.clone=r;function i(c){return`${c}`.trim().replace(/[\r|\n]/g," ").replace(/>\s+</g,"><")}n.sanitize=i;function s(c,u={ns:ct.svg}){const h=document.createDocumentFragment(),f={},d={},g=[{markup:Array.isArray(c)?c:[c],parent:h,ns:u.ns}];for(;g.length>0;){const p=g.pop();let b=p.ns||ct.svg;const m=p.markup,y=p.parent;m.forEach(v=>{const w=v.tagName;if(!w)throw new TypeError("Invalid tagName");v.ns&&(b=v.ns);const x=b?Xh(w,b):g1(w),C=v.attrs;C&&fe(x,Lo(C));const S=v.style;S&&ye(x,S);const E=v.className;E!=null&&x.setAttribute("class",Array.isArray(E)?E.join(" "):E),v.textContent&&(x.textContent=v.textContent);const A=v.selector;if(A!=null){if(d[A])throw new TypeError("Selector must be unique");d[A]=x}if(v.groupSelector){let T=v.groupSelector;Array.isArray(T)||(T=[T]),T.forEach(k=>{f[k]||(f[k]=[]),f[k].push(x)})}y.appendChild(x);const O=v.children;Array.isArray(O)&&g.push({ns:b,markup:O,parent:x})})}return Object.keys(f).forEach(p=>{if(d[p])throw new Error("Ambiguous group selector");d[p]=f[p]}),{fragment:h,selectors:d,groups:f}}n.parseJSONMarkup=s;function o(c){return c instanceof SVGElement?tr("g"):g1("div")}function a(c){if(t(c)){const d=Z.createVectors(c),g=d.length;if(g===1)return{elem:d[0].node};if(g>1){const p=o(d[0].node);return d.forEach(b=>{p.appendChild(b.node)}),{elem:p}}return{}}const u=s(c),h=u.fragment;let f=null;return h.childNodes.length>1?(f=o(h.firstChild),f.appendChild(h)):f=h.firstChild,{elem:f,selectors:u.selectors}}n.renderMarkup=a;function l(c){const u=Z.createVectors(c),h=document.createDocumentFragment();for(let f=0,d=u.length;f<d;f+=1){const g=u[f].node;h.appendChild(g)}return{fragment:h,selectors:{}}}n.parseLabelStringMarkup=l})(Ee||(Ee={})),function(n){function e(t,r,i){if(t!=null){let s;const o=t.tagName.toLowerCase();if(t===r)return typeof i=="string"?s=`> ${o} > ${i}`:s=`> ${o}`,s;const a=t.parentNode;if(a&&a.childNodes.length>1){const l=Yh(t)+1;s=`${o}:nth-child(${l})`}else s=o;return i&&(s+=` > ${i}`),e(t.parentNode,r,s)}return i}n.getSelector=e}(Ee||(Ee={})),function(n){function e(){return"g"}n.getPortContainerMarkup=e;function t(){return{tagName:"circle",selector:"circle",attrs:{r:10,fill:"#FFFFFF",stroke:"#000000"}}}n.getPortMarkup=t;function r(){return{tagName:"text",selector:"text",attrs:{fill:"#000000"}}}n.getPortLabelMarkup=r}(Ee||(Ee={})),function(n){function e(){return[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}]}n.getEdgeMarkup=e}(Ee||(Ee={})),function(n){function e(t=!1){return{tagName:"foreignObject",selector:"fo",children:[{ns:ct.xhtml,tagName:"body",selector:"foBody",attrs:{xmlns:ct.xhtml},style:{width:"100%",height:"100%",background:"transparent"},children:t?[]:[{tagName:"div",selector:"foContent",style:{width:"100%",height:"100%"}}]}]}}n.getForeignObjectMarkup=e}(Ee||(Ee={}));class yw{constructor(e){this.view=e}get cell(){return this.view.cell}getDefinition(e){return this.cell.getAttrDefinition(e)}processAttrs(e,t){let r,i,s,o;const a=[];return Object.keys(t).forEach(l=>{const c=t[l],u=this.getDefinition(l),h=K(Vn.isValidDefinition,this.view,u,c,{elem:e,attrs:t,cell:this.cell,view:this.view});if(u&&h)typeof u=="string"?(r==null&&(r={}),r[u]=c):c!==null&&a.push({name:l,definition:u});else{r==null&&(r={});const f=b1.includes(l)?l:Yb(l);r[f]=c}}),a.forEach(({name:l,definition:c})=>{const u=t[l];typeof c.set=="function"&&(i==null&&(i={}),i[l]=u),typeof c.offset=="function"&&(s==null&&(s={}),s[l]=u),typeof c.position=="function"&&(o==null&&(o={}),o[l]=u)}),{raw:t,normal:r,set:i,offset:s,position:o}}mergeProcessedAttrs(e,t){e.set=Object.assign(Object.assign({},e.set),t.set),e.position=Object.assign(Object.assign({},e.position),t.position),e.offset=Object.assign(Object.assign({},e.offset),t.offset);const r=e.normal&&e.normal.transform;r!=null&&t.normal&&(t.normal.transform=r),e.normal=t.normal}findAttrs(e,t,r,i){const s=[],o=new af;return Object.keys(e).forEach(a=>{const l=e[a];if(!Dn(l))return;const{isCSSSelector:c,elems:u}=ge.find(a,t,i);r[a]=u;for(let h=0,f=u.length;h<f;h+=1){const d=u[h],g=i&&i[a]===d,p=o.get(d);if(p){p.array||(s.push(d),p.array=!0,p.attrs=[p.attrs],p.priority=[p.priority]);const b=p.attrs,m=p.priority;if(g)b.unshift(l),m.unshift(-1);else{const y=KV(m,c?-1:f);b.splice(y,0,l),m.splice(y,0,f)}}else o.set(d,{elem:d,attrs:l,priority:g?-1:f,array:!1})}}),s.forEach(a=>{const l=o.get(a),c=l.attrs;l.attrs=c.reduceRight((u,h)=>Re(u,h),{})}),o}updateRelativeAttrs(e,t,r){const i=t.raw||{};let s=t.normal||{};const o=t.set,a=t.position,l=t.offset,c=()=>({elem:e,cell:this.cell,view:this.view,attrs:i,refBBox:r.clone()});if(o!=null&&Object.keys(o).forEach(b=>{const m=o[b],y=this.getDefinition(b);if(y!=null){const v=K(y.set,this.view,m,c());typeof v=="object"?s=Object.assign(Object.assign({},s),v):v!=null&&(s[b]=v)}}),e instanceof HTMLElement){this.view.setAttrs(s,e);return}const u=s.transform,h=u?`${u}`:null,f=Do(h),d=new P(f.e,f.f);u&&(delete s.transform,f.e=0,f.f=0);let g=!1;a!=null&&Object.keys(a).forEach(b=>{const m=a[b],y=this.getDefinition(b);if(y!=null){const v=K(y.position,this.view,m,c());v!=null&&(g=!0,d.translate(P.create(v)))}}),this.view.setAttrs(s,e);let p=!1;if(l!=null){const b=this.view.getBoundingRectOfElement(e);if(b.width>0&&b.height>0){const m=de.transformRectangle(b,f);Object.keys(l).forEach(y=>{const v=l[y],w=this.getDefinition(y);if(w!=null){const x=K(w.offset,this.view,v,{elem:e,cell:this.cell,view:this.view,attrs:i,refBBox:m});x!=null&&(p=!0,d.translate(P.create(x)))}})}}(u!=null||g||p)&&(d.round(1),f.e=d.x,f.f=d.y,e.setAttribute("transform",ms(f)))}update(e,t,r){const i={},s=this.findAttrs(r.attrs||t,e,i,r.selectors),o=r.attrs?this.findAttrs(t,e,i,r.selectors):s,a=[];s.each(u=>{const h=u.elem,f=u.attrs,d=this.processAttrs(h,f);if(d.set==null&&d.position==null&&d.offset==null)this.view.setAttrs(d.normal,h);else{const g=o.get(h),p=g?g.attrs:null,b=p&&f.ref==null?p.ref:f.ref;let m;if(b){if(m=(i[b]||this.view.find(b,e,r.selectors))[0],!m)throw new Error(`"${b}" reference does not exist.`)}else m=null;const y={node:h,refNode:m,attributes:p,processedAttributes:d},v=a.findIndex(w=>w.refNode===h);v>-1?a.splice(v,0,y):a.push(y)}});const l=new af;let c;a.forEach(u=>{const h=u.node,f=u.refNode;let d;const g=f!=null&&r.rotatableNode!=null&&m1(r.rotatableNode,f);if(f&&(d=l.get(f)),!d){const m=g?r.rotatableNode:e;d=f?de.getBBox(f,{target:m}):r.rootBBox,f&&l.set(f,d)}let p;r.attrs&&u.attributes?(p=this.processAttrs(h,u.attributes),this.mergeProcessedAttrs(p,u.processedAttributes)):p=u.processedAttributes;let b=d;g&&r.rotatableNode!=null&&!r.rotatableNode.contains(h)&&(c||(c=Do(fe(r.rotatableNode,"transform"))),b=de.transformRectangle(d,c)),this.updateRelativeAttrs(h,p,b)})}}class vw{get cell(){return this.view.cell}constructor(e,t,r=[]){this.view=e;const i={},s={};let o=0;Object.keys(t).forEach(l=>{let c=t[l];Array.isArray(c)||(c=[c]),c.forEach(u=>{let h=i[u];h||(o+=1,h=i[u]=1<<o),s[l]|=h})});let a=r;if(Array.isArray(a)||(a=[a]),a.forEach(l=>{i[l]||(o+=1,i[l]=1<<o)}),o>25)throw new Error("Maximum number of flags exceeded.");this.flags=i,this.attrs=s,this.bootstrap=r}getFlag(e){const t=this.flags;return t==null?0:Array.isArray(e)?e.reduce((r,i)=>r|t[i],0):t[e]|0}hasAction(e,t){return e&this.getFlag(t)}removeAction(e,t){return e^e&this.getFlag(t)}getBootstrapFlag(){return this.getFlag(this.bootstrap)}getChangedFlag(){let e=0;return this.attrs&&Object.keys(this.attrs).forEach(t=>{this.cell.hasChanged(t)&&(e|=this.attrs[t])}),e}}var d5=function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},g5=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class Xe extends ge{static getDefaults(){return this.defaults}static config(e){this.defaults=this.getOptions(e)}static getOptions(e){const t=(c,u)=>u!=null?Vb([...Array.isArray(c)?c:[c],...Array.isArray(u)?u:[u]]):Array.isArray(c)?[...c]:[c],r=Fe(this.getDefaults()),{bootstrap:i,actions:s,events:o,documentEvents:a}=e,l=g5(e,["bootstrap","actions","events","documentEvents"]);return i&&(r.bootstrap=t(r.bootstrap,i)),s&&Object.entries(s).forEach(([c,u])=>{const h=r.actions[c];u&&h?r.actions[c]=t(h,u):u&&(r.actions[c]=t(u))}),o&&(r.events=Object.assign(Object.assign({},r.events),o)),e.documentEvents&&(r.documentEvents=Object.assign(Object.assign({},r.documentEvents),a)),Re(r,l)}get[Symbol.toStringTag](){return Xe.toStringTag}constructor(e,t={}){super(),this.cell=e,this.options=this.ensureOptions(t),this.graph=this.options.graph,this.attr=new yw(this),this.flag=new vw(this,this.options.actions,this.options.bootstrap),this.cache=new f5(this),this.setContainer(this.ensureContainer()),this.setup(),this.init()}init(){}onRemove(){this.removeTools()}get priority(){return this.options.priority}get rootSelector(){return this.options.rootSelector}getConstructor(){return this.constructor}ensureOptions(e){return this.getConstructor().getOptions(e)}getContainerTagName(){return this.options.isSvgElement?"g":"div"}getContainerStyle(){}getContainerAttrs(){return{"data-cell-id":this.cell.id,"data-shape":this.cell.shape}}getContainerClassName(){return this.prefixClassName("cell")}ensureContainer(){return ge.createElement(this.getContainerTagName(),this.options.isSvgElement)}setContainer(e){if(this.container!==e){this.undelegateEvents(),this.container=e,this.options.events!=null&&this.delegateEvents(this.options.events);const t=this.getContainerAttrs();t!=null&&this.setAttrs(t,e);const r=this.getContainerStyle();r!=null&&this.setStyle(r,e);const i=this.getContainerClassName();i!=null&&this.addClass(i,e)}return this}isNodeView(){return!1}isEdgeView(){return!1}render(){return this}confirmUpdate(e,t={}){return 0}getBootstrapFlag(){return this.flag.getBootstrapFlag()}getFlag(e){return this.flag.getFlag(e)}hasAction(e,t){return this.flag.hasAction(e,t)}removeAction(e,t){return this.flag.removeAction(e,t)}handleAction(e,t,r,i){if(this.hasAction(e,t)){r();const s=[t];return i&&(typeof i=="string"?s.push(i):s.push(...i)),this.removeAction(e,s)}return e}setup(){this.cell.on("changed",this.onCellChanged,this)}onCellChanged({options:e}){this.onAttrsChange(e)}onAttrsChange(e){let t=this.flag.getChangedFlag();e.updated||!t||(e.dirty&&this.hasAction(t,"update")&&(t|=this.getFlag("render")),e.toolId&&(e.async=!1),this.graph!=null&&this.graph.renderer.requestViewUpdate(this,t,e))}parseJSONMarkup(e,t){const r=Ee.parseJSONMarkup(e),i=r.selectors,s=this.rootSelector;if(t&&s){if(i[s])throw new Error("Invalid root selector");i[s]=t}return r}can(e){let t=this.graph.options.interacting;if(typeof t=="function"&&(t=K(t,this.graph,this)),typeof t=="object"){let r=t[e];return typeof r=="function"&&(r=K(r,this.graph,this)),r!==!1}return typeof t=="boolean"?t:!1}cleanCache(){return this.cache.clean(),this}getCache(e){return this.cache.get(e)}getDataOfElement(e){return this.cache.getData(e)}getMatrixOfElement(e){return this.cache.getMatrix(e)}getShapeOfElement(e){return this.cache.getShape(e)}getBoundingRectOfElement(e){return this.cache.getBoundingRect(e)}getBBoxOfElement(e){const t=this.getBoundingRectOfElement(e),r=this.getMatrixOfElement(e),i=this.getRootRotatedMatrix(),s=this.getRootTranslatedMatrix();return de.transformRectangle(t,s.multiply(i).multiply(r))}getUnrotatedBBoxOfElement(e){const t=this.getBoundingRectOfElement(e),r=this.getMatrixOfElement(e),i=this.getRootTranslatedMatrix();return de.transformRectangle(t,i.multiply(r))}getBBox(e={}){let t;if(e.useCellGeometry){const r=this.cell,i=r.isNode()?r.getAngle():0;t=r.getBBox().bbox(i)}else t=this.getBBoxOfElement(this.container);return this.graph.coord.localToGraphRect(t)}getRootTranslatedMatrix(){const e=this.cell,t=e.isNode()?e.getPosition():{x:0,y:0};return ut().translate(t.x,t.y)}getRootRotatedMatrix(){let e=ut();const t=this.cell,r=t.isNode()?t.getAngle():0;if(r){const i=t.getBBox(),s=i.width/2,o=i.height/2;e=e.translate(s,o).rotate(r).translate(-s,-o)}return e}findMagnet(e=this.container){return this.findByAttr("magnet",e)}updateAttrs(e,t,r={}){r.rootBBox==null&&(r.rootBBox=new D),r.selectors==null&&(r.selectors=this.selectors),this.attr.update(e,t,r)}isEdgeElement(e){return this.cell.isEdge()&&(e==null||e===this.container)}prepareHighlight(e,t={}){const r=e||this.container;return t.partial=r===this.container,r}highlight(e,t={}){const r=this.prepareHighlight(e,t);return this.notify("cell:highlight",{magnet:r,options:t,view:this,cell:this.cell}),this.isEdgeView()?this.notify("edge:highlight",{magnet:r,options:t,view:this,edge:this.cell,cell:this.cell}):this.isNodeView()&&this.notify("node:highlight",{magnet:r,options:t,view:this,node:this.cell,cell:this.cell}),this}unhighlight(e,t={}){const r=this.prepareHighlight(e,t);return this.notify("cell:unhighlight",{magnet:r,options:t,view:this,cell:this.cell}),this.isNodeView()?this.notify("node:unhighlight",{magnet:r,options:t,view:this,node:this.cell,cell:this.cell}):this.isEdgeView()&&this.notify("edge:unhighlight",{magnet:r,options:t,view:this,edge:this.cell,cell:this.cell}),this}notifyUnhighlight(e,t){}getEdgeTerminal(e,t,r,i,s){const o=this.cell,a=this.findAttr("port",e),l=e.getAttribute("data-selector"),c={cell:o.id};return l!=null&&(c.magnet=l),a!=null?(c.port=a,o.isNode()&&!o.hasPort(a)&&l==null&&(c.selector=this.getSelector(e))):l==null&&this.container!==e&&(c.selector=this.getSelector(e)),c}getMagnetFromEdgeTerminal(e){const t=this.cell,r=this.container,i=e.port;let s=e.magnet,o;return i!=null&&t.isNode()&&t.hasPort(i)?o=this.findPortElem(i,s)||r:(s||(s=e.selector),!s&&i!=null&&(s=`[port="${i}"]`),o=this.findOne(s,r,this.selectors)),o}hasTools(e){const t=this.tools;return t==null?!1:e==null?!0:t.name===e}addTools(e){if(this.removeTools(),e){if(!this.can("toolsAddable"))return this;const t=et.isToolsView(e)?e:new et(e);this.tools=t,t.config({view:this}),t.mount()}return this}updateTools(e={}){return this.tools&&this.tools.update(e),this}removeTools(){return this.tools&&(this.tools.remove(),this.tools=null),this}hideTools(){return this.tools&&this.tools.hide(),this}showTools(){return this.tools&&this.tools.show(),this}renderTools(){const e=this.cell.getTools();return this.addTools(e),this}notify(e,t){return this.trigger(e,t),this.graph.trigger(e,t),this}getEventArgs(e,t,r){const i=this,s=i.cell;return t==null||r==null?{e,view:i,cell:s}:{e,x:t,y:r,view:i,cell:s}}onClick(e,t,r){this.notify("cell:click",this.getEventArgs(e,t,r))}onDblClick(e,t,r){this.notify("cell:dblclick",this.getEventArgs(e,t,r))}onContextMenu(e,t,r){this.notify("cell:contextmenu",this.getEventArgs(e,t,r))}onMouseDown(e,t,r){this.cell.model&&(this.cachedModelForMouseEvent=this.cell.model,this.cachedModelForMouseEvent.startBatch("mouse")),this.notify("cell:mousedown",this.getEventArgs(e,t,r))}onMouseUp(e,t,r){this.notify("cell:mouseup",this.getEventArgs(e,t,r)),this.cachedModelForMouseEvent&&(this.cachedModelForMouseEvent.stopBatch("mouse",{cell:this.cell}),this.cachedModelForMouseEvent=null)}onMouseMove(e,t,r){this.notify("cell:mousemove",this.getEventArgs(e,t,r))}onMouseOver(e){this.notify("cell:mouseover",this.getEventArgs(e))}onMouseOut(e){this.notify("cell:mouseout",this.getEventArgs(e))}onMouseEnter(e){this.notify("cell:mouseenter",this.getEventArgs(e))}onMouseLeave(e){this.notify("cell:mouseleave",this.getEventArgs(e))}onMouseWheel(e,t,r,i){this.notify("cell:mousewheel",Object.assign({delta:i},this.getEventArgs(e,t,r)))}onCustomEvent(e,t,r,i){this.notify("cell:customevent",Object.assign({name:t},this.getEventArgs(e,r,i))),this.notify(t,Object.assign({},this.getEventArgs(e,r,i)))}onMagnetMouseDown(e,t,r,i){}onMagnetDblClick(e,t,r,i){}onMagnetContextMenu(e,t,r,i){}onLabelMouseDown(e,t,r){}checkMouseleave(e){const t=this.getEventTarget(e,{fromPoint:!0}),r=this.graph.findViewByElem(t);r!==this&&(this.onMouseLeave(e),r&&r.onMouseEnter(e))}dispose(){this.cell.off("changed",this.onCellChanged,this)}}Xe.defaults={isSvgElement:!0,rootSelector:"root",priority:0,bootstrap:[],actions:{}},d5([Xe.dispose()],Xe.prototype,"dispose",null),function(n){n.Flag=vw,n.Attr=yw}(Xe||(Xe={})),function(n){n.toStringTag=`X6.${n.name}`;function e(t){if(t==null)return!1;if(t instanceof n)return!0;const r=t[Symbol.toStringTag],i=t;return(r==null||r===n.toStringTag)&&typeof i.isNodeView=="function"&&typeof i.isEdgeView=="function"&&typeof i.confirmUpdate=="function"}n.isCellView=e}(Xe||(Xe={})),function(n){function e(r){return function(i){i.config({priority:r})}}n.priority=e;function t(r){return function(i){i.config({bootstrap:r})}}n.bootstrap=t}(Xe||(Xe={})),function(n){n.registry=We.create({type:"view"})}(Xe||(Xe={}));class et extends ge{get name(){return this.options.name}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get[Symbol.toStringTag](){return et.toStringTag}constructor(e={}){super(),this.svgContainer=this.createContainer(!0,e),this.htmlContainer=this.createContainer(!1,e),this.config(e)}createContainer(e,t){const r=e?ge.createElement("g",!0):ge.createElement("div",!1);return J(r,this.prefixClassName("cell-tools")),t.className&&J(r,t.className),r}config(e){if(this.options=Object.assign(Object.assign({},this.options),e),!Xe.isCellView(e.view)||e.view===this.cellView)return this;this.cellView=e.view,this.cell.isEdge()?(J(this.svgContainer,this.prefixClassName("edge-tools")),J(this.htmlContainer,this.prefixClassName("edge-tools"))):this.cell.isNode()&&(J(this.svgContainer,this.prefixClassName("node-tools")),J(this.htmlContainer,this.prefixClassName("node-tools"))),this.svgContainer.setAttribute("data-cell-id",this.cell.id),this.htmlContainer.setAttribute("data-cell-id",this.cell.id),this.name&&(this.svgContainer.setAttribute("data-tools-name",this.name),this.htmlContainer.setAttribute("data-tools-name",this.name));const t=this.options.items;if(!Array.isArray(t))return this;this.tools=[];const r=[];t.forEach(i=>{et.ToolItem.isToolItem(i)?i.name==="vertices"?r.unshift(i):r.push(i):(typeof i=="object"?i.name:i)==="vertices"?r.unshift(i):r.push(i)});for(let i=0;i<r.length;i+=1){const s=r[i];let o;if(et.ToolItem.isToolItem(s))o=s;else{const a=typeof s=="object"?s.name:s,l=typeof s=="object"?s.args||{}:{};if(a){if(this.cell.isNode()){const c=Ps.registry.get(a);if(c)o=new c(l);else return Ps.registry.onNotFound(a)}else if(this.cell.isEdge()){const c=Es.registry.get(a);if(c)o=new c(l);else return Es.registry.onNotFound(a)}}}o&&(o.config(this.cellView,this),o.render(),(o.options.isSVGElement!==!1?this.svgContainer:this.htmlContainer).appendChild(o.container),this.tools.push(o))}return this}update(e={}){const t=this.tools;return t&&t.forEach(r=>{e.toolId!==r.cid&&r.isVisible()&&r.update()}),this}focus(e){const t=this.tools;return t&&t.forEach(r=>{e===r?r.show():r.hide()}),this}blur(e){const t=this.tools;return t&&t.forEach(r=>{r!==e&&!r.isVisible()&&(r.show(),r.update())}),this}hide(){return this.focus(null)}show(){return this.blur(null)}remove(){const e=this.tools;return e&&(e.forEach(t=>t.remove()),this.tools=null),nr(this.svgContainer),nr(this.htmlContainer),super.remove()}mount(){const e=this.tools,t=this.cellView;if(t&&e){const r=e.some(s=>s.options.isSVGElement!==!1),i=e.some(s=>s.options.isSVGElement===!1);r&&(this.options.local?t.container:t.graph.view.decorator).appendChild(this.svgContainer),i&&this.graph.container.appendChild(this.htmlContainer)}return this}}(function(n){n.toStringTag=`X6.${n.name}`;function e(t){if(t==null)return!1;if(t instanceof n)return!0;const r=t[Symbol.toStringTag],i=t;return(r==null||r===n.toStringTag)&&i.graph!=null&&i.cell!=null&&typeof i.config=="function"&&typeof i.update=="function"&&typeof i.focus=="function"&&typeof i.blur=="function"&&typeof i.show=="function"&&typeof i.hide=="function"}n.isToolsView=e})(et||(et={})),function(n){class e extends ge{static getDefaults(){return this.defaults}static config(r){this.defaults=this.getOptions(r)}static getOptions(r){return Re(Fe(this.getDefaults()),r)}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get name(){return this.options.name}get[Symbol.toStringTag](){return e.toStringTag}constructor(r={}){super(),this.visible=!0,this.options=this.getOptions(r),this.container=ge.createElement(this.options.tagName||"g",this.options.isSVGElement!==!1),J(this.container,this.prefixClassName("cell-tool")),typeof this.options.className=="string"&&J(this.container,this.options.className),this.init()}init(){}getOptions(r){return this.constructor.getOptions(r)}delegateEvents(){return this.options.events&&super.delegateEvents(this.options.events),this}config(r,i){return this.cellView=r,this.parent=i,this.stamp(this.container),this.cell.isEdge()?J(this.container,this.prefixClassName("edge-tool")):this.cell.isNode()&&J(this.container,this.prefixClassName("node-tool")),this.name&&this.container.setAttribute("data-tool-name",this.name),this.delegateEvents(),this}render(){this.empty();const r=this.options.markup;if(r){const i=Ee.parseJSONMarkup(r);this.container.appendChild(i.fragment),this.childNodes=i.selectors}return this.onRender(),this}onRender(){}update(){return this}stamp(r){r&&r.setAttribute("data-cell-id",this.cellView.cell.id)}show(){return this.container.style.display="",this.visible=!0,this}hide(){return this.container.style.display="none",this.visible=!1,this}isVisible(){return this.visible}focus(){const r=this.options.focusOpacity;return r!=null&&Number.isFinite(r)&&(this.container.style.opacity=`${r}`),this.parent.focus(this),this}blur(){return this.container.style.opacity="",this.parent.blur(this),this}guard(r){return this.graph==null||this.cellView==null?!0:this.graph.view.guard(r,this.cellView)}}e.defaults={isSVGElement:!0,tagName:"g"},n.ToolItem=e,function(t){let r=0;function i(o){return o?Vh(o):(r+=1,`CustomTool${r}`)}function s(o){const a=zh(i(o.name),this);return a.config(o),a}t.define=s}(e=n.ToolItem||(n.ToolItem={})),function(t){t.toStringTag=`X6.${t.name}`;function r(i){if(i==null)return!1;if(i instanceof t)return!0;const s=i[Symbol.toStringTag],o=i;return(s==null||s===t.toStringTag)&&o.graph!=null&&o.cell!=null&&typeof o.config=="function"&&typeof o.update=="function"&&typeof o.focus=="function"&&typeof o.blur=="function"&&typeof o.show=="function"&&typeof o.hide=="function"&&typeof o.isVisible=="function"}t.isToolItem=r}(e=n.ToolItem||(n.ToolItem={}))}(et||(et={}));const p5=n=>n;function bw(n,e){return e===0?"0%":`${Math.round(n/e*100)}%`}function ww(n){return(t,r,i,s)=>r.isEdgeElement(i)?y5(n,t,r,i,s):m5(n,t,r,i,s)}function m5(n,e,t,r,i){const s=t.cell,o=s.getAngle(),a=t.getUnrotatedBBoxOfElement(r),l=s.getBBox().getCenter(),c=P.create(i).rotate(o,l);let u=c.x-a.x,h=c.y-a.y;return n&&(u=bw(u,a.width),h=bw(h,a.height)),e.anchor={name:"topLeft",args:{dx:u,dy:h,rotate:!0}},e}function y5(n,e,t,r,i){const s=t.getConnection();if(!s)return e;const o=s.closestPointLength(i);if(n){const a=s.length();e.anchor={name:"ratio",args:{ratio:o/a}}}else e.anchor={name:"length",args:{length:o}};return e}const v5=ww(!0),b5=ww(!1),w5=Object.freeze(Object.defineProperty({__proto__:null,noop:p5,pinAbsolute:b5,pinRelative:v5},Symbol.toStringTag,{value:"Module"}));var pf;(function(n){n.presets=w5,n.registry=We.create({type:"connection strategy"}),n.registry.register(n.presets,!0)})(pf||(pf={}));function xw(n,e,t,r){return K(pf.presets.pinRelative,this.graph,{},e,t,n,this.cell,r,{}).anchor}function Cw(n,e){return e?n.cell.getBBox():n.cell.isEdge()?n.getConnection().bbox():n.getUnrotatedBBoxOfElement(n.container)}class jr extends et.ToolItem{onRender(){J(this.container,this.prefixClassName("cell-tool-button")),this.update()}update(){return this.updatePosition(),this}updatePosition(){const t=this.cellView.cell.isEdge()?this.getEdgeMatrix():this.getNodeMatrix();ys(this.container,t,{absolute:!0})}getNodeMatrix(){const e=this.cellView,t=this.options;let{x:r=0,y:i=0}=t;const{offset:s,useCellGeometry:o,rotate:a}=t;let l=Cw(e,o);const c=e.cell.getAngle();a||(l=l.bbox(c));let u=0,h=0;typeof s=="number"?(u=s,h=s):typeof s=="object"&&(u=s.x,h=s.y),r=Vt(r,l.width),i=Vt(i,l.height);let f=ut().translate(l.x+l.width/2,l.y+l.height/2);return a&&(f=f.rotate(c)),f=f.translate(r+u-l.width/2,i+h-l.height/2),f}getEdgeMatrix(){const e=this.cellView,t=this.options,{offset:r=0,distance:i=0,rotate:s}=t;let o,a,l;const c=Vt(i,1);c>=0&&c<=1?o=e.getTangentAtRatio(c):o=e.getTangentAtLength(c),o?(a=o.start,l=o.vector().vectorAngle(new P(1,0))||0):(a=e.getConnection().start,l=0);let u=ut().translate(a.x,a.y).rotate(l);return typeof r=="object"?u=u.translate(r.x||0,r.y||0):u=u.translate(0,r),s||(u=u.rotate(-l)),u}onMouseDown(e){if(this.guard(e))return;e.stopPropagation(),e.preventDefault();const t=this.options.onClick;typeof t=="function"&&K(t,this.cellView,{e,view:this.cellView,cell:this.cellView.cell,btn:this})}}(function(n){n.config({name:"button",useCellGeometry:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"}})})(jr||(jr={})),function(n){n.Remove=n.define({name:"button-remove",markup:[{tagName:"circle",selector:"button",attrs:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attrs:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],distance:60,offset:0,useCellGeometry:!0,onClick({view:e,btn:t}){t.parent.remove(),e.cell.remove({ui:!0,toolId:t.cid})}})}(jr||(jr={}));var x5=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class Ql extends et.ToolItem{onRender(){if(J(this.container,this.prefixClassName("cell-tool-boundary")),this.options.attrs){const e=this.options.attrs,{class:t}=e,r=x5(e,["class"]);fe(this.container,Lo(r)),t&&J(this.container,t)}this.update()}update(){const e=this.cellView,t=this.options,{useCellGeometry:r,rotate:i}=t,s=Bn(t.padding);let o=Cw(e,r).moveAndExpand({x:-s.left,y:-s.top,width:s.left+s.right,height:s.top+s.bottom});const a=e.cell;if(a.isNode()){const l=a.getAngle();if(l)if(i){const c=a.getBBox().getCenter();rf(this.container,l,c.x,c.y,{absolute:!0})}else o=o.bbox(l)}return fe(this.container,o.toJSON()),this}}(function(n){n.config({name:"boundary",tagName:"rect",padding:10,useCellGeometry:!0,attrs:{fill:"none",stroke:"#333","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"}})})(Ql||(Ql={}));class Ko extends et.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}onRender(){return this.addClass(this.prefixClassName("edge-tool-vertices")),this.options.addable&&this.updatePath(),this.resetHandles(),this.renderHandles(),this}update(){return this.vertices.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.addable&&this.updatePath(),this}resetHandles(){const e=this.handles;this.handles=[],e&&e.forEach(t=>{this.stopHandleListening(t),t.remove()})}renderHandles(){const e=this.vertices;for(let t=0,r=e.length;t<r;t+=1){const i=e[t],s=this.options.createHandle,o=this.options.processHandle,a=s({index:t,graph:this.graph,guard:l=>this.guard(l),attrs:this.options.attrs||{}});o&&o(a),a.updatePosition(i.x,i.y),this.stamp(a.container),this.container.appendChild(a.container),this.handles.push(a),this.startHandleListening(a)}}updateHandles(){const e=this.vertices;for(let t=0,r=e.length;t<r;t+=1){const i=e[t],s=this.handles[t];s&&s.updatePosition(i.x,i.y)}}updatePath(){const e=this.childNodes.connection;e&&e.setAttribute("d",this.cellView.getConnectionPathData())}startHandleListening(e){const t=this.cellView;t.can("vertexMovable")&&(e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.on("remove",this.onHandleRemove,this)}stopHandleListening(e){const t=this.cellView;t.can("vertexMovable")&&(e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.off("remove",this.onHandleRemove,this)}getNeighborPoints(e){const t=this.cellView,r=this.vertices,i=e>0?r[e-1]:t.sourceAnchor,s=e<r.length-1?r[e+1]:t.targetAnchor;return{prev:P.create(i),next:P.create(s)}}getMouseEventArgs(e){const t=this.normalizeEvent(e),{x:r,y:i}=this.graph.snapToGrid(t.clientX,t.clientY);return{e:t,x:r,y:i}}onHandleChange({e}){this.focus();const t=this.cellView;if(t.cell.startBatch("move-vertex",{ui:!0,toolId:this.cid}),!this.options.stopPropagation){const{e:r,x:i,y:s}=this.getMouseEventArgs(e);this.eventData(r,{start:{x:i,y:s}}),t.notifyMouseDown(r,i,s)}}onHandleChanging({handle:e,e:t}){const r=this.cellView,i=e.options.index,{e:s,x:o,y:a}=this.getMouseEventArgs(t),l={x:o,y:a};this.snapVertex(l,i),r.cell.setVertexAt(i,l,{ui:!0,toolId:this.cid}),e.updatePosition(l.x,l.y),this.options.stopPropagation||r.notifyMouseMove(s,o,a)}stopBatch(e){this.cell.stopBatch("move-vertex",{ui:!0,toolId:this.cid}),e&&this.cell.stopBatch("add-vertex",{ui:!0,toolId:this.cid})}onHandleChanged({e}){const t=this.options,r=this.cellView;if(t.addable&&this.updatePath(),!t.removeRedundancies){this.stopBatch(this.eventData(e).vertexAdded);return}r.removeRedundantLinearVertices({ui:!0,toolId:this.cid})&&this.render(),this.blur(),this.stopBatch(this.eventData(e).vertexAdded);const{e:s,x:o,y:a}=this.getMouseEventArgs(e);if(!this.options.stopPropagation){r.notifyMouseUp(s,o,a);const{start:l}=this.eventData(s);if(l){const{x:c,y:u}=l;c===o&&u===a&&r.onClick(s,o,a)}}r.checkMouseleave(s),t.onChanged&&t.onChanged({edge:r.cell,edgeView:r})}snapVertex(e,t){const r=this.options.snapRadius||0;if(r>0){const i=this.getNeighborPoints(t),s=i.prev,o=i.next;Math.abs(e.x-s.x)<r?e.x=s.x:Math.abs(e.x-o.x)<r&&(e.x=o.x),Math.abs(e.y-s.y)<r?e.y=i.prev.y:Math.abs(e.y-o.y)<r&&(e.y=o.y)}}onHandleRemove({handle:e,e:t}){if(this.options.removable){const r=e.options.index,i=this.cellView;i.cell.removeVertexAt(r,{ui:!0}),this.options.addable&&this.updatePath(),i.checkMouseleave(this.normalizeEvent(t))}}allowAddVertex(e){const t=this.guard(e),r=this.options.addable&&this.cellView.can("vertexAddable"),i=this.options.modifiers?ir.isMatch(e,this.options.modifiers):!0;return!t&&r&&i}onPathMouseDown(e){const t=this.cellView;if(!this.allowAddVertex(e))return;e.stopPropagation(),e.preventDefault();const r=this.normalizeEvent(e),i=this.graph.snapToGrid(r.clientX,r.clientY).toJSON();t.cell.startBatch("add-vertex",{ui:!0,toolId:this.cid});const s=t.getVertexIndex(i.x,i.y);this.snapVertex(i,s),t.cell.insertVertex(i,s,{ui:!0,toolId:this.cid}),this.render();const o=this.handles[s];this.eventData(r,{vertexAdded:!0}),o.onMouseDown(r)}onRemove(){this.resetHandles()}}(function(n){class e extends ge{get graph(){return this.options.graph}constructor(r){super(),this.options=r,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDoubleClick"})}render(){this.container=ge.createElement("circle",!0);const r=this.options.attrs;if(typeof r=="function"){const i=n.getDefaults();this.setAttrs(Object.assign(Object.assign({},i.attrs),r(this)))}else this.setAttrs(r);this.addClass(this.prefixClassName("edge-tool-vertex"))}updatePosition(r,i){this.setAttrs({cx:r,cy:i})}onMouseDown(r){this.options.guard(r)||(r.stopPropagation(),r.preventDefault(),this.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},r.data),this.emit("change",{e:r,handle:this}))}onMouseMove(r){this.emit("changing",{e:r,handle:this})}onMouseUp(r){this.emit("changed",{e:r,handle:this}),this.undelegateDocumentEvents(),this.graph.view.delegateEvents()}onDoubleClick(r){this.emit("remove",{e:r,handle:this})}}n.Handle=e})(Ko||(Ko={})),function(n){const e=rn.prefix("edge-tool-vertex-path");n.config({name:"vertices",snapRadius:20,addable:!0,removable:!0,removeRedundancies:!0,stopPropagation:!0,attrs:{r:6,fill:"#333",stroke:"#fff",cursor:"move","stroke-width":2},createHandle:t=>new n.Handle(t),markup:[{tagName:"path",selector:"connection",className:e,attrs:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"pointer"}}],events:{[`mousedown .${e}`]:"onPathMouseDown",[`touchstart .${e}`]:"onPathMouseDown"}})}(Ko||(Ko={}));class Jo extends et.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}update(){return this.render(),this}onRender(){J(this.container,this.prefixClassName("edge-tool-segments")),this.resetHandles();const e=this.cellView,t=[...this.vertices];t.unshift(e.sourcePoint),t.push(e.targetPoint);for(let r=0,i=t.length;r<i-1;r+=1){const s=t[r],o=t[r+1],a=this.renderHandle(s,o,r);this.stamp(a.container),this.handles.push(a)}return this}renderHandle(e,t,r){const i=this.options.createHandle({index:r,graph:this.graph,guard:s=>this.guard(s),attrs:this.options.attrs||{}});return this.options.processHandle&&this.options.processHandle(i),this.updateHandle(i,e,t),this.container.appendChild(i.container),this.startHandleListening(i),i}startHandleListening(e){e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)}stopHandleListening(e){e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)}resetHandles(){const e=this.handles;this.handles=[],e&&e.forEach(t=>{this.stopHandleListening(t),t.remove()})}shiftHandleIndexes(e){const t=this.handles;for(let r=0,i=t.length;r<i;r+=1)t[r].options.index+=e}resetAnchor(e,t){const r=this.cellView.cell,i={ui:!0,toolId:this.cid};t?r.prop([e,"anchor"],t,i):r.removeProp([e,"anchor"],i)}snapHandle(e,t,r){const i=e.options.axis,s=e.options.index,l=this.cellView.cell.getVertices(),c=l[s-2]||r.sourceAnchor,u=l[s+1]||r.targetAnchor,h=this.options.snapRadius;return Math.abs(t[i]-c[i])<h?t[i]=c[i]:Math.abs(t[i]-u[i])<h&&(t[i]=u[i]),t}onHandleChanging({handle:e,e:t}){const r=this.graph,i=this.options,s=this.cellView,o=i.anchor,a=e.options.axis,l=e.options.index-1,c=this.getEventData(t),u=this.normalizeEvent(t),h=r.snapToGrid(u.clientX,u.clientY),f=this.snapHandle(e,h.clone(),c),d=Fe(this.vertices);let g=d[l],p=d[l+1];const b=s.sourceView,m=s.sourceBBox;let y=!1,v=!1;if(g?l===0?m.containsPoint(g)?(d.shift(),this.shiftHandleIndexes(-1),y=!0):(g[a]=f[a],v=!0):g[a]=f[a]:(g=s.sourceAnchor.toJSON(),g[a]=f[a],m.containsPoint(g)?y=!0:(d.unshift(g),this.shiftHandleIndexes(1),v=!0)),typeof o=="function"&&b){if(y){const E=c.sourceAnchor.clone();E[a]=f[a];const A=K(o,s,E,b,s.sourceMagnet||b.container,"source",s,this);this.resetAnchor("source",A)}v&&this.resetAnchor("source",c.sourceAnchorDef)}const w=s.targetView,x=s.targetBBox;let C=!1,S=!1;if(p?l===d.length-2?x.containsPoint(p)?(d.pop(),C=!0):(p[a]=f[a],S=!0):p[a]=f[a]:(p=s.targetAnchor.toJSON(),p[a]=f[a],x.containsPoint(p)?C=!0:(d.push(p),S=!0)),typeof o=="function"&&w){if(C){const E=c.targetAnchor.clone();E[a]=f[a];const A=K(o,s,E,w,s.targetMagnet||w.container,"target",s,this);this.resetAnchor("target",A)}S&&this.resetAnchor("target",c.targetAnchorDef)}P.equalPoints(d,this.vertices)||this.cellView.cell.setVertices(d,{ui:!0,toolId:this.cid}),this.updateHandle(e,g,p,0),i.stopPropagation||s.notifyMouseMove(u,h.x,h.y)}onHandleChange({handle:e,e:t}){const r=this.options,i=this.handles,s=this.cellView,o=e.options.index;if(Array.isArray(i)){for(let a=0,l=i.length;a<l;a+=1)a!==o&&i[a].hide();if(this.focus(),this.setEventData(t,{sourceAnchor:s.sourceAnchor.clone(),targetAnchor:s.targetAnchor.clone(),sourceAnchorDef:Fe(this.cell.prop(["source","anchor"])),targetAnchorDef:Fe(this.cell.prop(["target","anchor"]))}),this.cell.startBatch("move-segment",{ui:!0,toolId:this.cid}),!r.stopPropagation){const a=this.normalizeEvent(t),l=this.graph.snapToGrid(a.clientX,a.clientY);s.notifyMouseDown(a,l.x,l.y)}}}onHandleChanged({e}){const t=this.options,r=this.cellView;t.removeRedundancies&&r.removeRedundantLinearVertices({ui:!0,toolId:this.cid});const i=this.normalizeEvent(e),s=this.graph.snapToGrid(i.clientX,i.clientY);this.render(),this.blur(),this.cell.stopBatch("move-segment",{ui:!0,toolId:this.cid}),t.stopPropagation||r.notifyMouseUp(i,s.x,s.y),r.checkMouseleave(i),t.onChanged&&t.onChanged({edge:r.cell,edgeView:r})}updateHandle(e,t,r,i=0){const s=this.options.precision||0,o=Math.abs(t.x-r.x)<s,a=Math.abs(t.y-r.y)<s;if(o||a){const l=new V(t,r);if(l.length()<this.options.threshold)e.hide();else{const u=l.getCenter(),h=o?"x":"y";u[h]+=i||0;const f=l.vector().vectorAngle(new P(1,0));e.updatePosition(u.x,u.y,f,this.cellView),e.show(),e.options.axis=h}}else e.hide()}onRemove(){this.resetHandles()}}(function(n){class e extends ge{constructor(r){super(),this.options=r,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"})}render(){this.container=ge.createElement("rect",!0);const r=this.options.attrs;if(typeof r=="function"){const i=n.getDefaults();this.setAttrs(Object.assign(Object.assign({},i.attrs),r(this)))}else this.setAttrs(r);this.addClass(this.prefixClassName("edge-tool-segment"))}updatePosition(r,i,s,o){const a=o.getClosestPoint(new P(r,i))||new P(r,i);let l=ut().translate(a.x,a.y);if(a.equals({x:r,y:i}))l=l.rotate(s);else{let u=new V(r,i,a.x,a.y).vector().vectorAngle(new P(1,0));u!==0&&(u+=90),l=l.rotate(u)}this.setAttrs({transform:ms(l),cursor:s%180===0?"row-resize":"col-resize"})}onMouseDown(r){this.options.guard(r)||(this.trigger("change",{e:r,handle:this}),r.stopPropagation(),r.preventDefault(),this.options.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},r.data))}onMouseMove(r){this.emit("changing",{e:r,handle:this})}onMouseUp(r){this.emit("changed",{e:r,handle:this}),this.undelegateDocumentEvents(),this.options.graph.view.delegateEvents()}show(){this.container.style.display=""}hide(){this.container.style.display="none"}}n.Handle=e})(Jo||(Jo={})),function(n){n.config({name:"segments",precision:.5,threshold:40,snapRadius:10,stopPropagation:!0,removeRedundancies:!0,attrs:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#333",stroke:"#fff","stroke-width":2},createHandle:e=>new n.Handle(e),anchor:xw})}(Jo||(Jo={}));class Zl extends et.ToolItem{get type(){return this.options.type}onRender(){J(this.container,this.prefixClassName(`edge-tool-${this.type}-anchor`)),this.toggleArea(!1),this.update()}update(){const e=this.type;return this.cellView.getTerminalView(e)?(this.updateAnchor(),this.updateArea(),this.container.style.display=""):this.container.style.display="none",this}updateAnchor(){const e=this.childNodes;if(!e)return;const t=e.anchor;if(!t)return;const r=this.type,i=this.cellView,s=this.options,o=i.getTerminalAnchor(r),a=i.cell.prop([r,"anchor"]);t.setAttribute("transform",`translate(${o.x}, ${o.y})`);const l=a?s.customAnchorAttrs:s.defaultAnchorAttrs;l&&Object.keys(l).forEach(c=>{t.setAttribute(c,l[c])})}updateArea(){const e=this.childNodes;if(!e)return;const t=e.area;if(!t)return;const r=this.type,i=this.cellView,s=i.getTerminalView(r);if(s){const o=s.cell,a=i.getTerminalMagnet(r);let l=this.options.areaPadding||0;Number.isFinite(l)||(l=0);let c,u,h;s.isEdgeElement(a)?(c=s.getBBox(),u=0,h=c.getCenter()):(c=s.getUnrotatedBBoxOfElement(a),u=o.getAngle(),h=c.getCenter(),u&&h.rotate(-u,o.getBBox().getCenter())),c.inflate(l),fe(t,{x:-c.width/2,y:-c.height/2,width:c.width,height:c.height,transform:`translate(${h.x}, ${h.y}) rotate(${u})`})}}toggleArea(e){if(this.childNodes){const t=this.childNodes.area;t&&(t.style.display=e?"":"none")}}onMouseDown(e){this.guard(e)||(e.stopPropagation(),e.preventDefault(),this.graph.view.undelegateEvents(),this.options.documentEvents&&this.delegateDocumentEvents(this.options.documentEvents),this.focus(),this.toggleArea(this.options.restrictArea),this.cell.startBatch("move-anchor",{ui:!0,toolId:this.cid}))}resetAnchor(e){const t=this.type,r=this.cell;e?r.prop([t,"anchor"],e,{rewrite:!0,ui:!0,toolId:this.cid}):r.removeProp([t,"anchor"],{ui:!0,toolId:this.cid})}onMouseMove(e){const t=this.type,r=this.cellView,i=r.getTerminalView(t);if(i==null)return;const s=this.normalizeEvent(e),o=i.cell,a=r.getTerminalMagnet(t);let l=this.graph.coord.clientToLocalPoint(s.clientX,s.clientY);const c=this.options.snap;if(typeof c=="function"){const f=K(c,r,l,i,a,t,r,this);l=P.create(f)}if(this.options.restrictArea)if(i.isEdgeElement(a)){const f=i.getClosestPoint(l);f&&(l=f)}else{const f=i.getUnrotatedBBoxOfElement(a),d=o.getAngle(),g=o.getBBox().getCenter(),p=l.clone().rotate(d,g);f.containsPoint(p)||(l=f.getNearestPointToPoint(p).rotate(-d,g))}let u;const h=this.options.anchor;typeof h=="function"&&(u=K(h,r,l,i,a,t,r,this)),this.resetAnchor(u),this.update()}onMouseUp(e){this.graph.view.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1);const t=this.cellView;this.options.removeRedundancies&&t.removeRedundantLinearVertices({ui:!0,toolId:this.cid}),this.cell.stopBatch("move-anchor",{ui:!0,toolId:this.cid})}onDblClick(){const e=this.options.resetAnchor;e&&this.resetAnchor(e===!0?void 0:e),this.update()}}(function(n){n.config({tagName:"g",markup:[{tagName:"circle",selector:"anchor",attrs:{cursor:"pointer"}},{tagName:"rect",selector:"area",attrs:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDblClick"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},customAnchorAttrs:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttrs:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,resetAnchor:!0,restrictArea:!0,removeRedundancies:!0,anchor:xw,snap(e,t,r,i,s,o){const a=o.options.snapRadius||0,l=i==="source",c=l?0:-1,u=this.cell.getVertexAt(c)||this.getTerminalAnchor(l?"target":"source");return u&&(Math.abs(u.x-e.x)<a&&(e.x=u.x),Math.abs(u.y-e.y)<a&&(e.y=u.y)),e}})})(Zl||(Zl={}));const C5=Zl.define({name:"source-anchor",type:"source"}),S5=Zl.define({name:"target-anchor",type:"target"});var P5=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class ec extends et.ToolItem{get type(){return this.options.type}get ratio(){return this.options.ratio}init(){if(this.options.attrs){const e=this.options.attrs,{class:t}=e,r=P5(e,["class"]);this.setAttrs(r,this.container),t&&J(this.container,t)}}onRender(){J(this.container,this.prefixClassName(`edge-tool-${this.type}-arrowhead`)),this.update()}update(){const e=this.ratio,t=this.cellView,r=t.getTangentAtRatio(e),i=r?r.start:t.getPointAtRatio(e),s=r&&r.vector().vectorAngle(new P(1,0))||0;if(!i)return this;const o=ut().translate(i.x,i.y).rotate(s);return ys(this.container,o,{absolute:!0}),this}onMouseDown(e){if(this.guard(e))return;e.stopPropagation(),e.preventDefault();const t=this.cellView;if(t.can("arrowheadMovable")){t.cell.startBatch("move-arrowhead",{ui:!0,toolId:this.cid});const r=this.graph.snapToGrid(e.clientX,e.clientY),i=t.prepareArrowheadDragging(this.type,{x:r.x,y:r.y,options:Object.assign(Object.assign({},this.options),{toolId:this.cid})});this.cellView.setEventData(e,i),this.delegateDocumentEvents(this.options.documentEvents,e.data),t.graph.view.undelegateEvents(),this.container.style.pointerEvents="none"}this.focus()}onMouseMove(e){const t=this.normalizeEvent(e),r=this.graph.snapToGrid(t.clientX,t.clientY);this.cellView.onMouseMove(t,r.x,r.y),this.update()}onMouseUp(e){this.undelegateDocumentEvents();const t=this.normalizeEvent(e),r=this.cellView,i=this.graph.snapToGrid(t.clientX,t.clientY);r.onMouseUp(t,i.x,i.y),this.graph.view.delegateEvents(),this.blur(),this.container.style.pointerEvents="",r.cell.stopBatch("move-arrowhead",{ui:!0,toolId:this.cid})}}(function(n){n.config({tagName:"path",isSVGElement:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}})})(ec||(ec={}));const E5=ec.define({name:"source-arrowhead",type:"source",ratio:0,attrs:{d:"M 10 -8 -10 0 10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),A5=ec.define({name:"target-arrowhead",type:"target",ratio:1,attrs:{d:"M -10 -8 10 0 -10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}});class Ss extends et.ToolItem{constructor(){super(...arguments),this.labelIndex=-1,this.distance=.5,this.dblClick=this.onCellDblClick.bind(this)}onRender(){const e=this.cellView;e&&e.on("cell:dblclick",this.dblClick)}createElement(){const e=[this.prefixClassName(`${this.cell.isEdge()?"edge":"node"}-tool-editor`),this.prefixClassName("cell-tool-editor")];this.editor=et.createElement("div",!1),this.addClass(e,this.editor),this.editor.contentEditable="true",this.container.appendChild(this.editor)}removeElement(){this.undelegateDocumentEvents(),this.editor&&(this.container.removeChild(this.editor),this.editor=null)}updateEditor(){const{cell:e,editor:t}=this;if(!t)return;const{style:r}=t;e.isNode()?this.updateNodeEditorTransform():e.isEdge()&&this.updateEdgeEditorTransform();const{attrs:i}=this.options;r.fontSize=`${i.fontSize}px`,r.fontFamily=i.fontFamily,r.color=i.color,r.backgroundColor=i.backgroundColor;const s=this.getCellText()||"";return t.innerText=s,this.setCellText(""),this}updateNodeEditorTransform(){const{graph:e,cell:t,editor:r}=this;if(!r)return;let i=P.create(),s=20,o="",{x:a,y:l}=this.options;const{width:c,height:u}=this.options;if(typeof a!="undefined"&&typeof l!="undefined"){const d=t.getBBox();a=Vt(a,d.width),l=Vt(l,d.height),i=d.topLeft.translate(a,l),s=d.width-a*2}else{const d=t.getBBox();i=d.center,s=d.width-4,o="translate(-50%, -50%)"}const h=e.scale(),{style:f}=r;i=e.localToGraph(i),f.left=`${i.x}px`,f.top=`${i.y}px`,f.transform=`scale(${h.sx}, ${h.sy}) ${o}`,f.minWidth=`${s}px`,typeof c=="number"&&(f.width=`${c}px`),typeof u=="number"&&(f.height=`${u}px`)}updateEdgeEditorTransform(){if(!this.event)return;const{graph:e,editor:t}=this;if(!t)return;let r=P.create(),i=20;const{style:s}=t,o=this.event.target,a=o.parentElement;if(a&&ps(a,this.prefixClassName("edge-label"))){const u=a.getAttribute("data-index")||"0";this.labelIndex=parseInt(u,10);const h=a.getAttribute("transform"),{translation:f}=Hl(h);r=new P(f.tx,f.ty),i=de.getBBox(o).width}else{if(!this.options.labelAddable)return this;r=e.clientToLocal(P.create(this.event.clientX,this.event.clientY));const h=this.cellView.path.closestPointLength(r);this.distance=h,this.labelIndex=-1}r=e.localToGraph(r);const c=e.scale();s.left=`${r.x}px`,s.top=`${r.y}px`,s.minWidth=`${i}px`,s.transform=`scale(${c.sx}, ${c.sy}) translate(-50%, -50%)`}onDocumentMouseUp(e){if(this.editor&&e.target!==this.editor){const t=this.editor.innerText.replace(/\n$/,"")||"";this.setCellText(t!==""?t:null),this.removeElement()}}onCellDblClick({e}){this.editor||(e.stopPropagation(),this.removeElement(),this.event=e,this.createElement(),this.updateEditor(),this.autoFocus(),this.delegateDocumentEvents(this.options.documentEvents))}onMouseDown(e){e.stopPropagation()}autoFocus(){setTimeout(()=>{this.editor&&(this.editor.focus(),this.selectText())})}selectText(){if(window.getSelection&&this.editor){const e=document.createRange(),t=window.getSelection();e.selectNodeContents(this.editor),t.removeAllRanges(),t.addRange(e)}}getCellText(){const{getText:e}=this.options;if(typeof e=="function")return K(e,this.cellView,{cell:this.cell,index:this.labelIndex});if(typeof e=="string"){if(this.cell.isNode())return this.cell.attr(e);if(this.cell.isEdge()&&this.labelIndex!==-1)return this.cell.prop(`labels/${this.labelIndex}/attrs/${e}`)}}setCellText(e){const t=this.options.setText;if(typeof t=="function"){K(t,this.cellView,{cell:this.cell,value:e,index:this.labelIndex,distance:this.distance});return}if(typeof t=="string"){if(this.cell.isNode()){e!==null&&this.cell.attr(t,e);return}if(this.cell.isEdge()){const r=this.cell;if(this.labelIndex===-1){if(e){const i={position:{distance:this.distance},attrs:{}};fs(i,`attrs/${t}`,e),r.appendLabel(i)}}else e!==null?r.prop(`labels/${this.labelIndex}/attrs/${t}`,e):typeof this.labelIndex=="number"&&r.removeLabelAt(this.labelIndex)}}}onRemove(){const e=this.cellView;e&&e.off("cell:dblclick",this.dblClick),this.removeElement()}}(function(n){n.config({tagName:"div",isSVGElement:!1,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mouseup:"onDocumentMouseUp",touchend:"onDocumentMouseUp",touchcancel:"onDocumentMouseUp"}})})(Ss||(Ss={})),function(n){n.NodeEditor=n.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},getText:"text/text",setText:"text/text"}),n.EdgeEditor=n.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},labelAddable:!0,getText:"label/text",setText:"label/text"})}(Ss||(Ss={}));var Sw=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},Ps;(function(n){n.presets={boundary:Ql,button:jr,"button-remove":jr.Remove,"node-editor":Ss.NodeEditor},n.registry=We.create({type:"node tool",process(e,t){if(typeof t=="function")return t;let r=et.ToolItem;const{inherit:i}=t,s=Sw(t,["inherit"]);if(i){const o=this.get(i);o==null?this.onNotFound(i,"inherited"):r=o}return s.name==null&&(s.name=e),r.define.call(r,s)}}),n.registry.register(n.presets,!0)})(Ps||(Ps={}));var Es;(function(n){n.presets={boundary:Ql,vertices:Ko,segments:Jo,button:jr,"button-remove":jr.Remove,"source-anchor":C5,"target-anchor":S5,"source-arrowhead":E5,"target-arrowhead":A5,"edge-editor":Ss.EdgeEditor},n.registry=We.create({type:"edge tool",process(e,t){if(typeof t=="function")return t;let r=et.ToolItem;const{inherit:i}=t,s=Sw(t,["inherit"]);if(i){const o=this.get(i);o==null?this.onNotFound(i,"inherited"):r=o}return s.name==null&&(s.name=e),r.define.call(r,s)}}),n.registry.register(n.presets,!0)})(Es||(Es={}));const O5=or("center"),M5=or("topCenter"),T5=or("bottomCenter"),_5=or("leftMiddle"),N5=or("rightMiddle"),k5=or("topLeft"),$5=or("topRight"),I5=or("bottomLeft"),L5=or("bottomRight");function or(n){return function(e,t,r,i={}){const s=i.rotate?e.getUnrotatedBBoxOfElement(t):e.getBBoxOfElement(t),o=s[n];o.x+=Vt(i.dx,s.width),o.y+=Vt(i.dy,s.height);const a=e.cell;return i.rotate?o.rotate(-a.getAngle(),a.getBBox().getCenter()):o}}function tc(n){return function(e,t,r,i){if(r instanceof Element){const s=this.graph.findViewByElem(r);let o;if(s)if(s.isEdgeElement(r)){const a=i.fixedAt!=null?i.fixedAt:"50%";o=Pw(s,a)}else o=s.getBBoxOfElement(r).getCenter();else o=new P;return n.call(this,e,t,o,i)}return n.apply(this,arguments)}}function Pw(n,e){const t=er(e),r=typeof e=="string"?parseFloat(e):e;return t?n.getPointAtRatio(r/100):n.getPointAtLength(r)}const R5=tc(function(n,e,t,r){const i=n.cell.getAngle(),s=n.getBBoxOfElement(e),o=s.getCenter(),a=s.getTopLeft(),l=s.getBottomRight();let c=r.padding;if(Number.isFinite(c)||(c=0),a.y+c<=t.y&&t.y<=l.y-c){const u=t.y-o.y;o.x+=i===0||i===180?0:u*1/Math.tan(we.toRad(i)),o.y+=u}else if(a.x+c<=t.x&&t.x<=l.x-c){const u=t.x-o.x;o.y+=i===90||i===270?0:u*Math.tan(we.toRad(i)),o.x+=u}return o}),j5=function(n,e,t,r,i){const s=n.cell.getConnectionPoint(this.cell,i);return(r.dx||r.dy)&&s.translate(r.dx||0,r.dy||0),s},D5=tc(function(n,e,t,r){let i,s=0,o;const a=n.cell;r.rotate?(i=n.getUnrotatedBBoxOfElement(e),o=a.getBBox().getCenter(),s=a.getAngle()):i=n.getBBoxOfElement(e);const l=r.padding;l!=null&&Number.isFinite(l)&&i.inflate(l),r.rotate&&t.rotate(s,o);const c=i.getNearestSideToPoint(t);let u;switch(c){case"left":u=i.getLeftMiddle();break;case"right":u=i.getRightMiddle();break;case"top":u=i.getTopCenter();break;case"bottom":u=i.getBottomCenter();break}const h=r.direction;return h==="H"?(c==="top"||c==="bottom")&&(t.x<=i.x+i.width?u=i.getLeftMiddle():u=i.getRightMiddle()):h==="V"&&(t.y<=i.y+i.height?u=i.getTopCenter():u=i.getBottomCenter()),r.rotate?u.rotate(-s,o):u}),B5=Object.freeze(Object.defineProperty({__proto__:null,bottom:T5,bottomLeft:I5,bottomRight:L5,center:O5,left:_5,midSide:D5,nodeCenter:j5,orth:R5,right:N5,top:M5,topLeft:k5,topRight:$5},Symbol.toStringTag,{value:"Module"}));var As;(function(n){n.presets=B5,n.registry=We.create({type:"node endpoint"}),n.registry.register(n.presets,!0)})(As||(As={}));const z5=function(n,e,t,r){let i=r.ratio!=null?r.ratio:.5;return i>1&&(i/=100),n.getPointAtRatio(i)},F5=function(n,e,t,r){const i=r.length!=null?r.length:20;return n.getPointAtLength(i)},Ew=function(n,e,t,r){const i=n.getClosestPoint(t);return i!=null?i:new P},V5=tc(Ew),q5=tc(function(n,e,t,r){const s=n.getConnection(),o=n.getConnectionSubdivisions(),a=new V(t.clone().translate(0,1e6),t.clone().translate(0,-1e6)),l=new V(t.clone().translate(1e6,0),t.clone().translate(-1e6,0)),c=a.intersect(s,{segmentSubdivisions:o}),u=l.intersect(s,{segmentSubdivisions:o}),h=[];return c&&h.push(...c),u&&h.push(...u),h.length>0?t.closest(h):r.fallbackAt!=null?Pw(n,r.fallbackAt):K(Ew,this,n,e,t,r)}),G5=Object.freeze(Object.defineProperty({__proto__:null,closest:V5,length:F5,orth:q5,ratio:z5},Symbol.toStringTag,{value:"Module"}));var Os;(function(n){n.presets=G5,n.registry=We.create({type:"edge endpoint"}),n.registry.register(n.presets,!0)})(Os||(Os={}));function nc(n,e,t){let r;if(typeof t=="object"){if(Number.isFinite(t.y)){const s=new V(e,n),{start:o,end:a}=s.parallel(t.y);e=o,n=a}r=t.x}else r=t;if(r==null||!Number.isFinite(r))return n;const i=n.distance(e);return r===0&&i>0?n:n.move(e,-Math.min(r,i-1))}function rc(n){const e=n.getAttribute("stroke-width");return e===null?0:parseFloat(e)||0}function H5(n){if(n==null)return null;let e=n;do{let t=e.tagName;if(typeof t!="string")return null;if(t=t.toUpperCase(),t==="G")e=e.firstElementChild;else if(t==="TITLE")e=e.nextElementSibling;else break}while(e);return e}const Aw=function(n,e,t,r){const i=e.getBBoxOfElement(t);r.stroked&&i.inflate(rc(t)/2);const s=n.intersect(i),o=s&&s.length?n.start.closest(s):n.end;return nc(o,n.start,r.offset)},U5=function(n,e,t,r,i){const s=e.cell,o=s.isNode()?s.getAngle():0;if(o===0)return K(Aw,this,n,e,t,r,i);const a=e.getUnrotatedBBoxOfElement(t);r.stroked&&a.inflate(rc(t)/2);const l=a.getCenter(),c=n.clone().rotate(o,l),u=c.setLength(1e6).intersect(a),h=u&&u.length?c.start.closest(u).rotate(-o,l):n.end;return nc(h,n.start,r.offset)},W5=function(n,e,t,r){let i,s;const o=n.end,a=r.selector;if(typeof a=="string"?i=e.findOne(a):Array.isArray(a)?i=Fh(t,a):i=H5(t),!Mr(i)){if(i===t||!Mr(t))return o;i=t}const l=e.getShapeOfElement(i),c=e.getMatrixOfElement(i),u=e.getRootTranslatedMatrix(),h=e.getRootRotatedMatrix(),f=u.multiply(h).multiply(c),d=f.inverse(),g=de.transformLine(n,d),p=g.start.clone(),b=e.getDataOfElement(i);if(r.insideout===!1){b.shapeBBox==null&&(b.shapeBBox=l.bbox());const w=b.shapeBBox;if(w!=null&&w.containsPoint(p))return o}r.extrapolate===!0&&g.setLength(1e6);let m;if(X.isPath(l)){const w=r.precision||2;b.segmentSubdivisions==null&&(b.segmentSubdivisions=l.getSegmentSubdivisions({precision:w})),m={precision:w,segmentSubdivisions:b.segmentSubdivisions},s=g.intersect(l,m)}else s=g.intersect(l);s?Array.isArray(s)&&(s=p.closest(s)):r.sticky===!0&&(D.isRectangle(l)?s=l.getNearestPointToPoint(p):bn.isEllipse(l)?s=l.intersectsWithLineFromCenterToPoint(p):s=l.closestPoint(p,m));const y=s?de.transformPoint(s,f):o;let v=r.offset||0;return r.stroked!==!1&&(typeof v=="object"?(v=Object.assign({},v),v.x==null&&(v.x=0),v.x+=rc(i)/2):v+=rc(i)/2),nc(y,n.start,v)};function X5(n,e,t=0){const{start:r,end:i}=n;let s,o,a,l;switch(e){case"left":l="x",s=i,o=r,a=-1;break;case"right":l="x",s=r,o=i,a=1;break;case"top":l="y",s=i,o=r,a=-1;break;case"bottom":l="y",s=r,o=i,a=1;break;default:return}r[l]<i[l]?s[l]=o[l]:o[l]=s[l],Number.isFinite(t)&&(s[l]+=a*t,o[l]+=a*t)}const Y5=Object.freeze(Object.defineProperty({__proto__:null,anchor:function(n,e,t,r){const{alignOffset:i,align:s}=r;return s&&X5(n,s,i),nc(n.end,n.start,r.offset)},bbox:Aw,boundary:W5,rect:U5},Symbol.toStringTag,{value:"Module"}));var Ms;(function(n){n.presets=Y5,n.registry=We.create({type:"connection point"}),n.registry.register(n.presets,!0)})(Ms||(Ms={}));const K5=function(n){return[...n]},J5=function(n,e,t){const r=e.side||"bottom",i=Bn(e.padding||40),s=t.sourceBBox,o=t.targetBBox,a=s.getCenter(),l=o.getCenter();let c,u,h;switch(r){case"top":h=-1,c="y",u="height";break;case"left":h=-1,c="x",u="width";break;case"right":h=1,c="x",u="width";break;case"bottom":default:h=1,c="y",u="height";break}return a[c]+=h*(s[u]/2+i[r]),l[c]+=h*(o[u]/2+i[r]),h*(a[c]-l[c])>0?l[c]=a[c]:a[c]=l[c],[a.toJSON(),...n,l.toJSON()]};function ic(n){return new D(n.x,n.y,0,0)}function sc(n={}){const e=Bn(n.padding||20);return{x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}function Ow(n,e={}){return n.sourceBBox.clone().moveAndExpand(sc(e))}function Mw(n,e={}){return n.targetBBox.clone().moveAndExpand(sc(e))}function Q5(n,e={}){return n.sourceAnchor?n.sourceAnchor:Ow(n,e).getCenter()}function Z5(n,e={}){return n.targetAnchor?n.targetAnchor:Mw(n,e).getCenter()}const Tw=function(n,e,t){let r=Ow(t,e),i=Mw(t,e);const s=Q5(t,e),o=Z5(t,e);r=r.union(ic(s)),i=i.union(ic(o));const a=n.map(u=>P.create(u));a.unshift(s),a.push(o);let l=null;const c=[];for(let u=0,h=a.length-1;u<h;u+=1){let f=null;const d=a[u],g=a[u+1],p=sn.getBearing(d,g)!=null;if(u===0)u+1===h?r.intersectsWithRect(i.clone().inflate(1))?f=sn.insideNode(d,g,r,i):p||(f=sn.nodeToNode(d,g,r,i)):r.containsPoint(g)?f=sn.insideNode(d,g,r,ic(g).moveAndExpand(sc(e))):p||(f=sn.nodeToVertex(d,g,r));else if(u+1===h){const b=p&&sn.getBearing(g,d)===l;i.containsPoint(d)||b?f=sn.insideNode(d,g,ic(d).moveAndExpand(sc(e)),i,l):p||(f=sn.vertexToNode(d,g,i,l))}else p||(f=sn.vertexToVertex(d,g,l));f?(c.push(...f.points),l=f.direction):l=sn.getBearing(d,g),u+1<h&&c.push(g)}return c};var sn;(function(n){const e={N:"S",S:"N",E:"W",W:"E"},t={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function r(h,f,d){let g=new P(h.x,f.y);return d.containsPoint(g)&&(g=new P(f.x,h.y)),g}function i(h,f){return h[f==="W"||f==="E"?"width":"height"]}n.getBBoxSize=i;function s(h,f){return h.x===f.x?h.y>f.y?"N":"S":h.y===f.y?h.x>f.x?"W":"E":null}n.getBearing=s;function o(h,f,d){const g=new P(h.x,f.y),p=new P(f.x,h.y),b=s(h,g),m=s(h,p),y=d?e[d]:null,v=b===d||b!==y&&(m===y||m!==d)?g:p;return{points:[v],direction:s(v,f)}}n.vertexToVertex=o;function a(h,f,d){const g=r(h,f,d);return{points:[g],direction:s(g,f)}}n.nodeToVertex=a;function l(h,f,d,g){const p=[new P(h.x,f.y),new P(f.x,h.y)],b=p.filter(v=>!d.containsPoint(v)),m=b.filter(v=>s(v,h)!==g);let y;if(m.length>0)return y=m.filter(v=>s(h,v)===g).pop(),y=y||m[0],{points:[y],direction:s(y,f)};{y=bV(p,b)[0];const v=P.create(f).move(y,-i(d,g)/2);return{points:[r(v,h,d),v],direction:s(v,f)}}}n.vertexToNode=l;function c(h,f,d,g){let p=a(f,h,g);const b=p.points[0];if(d.containsPoint(b)){p=a(h,f,d);const m=p.points[0];if(g.containsPoint(m)){const y=P.create(h).move(m,-i(d,s(h,m))/2),v=P.create(f).move(b,-i(g,s(f,b))/2),w=new V(y,v).getCenter(),x=a(h,w,d),C=o(w,f,x.direction);p.points=[x.points[0],C.points[0]],p.direction=C.direction}}return p}n.nodeToNode=c;function u(h,f,d,g,p){const b=d.union(g).inflate(1),m=b.getCenter(),y=m.distance(f)>m.distance(h),v=y?f:h,w=y?h:f;let x,C,S;p?(x=P.fromPolar(b.width+b.height,t[p],v),x=b.getNearestPointToPoint(x).move(x,-1)):x=b.getNearestPointToPoint(v).move(v,1),C=r(x,w,b);let E;x.round().equals(C.round())?(C=P.fromPolar(b.width+b.height,we.toRad(x.theta(v))+Math.PI/2,w),C=b.getNearestPointToPoint(C).move(w,1).round(),S=r(x,C,b),E=y?[C,S,x]:[x,S,C]):E=y?[C,x]:[x,C];const A=s(y?x:C,f);return{points:E,direction:A}}n.insideNode=u})(sn||(sn={}));const eG={step:10,maxLoopCount:2e3,precision:1,maxDirectionChange:90,perpendicular:!0,excludeTerminals:[],excludeNodes:[],excludeShapes:[],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost(){return Dr(this.step,this)},directions(){const n=Dr(this.step,this),e=Dr(this.cost,this);return[{cost:e,offsetX:n,offsetY:0},{cost:e,offsetX:-n,offsetY:0},{cost:e,offsetX:0,offsetY:n},{cost:e,offsetX:0,offsetY:-n}]},penalties(){const n=Dr(this.step,this);return{0:0,45:n/2,90:n/2}},paddingBox(){const n=Dr(this.step,this);return{x:-n,y:-n,width:2*n,height:2*n}},fallbackRouter:Tw,draggingRouter:null,snapToGrid:!0};function Dr(n,e){return typeof n=="function"?n.call(e):n}function tG(n){const e=Object.keys(n).reduce((t,r)=>{const i=t;return r==="fallbackRouter"||r==="draggingRouter"||r==="fallbackRoute"?i[r]=n[r]:i[r]=Dr(n[r],n),t},{});if(e.padding){const t=Bn(e.padding);e.paddingBox={x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}return e.directions.forEach(t=>{const r=new P(0,0),i=new P(t.offsetX,t.offsetY);t.angle=we.normalize(r.theta(i))}),e}const _w=1,Nw=2;class nG{constructor(){this.items=[],this.hash={},this.values={}}add(e,t){this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=_w,this.values[e]=t;const r=JV(this.items,e,i=>this.values[i]);this.items.splice(r,0,e)}pop(){const e=this.items.shift();return e&&(this.hash[e]=Nw),e}isOpen(e){return this.hash[e]===_w}isClose(e){return this.hash[e]===Nw}isEmpty(){return this.items.length===0}}class rG{constructor(e){this.options=e,this.mapGridSize=100,this.map={}}build(e,t){const r=this.options,i=r.excludeTerminals.reduce((c,u)=>{const h=t[u];if(h){const f=e.getCell(h.cell);f&&c.push(f)}return c},[]);let s=[];const o=e.getCell(t.getSourceCellId());o&&(s=Fb(s,o.getAncestors().map(c=>c.id)));const a=e.getCell(t.getTargetCellId());a&&(s=Fb(s,a.getAncestors().map(c=>c.id)));const l=this.mapGridSize;return e.getNodes().reduce((c,u)=>{const h=i.some(b=>b.id===u.id),f=u.shape?r.excludeShapes.includes(u.shape):!1,d=r.excludeNodes.some(b=>typeof b=="string"?u.id===b:b===u),g=s.includes(u.id),p=f||h||d||g;if(u.isVisible()&&!p){const b=u.getBBox().moveAndExpand(r.paddingBox),m=b.getOrigin().snapToGrid(l),y=b.getCorner().snapToGrid(l);for(let v=m.x;v<=y.x;v+=l)for(let w=m.y;w<=y.y;w+=l){const x=new P(v,w).toString();c[x]==null&&(c[x]=[]),c[x].push(b)}}return c},this.map),this}isAccessible(e){const t=e.clone().snapToGrid(this.mapGridSize).toString(),r=this.map[t];return r?r.every(i=>!i.containsPoint(e)):!0}}function kw(n,e){const t=n.sourceBBox.clone();return e&&e.paddingBox?t.moveAndExpand(e.paddingBox):t}function $w(n,e){const t=n.targetBBox.clone();return e&&e.paddingBox?t.moveAndExpand(e.paddingBox):t}function Iw(n,e){return n.sourceAnchor?n.sourceAnchor:kw(n,e).getCenter()}function iG(n,e){return n.targetAnchor?n.targetAnchor:$w(n,e).getCenter()}function mf(n,e,t,r,i){const s=360/t,o=n.theta(sG(n,e,r,i)),a=we.normalize(o+s/2);return s*Math.floor(a/s)}function sG(n,e,t,r){const i=r.step,s=e.x-n.x,o=e.y-n.y,a=s/t.x,l=o/t.y,c=a*i,u=l*i;return new P(n.x+c,n.y+u)}function Lw(n,e){const t=Math.abs(n-e);return t>180?360-t:t}function oG(n,e){const t=e.step;return e.directions.forEach(r=>{r.gridOffsetX=r.offsetX/t*n.x,r.gridOffsetY=r.offsetY/t*n.y}),e.directions}function aG(n,e,t){return{source:e.clone(),x:Rw(t.x-e.x,n),y:Rw(t.y-e.y,n)}}function Rw(n,e){if(!n)return e;const t=Math.abs(n),r=Math.round(t/e);if(!r)return t;const i=r*e,o=(t-i)/r;return e+o}function lG(n,e){const t=e.source,r=xe.snapToGrid(n.x-t.x,e.x)+t.x,i=xe.snapToGrid(n.y-t.y,e.y)+t.y;return new P(r,i)}function Qo(n,e){return n.round(e)}function oc(n,e,t){return Qo(lG(n.clone(),e),t)}function Zo(n){return n.toString()}function yf(n){return new P(n.x===0?0:Math.abs(n.x)/n.x,n.y===0?0:Math.abs(n.y)/n.y)}function jw(n,e){let t=1/0;for(let r=0,i=e.length;r<i;r+=1){const s=n.manhattanDistance(e[r]);s<t&&(t=s)}return t}function Dw(n,e,t,r,i){const s=i.precision,o=i.directionMap,a=n.diff(e.getCenter()),l=Object.keys(o).reduce((c,u)=>{if(t.includes(u)){const h=o[u],f=new P(n.x+h.x*(Math.abs(a.x)+e.width),n.y+h.y*(Math.abs(a.y)+e.height)),g=new V(n,f).intersect(e)||[];let p,b=null;for(let m=0;m<g.length;m+=1){const y=g[m],v=n.squaredDistance(y);(p==null||v>p)&&(p=v,b=y)}if(b){let m=oc(b,r,s);e.containsPoint(m)&&(m=oc(m.translate(h.x*r.x,h.y*r.y),r,s)),c.push(m)}}return c},[]);return e.containsPoint(n)||l.push(oc(n,r,s)),l}function cG(n,e,t,r,i){const s=[];let o=yf(i.diff(t)),a=Zo(t),l=n[a],c;for(;l;){c=e[a];const f=yf(c.diff(l));f.equals(o)||(s.unshift(c),o=f),a=Zo(l),l=n[a]}const u=e[a];return yf(u.diff(r)).equals(o)||s.unshift(u),s}function uG(n,e,t,r,i){const s=i.precision;let o,a;D.isRectangle(e)?o=Qo(Iw(n,i).clone(),s):o=Qo(e.clone(),s),D.isRectangle(t)?a=Qo(iG(n,i).clone(),s):a=Qo(t.clone(),s);const l=aG(i.step,o,a),c=o,u=a;let h,f;if(D.isRectangle(e)?h=Dw(c,e,i.startDirections,l,i):h=[c],D.isRectangle(t)?f=Dw(a,t,i.endDirections,l,i):f=[u],h=h.filter(d=>r.isAccessible(d)),f=f.filter(d=>r.isAccessible(d)),h.length>0&&f.length>0){const d=new nG,g={},p={},b={};for(let O=0,T=h.length;O<T;O+=1){const k=h[O],B=Zo(k);d.add(B,jw(k,f)),g[B]=k,b[B]=0}const m=i.previousDirectionAngle,y=m===void 0;let v,w;const x=oG(l,i),C=x.length,S=f.reduce((O,T)=>{const k=Zo(T);return O.push(k),O},[]),E=P.equalPoints(h,f);let A=i.maxLoopCount;for(;!d.isEmpty()&&A>0;){const O=d.pop(),T=g[O],k=p[O],B=b[O],W=T.equals(c),M=k==null;let $;if(M?y?W?$=null:$=mf(c,T,C,l,i):$=m:$=mf(k,T,C,l,i),!(M&&E)&&S.indexOf(O)>=0)return i.previousDirectionAngle=$,cG(p,g,T,c,u);for(let j=0;j<C;j+=1){v=x[j];const F=v.angle;if(w=Lw($,F),!(y&&W)&&w>i.maxDirectionChange)continue;const U=oc(T.clone().translate(v.gridOffsetX||0,v.gridOffsetY||0),l,s),ne=Zo(U);if(d.isClose(ne)||!r.isAccessible(U))continue;if(S.indexOf(ne)>=0&&!U.equals(u)){const lt=mf(U,u,C,l,i);if(Lw(F,lt)>i.maxDirectionChange)continue}const Oe=v.cost,Nn=W?0:i.penalties[w],at=B+Oe+Nn;(!d.isOpen(ne)||at<b[ne])&&(g[ne]=U,p[ne]=T,b[ne]=at,d.add(ne,at+jw(U,f)))}A-=1}}return i.fallbackRoute?K(i.fallbackRoute,this,c,u,i):null}function hG(n,e=10){if(n.length<=1)return n;for(let t=0,r=n.length;t<r-1;t+=1){const i=n[t],s=n[t+1];if(i.x===s.x){const o=e*Math.round(i.x/e);i.x!==o&&(i.x=o,s.x=o)}else if(i.y===s.y){const o=e*Math.round(i.y/e);i.y!==o&&(i.y=o,s.y=o)}}return n}const fG=function(n,e,t){const r=tG(e),i=kw(t,r),s=$w(t,r),o=Iw(t,r),a=new rG(r).build(t.graph.model,t.cell),l=n.map(d=>P.create(d)),c=[];let u=o,h,f;for(let d=0,g=l.length;d<=g;d+=1){let p=null;if(h=f||i,f=l[d],f==null){f=s;const m=t.cell;if((m.getSourceCellId()==null||m.getTargetCellId()==null)&&typeof r.draggingRouter=="function"){const v=h===i?o:h,w=f.getOrigin();p=K(r.draggingRouter,t,v,w,r)}}if(p==null&&(p=uG(t,h,f,a,r)),p===null)return console.warn("Unable to execute manhattan algorithm, use orth instead"),K(r.fallbackRouter,this,n,r,t);const b=p[0];b&&b.equals(u)&&p.shift(),u=p[p.length-1]||u,c.push(...p)}return r.snapToGrid?hG(c,t.graph.grid.getGridSize()):c},Bw=function(n,e,t){return K(fG,this,n,Object.assign(Object.assign({},eG),e),t)},dG={maxDirectionChange:45,directions(){const n=Dr(this.step,this),e=Dr(this.cost,this),t=Math.ceil(Math.sqrt(n*n<<1));return[{cost:e,offsetX:n,offsetY:0},{cost:t,offsetX:n,offsetY:n},{cost:e,offsetX:0,offsetY:n},{cost:t,offsetX:-n,offsetY:n},{cost:e,offsetX:-n,offsetY:0},{cost:t,offsetX:-n,offsetY:-n},{cost:e,offsetX:0,offsetY:-n},{cost:t,offsetX:n,offsetY:-n}]},fallbackRoute(n,e,t){const r=n.theta(e),i=[];let s={x:e.x,y:n.y},o={x:n.x,y:e.y};if(r%180>90){const v=s;s=o,o=v}const a=r%90<45?s:o,l=new V(n,a),c=90*Math.ceil(r/90),u=P.fromPolar(l.squaredLength(),we.toRad(c+135),a),h=new V(e,u),f=l.intersectsWithLine(h),d=f||e,g=f?d:n,p=360/t.directions.length,b=g.theta(e),m=we.normalize(b+p/2),y=p*Math.floor(m/p);return t.previousDirectionAngle=y,d&&i.push(d.round()),i.push(e),i}},gG=function(n,e,t){return K(Bw,this,n,Object.assign(Object.assign({},dG),e),t)},pG=function(n,e,t){const r=e.offset||32,i=e.min==null?16:e.min;let s=0,o=e.direction;const a=t.sourceBBox,l=t.targetBBox,c=a.getCenter(),u=l.getCenter();if(typeof r=="number"&&(s=r),o==null){let m=l.left-a.right,y=l.top-a.bottom;m>=0&&y>=0?o=m>=y?"L":"T":m<=0&&y>=0?(m=a.left-l.right,m>=0?o=m>=y?"R":"T":o="T"):m>=0&&y<=0?(y=a.top-l.bottom,y>=0?o=m>=y?"L":"B":o="L"):(m=a.left-l.right,y=a.top-l.bottom,m>=0&&y>=0?o=m>=y?"R":"B":m<=0&&y>=0?o="B":m>=0&&y<=0?o="R":o=Math.abs(m)>Math.abs(y)?"R":"B")}o==="H"?o=u.x-c.x>=0?"L":"R":o==="V"&&(o=u.y-c.y>=0?"T":"B"),r==="center"&&(o==="L"?s=(l.left-a.right)/2:o==="R"?s=(a.left-l.right)/2:o==="T"?s=(l.top-a.bottom)/2:o==="B"&&(s=(a.top-l.bottom)/2));let h,f,d;const g=o==="L"||o==="R";if(g){if(u.y===c.y)return[...n];d=o==="L"?1:-1,h="x",f="width"}else{if(u.x===c.x)return[...n];d=o==="T"?1:-1,h="y",f="height"}const p=c.clone(),b=u.clone();if(p[h]+=d*(a[f]/2+s),b[h]-=d*(l[f]/2+s),g){const m=p.x,y=b.x,v=a.width/2+i,w=l.width/2+i;u.x>c.x?y<=m&&(p.x=Math.max(y,c.x+v),b.x=Math.min(m,u.x-w)):y>=m&&(p.x=Math.min(y,c.x-v),b.x=Math.max(m,u.x+w))}else{const m=p.y,y=b.y,v=a.height/2+i,w=l.height/2+i;u.y>c.y?y<=m&&(p.y=Math.max(y,c.y+v),b.y=Math.min(m,u.y-w)):y>=m&&(p.y=Math.min(y,c.y-v),b.y=Math.max(m,u.y+w))}return[p.toJSON(),...n,b.toJSON()]};function Ts(n,e){if(e!=null&&e!==!1){const t=typeof e=="boolean"?0:e;if(t>0){const r=P.create(n[1]).move(n[2],t),i=P.create(n[1]).move(n[0],t);return[r.toJSON(),...n,i.toJSON()]}{const r=n[1];return[Object.assign({},r),...n,Object.assign({},r)]}}return n}const mG=Object.freeze(Object.defineProperty({__proto__:null,er:pG,loop:function(n,e,t){const r=e.width||50,s=(e.height||80)/2,o=e.angle||"auto",a=t.sourceAnchor,l=t.targetAnchor,c=t.sourceBBox,u=t.targetBBox;if(a.equals(l)){const h=m=>{const y=we.toRad(m),v=Math.sin(y),w=Math.cos(y),x=new P(a.x+w*r,a.y+v*r),C=new P(x.x-w*s,x.y-v*s),S=C.clone().rotate(-90,x),E=C.clone().rotate(90,x);return[S.toJSON(),x.toJSON(),E.toJSON()]},f=m=>{const y=a.clone().move(m,-1),v=new V(y,m);return!c.containsPoint(m)&&!c.intersectsWithLine(v)},d=[0,90,180,270,45,135,225,315];if(typeof o=="number")return Ts(h(o),e.merge);const g=c.getCenter();if(g.equals(a))return Ts(h(0),e.merge);const p=g.angleBetween(a,g.clone().translate(1,0));let b=h(p);if(f(b[1]))return Ts(b,e.merge);for(let m=1,y=d.length;m<y;m+=1)if(b=h(p+d[m]),f(b[1]))return Ts(b,e.merge);return Ts(b,e.merge)}{const h=new V(a,l);let f=h.parallel(-r),d=f.getCenter(),g=f.start.clone().move(f.end,s),p=f.end.clone().move(f.start,s);const b=h.parallel(-1),m=new V(b.start,d),y=new V(b.end,d);if((c.containsPoint(d)||u.containsPoint(d)||c.intersectsWithLine(m)||c.intersectsWithLine(y)||u.intersectsWithLine(m)||u.intersectsWithLine(y))&&(f=h.parallel(r),d=f.getCenter(),g=f.start.clone().move(f.end,s),p=f.end.clone().move(f.start,s)),e.merge){const v=new V(a,l),w=new V(d,v.center).setLength(Number.MAX_SAFE_INTEGER),x=c.intersectsWithLine(w),C=u.intersectsWithLine(w),S=x?Array.isArray(x)?x:[x]:[];C&&(Array.isArray(C)?S.push(...C):S.push(C));const E=v.center.closest(S);E?(t.sourceAnchor=E.clone(),t.targetAnchor=E.clone()):(t.sourceAnchor=v.center.clone(),t.targetAnchor=v.center.clone())}return Ts([g.toJSON(),d.toJSON(),p.toJSON()],e.merge)}},manhattan:Bw,metro:gG,normal:K5,oneSide:J5,orth:Tw},Symbol.toStringTag,{value:"Module"}));var Br;(function(n){n.presets=mG,n.registry=We.create({type:"router"}),n.registry.register(n.presets,!0)})(Br||(Br={}));const yG=function(n,e,t,r={}){const i=[n,...t,e],s=new Ue(i),o=new X(s);return r.raw?o:o.serialize()},vG=function(n,e,t,r={}){const i=t.length===3?0:1,s=P.create(t[0+i]),o=P.create(t[2+i]),a=P.create(t[1+i]);if(!P.equals(n,e)){const c=new P((n.x+e.x)/2,(n.y+e.y)/2),u=c.angleBetween(P.create(n).rotate(90,c),a);u>1&&(s.rotate(180-u,c),o.rotate(180-u,c),a.rotate(180-u,c))}const l=`
     M ${n.x} ${n.y}
     Q ${s.x} ${s.y} ${a.x} ${a.y}
     Q ${o.x} ${o.y} ${e.x} ${e.y}
  `;return r.raw?X.parse(l):l},bG=function(n,e,t,r={}){const i=new X;i.appendSegment(X.createSegment("M",n));const s=1/3,o=2/3,a=r.radius||10;let l,c;for(let u=0,h=t.length;u<h;u+=1){const f=P.create(t[u]),d=t[u-1]||n,g=t[u+1]||e;l=c||f.distance(d)/2,c=f.distance(g)/2;const p=-Math.min(a,l),b=-Math.min(a,c),m=f.clone().move(d,p).round(),y=f.clone().move(g,b).round(),v=new P(s*m.x+o*f.x,o*f.y+s*m.y),w=new P(s*y.x+o*f.x,o*f.y+s*y.y);i.appendSegment(X.createSegment("L",m)),i.appendSegment(X.createSegment("C",v,w,y))}return i.appendSegment(X.createSegment("L",e)),r.raw?i:i.serialize()},wG=function(n,e,t,r={}){let i,s=r.direction;if(t&&t.length!==0){const o=[n,...t,e],a=Ve.throughPoints(o);i=new X(a)}else if(i=new X,i.appendSegment(X.createSegment("M",n)),s||(s=Math.abs(n.x-e.x)>=Math.abs(n.y-e.y)?"H":"V"),s==="H"){const o=(n.x+e.x)/2;i.appendSegment(X.createSegment("C",o,n.y,o,e.y,e.x,e.y))}else{const o=(n.y+e.y)/2;i.appendSegment(X.createSegment("C",n.x,o,e.x,o,e.x,e.y))}return r.raw?i:i.serialize()},zw=1,ac=1/3,lc=2/3;function xG(n){let e=n.graph._jumpOverUpdateList;if(e==null&&(e=n.graph._jumpOverUpdateList=[],n.graph.on("cell:mouseup",()=>{const t=n.graph._jumpOverUpdateList;setTimeout(()=>{for(let r=0;r<t.length;r+=1)t[r].update()})}),n.graph.on("model:reseted",()=>{e=n.graph._jumpOverUpdateList=[]})),e.indexOf(n)<0){e.push(n);const t=()=>e.splice(e.indexOf(n),1);n.cell.once("change:connector",t),n.cell.once("removed",t)}}function vf(n,e,t=[]){const r=[n,...t,e],i=[];return r.forEach((s,o)=>{const a=r[o+1];a!=null&&i.push(new V(s,a))}),i}function CG(n,e){const t=[];return e.forEach(r=>{const i=n.intersectsWithLine(r);i&&t.push(i)}),t}function Fw(n,e){return new V(n,e).squaredLength()}function SG(n,e,t){return e.reduce((r,i,s)=>{if(cc.includes(i))return r;const o=r.pop()||n,a=P.create(i).move(o.start,-t);let l=P.create(i).move(o.start,+t);const c=e[s+1];if(c!=null){const f=l.distance(c);f<=t&&(l=c.move(o.start,f),cc.push(c))}else if(a.distance(o.end)<t*2+zw)return r.push(o),r;if(l.distance(o.start)<t*2+zw)return r.push(o),r;const h=new V(a,l);return ea.push(h),r.push(new V(o.start,a),h,new V(l,o.end)),r},[])}function Vw(n,e,t,r){const i=new X;let s;return s=X.createSegment("M",n[0].start),i.appendSegment(s),n.forEach((o,a)=>{if(ea.includes(o)){let l,c,u,h;if(t==="arc"){l=-90,c=o.start.diff(o.end),(c.x<0||c.x===0&&c.y<0)&&(l+=180);const d=o.getCenter(),g=new V(d,o.end).rotate(l,d);let p;p=new V(o.start,d),u=p.pointAt(2/3).rotate(l,o.start),h=g.pointAt(1/3).rotate(-l,g.end),s=X.createSegment("C",u,h,g.end),i.appendSegment(s),p=new V(d,o.end),u=g.pointAt(1/3).rotate(l,g.end),h=p.pointAt(1/3).rotate(-l,o.end),s=X.createSegment("C",u,h,o.end),i.appendSegment(s)}else if(t==="gap")s=X.createSegment("M",o.end),i.appendSegment(s);else if(t==="cubic"){l=o.start.theta(o.end);const f=e*.6;let d=e*1.35;c=o.start.diff(o.end),(c.x<0||c.x===0&&c.y<0)&&(d*=-1),u=new P(o.start.x+f,o.start.y+d).rotate(l,o.start),h=new P(o.end.x-f,o.end.y+d).rotate(l,o.end),s=X.createSegment("C",u,h,o.end),i.appendSegment(s)}}else{const l=n[a+1];r===0||!l||ea.includes(l)?(s=X.createSegment("L",o.end),i.appendSegment(s)):PG(r,i,o.end,o.start,l.end)}}),i}function PG(n,e,t,r,i){const s=t.distance(r)/2,o=t.distance(i)/2,a=-Math.min(n,s),l=-Math.min(n,o),c=t.clone().move(r,a).round(),u=t.clone().move(i,l).round(),h=new P(ac*c.x+lc*t.x,lc*t.y+ac*c.y),f=new P(ac*u.x+lc*t.x,lc*t.y+ac*u.y);let d;d=X.createSegment("L",c),e.appendSegment(d),d=X.createSegment("C",h,f,u),e.appendSegment(d)}let ea,cc;const EG=Object.freeze(Object.defineProperty({__proto__:null,jumpover:function(n,e,t,r={}){ea=[],cc=[],xG(this);const i=r.size||5,s=r.type||"arc",o=r.radius||0,a=r.ignoreConnectors||["smooth"],l=this.graph,u=l.model.getEdges();if(u.length===1)return Vw(vf(n,e,t),i,s,o);const h=this.cell,f=u.indexOf(h),d=l.options.connecting.connector||{},g=u.filter((w,x)=>{const C=w.getConnector()||d;return a.includes(C.name)?!1:x>f?C.name!=="jumpover":!0}),p=g.map(w=>l.findViewByCell(w)),b=vf(n,e,t),m=p.map(w=>w==null?[]:w===this?b:vf(w.sourcePoint,w.targetPoint,w.routePoints)),y=[];b.forEach(w=>{const x=g.reduce((C,S,E)=>{if(S!==h){const A=CG(w,m[E]);C.push(...A)}return C},[]).sort((C,S)=>Fw(w.start,C)-Fw(w.start,S));x.length>0?y.push(...SG(w,x,i)):y.push(w)});const v=Vw(y,i,s,o);return ea=[],cc=[],r.raw?v:v.serialize()},loop:vG,normal:yG,rounded:bG,smooth:wG},Symbol.toStringTag,{value:"Module"}));var Oi;(function(n){n.presets=EG,n.registry=We.create({type:"connector"}),n.registry.register(n.presets,!0)})(Oi||(Oi={}));var AG=function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};class qw extends mt{constructor(e={}){super(),this.pending=!1,this.changing=!1,this.data={},this.mutate(Fe(e)),this.changed={}}mutate(e,t={}){const r=t.unset===!0,i=t.silent===!0,s=[],o=this.changing;this.changing=!0,o||(this.previous=Fe(this.data),this.changed={});const a=this.data,l=this.previous,c=this.changed;if(Object.keys(e).forEach(u=>{const h=u,f=e[h];Zn(a[h],f)||s.push(h),Zn(l[h],f)?delete c[h]:c[h]=f,r?delete a[h]:a[h]=f}),!i&&s.length>0&&(this.pending=!0,this.pendingOptions=t,s.forEach(u=>{this.emit("change:*",{key:u,options:t,store:this,current:a[u],previous:l[u]})})),o)return this;if(!i)for(;this.pending;)this.pending=!1,this.emit("changed",{current:a,previous:l,store:this,options:this.pendingOptions});return this.pending=!1,this.changing=!1,this.pendingOptions=null,this}get(e,t){if(e==null)return this.data;const r=this.data[e];return r==null?t:r}getPrevious(e){if(this.previous){const t=this.previous[e];return t==null?void 0:t}}set(e,t,r){return e!=null&&(typeof e=="object"?this.mutate(e,t):this.mutate({[e]:t},r)),this}remove(e,t){const i={};let s;if(typeof e=="string")i[e]=void 0,s=t;else if(Array.isArray(e))e.forEach(o=>i[o]=void 0),s=t;else{for(const o in this.data)i[o]=void 0;s=e}return this.mutate(i,Object.assign(Object.assign({},s),{unset:!0})),this}getByPath(e){return Fh(this.data,e,"/")}setByPath(e,t,r={}){const i="/",s=Array.isArray(e)?[...e]:e.split(i),o=Array.isArray(e)?e.join(i):e,a=s[0],l=s.length;if(r.propertyPath=o,r.propertyValue=t,r.propertyPathArray=s,l===1)this.set(a,t,r);else{const c={};let u=c,h=a;for(let g=1;g<l;g+=1){const p=s[g],b=Number.isFinite(Number(p));u=u[h]=b?[]:{},h=p}fs(c,s,t,i);const f=Fe(this.data);r.rewrite&&Wb(f,e,i);const d=Re(f,c);this.set(a,d[a],r)}return this}removeByPath(e,t){const r=Array.isArray(e)?e:e.split("/"),i=r[0];if(r.length===1)this.remove(i,t);else{const s=r.slice(1),o=Fe(this.get(i));o&&Wb(o,s),this.set(i,o,t)}return this}hasChanged(e){return e==null?Object.keys(this.changed).length>0:e in this.changed}getChanges(e){if(e==null)return this.hasChanged()?Fe(this.changed):null;const t=this.changing?this.previous:this.data,r={};let i;for(const s in e){const o=e[s];Zn(t[s],o)||(r[s]=o,i=!0)}return i?Fe(r):null}toJSON(){return Fe(this.data)}clone(){const e=this.constructor;return new e(this.data)}dispose(){this.off(),this.data={},this.previous={},this.changed={},this.pending=!1,this.changing=!1,this.pendingOptions=null,this.trigger("disposed",{store:this})}}AG([mt.dispose()],qw.prototype,"dispose",null);class ta{constructor(e){this.cell=e,this.ids={},this.cache={}}get(){return Object.keys(this.ids)}start(e,t,r={},i="/"){const s=this.cell.getPropByPath(e),o=uV(r,ta.defaultOptions),a=this.getTiming(o.timing),l=this.getInterp(o.interp,s,t);let c=0;const u=Array.isArray(e)?e.join(i):e,h=Array.isArray(e)?e:e.split(i),f=()=>{const d=new Date().getTime();c===0&&(c=d);let p=(d-c)/o.duration;p<1?this.ids[u]=requestAnimationFrame(f):p=1;const b=l(a(p));this.cell.setPropByPath(h,b),r.progress&&r.progress(Object.assign({progress:p,currentValue:b},this.getArgs(u))),p===1&&(this.cell.notify("transition:complete",this.getArgs(u)),r.complete&&r.complete(this.getArgs(u)),this.cell.notify("transition:finish",this.getArgs(u)),r.finish&&r.finish(this.getArgs(u)),this.clean(u))};return setTimeout(()=>{this.stop(e,void 0,i),this.cache[u]={startValue:s,targetValue:t,options:o},this.ids[u]=requestAnimationFrame(f),this.cell.notify("transition:start",this.getArgs(u)),r.start&&r.start(this.getArgs(u))},r.delay),this.stop.bind(this,e,i,r)}stop(e,t={},r="/"){const i=Array.isArray(e)?e:e.split(r);return Object.keys(this.ids).filter(s=>Zn(i,s.split(r).slice(0,i.length))).forEach(s=>{cancelAnimationFrame(this.ids[s]);const o=this.cache[s],a=this.getArgs(s),l=Object.assign(Object.assign({},o.options),t),c=l.jumpedToEnd;c&&o.targetValue!=null&&(this.cell.setPropByPath(s,o.targetValue),this.cell.notify("transition:end",Object.assign({},a)),this.cell.notify("transition:complete",Object.assign({},a)),l.complete&&l.complete(Object.assign({},a)));const u=Object.assign({jumpedToEnd:c},a);this.cell.notify("transition:stop",Object.assign({},u)),l.stop&&l.stop(Object.assign({},u)),this.cell.notify("transition:finish",Object.assign({},a)),l.finish&&l.finish(Object.assign({},a)),this.clean(s)}),this}clean(e){delete this.ids[e],delete this.cache[e]}getTiming(e){return typeof e=="string"?Pi[e]:e}getInterp(e,t,r){return e?e(t,r):typeof r=="number"?Ei.number(t,r):typeof r=="string"?r[0]==="#"?Ei.color(t,r):Ei.unit(t,r):Ei.object(t,r)}getArgs(e){const t=this.cache[e];return{path:e,startValue:t.startValue,targetValue:t.targetValue,cell:this.cell}}}(function(n){n.defaultOptions={delay:10,duration:100,timing:"linear"}})(ta||(ta={}));var OG=function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Gw=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class le extends mt{static config(e){const{markup:t,propHooks:r,attrHooks:i}=e,s=Gw(e,["markup","propHooks","attrHooks"]);t!=null&&(this.markup=t),r&&(this.propHooks=this.propHooks.slice(),Array.isArray(r)?this.propHooks.push(...r):typeof r=="function"?this.propHooks.push(r):Object.values(r).forEach(o=>{typeof o=="function"&&this.propHooks.push(o)})),i&&(this.attrHooks=Object.assign(Object.assign({},this.attrHooks),i)),this.defaults=Re({},this.defaults,s)}static getMarkup(){return this.markup}static getDefaults(e){return e?this.defaults:Fe(this.defaults)}static getAttrHooks(){return this.attrHooks}static applyPropHooks(e,t){return this.propHooks.reduce((r,i)=>i?K(i,e,r):r,t)}get[Symbol.toStringTag](){return le.toStringTag}constructor(e={}){super();const r=this.constructor.getDefaults(!0),i=Re({},this.preprocess(r),this.preprocess(e));this.id=i.id||Rl(),this.store=new qw(i),this.animation=new ta(this),this.setup(),this.init(),this.postprocess(e)}init(){}get model(){return this._model}set model(e){this._model!==e&&(this._model=e)}preprocess(e,t){const r=e.id,s=this.constructor.applyPropHooks(this,e);return r==null&&t!==!0&&(s.id=Rl()),s}postprocess(e){}setup(){this.store.on("change:*",e=>{const{key:t,current:r,previous:i,options:s}=e;this.notify("change:*",{key:t,options:s,current:r,previous:i,cell:this}),this.notify(`change:${t}`,{options:s,current:r,previous:i,cell:this});const o=t;(o==="source"||o==="target")&&this.notify("change:terminal",{type:o,current:r,previous:i,options:s,cell:this})}),this.store.on("changed",({options:e})=>this.notify("changed",{options:e,cell:this}))}notify(e,t){this.trigger(e,t);const r=this.model;return r&&(r.notify(`cell:${e}`,t),this.isNode()?r.notify(`node:${e}`,Object.assign(Object.assign({},t),{node:this})):this.isEdge()&&r.notify(`edge:${e}`,Object.assign(Object.assign({},t),{edge:this}))),this}isNode(){return!1}isEdge(){return!1}isSameStore(e){return this.store===e.store}get view(){return this.store.get("view")}get shape(){return this.store.get("shape","")}getProp(e,t){return e==null?this.store.get():this.store.get(e,t)}setProp(e,t,r){if(typeof e=="string")this.store.set(e,t,r);else{const i=this.preprocess(e,!0);this.store.set(Re({},this.getProp(),i),t),this.postprocess(e)}return this}removeProp(e,t){return typeof e=="string"||Array.isArray(e)?this.store.removeByPath(e,t):this.store.remove(t),this}hasChanged(e){return e==null?this.store.hasChanged():this.store.hasChanged(e)}getPropByPath(e){return this.store.getByPath(e)}setPropByPath(e,t,r={}){return this.model&&(e==="children"?this._children=t?t.map(i=>this.model.getCell(i)).filter(i=>i!=null):null:e==="parent"&&(this._parent=t?this.model.getCell(t):null)),this.store.setByPath(e,t,r),this}removePropByPath(e,t={}){const r=Array.isArray(e)?e:e.split("/");return r[0]==="attrs"&&(t.dirty=!0),this.store.removeByPath(r,t),this}prop(e,t,r){return e==null?this.getProp():typeof e=="string"||Array.isArray(e)?arguments.length===1?this.getPropByPath(e):t==null?this.removePropByPath(e,r||{}):this.setPropByPath(e,t,r||{}):this.setProp(e,t||{})}previous(e){return this.store.getPrevious(e)}get zIndex(){return this.getZIndex()}set zIndex(e){e==null?this.removeZIndex():this.setZIndex(e)}getZIndex(){return this.store.get("zIndex")}setZIndex(e,t={}){return this.store.set("zIndex",e,t),this}removeZIndex(e={}){return this.store.remove("zIndex",e),this}toFront(e={}){const t=this.model;if(t){let r=t.getMaxZIndex(),i;e.deep?(i=this.getDescendants({deep:!0,breadthFirst:!0}),i.unshift(this)):i=[this],r=r-i.length+1;const s=t.total();let o=t.indexOf(this)!==s-i.length;o||(o=i.some((a,l)=>a.getZIndex()!==r+l)),o&&this.batchUpdate("to-front",()=>{r+=i.length,i.forEach((a,l)=>{a.setZIndex(r+l,e)})})}return this}toBack(e={}){const t=this.model;if(t){let r=t.getMinZIndex(),i;e.deep?(i=this.getDescendants({deep:!0,breadthFirst:!0}),i.unshift(this)):i=[this];let s=t.indexOf(this)!==0;s||(s=i.some((o,a)=>o.getZIndex()!==r+a)),s&&this.batchUpdate("to-back",()=>{r-=i.length,i.forEach((o,a)=>{o.setZIndex(r+a,e)})})}return this}get markup(){return this.getMarkup()}set markup(e){e==null?this.removeMarkup():this.setMarkup(e)}getMarkup(){let e=this.store.get("markup");return e==null&&(e=this.constructor.getMarkup()),e}setMarkup(e,t={}){return this.store.set("markup",e,t),this}removeMarkup(e={}){return this.store.remove("markup",e),this}get attrs(){return this.getAttrs()}set attrs(e){e==null?this.removeAttrs():this.setAttrs(e)}getAttrs(){const e=this.store.get("attrs");return e?Object.assign({},e):{}}setAttrs(e,t={}){if(e==null)this.removeAttrs(t);else{const r=i=>this.store.set("attrs",i,t);if(t.overwrite===!0)r(e);else{const i=this.getAttrs();t.deep===!1?r(Object.assign(Object.assign({},i),e)):r(Re({},i,e))}}return this}replaceAttrs(e,t={}){return this.setAttrs(e,Object.assign(Object.assign({},t),{overwrite:!0}))}updateAttrs(e,t={}){return this.setAttrs(e,Object.assign(Object.assign({},t),{deep:!1}))}removeAttrs(e={}){return this.store.remove("attrs",e),this}getAttrDefinition(e){if(!e)return null;const r=this.constructor.getAttrHooks()||{};let i=r[e]||Vn.registry.get(e);if(!i){const s=Tl(e);i=r[s]||Vn.registry.get(s)}return i||null}getAttrByPath(e){return e==null||e===""?this.getAttrs():this.getPropByPath(this.prefixAttrPath(e))}setAttrByPath(e,t,r={}){return this.setPropByPath(this.prefixAttrPath(e),t,r),this}removeAttrByPath(e,t={}){return this.removePropByPath(this.prefixAttrPath(e),t),this}prefixAttrPath(e){return Array.isArray(e)?["attrs"].concat(e):`attrs/${e}`}attr(e,t,r){return e==null?this.getAttrByPath():typeof e=="string"||Array.isArray(e)?arguments.length===1?this.getAttrByPath(e):t==null?this.removeAttrByPath(e,r||{}):this.setAttrByPath(e,t,r||{}):this.setAttrs(e,t||{})}get visible(){return this.isVisible()}set visible(e){this.setVisible(e)}setVisible(e,t={}){return this.store.set("visible",e,t),this}isVisible(){return this.store.get("visible")!==!1}show(e={}){return this.isVisible()||this.setVisible(!0,e),this}hide(e={}){return this.isVisible()&&this.setVisible(!1,e),this}toggleVisible(e,t={}){const r=typeof e=="boolean"?e:!this.isVisible(),i=typeof e=="boolean"?t:e;return r?this.show(i):this.hide(i),this}get data(){return this.getData()}set data(e){this.setData(e)}getData(){return this.store.get("data")}setData(e,t={}){if(e==null)this.removeData(t);else{const r=i=>this.store.set("data",i,t);if(t.overwrite===!0)r(e);else{const i=this.getData();t.deep===!1?r(typeof e=="object"?Object.assign(Object.assign({},i),e):e):r(Re({},i,e))}}return this}replaceData(e,t={}){return this.setData(e,Object.assign(Object.assign({},t),{overwrite:!0}))}updateData(e,t={}){return this.setData(e,Object.assign(Object.assign({},t),{deep:!1}))}removeData(e={}){return this.store.remove("data",e),this}get parent(){return this.getParent()}get children(){return this.getChildren()}getParentId(){return this.store.get("parent")}getParent(){const e=this.getParentId();if(e&&this.model){const t=this.model.getCell(e);return this._parent=t,t}return null}getChildren(){const e=this.store.get("children");if(e&&e.length&&this.model){const t=e.map(r=>{var i;return(i=this.model)===null||i===void 0?void 0:i.getCell(r)}).filter(r=>r!=null);return this._children=t,[...t]}return null}hasParent(){return this.parent!=null}isParentOf(e){return e!=null&&e.getParent()===this}isChildOf(e){return e!=null&&this.getParent()===e}eachChild(e,t){return this.children&&this.children.forEach(e,t),this}filterChild(e,t){return this.children?this.children.filter(e,t):[]}getChildCount(){return this.children==null?0:this.children.length}getChildIndex(e){return this.children==null?-1:this.children.indexOf(e)}getChildAt(e){return this.children!=null&&e>=0?this.children[e]:null}getAncestors(e={}){const t=[];let r=this.getParent();for(;r;)t.push(r),r=e.deep!==!1?r.getParent():null;return t}getDescendants(e={}){if(e.deep!==!1){if(e.breadthFirst){const t=[],r=this.getChildren()||[];for(;r.length>0;){const i=r.shift(),s=i.getChildren();t.push(i),s&&r.push(...s)}return t}{const t=this.getChildren()||[];return t.forEach(r=>{t.push(...r.getDescendants(e))}),t}}return this.getChildren()||[]}isDescendantOf(e,t={}){if(e==null)return!1;if(t.deep!==!1){let r=this.getParent();for(;r;){if(r===e)return!0;r=r.getParent()}return!1}return this.isChildOf(e)}isAncestorOf(e,t={}){return e==null?!1:e.isDescendantOf(this,t)}contains(e){return this.isAncestorOf(e)}getCommonAncestor(...e){return le.getCommonAncestor(this,...e)}setParent(e,t={}){return this._parent=e,e?this.store.set("parent",e.id,t):this.store.remove("parent",t),this}setChildren(e,t={}){return this._children=e,e!=null?this.store.set("children",e.map(r=>r.id),t):this.store.remove("children",t),this}unembed(e,t={}){const r=this.children;if(r!=null&&e!=null){const i=this.getChildIndex(e);i!==-1&&(r.splice(i,1),e.setParent(null,t),this.setChildren(r,t))}return this}embed(e,t={}){return e.addTo(this,t),this}addTo(e,t={}){return le.isCell(e)?e.addChild(this,t):e.addCell(this,t),this}insertTo(e,t,r={}){return e.insertChild(this,t,r),this}addChild(e,t={}){return this.insertChild(e,void 0,t)}insertChild(e,t,r={}){if(e!=null&&e!==this){const i=e.getParent(),s=this!==i;let o=t;if(o==null&&(o=this.getChildCount(),s||(o-=1)),i){const l=i.getChildren();if(l){const c=l.indexOf(e);c>=0&&(e.setParent(null,r),l.splice(c,1),i.setChildren(l,r))}}let a=this.children;if(a==null?(a=[],a.push(e)):a.splice(o,0,e),e.setParent(this,r),this.setChildren(a,r),s&&this.model){const l=this.model.getIncomingEdges(this),c=this.model.getOutgoingEdges(this);l&&l.forEach(u=>u.updateParent(r)),c&&c.forEach(u=>u.updateParent(r))}this.model&&this.model.addCell(e,r)}return this}removeFromParent(e={}){const t=this.getParent();if(t!=null){const r=t.getChildIndex(this);t.removeChildAt(r,e)}return this}removeChild(e,t={}){const r=this.getChildIndex(e);return this.removeChildAt(r,t)}removeChildAt(e,t={}){const r=this.getChildAt(e);return this.children!=null&&r!=null&&(this.unembed(r,t),r.remove(t)),r}remove(e={}){return this.batchUpdate("remove",()=>{const t=this.getParent();t&&t.removeChild(this,e),e.deep!==!1&&this.eachChild(r=>r.remove(e)),this.model&&this.model.removeCell(this,e)}),this}transition(e,t,r={},i="/"){return this.animation.start(e,t,r,i)}stopTransition(e,t,r="/"){return this.animation.stop(e,t,r),this}getTransitions(){return this.animation.get()}translate(e,t,r){return this}scale(e,t,r,i){return this}addTools(e,t,r){const i=Array.isArray(e)?e:[e],s=typeof t=="string"?t:null,o=typeof t=="object"?t:typeof r=="object"?r:{};if(o.reset)return this.setTools({name:s,items:i,local:o.local},o);let a=Fe(this.getTools());if(a==null||s==null||a.name===s)return a==null&&(a={}),a.items||(a.items=[]),a.name=s,a.items=[...a.items,...i],this.setTools(Object.assign({},a),o)}setTools(e,t={}){return e==null?this.removeTools():this.store.set("tools",le.normalizeTools(e),t),this}getTools(){return this.store.get("tools")}removeTools(e={}){return this.store.remove("tools",e),this}hasTools(e){const t=this.getTools();return t==null?!1:e==null?!0:t.name===e}hasTool(e){const t=this.getTools();return t==null?!1:t.items.some(r=>typeof r=="string"?r===e:r.name===e)}removeTool(e,t={}){const r=Fe(this.getTools());if(r){let i=!1;const s=r.items.slice(),o=a=>{s.splice(a,1),i=!0};if(typeof e=="number")o(e);else for(let a=s.length-1;a>=0;a-=1){const l=s[a];(typeof l=="string"?l===e:l.name===e)&&o(a)}i&&(r.items=s,this.setTools(r,t))}return this}getBBox(e){return new D}getConnectionPoint(e,t){return new P}toJSON(e={}){const t=Object.assign({},this.store.get()),r=Object.prototype.toString,i=this.isNode()?"node":this.isEdge()?"edge":"cell";if(!t.shape){const g=this.constructor;throw new Error(`Unable to serialize ${i} missing "shape" prop, check the ${i} "${g.name||r.call(g)}"`)}const s=this.constructor,o=e.diff===!0,a=t.attrs||{},l=s.getDefaults(!0),c=o?this.preprocess(l,!0):l,u=c.attrs||{},h={};Object.entries(t).forEach(([g,p])=>{if(p!=null&&!Array.isArray(p)&&typeof p=="object"&&!Dn(p))throw new Error(`Can only serialize ${i} with plain-object props, but got a "${r.call(p)}" type of key "${g}" on ${i} "${this.id}"`);if(g!=="attrs"&&g!=="shape"&&o){const b=c[g];Zn(p,b)&&delete t[g]}}),Object.keys(a).forEach(g=>{const p=a[g],b=u[g];Object.keys(p).forEach(m=>{const y=p[m],v=b?b[m]:null;y!=null&&typeof y=="object"&&!Array.isArray(y)?Object.keys(y).forEach(w=>{const x=y[w];if(b==null||v==null||!Ze(v)||!Zn(v[w],x)){h[g]==null&&(h[g]={}),h[g][m]==null&&(h[g][m]={});const C=h[g][m];C[w]=x}}):(b==null||!Zn(v,y))&&(h[g]==null&&(h[g]={}),h[g][m]=y)})});const f=Object.assign(Object.assign({},t),{attrs:Rb(h)?void 0:h});f.attrs==null&&delete f.attrs;const d=f;return d.angle===0&&delete d.angle,Fe(d)}clone(e={}){if(!e.deep){const r=Object.assign({},this.store.get());e.keepId||delete r.id,delete r.parent,delete r.children;const i=this.constructor;return new i(r)}return le.deepClone(this)[this.id]}findView(e){return e.findViewByCell(this)}startBatch(e,t={},r=this.model){return this.notify("batch:start",{name:e,data:t,cell:this}),r&&r.startBatch(e,Object.assign(Object.assign({},t),{cell:this})),this}stopBatch(e,t={},r=this.model){return r&&r.stopBatch(e,Object.assign(Object.assign({},t),{cell:this})),this.notify("batch:stop",{name:e,data:t,cell:this}),this}batchUpdate(e,t,r){const i=this.model;this.startBatch(e,r,i);const s=t();return this.stopBatch(e,r,i),s}dispose(){this.removeFromParent(),this.store.dispose()}}le.defaults={},le.attrHooks={},le.propHooks=[],OG([mt.dispose()],le.prototype,"dispose",null),function(n){function e(t){return typeof t=="string"?{items:[t]}:Array.isArray(t)?{items:t}:t.items?t:{items:[t]}}n.normalizeTools=e}(le||(le={})),function(n){n.toStringTag=`X6.${n.name}`;function e(t){if(t==null)return!1;if(t instanceof n)return!0;const r=t[Symbol.toStringTag],i=t;return(r==null||r===n.toStringTag)&&typeof i.isNode=="function"&&typeof i.isEdge=="function"&&typeof i.prop=="function"&&typeof i.attr=="function"}n.isCell=e}(le||(le={})),function(n){function e(...s){const o=s.filter(l=>l!=null).map(l=>l.getAncestors()).sort((l,c)=>l.length-c.length);return o.shift().find(l=>o.every(c=>c.includes(l)))||null}n.getCommonAncestor=e;function t(s,o={}){let a=null;for(let l=0,c=s.length;l<c;l+=1){const u=s[l];let h=u.getBBox(o);if(h){if(u.isNode()){const f=u.getAngle();f!=null&&f!==0&&(h=h.bbox(f))}a=a==null?h:a.union(h)}}return a}n.getCellsBBox=t;function r(s){const o=[s,...s.getDescendants({deep:!0})];return n.cloneCells(o)}n.deepClone=r;function i(s){const o=Vb(s),a=o.reduce((l,c)=>(l[c.id]=c.clone(),l),{});return o.forEach(l=>{const c=a[l.id];if(c.isEdge()){const f=c.getSourceCellId(),d=c.getTargetCellId();f&&a[f]&&c.setSource(Object.assign(Object.assign({},c.getSource()),{cell:a[f].id})),d&&a[d]&&c.setTarget(Object.assign(Object.assign({},c.getTarget()),{cell:a[d].id}))}const u=l.getParent();u&&a[u.id]&&c.setParent(a[u.id]);const h=l.getChildren();if(h&&h.length){const f=h.reduce((d,g)=>(a[g.id]&&d.push(a[g.id]),d),[]);f.length>0&&c.setChildren(f)}}),a}n.cloneCells=i}(le||(le={})),function(n){n.config({propHooks(e){var{tools:t}=e,r=Gw(e,["tools"]);return t&&(r.tools=n.normalizeTools(t)),r}})}(le||(le={}));var _s;(function(n){let e,t;function r(o,a){return a?e!=null&&e.exist(o):t!=null&&t.exist(o)}n.exist=r;function i(o){e=o}n.setEdgeRegistry=i;function s(o){t=o}n.setNodeRegistry=s})(_s||(_s={}));class MG{constructor(e){this.ports=[],this.groups={},this.init(Fe(e))}getPorts(){return this.ports}getGroup(e){return e!=null?this.groups[e]:null}getPortsByGroup(e){return this.ports.filter(t=>t.group===e||t.group==null&&e==null)}getPortsLayoutByGroup(e,t){const r=this.getPortsByGroup(e),i=e?this.getGroup(e):null,s=i?i.position:null,o=s?s.name:null;let a;if(o!=null){const h=Ai.registry.get(o);if(h==null)return Ai.registry.onNotFound(o);a=h}else a=Ai.presets.left;const l=r.map(h=>h&&h.position&&h.position.args||{}),c=s&&s.args||{};return a(l,t,c).map((h,f)=>{const d=r[f];return{portLayout:h,portId:d.id,portSize:d.size,portAttrs:d.attrs,labelSize:d.label.size,labelLayout:this.getPortLabelLayout(d,P.create(h.position),t)}})}init(e){const{groups:t,items:r}=e;t!=null&&Object.keys(t).forEach(i=>{this.groups[i]=this.parseGroup(t[i])}),Array.isArray(r)&&r.forEach(i=>{this.ports.push(this.parsePort(i))})}parseGroup(e){return Object.assign(Object.assign({},e),{label:this.getLabel(e,!0),position:this.getPortPosition(e.position,!0)})}parsePort(e){const t=Object.assign({},e),r=this.getGroup(e.group)||{};return t.markup=t.markup||r.markup,t.attrs=Re({},r.attrs,t.attrs),t.position=this.createPosition(r,t),t.label=Re({},r.label,this.getLabel(t)),t.zIndex=this.getZIndex(r,t),t.size=Object.assign(Object.assign({},r.size),t.size),t}getZIndex(e,t){return typeof t.zIndex=="number"?t.zIndex:typeof e.zIndex=="number"||e.zIndex==="auto"?e.zIndex:"auto"}createPosition(e,t){return Re({name:"left",args:{}},e.position,{args:t.args})}getPortPosition(e,t=!1){if(e==null){if(t)return{name:"left",args:{}}}else{if(typeof e=="string")return{name:e,args:{}};if(Array.isArray(e))return{name:"absolute",args:{x:e[0],y:e[1]}};if(typeof e=="object")return e}return{args:{}}}getPortLabelPosition(e,t=!1){if(e==null){if(t)return{name:"left",args:{}}}else{if(typeof e=="string")return{name:e,args:{}};if(typeof e=="object")return e}return{args:{}}}getLabel(e,t=!1){const r=e.label||{};return r.position=this.getPortLabelPosition(r.position,t),r}getPortLabelLayout(e,t,r){const i=e.label.position.name||"left",s=e.label.position.args||{},o=Cs.registry.get(i)||Cs.presets.left;return o?o(t,r,s):null}}var uc=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};let Ye=class HM extends le{get[Symbol.toStringTag](){return HM.toStringTag}constructor(e={}){super(e),this.initPorts()}preprocess(e,t){const{x:r,y:i,width:s,height:o}=e,a=uc(e,["x","y","width","height"]);if(r!=null||i!=null){const l=a.position;a.position=Object.assign(Object.assign({},l),{x:r!=null?r:l?l.x:0,y:i!=null?i:l?l.y:0})}if(s!=null||o!=null){const l=a.size;a.size=Object.assign(Object.assign({},l),{width:s!=null?s:l?l.width:0,height:o!=null?o:l?l.height:0})}return super.preprocess(a,t)}isNode(){return!0}size(e,t,r){return e===void 0?this.getSize():typeof e=="number"?this.setSize(e,t,r):this.setSize(e,t)}getSize(){const e=this.store.get("size");return e?Object.assign({},e):{width:1,height:1}}setSize(e,t,r){return typeof e=="object"?this.resize(e.width,e.height,t):this.resize(e,t,r),this}resize(e,t,r={}){this.startBatch("resize",r);const i=r.direction;if(i){const s=this.getSize();switch(i){case"left":case"right":t=s.height;break;case"top":case"bottom":e=s.width;break}let a={right:0,"top-right":0,top:1,"top-left":1,left:2,"bottom-left":2,bottom:3,"bottom-right":3}[i];const l=we.normalize(this.getAngle()||0);r.absolute&&(a+=Math.floor((l+45)/90),a%=4);const c=this.getBBox();let u;a===0?u=c.getBottomLeft():a===1?u=c.getCorner():a===2?u=c.getTopRight():u=c.getOrigin();const h=u.clone().rotate(-l,c.getCenter()),f=Math.sqrt(e*e+t*t)/2;let d=a*Math.PI/2;d+=Math.atan(a%2===0?t/e:e/t),d-=we.toRad(l);const p=P.fromPolar(f,d,h).clone().translate(e/-2,t/-2);this.store.set("size",{width:e,height:t},r),this.setPosition(p.x,p.y,r)}else this.store.set("size",{width:e,height:t},r);return this.stopBatch("resize",r),this}scale(e,t,r,i={}){const s=this.getBBox().scale(e,t,r==null?void 0:r);return this.startBatch("scale",i),this.setPosition(s.x,s.y,i),this.resize(s.width,s.height,i),this.stopBatch("scale"),this}position(e,t,r){return typeof e=="number"?this.setPosition(e,t,r):this.getPosition(e)}getPosition(e={}){if(e.relative){const r=this.getParent();if(r!=null&&r.isNode()){const i=this.getPosition(),s=r.getPosition();return{x:i.x-s.x,y:i.y-s.y}}}const t=this.store.get("position");return t?Object.assign({},t):{x:0,y:0}}setPosition(e,t,r={}){let i,s,o;if(typeof e=="object"?(i=e.x,s=e.y,o=t||{}):(i=e,s=t,o=r||{}),o.relative){const a=this.getParent();if(a!=null&&a.isNode()){const l=a.getPosition();i+=l.x,s+=l.y}}if(o.deep){const a=this.getPosition();this.translate(i-a.x,s-a.y,o)}else this.store.set("position",{x:i,y:s},o);return this}translate(e=0,t=0,r={}){if(e===0&&t===0)return this;r.translateBy=r.translateBy||this.id;const i=this.getPosition();if(r.restrict!=null&&r.translateBy===this.id){const o=this.getBBox({deep:!0}),a=r.restrict,l=i.x-o.x,c=i.y-o.y,u=Math.max(a.x+l,Math.min(a.x+a.width+l-o.width,i.x+e)),h=Math.max(a.y+c,Math.min(a.y+a.height+c-o.height,i.y+t));e=u-i.x,t=h-i.y}const s={x:i.x+e,y:i.y+t};return r.tx=e,r.ty=t,r.transition?(typeof r.transition!="object"&&(r.transition={}),this.transition("position",s,Object.assign(Object.assign({},r.transition),{interp:Ei.object})),this.eachChild(o=>{var a;((a=r.exclude)===null||a===void 0?void 0:a.includes(o))||o.translate(e,t,r)})):(this.startBatch("translate",r),this.store.set("position",s,r),this.eachChild(o=>{var a;((a=r.exclude)===null||a===void 0?void 0:a.includes(o))||o.translate(e,t,r)}),this.stopBatch("translate",r)),this}angle(e,t){return e==null?this.getAngle():this.rotate(e,t)}getAngle(){return this.store.get("angle",0)}rotate(e,t={}){const r=this.getAngle();if(t.center){const i=this.getSize(),s=this.getPosition(),o=this.getBBox().getCenter();o.rotate(r-e,t.center);const a=o.x-i.width/2-s.x,l=o.y-i.height/2-s.y;this.startBatch("rotate",{angle:e,options:t}),this.setPosition(s.x+a,s.y+l,t),this.rotate(e,Object.assign(Object.assign({},t),{center:null})),this.stopBatch("rotate")}else this.store.set("angle",t.absolute?e:(r+e)%360,t);return this}getBBox(e={}){if(e.deep){const t=this.getDescendants({deep:!0,breadthFirst:!0});return t.push(this),le.getCellsBBox(t)}return D.fromPositionAndSize(this.getPosition(),this.getSize())}getConnectionPoint(e,t){const r=this.getBBox(),i=r.getCenter(),s=e.getTerminal(t);if(s==null)return i;const o=s.port;if(!o||!this.hasPort(o))return i;const a=this.getPort(o);if(!a||!a.group)return i;const c=this.getPortsPosition(a.group)[o].position,u=P.create(c).translate(r.getOrigin()),h=this.getAngle();return h&&u.rotate(-h,i),u}fit(e={}){const r=(this.getChildren()||[]).filter(c=>c.isNode());if(r.length===0)return this;this.startBatch("fit-embeds",e),e.deep&&r.forEach(c=>c.fit(e));let{x:i,y:s,width:o,height:a}=le.getCellsBBox(r);const l=Bn(e.padding);return i-=l.left,s-=l.top,o+=l.left+l.right,a+=l.bottom+l.top,this.store.set({position:{x:i,y:s},size:{width:o,height:a}},e),this.stopBatch("fit-embeds"),this}get portContainerMarkup(){return this.getPortContainerMarkup()}set portContainerMarkup(e){this.setPortContainerMarkup(e)}getDefaultPortContainerMarkup(){return this.store.get("defaultPortContainerMarkup")||Ee.getPortContainerMarkup()}getPortContainerMarkup(){return this.store.get("portContainerMarkup")||this.getDefaultPortContainerMarkup()}setPortContainerMarkup(e,t={}){return this.store.set("portContainerMarkup",Ee.clone(e),t),this}get portMarkup(){return this.getPortMarkup()}set portMarkup(e){this.setPortMarkup(e)}getDefaultPortMarkup(){return this.store.get("defaultPortMarkup")||Ee.getPortMarkup()}getPortMarkup(){return this.store.get("portMarkup")||this.getDefaultPortMarkup()}setPortMarkup(e,t={}){return this.store.set("portMarkup",Ee.clone(e),t),this}get portLabelMarkup(){return this.getPortLabelMarkup()}set portLabelMarkup(e){this.setPortLabelMarkup(e)}getDefaultPortLabelMarkup(){return this.store.get("defaultPortLabelMarkup")||Ee.getPortLabelMarkup()}getPortLabelMarkup(){return this.store.get("portLabelMarkup")||this.getDefaultPortLabelMarkup()}setPortLabelMarkup(e,t={}){return this.store.set("portLabelMarkup",Ee.clone(e),t),this}get ports(){const e=this.store.get("ports",{items:[]});return e.items==null&&(e.items=[]),e}getPorts(){return Fe(this.ports.items)}getPortsByGroup(e){return this.getPorts().filter(t=>t.group===e)}getPort(e){return Fe(this.ports.items.find(t=>t.id&&t.id===e))}getPortAt(e){return this.ports.items[e]||null}hasPorts(){return this.ports.items.length>0}hasPort(e){return this.getPortIndex(e)!==-1}getPortIndex(e){const t=typeof e=="string"?e:e.id;return t!=null?this.ports.items.findIndex(r=>r.id===t):-1}getPortsPosition(e){const t=this.getSize();return this.port.getPortsLayoutByGroup(e,new D(0,0,t.width,t.height)).reduce((i,s)=>{const o=s.portLayout;return i[s.portId]={position:Object.assign({},o.position),angle:o.angle||0},i},{})}getPortProp(e,t){return this.getPropByPath(this.prefixPortPath(e,t))}setPortProp(e,t,r,i){if(typeof t=="string"||Array.isArray(t)){const a=this.prefixPortPath(e,t),l=r;return this.setPropByPath(a,l,i)}const s=this.prefixPortPath(e),o=t;return this.setPropByPath(s,o,r)}removePortProp(e,t,r){return typeof t=="string"||Array.isArray(t)?this.removePropByPath(this.prefixPortPath(e,t),r):this.removePropByPath(this.prefixPortPath(e),t)}portProp(e,t,r,i){return t==null?this.getPortProp(e):typeof t=="string"||Array.isArray(t)?arguments.length===2?this.getPortProp(e,t):r==null?this.removePortProp(e,t,i):this.setPortProp(e,t,r,i):this.setPortProp(e,t,r)}prefixPortPath(e,t){const r=this.getPortIndex(e);if(r===-1)throw new Error(`Unable to find port with id: "${e}"`);return t==null||t===""?["ports","items",`${r}`]:Array.isArray(t)?["ports","items",`${r}`,...t]:`ports/items/${r}/${t}`}addPort(e,t){const r=[...this.ports.items];return r.push(e),this.setPropByPath("ports/items",r,t),this}addPorts(e,t){return this.setPropByPath("ports/items",[...this.ports.items,...e],t),this}insertPort(e,t,r){const i=[...this.ports.items];return i.splice(e,0,t),this.setPropByPath("ports/items",i,r),this}removePort(e,t={}){return this.removePortAt(this.getPortIndex(e),t)}removePortAt(e,t={}){if(e>=0){const r=[...this.ports.items];r.splice(e,1),t.rewrite=!0,this.setPropByPath("ports/items",r,t)}return this}removePorts(e,t){let r;if(Array.isArray(e)){if(r=t||{},e.length){r.rewrite=!0;const s=[...this.ports.items].filter(o=>!e.some(a=>{const l=typeof a=="string"?a:a.id;return o.id===l}));this.setPropByPath("ports/items",s,r)}}else r=e||{},r.rewrite=!0,this.setPropByPath("ports/items",[],r);return this}getParsedPorts(){return this.port.getPorts()}getParsedGroups(){return this.port.groups}getPortsLayoutByGroup(e,t){return this.port.getPortsLayoutByGroup(e,t)}initPorts(){this.updatePortData(),this.on("change:ports",()=>{this.processRemovedPort(),this.updatePortData()})}processRemovedPort(){const e=this.ports,t={};e.items.forEach(o=>{o.id&&(t[o.id]=!0)});const r={};(this.store.getPrevious("ports")||{items:[]}).items.forEach(o=>{o.id&&!t[o.id]&&(r[o.id]=!0)});const s=this.model;s&&!Rb(r)&&(s.getConnectedEdges(this,{incoming:!0}).forEach(l=>{const c=l.getTargetPortId();c&&r[c]&&l.remove()}),s.getConnectedEdges(this,{outgoing:!0}).forEach(l=>{const c=l.getSourcePortId();c&&r[c]&&l.remove()}))}validatePorts(){const e={},t=[];return this.ports.items.forEach(r=>{typeof r!="object"&&t.push(`Invalid port ${r}.`),r.id==null&&(r.id=this.generatePortId()),e[r.id]&&t.push("Duplicitied port id."),e[r.id]=!0}),t}generatePortId(){return Rl()}updatePortData(){const e=this.validatePorts();if(e.length>0)throw this.store.set("ports",this.store.getPrevious("ports")),new Error(e.join(" "));const t=this.port?this.port.getPorts():null;this.port=new MG(this.ports);const r=this.port.getPorts(),i=t?r.filter(o=>t.find(a=>a.id===o.id)?null:o):[...r],s=t?t.filter(o=>r.find(a=>a.id===o.id)?null:o):[];i.length>0&&this.notify("ports:added",{added:i,cell:this,node:this}),s.length>0&&this.notify("ports:removed",{removed:s,cell:this,node:this})}};Ye.defaults={angle:0,position:{x:0,y:0},size:{width:1,height:1}},function(n){n.toStringTag=`X6.${n.name}`;function e(t){if(t==null)return!1;if(t instanceof n)return!0;const r=t[Symbol.toStringTag],i=t;return(r==null||r===n.toStringTag)&&typeof i.isNode=="function"&&typeof i.isEdge=="function"&&typeof i.prop=="function"&&typeof i.attr=="function"&&typeof i.size=="function"&&typeof i.position=="function"}n.isNode=e}(Ye||(Ye={})),function(n){n.config({propHooks(e){var{ports:t}=e,r=uc(e,["ports"]);return t&&(r.ports=Array.isArray(t)?{items:t}:t),r}})}(Ye||(Ye={})),function(n){n.registry=We.create({type:"node",process(e,t){if(_s.exist(e,!0))throw new Error(`Node with name '${e}' was registered by anthor Edge`);if(typeof t=="function")return t.config({shape:e}),t;let r=n;const{inherit:i}=t,s=uc(t,["inherit"]);if(i)if(typeof i=="string"){const a=this.get(i);a==null?this.onNotFound(i,"inherited"):r=a}else r=i;s.constructorName==null&&(s.constructorName=e);const o=r.define.call(r,s);return o.config({shape:e}),o}}),_s.setNodeRegistry(n.registry)}(Ye||(Ye={})),function(n){let e=0;function t(s){return s?Vh(s):(e+=1,`CustomNode${e}`)}function r(s){const{constructorName:o,overwrite:a}=s,l=uc(s,["constructorName","overwrite"]),c=zh(t(o||l.shape),this);return c.config(l),l.shape&&n.registry.register(l.shape,c,a),c}n.define=r;function i(s){const o=s.shape||"rect",a=n.registry.get(o);return a?new a(s):n.registry.onNotFound(o)}n.create=i}(Ye||(Ye={}));var hc=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};let qe=class UM extends le{get[Symbol.toStringTag](){return UM.toStringTag}constructor(e={}){super(e)}preprocess(e,t){const{source:r,sourceCell:i,sourcePort:s,sourcePoint:o,target:a,targetCell:l,targetPort:c,targetPoint:u}=e,f=hc(e,["source","sourceCell","sourcePort","sourcePoint","target","targetCell","targetPort","targetPoint"]),d=g=>typeof g=="string"||typeof g=="number";if(r!=null)if(le.isCell(r))f.source={cell:r.id};else if(d(r))f.source={cell:r};else if(P.isPoint(r))f.source=r.toJSON();else if(Array.isArray(r))f.source={x:r[0],y:r[1]};else{const g=r.cell;le.isCell(g)?f.source=Object.assign(Object.assign({},r),{cell:g.id}):f.source=r}if(i!=null||s!=null){let g=f.source;if(i!=null){const p=d(i)?i:i.id;g?g.cell=p:g=f.source={cell:p}}s!=null&&g&&(g.port=s)}else o!=null&&(f.source=P.create(o).toJSON());if(a!=null)if(le.isCell(a))f.target={cell:a.id};else if(d(a))f.target={cell:a};else if(P.isPoint(a))f.target=a.toJSON();else if(Array.isArray(a))f.target={x:a[0],y:a[1]};else{const g=a.cell;le.isCell(g)?f.target=Object.assign(Object.assign({},a),{cell:g.id}):f.target=a}if(l!=null||c!=null){let g=f.target;if(l!=null){const p=d(l)?l:l.id;g?g.cell=p:g=f.target={cell:p}}c!=null&&g&&(g.port=c)}else u!=null&&(f.target=P.create(u).toJSON());return super.preprocess(f,t)}setup(){super.setup(),this.on("change:labels",e=>this.onLabelsChanged(e)),this.on("change:vertices",e=>this.onVertexsChanged(e))}isEdge(){return!0}disconnect(e={}){return this.store.set({source:{x:0,y:0},target:{x:0,y:0}},e),this}get source(){return this.getSource()}set source(e){this.setSource(e)}getSource(){return this.getTerminal("source")}getSourceCellId(){return this.source.cell}getSourcePortId(){return this.source.port}setSource(e,t,r={}){return this.setTerminal("source",e,t,r)}get target(){return this.getTarget()}set target(e){this.setTarget(e)}getTarget(){return this.getTerminal("target")}getTargetCellId(){return this.target.cell}getTargetPortId(){return this.target.port}setTarget(e,t,r={}){return this.setTerminal("target",e,t,r)}getTerminal(e){return Object.assign({},this.store.get(e))}setTerminal(e,t,r,i={}){if(le.isCell(t))return this.store.set(e,Re({},r,{cell:t.id}),i),this;const s=t;return P.isPoint(t)||s.x!=null&&s.y!=null?(this.store.set(e,Re({},r,{x:s.x,y:s.y}),i),this):(this.store.set(e,Fe(t),i),this)}getSourcePoint(){return this.getTerminalPoint("source")}getTargetPoint(){return this.getTerminalPoint("target")}getTerminalPoint(e){const t=this[e];if(P.isPointLike(t))return P.create(t);const r=this.getTerminalCell(e);return r?r.getConnectionPoint(this,e):new P}getSourceCell(){return this.getTerminalCell("source")}getTargetCell(){return this.getTerminalCell("target")}getTerminalCell(e){if(this.model){const t=e==="source"?this.getSourceCellId():this.getTargetCellId();if(t)return this.model.getCell(t)}return null}getSourceNode(){return this.getTerminalNode("source")}getTargetNode(){return this.getTerminalNode("target")}getTerminalNode(e){let t=this;const r={};for(;t&&t.isEdge();){if(r[t.id])return null;r[t.id]=!0,t=t.getTerminalCell(e)}return t&&t.isNode()?t:null}get router(){return this.getRouter()}set router(e){e==null?this.removeRouter():this.setRouter(e)}getRouter(){return this.store.get("router")}setRouter(e,t,r){return typeof e=="object"?this.store.set("router",e,t):this.store.set("router",{name:e,args:t},r),this}removeRouter(e={}){return this.store.remove("router",e),this}get connector(){return this.getConnector()}set connector(e){e==null?this.removeConnector():this.setConnector(e)}getConnector(){return this.store.get("connector")}setConnector(e,t,r){return typeof e=="object"?this.store.set("connector",e,t):this.store.set("connector",{name:e,args:t},r),this}removeConnector(e={}){return this.store.remove("connector",e)}getDefaultLabel(){const e=this.constructor,t=this.store.get("defaultLabel")||e.defaultLabel||{};return Fe(t)}get labels(){return this.getLabels()}set labels(e){this.setLabels(e)}getLabels(){return[...this.store.get("labels",[])].map(e=>this.parseLabel(e))}setLabels(e,t={}){return this.store.set("labels",Array.isArray(e)?e:[e],t),this}insertLabel(e,t,r={}){const i=this.getLabels(),s=i.length;let o=t!=null&&Number.isFinite(t)?t:s;return o<0&&(o=s+o+1),i.splice(o,0,this.parseLabel(e)),this.setLabels(i,r)}appendLabel(e,t={}){return this.insertLabel(e,-1,t)}getLabelAt(e){const t=this.getLabels();return e!=null&&Number.isFinite(e)?this.parseLabel(t[e]):null}setLabelAt(e,t,r={}){if(e!=null&&Number.isFinite(e)){const i=this.getLabels();i[e]=this.parseLabel(t),this.setLabels(i,r)}return this}removeLabelAt(e,t={}){const r=this.getLabels(),i=e!=null&&Number.isFinite(e)?e:-1,s=r.splice(i,1);return this.setLabels(r,t),s.length?s[0]:null}parseLabel(e){return typeof e=="string"?this.constructor.parseStringLabel(e):e}onLabelsChanged({previous:e,current:t}){const r=e&&t?t.filter(s=>e.find(o=>s===o||Zn(s,o))?null:s):t?[...t]:[],i=e&&t?e.filter(s=>t.find(o=>s===o||Zn(s,o))?null:s):e?[...e]:[];r.length>0&&this.notify("labels:added",{added:r,cell:this,edge:this}),i.length>0&&this.notify("labels:removed",{removed:i,cell:this,edge:this})}get vertices(){return this.getVertices()}set vertices(e){this.setVertices(e)}getVertices(){return[...this.store.get("vertices",[])]}setVertices(e,t={}){const r=Array.isArray(e)?e:[e];return this.store.set("vertices",r.map(i=>P.toJSON(i)),t),this}insertVertex(e,t,r={}){const i=this.getVertices(),s=i.length;let o=t!=null&&Number.isFinite(t)?t:s;return o<0&&(o=s+o+1),i.splice(o,0,P.toJSON(e)),this.setVertices(i,r)}appendVertex(e,t={}){return this.insertVertex(e,-1,t)}getVertexAt(e){return e!=null&&Number.isFinite(e)?this.getVertices()[e]:null}setVertexAt(e,t,r={}){if(e!=null&&Number.isFinite(e)){const i=this.getVertices();i[e]=t,this.setVertices(i,r)}return this}removeVertexAt(e,t={}){const r=this.getVertices(),i=e!=null&&Number.isFinite(e)?e:-1;return r.splice(i,1),this.setVertices(r,t)}onVertexsChanged({previous:e,current:t}){const r=e&&t?t.filter(s=>e.find(o=>P.equals(s,o))?null:s):t?[...t]:[],i=e&&t?e.filter(s=>t.find(o=>P.equals(s,o))?null:s):e?[...e]:[];r.length>0&&this.notify("vertexs:added",{added:r,cell:this,edge:this}),i.length>0&&this.notify("vertexs:removed",{removed:i,cell:this,edge:this})}getDefaultMarkup(){return this.store.get("defaultMarkup")||Ee.getEdgeMarkup()}getMarkup(){return super.getMarkup()||this.getDefaultMarkup()}translate(e,t,r={}){return r.translateBy=r.translateBy||this.id,r.tx=e,r.ty=t,this.applyToPoints(i=>({x:(i.x||0)+e,y:(i.y||0)+t}),r)}scale(e,t,r,i={}){return this.applyToPoints(s=>P.create(s).scale(e,t,r).toJSON(),i)}applyToPoints(e,t={}){const r={},i=this.getSource(),s=this.getTarget();P.isPointLike(i)&&(r.source=e(i)),P.isPointLike(s)&&(r.target=e(s));const o=this.getVertices();return o.length>0&&(r.vertices=o.map(e)),this.store.set(r,t),this}getBBox(){return this.getPolyline().bbox()}getConnectionPoint(){return this.getPolyline().pointAt(.5)}getPolyline(){const e=[this.getSourcePoint(),...this.getVertices().map(t=>P.create(t)),this.getTargetPoint()];return new Ue(e)}updateParent(e){let t=null;const r=this.getSourceCell(),i=this.getTargetCell(),s=this.getParent();return r&&i&&(r===i||r.isDescendantOf(i)?t=i:i.isDescendantOf(r)?t=r:t=le.getCommonAncestor(r,i)),s&&t&&t.id!==s.id&&s.unembed(this,e),t&&(!s||s.id!==t.id)&&t.embed(this,e),t}hasLoop(e={}){const t=this.getSource(),r=this.getTarget(),i=t.cell,s=r.cell;if(!i||!s)return!1;let o=i===s;if(!o&&e.deep&&this._model){const a=this.getSourceCell(),l=this.getTargetCell();a&&l&&(o=a.isAncestorOf(l,e)||l.isAncestorOf(a,e))}return o}getFragmentAncestor(){const e=[this,this.getSourceNode(),this.getTargetNode()].filter(t=>t!=null);return this.getCommonAncestor(...e)}isFragmentDescendantOf(e){const t=this.getFragmentAncestor();return!!t&&(t.id===e.id||t.isDescendantOf(e))}};qe.defaults={},function(n){function e(t,r){const i=t,s=r;return i.cell===s.cell?i.port===s.port||i.port==null&&s.port==null:!1}n.equalTerminals=e}(qe||(qe={})),function(n){n.defaultLabel={markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}],attrs:{text:{fill:"#000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"label",fill:"#fff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}};function e(t){return{attrs:{label:{text:t}}}}n.parseStringLabel=e}(qe||(qe={})),function(n){n.toStringTag=`X6.${n.name}`;function e(t){if(t==null)return!1;if(t instanceof n)return!0;const r=t[Symbol.toStringTag],i=t;return(r==null||r===n.toStringTag)&&typeof i.isNode=="function"&&typeof i.isEdge=="function"&&typeof i.prop=="function"&&typeof i.attr=="function"&&typeof i.disconnect=="function"&&typeof i.getSource=="function"&&typeof i.getTarget=="function"}n.isEdge=e}(qe||(qe={})),function(n){n.registry=We.create({type:"edge",process(e,t){if(_s.exist(e,!1))throw new Error(`Edge with name '${e}' was registered by anthor Node`);if(typeof t=="function")return t.config({shape:e}),t;let r=n;const{inherit:i="edge"}=t,s=hc(t,["inherit"]);if(typeof i=="string"){const a=this.get(i||"edge");a==null&&i?this.onNotFound(i,"inherited"):r=a}else r=i;s.constructorName==null&&(s.constructorName=e);const o=r.define.call(r,s);return o.config({shape:e}),o}}),_s.setEdgeRegistry(n.registry)}(qe||(qe={})),function(n){let e=0;function t(s){return s?Vh(s):(e+=1,`CustomEdge${e}`)}function r(s){const{constructorName:o,overwrite:a}=s,l=hc(s,["constructorName","overwrite"]),c=zh(t(o||l.shape),this);return c.config(l),l.shape&&n.registry.register(l.shape,c,a),c}n.define=r;function i(s){const o=s.shape||"edge",a=n.registry.get(o);return a?new a(s):n.registry.onNotFound(o)}n.create=i}(qe||(qe={})),function(n){const e="basic.edge";n.config({shape:e,propHooks(t){const{label:r,vertices:i}=t,s=hc(t,["label","vertices"]);if(r){s.labels==null&&(s.labels=[]);const o=typeof r=="string"?n.parseStringLabel(r):r;s.labels.push(o)}return i&&Array.isArray(i)&&(s.vertices=i.map(o=>P.create(o).toJSON())),s}}),n.registry.register(e,n)}(qe||(qe={}));var TG=function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};class fc extends mt{constructor(e,t={}){super(),this.length=0,this.comparator=t.comparator||"zIndex",this.clean(),e&&this.reset(e,{silent:!0})}toJSON(){return this.cells.map(e=>e.toJSON())}add(e,t,r){let i,s;typeof t=="number"?(i=t,s=Object.assign({merge:!1},r)):(i=this.length,s=Object.assign({merge:!1},t)),i>this.length&&(i=this.length),i<0&&(i+=this.length+1);const o=Array.isArray(e)?e:[e],a=this.comparator&&typeof t!="number"&&s.sort!==!1,l=this.comparator||null;let c=!1;const u=[],h=[];return o.forEach(f=>{const d=this.get(f);d?s.merge&&!f.isSameStore(d)&&(d.setProp(f.getProp(),r),h.push(d),a&&!c&&(l==null||typeof l=="function"?c=d.hasChanged():typeof l=="string"?c=d.hasChanged(l):c=l.some(g=>d.hasChanged(g)))):(u.push(f),this.reference(f))}),u.length&&(a&&(c=!0),this.cells.splice(i,0,...u),this.length=this.cells.length),c&&this.sort({silent:!0}),s.silent||(u.forEach((f,d)=>{const g={cell:f,index:i+d,options:s};this.trigger("added",g),s.dryrun||f.notify("added",Object.assign({},g))}),c&&this.trigger("sorted"),(u.length||h.length)&&this.trigger("updated",{added:u,merged:h,removed:[],options:s})),this}remove(e,t={}){const r=Array.isArray(e)?e:[e],i=this.removeCells(r,t);return!t.silent&&i.length>0&&this.trigger("updated",{options:t,removed:i,added:[],merged:[]}),Array.isArray(e)?i:i[0]}removeCells(e,t){const r=[];for(let i=0;i<e.length;i+=1){const s=this.get(e[i]);if(s==null)continue;const o=this.cells.indexOf(s);this.cells.splice(o,1),this.length-=1,delete this.map[s.id],r.push(s),this.unreference(s),t.dryrun||s.remove(),t.silent||(this.trigger("removed",{cell:s,index:o,options:t}),t.dryrun||s.notify("removed",{cell:s,index:o,options:t}))}return r}reset(e,t={}){const r=this.cells.slice();if(r.forEach(i=>this.unreference(i)),this.clean(),this.add(e,Object.assign({silent:!0},t)),!t.silent){const i=this.cells.slice();this.trigger("reseted",{options:t,previous:r,current:i});const s=[],o=[];i.forEach(a=>{r.some(c=>c.id===a.id)||s.push(a)}),r.forEach(a=>{i.some(c=>c.id===a.id)||o.push(a)}),this.trigger("updated",{options:t,added:s,removed:o,merged:[]})}return this}push(e,t){return this.add(e,this.length,t)}pop(e){const t=this.at(this.length-1);return this.remove(t,e)}unshift(e,t){return this.add(e,0,t)}shift(e){const t=this.at(0);return this.remove(t,e)}get(e){if(e==null)return null;const t=typeof e=="string"||typeof e=="number"?e:e.id;return this.map[t]||null}has(e){return this.get(e)!=null}at(e){return e<0&&(e+=this.length),this.cells[e]||null}first(){return this.at(0)}last(){return this.at(-1)}indexOf(e){return this.cells.indexOf(e)}toArray(){return this.cells.slice()}sort(e={}){return this.comparator!=null&&(this.cells=Db(this.cells,this.comparator),e.silent||this.trigger("sorted")),this}clone(){const e=this.constructor;return new e(this.cells.slice(),{comparator:this.comparator})}reference(e){this.map[e.id]=e,e.on("*",this.notifyCellEvent,this)}unreference(e){e.off("*",this.notifyCellEvent,this),delete this.map[e.id]}notifyCellEvent(e,t){const r=t.cell;this.trigger(`cell:${e}`,t),r&&(r.isNode()?this.trigger(`node:${e}`,Object.assign(Object.assign({},t),{node:r})):r.isEdge()&&this.trigger(`edge:${e}`,Object.assign(Object.assign({},t),{edge:r})))}clean(){this.length=0,this.cells=[],this.map={}}dispose(){this.reset([])}}TG([fc.dispose()],fc.prototype,"dispose",null);var _G=function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};class wn extends mt{get[Symbol.toStringTag](){return wn.toStringTag}constructor(e=[]){super(),this.batches={},this.addings=new WeakMap,this.nodes={},this.edges={},this.outgoings={},this.incomings={},this.collection=new fc(e),this.setup()}notify(e,t){this.trigger(e,t);const r=this.graph;return r&&(e==="sorted"||e==="reseted"||e==="updated"?r.trigger(`model:${e}`,t):r.trigger(e,t)),this}setup(){const e=this.collection;e.on("sorted",()=>this.notify("sorted",null)),e.on("updated",t=>this.notify("updated",t)),e.on("cell:change:zIndex",()=>this.sortOnChangeZ()),e.on("added",({cell:t})=>{this.onCellAdded(t)}),e.on("removed",t=>{const r=t.cell;this.onCellRemoved(r,t.options),this.notify("cell:removed",t),r.isNode()?this.notify("node:removed",Object.assign(Object.assign({},t),{node:r})):r.isEdge()&&this.notify("edge:removed",Object.assign(Object.assign({},t),{edge:r}))}),e.on("reseted",t=>{this.onReset(t.current),this.notify("reseted",t)}),e.on("edge:change:source",({edge:t})=>this.onEdgeTerminalChanged(t,"source")),e.on("edge:change:target",({edge:t})=>{this.onEdgeTerminalChanged(t,"target")})}sortOnChangeZ(){this.collection.sort()}onCellAdded(e){const t=e.id;e.isEdge()?(e.updateParent(),this.edges[t]=!0,this.onEdgeTerminalChanged(e,"source"),this.onEdgeTerminalChanged(e,"target")):this.nodes[t]=!0}onCellRemoved(e,t){const r=e.id;if(e.isEdge()){delete this.edges[r];const i=e.getSource(),s=e.getTarget();if(i&&i.cell){const o=this.outgoings[i.cell],a=o?o.indexOf(r):-1;a>=0&&(o.splice(a,1),o.length===0&&delete this.outgoings[i.cell])}if(s&&s.cell){const o=this.incomings[s.cell],a=o?o.indexOf(r):-1;a>=0&&(o.splice(a,1),o.length===0&&delete this.incomings[s.cell])}}else delete this.nodes[r];t.clear||(t.disconnectEdges?this.disconnectConnectedEdges(e,t):this.removeConnectedEdges(e,t)),e.model===this&&(e.model=null)}onReset(e){this.nodes={},this.edges={},this.outgoings={},this.incomings={},e.forEach(t=>this.onCellAdded(t))}onEdgeTerminalChanged(e,t){const r=t==="source"?this.outgoings:this.incomings,i=e.previous(t);if(i&&i.cell){const o=le.isCell(i.cell)?i.cell.id:i.cell,a=r[o],l=a?a.indexOf(e.id):-1;l>=0&&(a.splice(l,1),a.length===0&&delete r[o])}const s=e.getTerminal(t);if(s&&s.cell){const o=le.isCell(s.cell)?s.cell.id:s.cell,a=r[o]||[];a.indexOf(e.id)===-1&&a.push(e.id),r[o]=a}}prepareCell(e,t){return!e.model&&(!t||!t.dryrun)&&(e.model=this),e.zIndex==null&&e.setZIndex(this.getMaxZIndex()+1,{silent:!0}),e}resetCells(e,t={}){return e.map(r=>this.prepareCell(r,Object.assign(Object.assign({},t),{dryrun:!0}))),this.collection.reset(e,t),e.map(r=>this.prepareCell(r,{options:t})),this}clear(e={}){const t=this.getCells();if(t.length===0)return this;const r=Object.assign(Object.assign({},e),{clear:!0});return this.batchUpdate("clear",()=>{const i=t.sort((s,o)=>{const a=s.isEdge()?1:2,l=o.isEdge()?1:2;return a-l});for(;i.length>0;){const s=i.shift();s&&s.remove(r)}},r),this}addNode(e,t={}){const r=Ye.isNode(e)?e:this.createNode(e);return this.addCell(r,t),r}updateNode(e,t={}){const r=this.createNode(e),i=r.getProp();return r.dispose(),this.updateCell(i,t)}createNode(e){return Ye.create(e)}addEdge(e,t={}){const r=qe.isEdge(e)?e:this.createEdge(e);return this.addCell(r,t),r}createEdge(e){return qe.create(e)}updateEdge(e,t={}){const r=this.createEdge(e),i=r.getProp();return r.dispose(),this.updateCell(i,t)}addCell(e,t={}){return Array.isArray(e)?this.addCells(e,t):(!this.collection.has(e)&&!this.addings.has(e)&&(this.addings.set(e,!0),this.collection.add(this.prepareCell(e,t),t),e.eachChild(r=>this.addCell(r,t)),this.addings.delete(e)),this)}addCells(e,t={}){const r=e.length;if(r===0)return this;const i=Object.assign(Object.assign({},t),{position:r-1,maxPosition:r-1});return this.startBatch("add",Object.assign(Object.assign({},i),{cells:e})),e.forEach(s=>{this.addCell(s,i),i.position-=1}),this.stopBatch("add",Object.assign(Object.assign({},i),{cells:e})),this}updateCell(e,t={}){const r=e.id&&this.getCell(e.id);return r?this.batchUpdate("update",()=>(Object.entries(e).forEach(([i,s])=>r.setProp(i,s,t)),!0),e):!1}removeCell(e,t={}){const r=typeof e=="string"?this.getCell(e):e;return r&&this.has(r)?this.collection.remove(r,t):null}updateCellId(e,t){if(e.id===t)return;this.startBatch("update",{id:t}),e.prop("id",t);const r=e.clone({keepId:!0});return this.addCell(r),this.getConnectedEdges(e).forEach(s=>{const o=s.getSourceCell(),a=s.getTargetCell();o===e&&s.setSource(Object.assign(Object.assign({},s.getSource()),{cell:t})),a===e&&s.setTarget(Object.assign(Object.assign({},s.getTarget()),{cell:t}))}),this.removeCell(e),this.stopBatch("update",{id:t}),r}removeCells(e,t={}){return e.length?this.batchUpdate("remove",()=>e.map(r=>this.removeCell(r,t))):[]}removeConnectedEdges(e,t={}){const r=this.getConnectedEdges(e);return r.forEach(i=>{i.remove(t)}),r}disconnectConnectedEdges(e,t={}){const r=typeof e=="string"?e:e.id;this.getConnectedEdges(e).forEach(i=>{const s=i.getSourceCellId(),o=i.getTargetCellId();s===r&&i.setSource({x:0,y:0},t),o===r&&i.setTarget({x:0,y:0},t)})}has(e){return this.collection.has(e)}total(){return this.collection.length}indexOf(e){return this.collection.indexOf(e)}getCell(e){return this.collection.get(e)}getCells(){return this.collection.toArray()}getFirstCell(){return this.collection.first()}getLastCell(){return this.collection.last()}getMinZIndex(){const e=this.collection.first();return e&&e.getZIndex()||0}getMaxZIndex(){const e=this.collection.last();return e&&e.getZIndex()||0}getCellsFromCache(e){return e?Object.keys(e).map(t=>this.getCell(t)).filter(t=>t!=null):[]}getNodes(){return this.getCellsFromCache(this.nodes)}getEdges(){return this.getCellsFromCache(this.edges)}getOutgoingEdges(e){const t=typeof e=="string"?e:e.id,r=this.outgoings[t];return r?r.map(i=>this.getCell(i)).filter(i=>i&&i.isEdge()):null}getIncomingEdges(e){const t=typeof e=="string"?e:e.id,r=this.incomings[t];return r?r.map(i=>this.getCell(i)).filter(i=>i&&i.isEdge()):null}getConnectedEdges(e,t={}){const r=[],i=typeof e=="string"?this.getCell(e):e;if(i==null)return r;const s={},o=t.indirect;let a=t.incoming,l=t.outgoing;a==null&&l==null&&(a=l=!0);const c=(u,h)=>{const f=h?this.getOutgoingEdges(u):this.getIncomingEdges(u);if(f!=null&&f.forEach(d=>{s[d.id]||(r.push(d),s[d.id]=!0,o&&(a&&c(d,!1),l&&c(d,!0)))}),o&&u.isEdge()){const d=h?u.getTargetCell():u.getSourceCell();d&&d.isEdge()&&(s[d.id]||(r.push(d),c(d,h)))}};if(l&&c(i,!0),a&&c(i,!1),t.deep){const u=i.getDescendants({deep:!0}),h={};u.forEach(d=>{d.isNode()&&(h[d.id]=!0)});const f=(d,g)=>{const p=g?this.getOutgoingEdges(d.id):this.getIncomingEdges(d.id);p!=null&&p.forEach(b=>{if(!s[b.id]){const m=b.getSourceCell(),y=b.getTargetCell();if(!t.enclosed&&m&&h[m.id]&&y&&h[y.id])return;r.push(b),s[b.id]=!0}})};u.forEach(d=>{d.isEdge()||(l&&f(d,!0),a&&f(d,!1))})}return r}isBoundary(e,t){const r=typeof e=="string"?this.getCell(e):e,i=t?this.getIncomingEdges(r):this.getOutgoingEdges(r);return i==null||i.length===0}getBoundaryNodes(e){const t=[];return Object.keys(this.nodes).forEach(r=>{if(this.isBoundary(r,e)){const i=this.getCell(r);i&&t.push(i)}}),t}getRoots(){return this.getBoundaryNodes(!0)}getLeafs(){return this.getBoundaryNodes(!1)}isRoot(e){return this.isBoundary(e,!0)}isLeaf(e){return this.isBoundary(e,!1)}getNeighbors(e,t={}){let r=t.incoming,i=t.outgoing;r==null&&i==null&&(r=i=!0);const o=this.getConnectedEdges(e,t).reduce((a,l)=>{const c=l.hasLoop(t),u=l.getSourceCell(),h=l.getTargetCell();return r&&u&&u.isNode()&&!a[u.id]&&(c||u!==e&&(!t.deep||!u.isDescendantOf(e)))&&(a[u.id]=u),i&&h&&h.isNode()&&!a[h.id]&&(c||h!==e&&(!t.deep||!h.isDescendantOf(e)))&&(a[h.id]=h),a},{});if(e.isEdge()){if(r){const a=e.getSourceCell();a&&a.isNode()&&!o[a.id]&&(o[a.id]=a)}if(i){const a=e.getTargetCell();a&&a.isNode()&&!o[a.id]&&(o[a.id]=a)}}return Object.keys(o).map(a=>o[a])}isNeighbor(e,t,r={}){let i=r.incoming,s=r.outgoing;return i==null&&s==null&&(i=s=!0),this.getConnectedEdges(e,r).some(o=>{const a=o.getSourceCell(),l=o.getTargetCell();return!!(i&&a&&a.id===t.id||s&&l&&l.id===t.id)})}getSuccessors(e,t={}){const r=[];return this.search(e,(i,s)=>{i!==e&&this.matchDistance(s,t.distance)&&r.push(i)},Object.assign(Object.assign({},t),{outgoing:!0})),r}isSuccessor(e,t,r={}){let i=!1;return this.search(e,(s,o)=>{if(s===t&&s!==e&&this.matchDistance(o,r.distance))return i=!0,!1},Object.assign(Object.assign({},r),{outgoing:!0})),i}getPredecessors(e,t={}){const r=[];return this.search(e,(i,s)=>{i!==e&&this.matchDistance(s,t.distance)&&r.push(i)},Object.assign(Object.assign({},t),{incoming:!0})),r}isPredecessor(e,t,r={}){let i=!1;return this.search(e,(s,o)=>{if(s===t&&s!==e&&this.matchDistance(o,r.distance))return i=!0,!1},Object.assign(Object.assign({},r),{incoming:!0})),i}matchDistance(e,t){return t==null?!0:typeof t=="function"?t(e):Array.isArray(t)&&t.includes(e)?!0:e===t}getCommonAncestor(...e){const t=[];return e.forEach(r=>{r&&(Array.isArray(r)?t.push(...r):t.push(r))}),le.getCommonAncestor(...t)}getSubGraph(e,t={}){const r=[],i={},s=[],o=[],a=l=>{i[l.id]||(r.push(l),i[l.id]=l,l.isEdge()&&o.push(l),l.isNode()&&s.push(l))};return e.forEach(l=>{a(l),t.deep&&l.getDescendants({deep:!0}).forEach(u=>a(u))}),o.forEach(l=>{const c=l.getSourceCell(),u=l.getTargetCell();c&&!i[c.id]&&(r.push(c),i[c.id]=c,c.isNode()&&s.push(c)),u&&!i[u.id]&&(r.push(u),i[u.id]=u,u.isNode()&&s.push(u))}),s.forEach(l=>{this.getConnectedEdges(l,t).forEach(u=>{const h=u.getSourceCell(),f=u.getTargetCell();!i[u.id]&&h&&i[h.id]&&f&&i[f.id]&&(r.push(u),i[u.id]=u)})}),r}cloneSubGraph(e,t={}){const r=this.getSubGraph(e,t);return this.cloneCells(r)}cloneCells(e){return le.cloneCells(e)}getNodesFromPoint(e,t){const r=typeof e=="number"?{x:e,y:t||0}:e;return this.getNodes().filter(i=>i.getBBox().containsPoint(r))}getNodesInArea(e,t,r,i,s){const o=typeof e=="number"?new D(e,t,r,i):D.create(e),a=typeof e=="number"?s:t,l=a&&a.strict;return this.getNodes().filter(c=>{const u=c.getBBox();return l?o.containsRect(u):o.isIntersectWithRect(u)})}getEdgesInArea(e,t,r,i,s){const o=typeof e=="number"?new D(e,t,r,i):D.create(e),a=typeof e=="number"?s:t,l=a&&a.strict;return this.getEdges().filter(c=>{const u=c.getBBox();return u.width===0?u.inflate(1,0):u.height===0&&u.inflate(0,1),l?o.containsRect(u):o.isIntersectWithRect(u)})}getNodesUnderNode(e,t={}){const r=e.getBBox();return(t.by==null||t.by==="bbox"?this.getNodesInArea(r):this.getNodesFromPoint(r[t.by])).filter(s=>e.id!==s.id&&!s.isDescendantOf(e))}getAllCellsBBox(){return this.getCellsBBox(this.getCells())}getCellsBBox(e,t={}){return le.getCellsBBox(e,t)}search(e,t,r={}){r.breadthFirst?this.breadthFirstSearch(e,t,r):this.depthFirstSearch(e,t,r)}breadthFirstSearch(e,t,r={}){const i=[],s={},o={};for(i.push(e),o[e.id]=0;i.length>0;){const a=i.shift();if(a==null||s[a.id]||(s[a.id]=!0,K(t,this,a,o[a.id])===!1))continue;this.getNeighbors(a,r).forEach(c=>{o[c.id]=o[a.id]+1,i.push(c)})}}depthFirstSearch(e,t,r={}){const i=[],s={},o={};for(i.push(e),o[e.id]=0;i.length>0;){const a=i.pop();if(a==null||s[a.id]||(s[a.id]=!0,K(t,this,a,o[a.id])===!1))continue;const l=this.getNeighbors(a,r),c=i.length;l.forEach(u=>{o[u.id]=o[a.id]+1,i.splice(c,0,u)})}}getShortestPath(e,t,r={}){const i={};this.getEdges().forEach(c=>{const u=c.getSourceCellId(),h=c.getTargetCellId();u&&h&&(i[u]||(i[u]=[]),i[h]||(i[h]=[]),i[u].push(h),r.directed||i[h].push(u))});const s=typeof e=="string"?e:e.id,o=of.run(i,s,r.weight),a=[];let l=typeof t=="string"?t:t.id;for(o[l]&&a.push(l);l=o[l];)a.unshift(l);return a}translate(e,t,r){return this.getCells().filter(i=>!i.hasParent()).forEach(i=>i.translate(e,t,r)),this}resize(e,t,r){return this.resizeCells(e,t,this.getCells(),r)}resizeCells(e,t,r,i={}){const s=this.getCellsBBox(r);if(s){const o=Math.max(e/s.width,0),a=Math.max(t/s.height,0),l=s.getOrigin();r.forEach(c=>c.scale(o,a,l,i))}return this}toJSON(e={}){return wn.toJSON(this.getCells(),e)}parseJSON(e){return wn.fromJSON(e)}fromJSON(e,t={}){const r=this.parseJSON(e);return this.resetCells(r,t),this}startBatch(e,t={}){return this.batches[e]=(this.batches[e]||0)+1,this.notify("batch:start",{name:e,data:t}),this}stopBatch(e,t={}){return this.batches[e]=(this.batches[e]||0)-1,this.notify("batch:stop",{name:e,data:t}),this}batchUpdate(e,t,r={}){this.startBatch(e,r);const i=t();return this.stopBatch(e,r),i}hasActiveBatch(e=Object.keys(this.batches)){return(Array.isArray(e)?e:[e]).some(r=>this.batches[r]>0)}dispose(){this.collection.dispose()}}_G([wn.dispose()],wn.prototype,"dispose",null),function(n){n.toStringTag=`X6.${n.name}`;function e(t){if(t==null)return!1;if(t instanceof n)return!0;const r=t[Symbol.toStringTag],i=t;return(r==null||r===n.toStringTag)&&typeof i.addNode=="function"&&typeof i.addEdge=="function"&&i.collection!=null}n.isModel=e}(wn||(wn={})),function(n){function e(r,i={}){return{cells:r.map(s=>s.toJSON(i))}}n.toJSON=e;function t(r){const i=[];return Array.isArray(r)?i.push(...r):(r.cells&&i.push(...r.cells),r.nodes&&r.nodes.forEach(s=>{s.shape==null&&(s.shape="rect"),i.push(s)}),r.edges&&r.edges.forEach(s=>{s.shape==null&&(s.shape="edge"),i.push(s)})),i.map(s=>{const o=s.shape;if(o){if(Ye.registry.exist(o))return Ye.create(s);if(qe.registry.exist(o))return qe.create(s)}throw new Error("The `shape` should be specified when creating a node/edge instance")})}n.fromJSON=t}(wn||(wn={}));var NG=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};let zr=class extends Ye{get label(){return this.getLabel()}set label(e){this.setLabel(e)}getLabel(){return this.getAttrByPath("text/text")}setLabel(e,t){return e==null?this.removeLabel():this.setAttrByPath("text/text",e,t),this}removeLabel(){return this.removeAttrByPath("text/text"),this}};(function(n){n.bodyAttr={fill:"#ffffff",stroke:"#333333",strokeWidth:2},n.labelAttr={fontSize:14,fill:"#000000",refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontFamily:"Arial, helvetica, sans-serif"},n.config({attrs:{text:Object.assign({},n.labelAttr)},propHooks(e){const{label:t}=e,r=NG(e,["label"]);return t&&fs(r,"attrs/text/text",t),r},visible:!0})})(zr||(zr={}));var kG=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};function $G(n,e="body"){return[{tagName:n,selector:e},{tagName:"text",selector:"label"}]}function IG(n="xlink:href"){return t=>{const{imageUrl:r,imageWidth:i,imageHeight:s}=t,o=kG(t,["imageUrl","imageWidth","imageHeight"]);if(r!=null||i!=null||s!=null){const a=()=>{if(o.attrs){const l=o.attrs.image;r!=null&&(l[n]=r),i!=null&&(l.width=i),s!=null&&(l.height=s),o.attrs.image=l}};o.attrs?(o.attrs.image==null&&(o.attrs.image={}),a()):(o.attrs={image:{}},a())}return o}}function Ns(n,e,t={}){const r={constructorName:n,markup:$G(n,t.selector),attrs:{[n]:Object.assign({},zr.bodyAttr)}};return(t.parent||zr).define(Re(r,e,{shape:n}))}Ns("rect",{attrs:{body:{refWidth:"100%",refHeight:"100%"}}});const LG=qe.define({shape:"edge",markup:[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}],attrs:{lines:{connection:!0,strokeLinejoin:"round"},wrap:{strokeWidth:10},line:{stroke:"#333",strokeWidth:2,targetMarker:"classic"}}});Ns("ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}});var RG=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class ks extends zr{get points(){return this.getPoints()}set points(e){this.setPoints(e)}getPoints(){return this.getAttrByPath("body/refPoints")}setPoints(e,t){return e==null?this.removePoints():this.setAttrByPath("body/refPoints",ks.pointsToString(e),t),this}removePoints(){return this.removeAttrByPath("body/refPoints"),this}}(function(n){function e(t){return typeof t=="string"?t:t.map(r=>Array.isArray(r)?r.join(","):P.isPointLike(r)?`${r.x}, ${r.y}`:"").join(" ")}n.pointsToString=e,n.config({propHooks(t){const{points:r}=t,i=RG(t,["points"]);if(r){const s=e(r);s&&fs(i,"attrs/body/refPoints",s)}return i}})})(ks||(ks={})),Ns("polygon",{},{parent:ks}),Ns("polyline",{},{parent:ks});var jG=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};zr.define({shape:"path",markup:[{tagName:"rect",selector:"bg"},{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}],attrs:{bg:{refWidth:"100%",refHeight:"100%",fill:"none",stroke:"none",pointerEvents:"all"},body:{fill:"none",stroke:"#000",strokeWidth:2}},propHooks(n){const{path:e}=n,t=jG(n,["path"]);return e&&fs(t,"attrs/body/refD",e),t}});var DG=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};zr.define({shape:"text-block",markup:[{tagName:"rect",selector:"body"},en.SUPPORT_FOREIGNOBJECT?{tagName:"foreignObject",selector:"foreignObject",children:[{tagName:"div",ns:ct.xhtml,selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attrs:{textAnchor:"middle"}}],attrs:{body:Object.assign(Object.assign({},zr.bodyAttr),{refWidth:"100%",refHeight:"100%"}),foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}},propHooks(n){const{text:e}=n,t=DG(n,["text"]);return e&&fs(t,"attrs/label/text",e),t},attrHooks:{text:{set(n,{cell:e,view:t,refBBox:r,elem:i,attrs:s}){if(i instanceof HTMLElement)i.textContent=n;else{const o=s.style||{},a={text:n,width:-5,height:"100%"},l=Object.assign({textVerticalAnchor:"middle"},o),c=Vn.presets.textWrap;return K(c.set,this,a,{cell:e,view:t,elem:i,refBBox:r,attrs:l}),{fill:o.color||null}}},position(n,{refBBox:e,elem:t}){if(t instanceof SVGElement)return e.getCenter()}}}}),Ns("image",{attrs:{image:{refWidth:"100%",refHeight:"100%"}},propHooks:IG()},{selector:"image"}),Ns("circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%"}}});class kt extends Xe{constructor(){super(...arguments),this.portsCache={}}get[Symbol.toStringTag](){return kt.toStringTag}getContainerClassName(){const e=[super.getContainerClassName(),this.prefixClassName("node")];return this.can("nodeMovable")||e.push(this.prefixClassName("node-immovable")),e.join(" ")}updateClassName(e){const t=e.target;if(t.hasAttribute("magnet")){const r=this.prefixClassName("port-unconnectable");this.can("magnetConnectable")?yt(t,r):J(t,r)}else{const r=this.prefixClassName("node-immovable");this.can("nodeMovable")?this.removeClass(r):this.addClass(r)}}isNodeView(){return!0}confirmUpdate(e,t={}){let r=e;return this.hasAction(r,"ports")&&(this.removePorts(),this.cleanPortsCache()),this.hasAction(r,"render")?(this.render(),r=this.removeAction(r,["render","update","resize","translate","rotate","ports","tools"])):(r=this.handleAction(r,"resize",()=>this.resize(),"update"),r=this.handleAction(r,"update",()=>this.update(),"ports"),r=this.handleAction(r,"translate",()=>this.translate()),r=this.handleAction(r,"rotate",()=>this.rotate()),r=this.handleAction(r,"ports",()=>this.renderPorts()),r=this.handleAction(r,"tools",()=>{this.getFlag("tools")===e?this.renderTools():this.updateTools(t)})),r}update(e){this.cleanCache(),this.removePorts();const t=this.cell,r=t.getSize(),i=t.getAttrs();this.updateAttrs(this.container,i,{attrs:e===i?null:e,rootBBox:new D(0,0,r.width,r.height),selectors:this.selectors}),this.renderPorts()}renderMarkup(){const e=this.cell.markup;if(e){if(typeof e=="string")throw new TypeError("Not support string markup.");return this.renderJSONMarkup(e)}throw new TypeError("Invalid node markup.")}renderJSONMarkup(e){const t=this.parseJSONMarkup(e,this.container);this.selectors=t.selectors,this.container.appendChild(t.fragment)}render(){return this.empty(),this.renderMarkup(),this.resize(),this.updateTransform(),this.renderTools(),this}resize(){this.cell.getAngle()&&this.rotate(),this.update()}translate(){this.updateTransform()}rotate(){this.updateTransform()}getTranslationString(){const e=this.cell.getPosition();return`translate(${e.x},${e.y})`}getRotationString(){const e=this.cell.getAngle();if(e){const t=this.cell.getSize();return`rotate(${e},${t.width/2},${t.height/2})`}}updateTransform(){let e=this.getTranslationString();const t=this.getRotationString();t&&(e+=` ${t}`),this.container.setAttribute("transform",e)}findPortElem(e,t){const r=e?this.portsCache[e]:null;if(!r)return null;const i=r.portContentElement,s=r.portContentSelectors||{};return this.findOne(t,i,s)}cleanPortsCache(){this.portsCache={}}removePorts(){Object.values(this.portsCache).forEach(e=>{nr(e.portElement)})}renderPorts(){const e=this.container,t=[];e.childNodes.forEach(o=>{t.push(o)});const r=this.cell.getParsedPorts(),i=Lb(r,"zIndex"),s="auto";i[s]&&i[s].forEach(o=>{const a=this.getPortElement(o);e.append(a),t.push(a)}),Object.keys(i).forEach(o=>{if(o!==s){const a=parseInt(o,10);this.appendPorts(i[o],a,t)}}),this.updatePorts()}appendPorts(e,t,r){const i=e.map(s=>this.getPortElement(s));r[t]||t<0?Io(r[Math.max(t,0)],i):zn(this.container,i)}getPortElement(e){const t=this.portsCache[e.id];return t?t.portElement:this.createPortElement(e)}createPortElement(e){let t=Ee.renderMarkup(this.cell.getPortContainerMarkup());const r=t.elem;if(r==null)throw new Error("Invalid port container markup.");t=Ee.renderMarkup(this.getPortMarkup(e));const i=t.elem,s=t.selectors;if(i==null)throw new Error("Invalid port markup.");this.setAttrs({port:e.id,"port-group":e.group},i);let o="x6-port";e.group&&(o+=` x6-port-${e.group}`),J(r,o),J(r,"x6-port"),J(i,"x6-port-body"),r.appendChild(i);let a=s,l,c;if(this.existPortLabel(e)){if(t=Ee.renderMarkup(this.getPortLabelMarkup(e.label)),l=t.elem,c=t.selectors,l==null)throw new Error("Invalid port label markup.");if(s&&c){for(const h in c)if(s[h]&&h!==this.rootSelector)throw new Error("Selectors within port must be unique.");a=Object.assign(Object.assign({},s),c)}J(l,"x6-port-label"),r.appendChild(l)}return this.portsCache[e.id]={portElement:r,portSelectors:a,portLabelElement:l,portLabelSelectors:c,portContentElement:i,portContentSelectors:s},this.graph.options.onPortRendered&&this.graph.options.onPortRendered({port:e,node:this.cell,container:r,selectors:a,labelContainer:l,labelSelectors:c,contentContainer:i,contentSelectors:s}),r}updatePorts(){const e=this.cell.getParsedGroups(),t=Object.keys(e);t.length===0?this.updatePortGroup():t.forEach(r=>this.updatePortGroup(r))}updatePortGroup(e){const t=D.fromSize(this.cell.getSize()),r=this.cell.getPortsLayoutByGroup(e,t);for(let i=0,s=r.length;i<s;i+=1){const o=r[i],a=o.portId,l=this.portsCache[a]||{},c=o.portLayout;if(this.applyPortTransform(l.portElement,c),o.portAttrs!=null){const h={selectors:l.portSelectors||{}};o.portSize&&(h.rootBBox=D.fromSize(o.portSize)),this.updateAttrs(l.portElement,o.portAttrs,h)}const u=o.labelLayout;if(u&&l.portLabelElement&&(this.applyPortTransform(l.portLabelElement,u,-(c.angle||0)),u.attrs)){const h={selectors:l.portLabelSelectors||{}};o.labelSize&&(h.rootBBox=D.fromSize(o.labelSize)),this.updateAttrs(l.portLabelElement,u.attrs,h)}}}applyPortTransform(e,t,r=0){const i=t.angle,s=t.position,o=ut().rotate(r).translate(s.x||0,s.y||0).rotate(i||0);ys(e,o,{absolute:!0})}getPortMarkup(e){return e.markup||this.cell.portMarkup}getPortLabelMarkup(e){return e.markup||this.cell.portLabelMarkup}existPortLabel(e){return e.attrs&&e.attrs.text}getEventArgs(e,t,r){const i=this,s=i.cell,o=s;return t==null||r==null?{e,view:i,node:s,cell:o}:{e,x:t,y:r,view:i,node:s,cell:o}}getPortEventArgs(e,t,r){const i=this,s=i.cell,o=s;return r?{e,x:r.x,y:r.y,view:i,node:s,cell:o,port:t}:{e,view:i,node:s,cell:o,port:t}}notifyMouseDown(e,t,r){super.onMouseDown(e,t,r),this.notify("node:mousedown",this.getEventArgs(e,t,r))}notifyMouseMove(e,t,r){super.onMouseMove(e,t,r),this.notify("node:mousemove",this.getEventArgs(e,t,r))}notifyMouseUp(e,t,r){super.onMouseUp(e,t,r),this.notify("node:mouseup",this.getEventArgs(e,t,r))}notifyPortEvent(e,t,r){const i=this.findAttr("port",t.target);if(i){const s=t.type;e==="node:port:mouseenter"?t.type="mouseenter":e==="node:port:mouseleave"&&(t.type="mouseleave"),this.notify(e,this.getPortEventArgs(t,i,r)),t.type=s}}onClick(e,t,r){super.onClick(e,t,r),this.notify("node:click",this.getEventArgs(e,t,r)),this.notifyPortEvent("node:port:click",e,{x:t,y:r})}onDblClick(e,t,r){super.onDblClick(e,t,r),this.notify("node:dblclick",this.getEventArgs(e,t,r)),this.notifyPortEvent("node:port:dblclick",e,{x:t,y:r})}onContextMenu(e,t,r){super.onContextMenu(e,t,r),this.notify("node:contextmenu",this.getEventArgs(e,t,r)),this.notifyPortEvent("node:port:contextmenu",e,{x:t,y:r})}onMouseDown(e,t,r){this.isPropagationStopped(e)||(this.notifyMouseDown(e,t,r),this.notifyPortEvent("node:port:mousedown",e,{x:t,y:r}),this.startNodeDragging(e,t,r))}onMouseMove(e,t,r){const i=this.getEventData(e),s=i.action;if(s==="magnet")this.dragMagnet(e,t,r);else{if(s==="move"){const a=i.targetView||this;a.dragNode(e,t,r),a.notify("node:moving",{e,x:t,y:r,view:a,cell:a.cell,node:a.cell})}this.notifyMouseMove(e,t,r),this.notifyPortEvent("node:port:mousemove",e,{x:t,y:r})}this.setEventData(e,i)}onMouseUp(e,t,r){const i=this.getEventData(e),s=i.action;s==="magnet"?this.stopMagnetDragging(e,t,r):(this.notifyMouseUp(e,t,r),this.notifyPortEvent("node:port:mouseup",e,{x:t,y:r}),s==="move"&&(i.targetView||this).stopNodeDragging(e,t,r));const o=i.targetMagnet;o&&this.onMagnetClick(e,o,t,r),this.checkMouseleave(e)}onMouseOver(e){super.onMouseOver(e),this.notify("node:mouseover",this.getEventArgs(e)),this.notifyPortEvent("node:port:mouseenter",e),this.notifyPortEvent("node:port:mouseover",e)}onMouseOut(e){super.onMouseOut(e),this.notify("node:mouseout",this.getEventArgs(e)),this.notifyPortEvent("node:port:mouseleave",e),this.notifyPortEvent("node:port:mouseout",e)}onMouseEnter(e){this.updateClassName(e),super.onMouseEnter(e),this.notify("node:mouseenter",this.getEventArgs(e))}onMouseLeave(e){super.onMouseLeave(e),this.notify("node:mouseleave",this.getEventArgs(e))}onMouseWheel(e,t,r,i){super.onMouseWheel(e,t,r,i),this.notify("node:mousewheel",Object.assign({delta:i},this.getEventArgs(e,t,r)))}onMagnetClick(e,t,r,i){const s=this.graph;s.view.getMouseMovedCount(e)>s.options.clickThreshold||this.notify("node:magnet:click",Object.assign({magnet:t},this.getEventArgs(e,r,i)))}onMagnetDblClick(e,t,r,i){this.notify("node:magnet:dblclick",Object.assign({magnet:t},this.getEventArgs(e,r,i)))}onMagnetContextMenu(e,t,r,i){this.notify("node:magnet:contextmenu",Object.assign({magnet:t},this.getEventArgs(e,r,i)))}onMagnetMouseDown(e,t,r,i){this.startMagnetDragging(e,r,i)}onCustomEvent(e,t,r,i){this.notify("node:customevent",Object.assign({name:t},this.getEventArgs(e,r,i))),super.onCustomEvent(e,t,r,i)}prepareEmbedding(e){const t=this.graph,i=this.getEventData(e).cell||this.cell,s=t.findViewByCell(i),o=t.snapToGrid(e.clientX,e.clientY);this.notify("node:embed",{e,node:i,view:s,cell:i,x:o.x,y:o.y,currentParent:i.getParent()})}processEmbedding(e,t){const r=t.cell||this.cell,i=t.graph||this.graph,s=i.options.embedding,o=s.findParent;let a=typeof o=="function"?K(o,i,{view:this,node:this.cell}).filter(f=>le.isCell(f)&&this.cell.id!==f.id&&!f.isDescendantOf(this.cell)):i.model.getNodesUnderNode(r,{by:o});if(s.frontOnly&&a.length>0){const f=Lb(a,"zIndex"),d=RV(Object.keys(f).map(g=>parseInt(g,10)));d&&(a=f[d])}a=a.filter(f=>f.visible);let l=null;const c=t.candidateEmbedView,u=s.validate;for(let f=a.length-1;f>=0;f-=1){const d=a[f];if(c&&c.cell.id===d.id){l=c;break}else{const g=d.findView(i);if(u&&K(u,i,{child:this.cell,parent:g.cell,childView:this,parentView:g})){l=g;break}}}this.clearEmbedding(t),l&&l.highlight(null,{type:"embedding"}),t.candidateEmbedView=l;const h=i.snapToGrid(e.clientX,e.clientY);this.notify("node:embedding",{e,cell:r,node:r,view:i.findViewByCell(r),x:h.x,y:h.y,currentParent:r.getParent(),candidateParent:l?l.cell:null})}clearEmbedding(e){const t=e.candidateEmbedView;t&&(t.unhighlight(null,{type:"embedding"}),e.candidateEmbedView=null)}finalizeEmbedding(e,t){this.graph.startBatch("embedding");const r=t.cell||this.cell,i=t.graph||this.graph,s=i.findViewByCell(r),o=r.getParent(),a=t.candidateEmbedView;if(a?(a.unhighlight(null,{type:"embedding"}),t.candidateEmbedView=null,(o==null||o.id!==a.cell.id)&&a.cell.insertChild(r,void 0,{ui:!0})):o&&o.unembed(r,{ui:!0}),i.model.getConnectedEdges(r,{deep:!0}).forEach(l=>{l.updateParent({ui:!0})}),s&&a){const l=i.snapToGrid(e.clientX,e.clientY);s.notify("node:embedded",{e,cell:r,x:l.x,y:l.y,node:r,view:i.findViewByCell(r),previousParent:o,currentParent:r.getParent()})}this.graph.stopBatch("embedding")}getDelegatedView(){let e=this.cell,t=this;for(;t&&!e.isEdge();){if(!e.hasParent()||t.can("stopDelegateOnDragging"))return t;e=e.getParent(),t=this.graph.findViewByCell(e)}return null}validateMagnet(e,t,r){if(t.getAttribute("magnet")!=="passive"){const i=this.graph.options.connecting.validateMagnet;return i?K(i,this.graph,{e:r,magnet:t,view:e,cell:e.cell}):!0}return!1}startMagnetDragging(e,t,r){if(!this.can("magnetConnectable"))return;e.stopPropagation();const i=e.currentTarget,s=this.graph;this.setEventData(e,{targetMagnet:i}),this.validateMagnet(this,i,e)?(s.options.magnetThreshold<=0&&this.startConnectting(e,i,t,r),this.setEventData(e,{action:"magnet"}),this.stopPropagation(e)):this.onMouseDown(e,t,r),s.view.delegateDragEvents(e,this)}startConnectting(e,t,r,i){this.graph.model.startBatch("add-edge");const s=this.createEdgeFromMagnet(t,r,i);s.setEventData(e,s.prepareArrowheadDragging("target",{x:r,y:i,isNewEdge:!0,fallbackAction:"remove"})),this.setEventData(e,{edgeView:s}),s.notifyMouseDown(e,r,i)}getDefaultEdge(e,t){let r;const i=this.graph.options.connecting.createEdge;return i&&(r=K(i,this.graph,{sourceMagnet:t,sourceView:e,sourceCell:e.cell})),r}createEdgeFromMagnet(e,t,r){const i=this.graph,s=i.model,o=this.getDefaultEdge(this,e);return o.setSource(Object.assign(Object.assign({},o.getSource()),this.getEdgeTerminal(e,t,r,o,"source"))),o.setTarget(Object.assign(Object.assign({},o.getTarget()),{x:t,y:r})),o.addTo(s,{async:!1,ui:!0}),o.findView(i)}dragMagnet(e,t,r){const i=this.getEventData(e),s=i.edgeView;if(s)s.onMouseMove(e,t,r),this.autoScrollGraph(e.clientX,e.clientY);else{const o=this.graph,a=o.options.magnetThreshold,l=this.getEventTarget(e),c=i.targetMagnet;if(a==="onleave"){if(c===l||c.contains(l))return}else if(o.view.getMouseMovedCount(e)<=a)return;this.startConnectting(e,c,t,r)}}stopMagnetDragging(e,t,r){const s=this.eventData(e).edgeView;s&&(s.onMouseUp(e,t,r),this.graph.model.stopBatch("add-edge"))}notifyUnhandledMouseDown(e,t,r){this.notify("node:unhandled:mousedown",{e,x:t,y:r,view:this,cell:this.cell,node:this.cell})}notifyNodeMove(e,t,r,i,s){let o=[s];const a=this.graph.getPlugin("selection");if(a&&a.isSelectionMovable()){const l=a.getSelectedCells();l.includes(s)&&(o=l.filter(c=>c.isNode()))}o.forEach(l=>{this.notify(e,{e:t,x:r,y:i,cell:l,node:l,view:l.findView(this.graph)})})}getRestrictArea(e){const t=this.graph.options.translating.restrict,r=typeof t=="function"?K(t,this.graph,e):t;return typeof r=="number"?this.graph.transform.getGraphArea().inflate(r):r===!0?this.graph.transform.getGraphArea():r||null}startNodeDragging(e,t,r){const i=this.getDelegatedView();if(i==null||!i.can("nodeMovable"))return this.notifyUnhandledMouseDown(e,t,r);this.setEventData(e,{targetView:i,action:"move"});const s=P.create(i.cell.getPosition());i.setEventData(e,{moving:!1,offset:s.diff(t,r),restrict:this.getRestrictArea(i)})}dragNode(e,t,r){const i=this.cell,s=this.graph,o=s.getGridSize(),a=this.getEventData(e),l=a.offset,c=a.restrict;a.moving||(a.moving=!0,this.addClass("node-moving"),this.notifyNodeMove("node:move",e,t,r,this.cell)),this.autoScrollGraph(e.clientX,e.clientY);const u=xe.snapToGrid(t+l.x,o),h=xe.snapToGrid(r+l.y,o);i.setPosition(u,h,{restrict:c,deep:!0,ui:!0}),s.options.embedding.enabled&&(a.embedding||(this.prepareEmbedding(e),a.embedding=!0),this.processEmbedding(e,a))}stopNodeDragging(e,t,r){const i=this.getEventData(e);i.embedding&&this.finalizeEmbedding(e,i),i.moving&&(this.removeClass("node-moving"),this.notifyNodeMove("node:moved",e,t,r,this.cell)),i.moving=!1,i.embedding=!1}autoScrollGraph(e,t){const r=this.graph.getPlugin("scroller");r&&r.autoScroll(e,t)}}(function(n){n.toStringTag=`X6.${n.name}`;function e(t){if(t==null)return!1;if(t instanceof n)return!0;const r=t[Symbol.toStringTag],i=t;return(r==null||r===n.toStringTag)&&typeof i.isNodeView=="function"&&typeof i.isEdgeView=="function"&&typeof i.confirmUpdate=="function"&&typeof i.update=="function"&&typeof i.findPortElem=="function"&&typeof i.resize=="function"&&typeof i.rotate=="function"&&typeof i.translate=="function"}n.isNodeView=e})(kt||(kt={})),kt.config({isSvgElement:!0,priority:0,bootstrap:["render"],actions:{view:["render"],markup:["render"],attrs:["update"],size:["resize","ports","tools"],angle:["rotate","tools"],position:["translate","tools"],ports:["ports"],tools:["tools"]}}),kt.registry.register("node",kt,!0);class ar extends Xe{constructor(){super(...arguments),this.POINT_ROUNDING=2}get[Symbol.toStringTag](){return ar.toStringTag}getContainerClassName(){return[super.getContainerClassName(),this.prefixClassName("edge")].join(" ")}get sourceBBox(){const e=this.sourceView;if(!e){const r=this.cell.getSource();return new D(r.x,r.y)}const t=this.sourceMagnet;return e.isEdgeElement(t)?new D(this.sourceAnchor.x,this.sourceAnchor.y):e.getBBoxOfElement(t||e.container)}get targetBBox(){const e=this.targetView;if(!e){const r=this.cell.getTarget();return new D(r.x,r.y)}const t=this.targetMagnet;return e.isEdgeElement(t)?new D(this.targetAnchor.x,this.targetAnchor.y):e.getBBoxOfElement(t||e.container)}isEdgeView(){return!0}confirmUpdate(e,t={}){let r=e;if(this.hasAction(r,"source")){if(!this.updateTerminalProperties("source"))return r;r=this.removeAction(r,"source")}if(this.hasAction(r,"target")){if(!this.updateTerminalProperties("target"))return r;r=this.removeAction(r,"target")}return this.hasAction(r,"render")?(this.render(),r=this.removeAction(r,["render","update","labels","tools"]),r):(r=this.handleAction(r,"update",()=>this.update(t)),r=this.handleAction(r,"labels",()=>this.onLabelsChange(t)),r=this.handleAction(r,"tools",()=>this.renderTools()),r)}render(){return this.empty(),this.renderMarkup(),this.labelContainer=null,this.renderLabels(),this.update(),this.renderTools(),this}renderMarkup(){const e=this.cell.markup;if(e){if(typeof e=="string")throw new TypeError("Not support string markup.");return this.renderJSONMarkup(e)}throw new TypeError("Invalid edge markup.")}renderJSONMarkup(e){const t=this.parseJSONMarkup(e,this.container);this.selectors=t.selectors,this.container.append(t.fragment)}customizeLabels(){if(this.labelContainer){const e=this.cell,t=e.labels;for(let r=0,i=t.length;r<i;r+=1){const s=t[r],o=this.labelCache[r],a=this.labelSelectors[r],l=this.graph.options.onEdgeLabelRendered;l&&l({edge:e,label:s,container:o,selectors:a})}}}renderLabels(){const e=this.cell,t=e.getLabels(),r=t.length;let i=this.labelContainer;if(this.labelCache={},this.labelSelectors={},r<=0)return i&&i.parentNode&&i.parentNode.removeChild(i),this;i?this.empty(i):(i=tr("g"),this.addClass(this.prefixClassName("edge-labels"),i),this.labelContainer=i);for(let s=0,o=t.length;s<o;s+=1){const a=t[s],l=this.normalizeLabelMarkup(this.parseLabelMarkup(a.markup));let c,u;if(l)c=l.node,u=l.selectors;else{const f=e.getDefaultLabel(),d=this.normalizeLabelMarkup(this.parseLabelMarkup(f.markup));c=d.node,u=d.selectors}c.setAttribute("data-index",`${s}`),i.appendChild(c);const h=this.rootSelector;if(u[h])throw new Error("Ambiguous label root selector.");u[h]=c,this.labelCache[s]=c,this.labelSelectors[s]=u}return i.parentNode==null&&this.container.appendChild(i),this.updateLabels(),this.customizeLabels(),this}onLabelsChange(e={}){this.shouldRerenderLabels(e)?this.renderLabels():this.updateLabels(),this.updateLabelPositions()}shouldRerenderLabels(e={}){const t=this.cell.previous("labels");if(t==null)return!0;if("propertyPathArray"in e&&"propertyValue"in e){const r=e.propertyPathArray||[],i=r.length;if(i>1){const s=r[1];if(t[s]){if(i===2)return typeof e.propertyValue=="object"&&Ll(e.propertyValue,"markup");if(r[2]!=="markup")return!1}}}return!0}parseLabelMarkup(e){return e?typeof e=="string"?this.parseLabelStringMarkup(e):this.parseJSONMarkup(e):null}parseLabelStringMarkup(e){const t=Z.createVectors(e),r=document.createDocumentFragment();for(let i=0,s=t.length;i<s;i+=1){const o=t[i].node;r.appendChild(o)}return{fragment:r,selectors:{}}}normalizeLabelMarkup(e){if(e==null)return;const t=e.fragment;if(!(t instanceof DocumentFragment)||!t.hasChildNodes())throw new Error("Invalid label markup.");let r;const i=t.childNodes;return i.length>1||i[0].nodeName.toUpperCase()!=="G"?r=Z.create("g").append(t):r=Z.create(i[0]),r.addClass(this.prefixClassName("edge-label")),{node:r.node,selectors:e.selectors}}updateLabels(){if(this.labelContainer){const e=this.cell,t=e.labels,r=this.can("edgeLabelMovable"),i=e.getDefaultLabel();for(let s=0,o=t.length;s<o;s+=1){const a=this.labelCache[s],l=this.labelSelectors[s];a.setAttribute("cursor",r?"move":"default");const c=t[s],u=Re({},i.attrs,c.attrs);this.updateAttrs(a,u,{selectors:l,rootBBox:c.size?D.fromSize(c.size):void 0})}}}renderTools(){const e=this.cell.getTools();return this.addTools(e),this}update(e={}){this.cleanCache(),this.updateConnection(e);const t=this.cell.getAttrs();return t!=null&&this.updateAttrs(this.container,t,{selectors:this.selectors}),this.updateLabelPositions(),this.updateTools(e),this}removeRedundantLinearVertices(e={}){const t=this.cell,r=t.getVertices(),i=[this.sourceAnchor,...r,this.targetAnchor],s=i.length,o=new Ue(i);o.simplify({threshold:.01});const a=o.points.map(c=>c.toJSON()),l=a.length;return s===l?0:(t.setVertices(a.slice(1,l-1),e),s-l)}getTerminalView(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalAnchor(e){switch(e){case"source":return P.create(this.sourceAnchor);case"target":return P.create(this.targetAnchor);default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalConnectionPoint(e){switch(e){case"source":return P.create(this.sourcePoint);case"target":return P.create(this.targetPoint);default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalMagnet(e,t={}){switch(e){case"source":{if(t.raw)return this.sourceMagnet;const r=this.sourceView;return r?this.sourceMagnet||r.container:null}case"target":{if(t.raw)return this.targetMagnet;const r=this.targetView;return r?this.targetMagnet||r.container:null}default:throw new Error(`Unknown terminal type '${e}'`)}}updateConnection(e={}){const t=this.cell;if(e.translateBy&&t.isFragmentDescendantOf(e.translateBy)){const r=e.tx||0,i=e.ty||0;this.routePoints=new Ue(this.routePoints).translate(r,i).points,this.translateConnectionPoints(r,i),this.path.translate(r,i)}else{const r=t.getVertices(),i=this.findAnchors(r);this.sourceAnchor=i.source,this.targetAnchor=i.target,this.routePoints=this.findRoutePoints(r);const s=this.findConnectionPoints(this.routePoints,this.sourceAnchor,this.targetAnchor);this.sourcePoint=s.source,this.targetPoint=s.target;const o=this.findMarkerPoints(this.routePoints,this.sourcePoint,this.targetPoint);this.path=this.findPath(this.routePoints,o.source||this.sourcePoint,o.target||this.targetPoint)}this.cleanCache()}findAnchors(e){const t=this.cell,r=t.source,i=t.target,s=e[0],o=e[e.length-1];return i.priority&&!r.priority?this.findAnchorsOrdered("target",o,"source",s):this.findAnchorsOrdered("source",s,"target",o)}findAnchorsOrdered(e,t,r,i){let s,o;const a=this.cell,l=a[e],c=a[r],u=this.getTerminalView(e),h=this.getTerminalView(r),f=this.getTerminalMagnet(e),d=this.getTerminalMagnet(r);if(u){let g;t?g=P.create(t):h?g=d:g=P.create(c),s=this.getAnchor(l.anchor,u,f,g,e)}else s=P.create(l);if(h){const g=P.create(i||s);o=this.getAnchor(c.anchor,h,d,g,r)}else o=P.isPointLike(c)?P.create(c):new P;return{[e]:s,[r]:o}}getAnchor(e,t,r,i,s){const o=t.isEdgeElement(r),a=this.graph.options.connecting;let l=typeof e=="string"?{name:e}:e;if(!l){const h=o?(s==="source"?a.sourceEdgeAnchor:a.targetEdgeAnchor)||a.edgeAnchor:(s==="source"?a.sourceAnchor:a.targetAnchor)||a.anchor;l=typeof h=="string"?{name:h}:h}if(!l)throw new Error("Anchor should be specified.");let c;const u=l.name;if(o){const h=Os.registry.get(u);if(typeof h!="function")return Os.registry.onNotFound(u);c=K(h,this,t,r,i,l.args||{},s)}else{const h=As.registry.get(u);if(typeof h!="function")return As.registry.onNotFound(u);c=K(h,this,t,r,i,l.args||{},s)}return c?c.round(this.POINT_ROUNDING):new P}findRoutePoints(e=[]){const t=this.graph.options.connecting.router||Br.presets.normal,r=this.cell.getRouter()||t;let i;if(typeof r=="function")i=K(r,this,e,{},this);else{const s=typeof r=="string"?r:r.name,o=typeof r=="string"?{}:r.args||{},a=s?Br.registry.get(s):Br.presets.normal;if(typeof a!="function")return Br.registry.onNotFound(s);i=K(a,this,e,o,this)}return i==null?e.map(s=>P.create(s)):i.map(s=>P.create(s))}findConnectionPoints(e,t,r){const i=this.cell,s=this.graph.options.connecting,o=i.getSource(),a=i.getTarget(),l=this.sourceView,c=this.targetView,u=e[0],h=e[e.length-1];let f;if(l&&!l.isEdgeElement(this.sourceMagnet)){const g=this.sourceMagnet||l.container,p=u||r,b=new V(p,t),m=o.connectionPoint||s.sourceConnectionPoint||s.connectionPoint;f=this.getConnectionPoint(m,l,g,b,"source")}else f=t;let d;if(c&&!c.isEdgeElement(this.targetMagnet)){const g=this.targetMagnet||c.container,p=a.connectionPoint||s.targetConnectionPoint||s.connectionPoint,b=h||t,m=new V(b,r);d=this.getConnectionPoint(p,c,g,m,"target")}else d=r;return{source:f,target:d}}getConnectionPoint(e,t,r,i,s){const o=i.end;if(e==null)return o;const a=typeof e=="string"?e:e.name,l=typeof e=="string"?{}:e.args,c=Ms.registry.get(a);if(typeof c!="function")return Ms.registry.onNotFound(a);const u=K(c,this,i,t,r,l||{},s);return u?u.round(this.POINT_ROUNDING):o}findMarkerPoints(e,t,r){const i=h=>{const f=this.cell.getAttrs(),d=Object.keys(f);for(let g=0,p=d.length;g<p;g+=1){const b=f[d[g]];if(b[`${h}Marker`]||b[`${h}-marker`]){const m=b.strokeWidth||b["stroke-width"];if(m)return parseFloat(m);break}}return null},s=e[0],o=e[e.length-1];let a,l;const c=i("source");c&&(a=t.clone().move(s||r,-c));const u=i("target");return u&&(l=r.clone().move(o||t,-u)),this.sourceMarkerPoint=a||t.clone(),this.targetMarkerPoint=l||r.clone(),{source:a,target:l}}findPath(e,t,r){const i=this.cell.getConnector()||this.graph.options.connecting.connector;let s,o,a;if(typeof i=="string"?s=i:(s=i.name,o=i.args),s){const c=Oi.registry.get(s);if(typeof c!="function")return Oi.registry.onNotFound(s);a=c}else a=Oi.presets.normal;const l=K(a,this,t,r,e,Object.assign(Object.assign({},o),{raw:!0}),this);return typeof l=="string"?X.parse(l):l}translateConnectionPoints(e,t){this.sourcePoint.translate(e,t),this.targetPoint.translate(e,t),this.sourceAnchor.translate(e,t),this.targetAnchor.translate(e,t),this.sourceMarkerPoint.translate(e,t),this.targetMarkerPoint.translate(e,t)}updateLabelPositions(){if(this.labelContainer==null)return this;if(!this.path)return this;const t=this.cell,r=t.getLabels();if(r.length===0)return this;const i=t.getDefaultLabel(),s=this.normalizeLabelPosition(i.position);for(let o=0,a=r.length;o<a;o+=1){const l=r[o],c=this.labelCache[o];if(!c)continue;const u=this.normalizeLabelPosition(l.position),h=Re({},s,u),f=this.getLabelTransformationMatrix(h);c.setAttribute("transform",ms(f))}return this}updateTerminalProperties(e){const t=this.cell,r=this.graph,i=t[e],s=i&&i.cell,o=`${e}View`;if(!s)return this[o]=null,this.updateTerminalMagnet(e),!0;const a=r.getCellById(s);if(!a)throw new Error(`Edge's ${e} node with id "${s}" not exists`);const l=a.findView(r);return l?(this[o]=l,this.updateTerminalMagnet(e),!0):!1}updateTerminalMagnet(e){const t=`${e}Magnet`,r=this.getTerminalView(e);if(r){let i=r.getMagnetFromEdgeTerminal(this.cell[e]);i===r.container&&(i=null),this[t]=i}else this[t]=null}getLabelPositionAngle(e){const t=this.cell.getLabelAt(e);return t&&t.position&&typeof t.position=="object"&&t.position.angle||0}getLabelPositionArgs(e){const t=this.cell.getLabelAt(e);if(t&&t.position&&typeof t.position=="object")return t.position.options}getDefaultLabelPositionArgs(){const e=this.cell.getDefaultLabel();if(e&&e.position&&typeof e.position=="object")return e.position.options}mergeLabelPositionArgs(e,t){return e===null?null:e===void 0?t===null?null:t:Re({},t,e)}getConnection(){return this.path!=null?this.path.clone():null}getConnectionPathData(){if(this.path==null)return"";const e=this.cache.pathCache;return Ll(e,"data")||(e.data=this.path.serialize()),e.data||""}getConnectionSubdivisions(){if(this.path==null)return null;const e=this.cache.pathCache;return Ll(e,"segmentSubdivisions")||(e.segmentSubdivisions=this.path.getSegmentSubdivisions()),e.segmentSubdivisions}getConnectionLength(){if(this.path==null)return 0;const e=this.cache.pathCache;return Ll(e,"length")||(e.length=this.path.length({segmentSubdivisions:this.getConnectionSubdivisions()})),e.length}getPointAtLength(e){return this.path==null?null:this.path.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getPointAtRatio(e){return this.path==null?null:(er(e)&&(e=parseFloat(e)/100),this.path.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}))}getTangentAtLength(e){return this.path==null?null:this.path.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getTangentAtRatio(e){return this.path==null?null:this.path.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPoint(e){return this.path==null?null:this.path.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointLength(e){return this.path==null?null:this.path.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointRatio(e){return this.path==null?null:this.path.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getLabelPosition(e,t,r,i){const s={distance:0};let o=0,a;typeof r=="number"?(o=r,a=i):a=r,a!=null&&(s.options=a);const l=a&&a.absoluteOffset,c=!(a&&a.absoluteDistance),u=a&&a.absoluteDistance&&a.reverseDistance,h=this.path,f={segmentSubdivisions:this.getConnectionSubdivisions()},d=new P(e,t),g=h.closestPointT(d,f),p=this.getConnectionLength()||0;let b=h.lengthAtT(g,f);c&&(b=p>0?b/p:0),u&&(b=-1*(p-b)||1),s.distance=b;let m;l||(m=h.tangentAtT(g));let y;if(m)y=m.pointOffset(d);else{const v=h.pointAtT(g),w=d.diff(v);y={x:w.x,y:w.y}}return s.offset=y,s.angle=o,s}normalizeLabelPosition(e){return typeof e=="number"?{distance:e}:e}getLabelTransformationMatrix(e){const t=this.normalizeLabelPosition(e),r=t.options||{},i=t.angle||0,s=t.distance,o=s>0&&s<=1;let a=0;const l={x:0,y:0},c=t.offset;c&&(typeof c=="number"?a=c:(c.x!=null&&(l.x=c.x),c.y!=null&&(l.y=c.y)));const u=l.x!==0||l.y!==0||a===0,h=r.keepGradient,f=r.ensureLegibility,d=this.path,g={segmentSubdivisions:this.getConnectionSubdivisions()},p=o?s*this.getConnectionLength():s,b=d.tangentAtLength(p,g);let m,y=i;if(b){if(u)m=b.start,m.translate(l);else{const v=b.clone();v.rotate(-90,b.start),v.setLength(a),m=v.end}h&&(y=b.angle()+i,f&&(y=we.normalize((y+90)%180-90)))}else m=d.start,u&&m.translate(l);return ut().translate(m.x,m.y).rotate(y)}getVertexIndex(e,t){const i=this.cell.getVertices(),s=this.getClosestPointLength(new P(e,t));let o=0;if(s!=null)for(const a=i.length;o<a;o+=1){const l=i[o],c=this.getClosestPointLength(l);if(c!=null&&s<c)break}return o}getEventArgs(e,t,r){const i=this,s=i.cell,o=s;return t==null||r==null?{e,view:i,edge:s,cell:o}:{e,x:t,y:r,view:i,edge:s,cell:o}}notifyUnhandledMouseDown(e,t,r){this.notify("edge:unhandled:mousedown",{e,x:t,y:r,view:this,cell:this.cell,edge:this.cell})}notifyMouseDown(e,t,r){super.onMouseDown(e,t,r),this.notify("edge:mousedown",this.getEventArgs(e,t,r))}notifyMouseMove(e,t,r){super.onMouseMove(e,t,r),this.notify("edge:mousemove",this.getEventArgs(e,t,r))}notifyMouseUp(e,t,r){super.onMouseUp(e,t,r),this.notify("edge:mouseup",this.getEventArgs(e,t,r))}onClick(e,t,r){super.onClick(e,t,r),this.notify("edge:click",this.getEventArgs(e,t,r))}onDblClick(e,t,r){super.onDblClick(e,t,r),this.notify("edge:dblclick",this.getEventArgs(e,t,r))}onContextMenu(e,t,r){super.onContextMenu(e,t,r),this.notify("edge:contextmenu",this.getEventArgs(e,t,r))}onMouseDown(e,t,r){this.notifyMouseDown(e,t,r),this.startEdgeDragging(e,t,r)}onMouseMove(e,t,r){const i=this.getEventData(e);switch(i.action){case"drag-label":{this.dragLabel(e,t,r);break}case"drag-arrowhead":{this.dragArrowhead(e,t,r);break}case"drag-edge":{this.dragEdge(e,t,r);break}}return this.notifyMouseMove(e,t,r),i}onMouseUp(e,t,r){const i=this.getEventData(e);switch(i.action){case"drag-label":{this.stopLabelDragging(e,t,r);break}case"drag-arrowhead":{this.stopArrowheadDragging(e,t,r);break}case"drag-edge":{this.stopEdgeDragging(e,t,r);break}}return this.notifyMouseUp(e,t,r),this.checkMouseleave(e),i}onMouseOver(e){super.onMouseOver(e),this.notify("edge:mouseover",this.getEventArgs(e))}onMouseOut(e){super.onMouseOut(e),this.notify("edge:mouseout",this.getEventArgs(e))}onMouseEnter(e){super.onMouseEnter(e),this.notify("edge:mouseenter",this.getEventArgs(e))}onMouseLeave(e){super.onMouseLeave(e),this.notify("edge:mouseleave",this.getEventArgs(e))}onMouseWheel(e,t,r,i){super.onMouseWheel(e,t,r,i),this.notify("edge:mousewheel",Object.assign({delta:i},this.getEventArgs(e,t,r)))}onCustomEvent(e,t,r,i){if(p1(e.target,"edge-tool",this.container)){if(e.stopPropagation(),this.can("useEdgeTools")){if(t==="edge:remove"){this.cell.remove({ui:!0});return}this.notify("edge:customevent",Object.assign({name:t},this.getEventArgs(e,r,i)))}this.notifyMouseDown(e,r,i)}else this.notify("edge:customevent",Object.assign({name:t},this.getEventArgs(e,r,i))),super.onCustomEvent(e,t,r,i)}onLabelMouseDown(e,t,r){this.notifyMouseDown(e,t,r),this.startLabelDragging(e,t,r),this.getEventData(e).stopPropagation&&e.stopPropagation()}startEdgeDragging(e,t,r){if(!this.can("edgeMovable")){this.notifyUnhandledMouseDown(e,t,r);return}this.setEventData(e,{x:t,y:r,moving:!1,action:"drag-edge"})}dragEdge(e,t,r){const i=this.getEventData(e);i.moving||(i.moving=!0,this.addClass("edge-moving"),this.notify("edge:move",{e,x:t,y:r,view:this,cell:this.cell,edge:this.cell})),this.cell.translate(t-i.x,r-i.y,{ui:!0}),this.setEventData(e,{x:t,y:r}),this.notify("edge:moving",{e,x:t,y:r,view:this,cell:this.cell,edge:this.cell})}stopEdgeDragging(e,t,r){const i=this.getEventData(e);i.moving&&(this.removeClass("edge-moving"),this.notify("edge:moved",{e,x:t,y:r,view:this,cell:this.cell,edge:this.cell})),i.moving=!1}prepareArrowheadDragging(e,t){const r=this.getTerminalMagnet(e),i={action:"drag-arrowhead",x:t.x,y:t.y,isNewEdge:t.isNewEdge===!0,terminalType:e,initialMagnet:r,initialTerminal:_h(this.cell[e]),fallbackAction:t.fallbackAction||"revert",getValidateConnectionArgs:this.createValidateConnectionArgs(e),options:t.options};return this.beforeArrowheadDragging(i),i}createValidateConnectionArgs(e){const t=[];t[4]=e,t[5]=this;let r,i=0,s=0;e==="source"?(i=2,r="target"):(s=2,r="source");const o=this.cell[r],a=o.cell;if(a){let l;const c=t[i]=this.graph.findViewByCell(a);c&&(l=c.getMagnetFromEdgeTerminal(o),l===c.container&&(l=void 0)),t[i+1]=l}return(l,c)=>(t[s]=l,t[s+1]=l.container===c?void 0:c,t)}beforeArrowheadDragging(e){e.zIndex=this.cell.zIndex,this.cell.toFront();const t=this.container.style;e.pointerEvents=t.pointerEvents,t.pointerEvents="none",this.graph.options.connecting.highlight&&this.highlightAvailableMagnets(e)}afterArrowheadDragging(e){e.zIndex!=null&&(this.cell.setZIndex(e.zIndex,{ui:!0}),e.zIndex=null);const t=this.container;t.style.pointerEvents=e.pointerEvents||"",this.graph.options.connecting.highlight&&this.unhighlightAvailableMagnets(e)}validateConnection(e,t,r,i,s,o,a){const l=this.graph.options.connecting,c=l.allowLoop,u=l.allowNode,h=l.allowEdge,f=l.allowPort,d=l.allowMulti,g=l.validateConnection,p=o?o.cell:null,b=s==="target"?r:e,m=s==="target"?i:t;let y=!0;const v=w=>{const x=s==="source"?a?a.port:null:p?p.getSourcePortId():null,C=s==="target"?a?a.port:null:p?p.getTargetPortId():null;return K(w,this.graph,{edge:p,edgeView:o,sourceView:e,targetView:r,sourcePort:x,targetPort:C,sourceMagnet:t,targetMagnet:i,sourceCell:e?e.cell:null,targetCell:r?r.cell:null,type:s})};if(c!=null&&(typeof c=="boolean"?!c&&e===r&&(y=!1):y=v(c)),y&&f!=null&&(typeof f=="boolean"?!f&&m&&(y=!1):y=v(f)),y&&h!=null&&(typeof h=="boolean"?!h&&ar.isEdgeView(b)&&(y=!1):y=v(h)),y&&u!=null&&m==null&&(typeof u=="boolean"?!u&&kt.isNodeView(b)&&(y=!1):y=v(u)),y&&d!=null&&o){const w=o.cell,x=s==="source"?a:w.getSource(),C=s==="target"?a:w.getTarget(),S=a?this.graph.getCellById(a.cell):null;if(x&&C&&x.cell&&C.cell&&S)if(typeof d=="function")y=v(d);else{const E=this.graph.model.getConnectedEdges(S,{outgoing:s==="source",incoming:s==="target"});E.length&&(d==="withPort"?E.some(O=>{const T=O.getSource(),k=O.getTarget();return T&&k&&T.cell===x.cell&&k.cell===C.cell&&T.port!=null&&T.port===x.port&&k.port!=null&&k.port===C.port})&&(y=!1):d||E.some(O=>{const T=O.getSource(),k=O.getTarget();return T&&k&&T.cell===x.cell&&k.cell===C.cell})&&(y=!1))}}return y&&g!=null&&(y=v(g)),y}allowConnectToBlank(e){const t=this.graph,i=t.options.connecting.allowBlank;if(typeof i!="function")return!!i;const s=t.findViewByCell(e),o=e.getSourceCell(),a=e.getTargetCell(),l=t.findViewByCell(o),c=t.findViewByCell(a);return K(i,t,{edge:e,edgeView:s,sourceCell:o,targetCell:a,sourceView:l,targetView:c,sourcePort:e.getSourcePortId(),targetPort:e.getTargetPortId(),sourceMagnet:s.sourceMagnet,targetMagnet:s.targetMagnet})}validateEdge(e,t,r){const i=this.graph;if(!this.allowConnectToBlank(e)){const o=e.getSourceCellId(),a=e.getTargetCellId();if(!(o&&a))return!1}const s=i.options.connecting.validateEdge;return s?K(s,i,{edge:e,type:t,previous:r}):!0}arrowheadDragging(e,t,r,i){i.x=t,i.y=r,i.currentTarget!==e&&(i.currentMagnet&&i.currentView&&i.currentView.unhighlight(i.currentMagnet,{type:"magnetAdsorbed"}),i.currentView=this.graph.findViewByElem(e),i.currentView?(i.currentMagnet=i.currentView.findMagnet(e),i.currentMagnet&&this.validateConnection(...i.getValidateConnectionArgs(i.currentView,i.currentMagnet),i.currentView.getEdgeTerminal(i.currentMagnet,t,r,this.cell,i.terminalType))?i.currentView.highlight(i.currentMagnet,{type:"magnetAdsorbed"}):i.currentMagnet=null):i.currentMagnet=null),i.currentTarget=e,this.cell.prop(i.terminalType,{x:t,y:r},Object.assign(Object.assign({},i.options),{ui:!0}))}arrowheadDragged(e,t,r){const i=e.currentView,s=e.currentMagnet;if(!s||!i)return;i.unhighlight(s,{type:"magnetAdsorbed"});const o=e.terminalType,a=i.getEdgeTerminal(s,t,r,this.cell,o);this.cell.setTerminal(o,a,{ui:!0})}snapArrowhead(e,t,r){const i=this.graph,{snap:s,allowEdge:o}=i.options.connecting,a=typeof s=="object"&&s.radius||50,l=i.renderer.findViewsInArea({x:e-a,y:t-a,width:2*a,height:2*a},{nodeOnly:!0});if(o){const v=i.renderer.findEdgeViewsFromPoint({x:e,y:t},a).filter(w=>w!==this);l.push(...v)}const c=r.closestView||null,u=r.closestMagnet||null;r.closestView=null,r.closestMagnet=null;let h,f=Number.MAX_SAFE_INTEGER;const d=new P(e,t);l.forEach(v=>{if(v.container.getAttribute("magnet")!=="false"){if(v.isNodeView())h=v.cell.getBBox().getCenter().distance(d);else if(v.isEdgeView()){const w=v.getClosestPoint(d);w?h=w.distance(d):h=Number.MAX_SAFE_INTEGER}h<a&&h<f&&(u===v.container||this.validateConnection(...r.getValidateConnectionArgs(v,null),v.getEdgeTerminal(v.container,e,t,this.cell,r.terminalType)))&&(f=h,r.closestView=v,r.closestMagnet=v.container)}v.container.querySelectorAll("[magnet]").forEach(w=>{if(w.getAttribute("magnet")!=="false"){const x=v.getBBoxOfElement(w);h=d.distance(x.getCenter()),h<a&&h<f&&(u===w||this.validateConnection(...r.getValidateConnectionArgs(v,w),v.getEdgeTerminal(w,e,t,this.cell,r.terminalType)))&&(f=h,r.closestView=v,r.closestMagnet=w)}})});let g;const p=r.terminalType,b=r.closestView,m=r.closestMagnet,y=u!==m;if(c&&y&&c.unhighlight(u,{type:"magnetAdsorbed"}),b){if(!y)return;b.highlight(m,{type:"magnetAdsorbed"}),g=b.getEdgeTerminal(m,e,t,this.cell,p)}else g={x:e,y:t};this.cell.setTerminal(p,g,{},Object.assign(Object.assign({},r.options),{ui:!0}))}snapArrowheadEnd(e){const t=e.closestView,r=e.closestMagnet;t&&r&&(t.unhighlight(r,{type:"magnetAdsorbed"}),e.currentMagnet=t.findMagnet(r)),e.closestView=null,e.closestMagnet=null}finishEmbedding(e){this.graph.options.embedding.enabled&&this.cell.updateParent()&&(e.zIndex=null)}fallbackConnection(e){switch(e.fallbackAction){case"remove":this.cell.remove({ui:!0});break;case"revert":default:this.cell.prop(e.terminalType,e.initialTerminal,{ui:!0});break}}notifyConnectionEvent(e,t){const r=e.terminalType,i=e.initialTerminal,s=this.cell[r];if(s&&!qe.equalTerminals(i,s)){const a=this.graph,l=i,c=l.cell?a.getCellById(l.cell):null,u=l.port,h=c?a.findViewByCell(c):null,f=c||e.isNewEdge?null:P.create(i).toJSON(),d=s,g=d.cell?a.getCellById(d.cell):null,p=d.port,b=g?a.findViewByCell(g):null,m=g?null:P.create(s).toJSON();this.notify("edge:connected",{e:t,previousCell:c,previousPort:u,previousView:h,previousPoint:f,currentCell:g,currentView:b,currentPort:p,currentPoint:m,previousMagnet:e.initialMagnet,currentMagnet:e.currentMagnet,edge:this.cell,view:this,type:r,isNew:e.isNewEdge})}}highlightAvailableMagnets(e){const t=this.graph,r=t.model.getCells();e.marked={};for(let i=0,s=r.length;i<s;i+=1){const o=t.findViewByCell(r[i]);if(!o||o.cell.id===this.cell.id)continue;const a=Array.prototype.slice.call(o.container.querySelectorAll("[magnet]"));o.container.getAttribute("magnet")!=="false"&&a.push(o.container);const l=a.filter(c=>this.validateConnection(...e.getValidateConnectionArgs(o,c),o.getEdgeTerminal(c,e.x,e.y,this.cell,e.terminalType)));if(l.length>0){for(let c=0,u=l.length;c<u;c+=1)o.highlight(l[c],{type:"magnetAvailable"});o.highlight(null,{type:"nodeAvailable"}),e.marked[o.cell.id]=l}}}unhighlightAvailableMagnets(e){const t=e.marked||{};Object.keys(t).forEach(r=>{const i=this.graph.findViewByCell(r);i&&(t[r].forEach(o=>{i.unhighlight(o,{type:"magnetAvailable"})}),i.unhighlight(null,{type:"nodeAvailable"}))}),e.marked=null}startArrowheadDragging(e,t,r){if(!this.can("arrowheadMovable")){this.notifyUnhandledMouseDown(e,t,r);return}const s=e.target.getAttribute("data-terminal"),o=this.prepareArrowheadDragging(s,{x:t,y:r});this.setEventData(e,o)}dragArrowhead(e,t,r){const i=this.getEventData(e);this.graph.options.connecting.snap?this.snapArrowhead(t,r,i):this.arrowheadDragging(this.getEventTarget(e),t,r,i)}stopArrowheadDragging(e,t,r){const i=this.graph,s=this.getEventData(e);i.options.connecting.snap?this.snapArrowheadEnd(s):this.arrowheadDragged(s,t,r),this.validateEdge(this.cell,s.terminalType,s.initialTerminal)?(this.finishEmbedding(s),this.notifyConnectionEvent(s,e)):this.fallbackConnection(s),this.afterArrowheadDragging(s)}startLabelDragging(e,t,r){if(this.can("edgeLabelMovable")){const i=e.currentTarget,s=parseInt(i.getAttribute("data-index"),10),o=this.getLabelPositionAngle(s),a=this.getLabelPositionArgs(s),l=this.getDefaultLabelPositionArgs(),c=this.mergeLabelPositionArgs(a,l);this.setEventData(e,{index:s,positionAngle:o,positionArgs:c,stopPropagation:!0,action:"drag-label"})}else this.setEventData(e,{stopPropagation:!0});this.graph.view.delegateDragEvents(e,this)}dragLabel(e,t,r){const i=this.getEventData(e),s=this.cell.getLabelAt(i.index),o=Re({},s,{position:this.getLabelPosition(t,r,i.positionAngle,i.positionArgs)});this.cell.setLabelAt(i.index,o)}stopLabelDragging(e,t,r){}}(function(n){n.toStringTag=`X6.${n.name}`;function e(t){if(t==null)return!1;if(t instanceof n)return!0;const r=t[Symbol.toStringTag],i=t;return(r==null||r===n.toStringTag)&&typeof i.isNodeView=="function"&&typeof i.isEdgeView=="function"&&typeof i.confirmUpdate=="function"&&typeof i.update=="function"&&typeof i.getConnection=="function"}n.isEdgeView=e})(ar||(ar={})),ar.config({isSvgElement:!0,priority:1,bootstrap:["render","source","target"],actions:{view:["render"],markup:["render"],attrs:["update"],source:["source","update"],target:["target","update"],router:["update"],connector:["update"],labels:["labels"],defaultLabel:["labels"],tools:["tools"],vertices:["vertices","update"]}}),ar.registry.register("edge",ar,!0);var BG=function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};class xn extends ge{get options(){return this.graph.options}constructor(e){super(),this.graph=e;const{selectors:t,fragment:r}=Ee.parseJSONMarkup(xn.markup);this.background=t.background,this.grid=t.grid,this.svg=t.svg,this.defs=t.defs,this.viewport=t.viewport,this.primer=t.primer,this.stage=t.stage,this.decorator=t.decorator,this.overlay=t.overlay,this.container=this.options.container,this.restore=xn.snapshoot(this.container),J(this.container,this.prefixClassName("graph")),zn(this.container,r),this.delegateEvents()}delegateEvents(){const e=this.constructor;return super.delegateEvents(e.events),this}guard(e,t){return e.type==="mousedown"&&e.button===2||this.options.guard&&this.options.guard(e,t)?!0:e.data&&e.data.guarded!==void 0?e.data.guarded:!(t&&t.cell&&le.isCell(t.cell)||this.svg===e.target||this.container===e.target||this.svg.contains(e.target))}findView(e){return this.graph.findViewByElem(e)}onDblClick(e){this.options.preventDefaultDblClick&&e.preventDefault();const t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;const i=this.graph.snapToGrid(t.clientX,t.clientY);r?r.onDblClick(t,i.x,i.y):this.graph.trigger("blank:dblclick",{e:t,x:i.x,y:i.y})}onClick(e){if(this.getMouseMovedCount(e)<=this.options.clickThreshold){const t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;const i=this.graph.snapToGrid(t.clientX,t.clientY);r?r.onClick(t,i.x,i.y):this.graph.trigger("blank:click",{e:t,x:i.x,y:i.y})}}isPreventDefaultContextMenu(e){let t=this.options.preventDefaultContextMenu;return typeof t=="function"&&(t=K(t,this.graph,{view:e})),t}onContextMenu(e){const t=this.normalizeEvent(e),r=this.findView(t.target);if(this.isPreventDefaultContextMenu(r)&&e.preventDefault(),this.guard(t,r))return;const i=this.graph.snapToGrid(t.clientX,t.clientY);r?r.onContextMenu(t,i.x,i.y):this.graph.trigger("blank:contextmenu",{e:t,x:i.x,y:i.y})}delegateDragEvents(e,t){e.data==null&&(e.data={}),this.setEventData(e,{currentView:t||null,mouseMovedCount:0,startPosition:{x:e.clientX,y:e.clientY}});const r=this.constructor;this.delegateDocumentEvents(r.documentEvents,e.data),this.undelegateEvents()}getMouseMovedCount(e){return this.getEventData(e).mouseMovedCount||0}onMouseDown(e){const t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;this.options.preventDefaultMouseDown&&e.preventDefault();const i=this.graph.snapToGrid(t.clientX,t.clientY);r?r.onMouseDown(t,i.x,i.y):(this.options.preventDefaultBlankAction&&["touchstart"].includes(t.type)&&e.preventDefault(),this.graph.trigger("blank:mousedown",{e:t,x:i.x,y:i.y})),this.delegateDragEvents(t,r)}onMouseMove(e){const t=this.getEventData(e),r=t.startPosition;if(r&&r.x===e.clientX&&r.y===e.clientY||(t.mouseMovedCount==null&&(t.mouseMovedCount=0),t.mouseMovedCount+=1,t.mouseMovedCount<=this.options.moveThreshold))return;const s=this.normalizeEvent(e),o=this.graph.snapToGrid(s.clientX,s.clientY),a=t.currentView;a?a.onMouseMove(s,o.x,o.y):this.graph.trigger("blank:mousemove",{e:s,x:o.x,y:o.y}),this.setEventData(s,t)}onMouseUp(e){this.undelegateDocumentEvents();const t=this.normalizeEvent(e),r=this.graph.snapToGrid(t.clientX,t.clientY),s=this.getEventData(e).currentView;if(s?s.onMouseUp(t,r.x,r.y):this.graph.trigger("blank:mouseup",{e:t,x:r.x,y:r.y}),!e.isPropagationStopped()){const o=new Fn(e,{type:"click",data:e.data});this.onClick(o)}e.stopImmediatePropagation(),this.delegateEvents()}onMouseOver(e){const t=this.normalizeEvent(e),r=this.findView(t.target);if(!this.guard(t,r))if(r)r.onMouseOver(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseover",{e:t})}}onMouseOut(e){const t=this.normalizeEvent(e),r=this.findView(t.target);if(!this.guard(t,r))if(r)r.onMouseOut(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseout",{e:t})}}onMouseEnter(e){const t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;const i=this.graph.findViewByElem(t.relatedTarget);if(r){if(i===r)return;r.onMouseEnter(t)}else{if(i)return;this.graph.trigger("graph:mouseenter",{e:t})}}onMouseLeave(e){const t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;const i=this.graph.findViewByElem(t.relatedTarget);if(r){if(i===r)return;r.onMouseLeave(t)}else{if(i)return;this.graph.trigger("graph:mouseleave",{e:t})}}onMouseWheel(e){const t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;const i=t.originalEvent,s=this.graph.snapToGrid(i.clientX,i.clientY),o=Math.max(-1,Math.min(1,i.wheelDelta||-i.detail));r?r.onMouseWheel(t,s.x,s.y,o):this.graph.trigger("blank:mousewheel",{e:t,delta:o,x:s.x,y:s.y})}onCustomEvent(e){const t=e.currentTarget,r=t.getAttribute("event")||t.getAttribute("data-event");if(r){const i=this.findView(t);if(i){const s=this.normalizeEvent(e);if(this.guard(s,i))return;const o=this.graph.snapToGrid(s.clientX,s.clientY);i.onCustomEvent(s,r,o.x,o.y)}}}handleMagnetEvent(e,t){const r=e.currentTarget,i=r.getAttribute("magnet");if(i&&i.toLowerCase()!=="false"){const s=this.findView(r);if(s){const o=this.normalizeEvent(e);if(this.guard(o,s))return;const a=this.graph.snapToGrid(o.clientX,o.clientY);K(t,this.graph,s,o,r,a.x,a.y)}}}onMagnetMouseDown(e){this.handleMagnetEvent(e,(t,r,i,s,o)=>{t.onMagnetMouseDown(r,i,s,o)})}onMagnetDblClick(e){this.handleMagnetEvent(e,(t,r,i,s,o)=>{t.onMagnetDblClick(r,i,s,o)})}onMagnetContextMenu(e){const t=this.findView(e.target);this.isPreventDefaultContextMenu(t)&&e.preventDefault(),this.handleMagnetEvent(e,(r,i,s,o,a)=>{r.onMagnetContextMenu(i,s,o,a)})}onLabelMouseDown(e){const t=e.currentTarget,r=this.findView(t);if(r){const i=this.normalizeEvent(e);if(this.guard(i,r))return;const s=this.graph.snapToGrid(i.clientX,i.clientY);r.onLabelMouseDown(i,s.x,s.y)}}onImageDragStart(){return!1}dispose(){this.undelegateEvents(),this.undelegateDocumentEvents(),this.restore(),this.restore=()=>{}}}BG([ge.dispose()],xn.prototype,"dispose",null),function(n){const e=`${rn.prefixCls}-graph`;n.markup=[{ns:ct.xhtml,tagName:"div",selector:"background",className:`${e}-background`},{ns:ct.xhtml,tagName:"div",selector:"grid",className:`${e}-grid`},{ns:ct.svg,tagName:"svg",selector:"svg",className:`${e}-svg`,attrs:{width:"100%",height:"100%","xmlns:xlink":ct.xlink},children:[{tagName:"defs",selector:"defs"},{tagName:"g",selector:"viewport",className:`${e}-svg-viewport`,children:[{tagName:"g",selector:"primer",className:`${e}-svg-primer`},{tagName:"g",selector:"stage",className:`${e}-svg-stage`},{tagName:"g",selector:"decorator",className:`${e}-svg-decorator`},{tagName:"g",selector:"overlay",className:`${e}-svg-overlay`}]}]}];function t(r){const i=r.cloneNode();return r.childNodes.forEach(s=>i.appendChild(s)),()=>{for($o(r);r.attributes.length>0;)r.removeAttribute(r.attributes[0].name);for(let s=0,o=i.attributes.length;s<o;s+=1){const a=i.attributes[s];r.setAttribute(a.name,a.value)}i.childNodes.forEach(s=>r.appendChild(s))}}n.snapshoot=t}(xn||(xn={})),function(n){const e=rn.prefixCls;n.events={dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onMouseDown",mousedown:"onMouseDown",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousewheel:"onMouseWheel",DOMMouseScroll:"onMouseWheel",[`mouseenter  .${e}-cell`]:"onMouseEnter",[`mouseleave  .${e}-cell`]:"onMouseLeave",[`mouseenter  .${e}-cell-tools`]:"onMouseEnter",[`mouseleave  .${e}-cell-tools`]:"onMouseLeave",[`mousedown   .${e}-cell [event]`]:"onCustomEvent",[`touchstart  .${e}-cell [event]`]:"onCustomEvent",[`mousedown   .${e}-cell [data-event]`]:"onCustomEvent",[`touchstart  .${e}-cell [data-event]`]:"onCustomEvent",[`dblclick    .${e}-cell [magnet]`]:"onMagnetDblClick",[`contextmenu .${e}-cell [magnet]`]:"onMagnetContextMenu",[`mousedown   .${e}-cell [magnet]`]:"onMagnetMouseDown",[`touchstart  .${e}-cell [magnet]`]:"onMagnetMouseDown",[`dblclick    .${e}-cell [data-magnet]`]:"onMagnetDblClick",[`contextmenu .${e}-cell [data-magnet]`]:"onMagnetContextMenu",[`mousedown   .${e}-cell [data-magnet]`]:"onMagnetMouseDown",[`touchstart  .${e}-cell [data-magnet]`]:"onMagnetMouseDown",[`dragstart   .${e}-cell image`]:"onImageDragStart",[`mousedown   .${e}-edge .${e}-edge-label`]:"onLabelMouseDown",[`touchstart  .${e}-edge .${e}-edge-label`]:"onLabelMouseDown"},n.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}}(xn||(xn={}));const zG=`.x6-graph {
  position: relative;
  overflow: hidden;
  outline: none;
  touch-action: none;
}
.x6-graph-background,
.x6-graph-grid,
.x6-graph-svg {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-background-stage,
.x6-graph-grid-stage,
.x6-graph-svg-stage {
  user-select: none;
}
.x6-graph.x6-graph-pannable {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}
.x6-graph.x6-graph-panning {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
  user-select: none;
}
.x6-node {
  cursor: move;
  /* stylelint-disable-next-line */
}
.x6-node.x6-node-immovable {
  cursor: default;
}
.x6-node * {
  -webkit-user-drag: none;
}
.x6-node .scalable * {
  vector-effect: non-scaling-stroke;
}
.x6-node [magnet='true'] {
  cursor: crosshair;
  transition: opacity 0.3s;
}
.x6-node [magnet='true']:hover {
  opacity: 0.7;
}
.x6-node foreignObject {
  display: block;
  overflow: visible;
  background-color: transparent;
}
.x6-node foreignObject > body {
  position: static;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: visible;
  background-color: transparent;
}
.x6-edge .source-marker,
.x6-edge .target-marker {
  vector-effect: non-scaling-stroke;
}
.x6-edge .connection {
  stroke-linejoin: round;
  fill: none;
}
.x6-edge .connection-wrap {
  cursor: move;
  opacity: 0;
  fill: none;
  stroke: #000;
  stroke-width: 15;
  stroke-linecap: round;
  stroke-linejoin: round;
}
.x6-edge .connection-wrap:hover {
  opacity: 0.4;
  stroke-opacity: 0.4;
}
.x6-edge .vertices {
  cursor: move;
  opacity: 0;
}
.x6-edge .vertices .vertex {
  fill: #1abc9c;
}
.x6-edge .vertices .vertex :hover {
  fill: #34495e;
  stroke: none;
}
.x6-edge .vertices .vertex-remove {
  cursor: pointer;
  fill: #fff;
}
.x6-edge .vertices .vertex-remove-area {
  cursor: pointer;
  opacity: 0.1;
}
.x6-edge .vertices .vertex-group:hover .vertex-remove-area {
  opacity: 1;
}
.x6-edge .arrowheads {
  cursor: move;
  opacity: 0;
}
.x6-edge .arrowheads .arrowhead {
  fill: #1abc9c;
}
.x6-edge .arrowheads .arrowhead :hover {
  fill: #f39c12;
  stroke: none;
}
.x6-edge .tools {
  cursor: pointer;
  opacity: 0;
}
.x6-edge .tools .tool-options {
  display: none;
}
.x6-edge .tools .tool-remove circle {
  fill: #f00;
}
.x6-edge .tools .tool-remove path {
  fill: #fff;
}
.x6-edge:hover .vertices,
.x6-edge:hover .arrowheads,
.x6-edge:hover .tools {
  opacity: 1;
}
.x6-highlight-opacity {
  opacity: 0.3;
}
.x6-cell-tool-editor {
  position: relative;
  display: inline-block;
  min-height: 1em;
  margin: 0;
  padding: 0;
  line-height: 1;
  white-space: normal;
  text-align: center;
  vertical-align: top;
  overflow-wrap: normal;
  outline: none;
  transform-origin: 0 0;
  -webkit-user-drag: none;
}
.x6-edge-tool-editor {
  border: 1px solid #275fc5;
  border-radius: 2px;
}
`;class ft extends pn{get options(){return this.graph.options}get model(){return this.graph.model}get view(){return this.graph.view}constructor(e){super(),this.graph=e,this.init()}init(){}}var FG=function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};class bf extends ft{init(){Ho("core",zG)}dispose(){Uo("core")}}FG([bf.dispose()],bf.prototype,"dispose",null);var VG=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},na;(function(n){function e(t){const{grid:r,panning:i,mousewheel:s,embedding:o}=t,a=VG(t,["grid","panning","mousewheel","embedding"]),l=t.container;if(l!=null)a.width==null&&(a.width=l.clientWidth),a.height==null&&(a.height=l.clientHeight);else throw new Error("Ensure the container of the graph is specified and valid");const c=Re({},n.defaults,a),u={size:10,visible:!1};return typeof r=="number"?c.grid={size:r,visible:!1}:typeof r=="boolean"?c.grid=Object.assign(Object.assign({},u),{visible:r}):c.grid=Object.assign(Object.assign({},u),r),["panning","mousewheel","embedding"].forEach(f=>{const d=t[f];typeof d=="boolean"?c[f].enabled=d:c[f]=Object.assign(Object.assign({},c[f]),d)}),c}n.get=e})(na||(na={})),function(n){n.defaults={x:0,y:0,scaling:{min:.01,max:16},grid:{size:10,visible:!1},background:!1,panning:{enabled:!1,eventTypes:["leftMouseDown"]},mousewheel:{enabled:!1,factor:1.2,zoomAtMousePosition:!0},highlighting:{default:{name:"stroke",args:{padding:3}},nodeAvailable:{name:"className",args:{className:rn.prefix("available-node")}},magnetAvailable:{name:"className",args:{className:rn.prefix("available-magnet")}}},connecting:{snap:!1,allowLoop:!0,allowNode:!0,allowEdge:!1,allowPort:!0,allowBlank:!0,allowMulti:!0,highlight:!1,anchor:"center",edgeAnchor:"ratio",connectionPoint:"boundary",router:"normal",connector:"normal",validateConnection({type:e,sourceView:t,targetView:r}){return(e==="target"?r:t)!=null},createEdge(){return new LG}},translating:{restrict:!1},embedding:{enabled:!1,findParent:"bbox",frontOnly:!0,validate:()=>!0},moveThreshold:0,clickThreshold:0,magnetThreshold:0,preventDefaultDblClick:!0,preventDefaultMouseDown:!1,preventDefaultContextMenu:!0,preventDefaultBlankAction:!0,interacting:{edgeLabelMovable:!1},async:!0,virtual:!1,guard:()=>!1}}(na||(na={}));var qG=function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},GG=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class wf extends ft{get elem(){return this.view.grid}get grid(){return this.options.grid}init(){this.startListening(),this.draw(this.grid)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}setVisible(e){this.grid.visible!==e&&(this.grid.visible=e,this.update())}getGridSize(){return this.grid.size}setGridSize(e){this.grid.size=Math.max(e,1),this.update()}show(){this.setVisible(!0),this.update()}hide(){this.setVisible(!1),this.update()}clear(){this.elem.style.backgroundImage=""}draw(e){this.clear(),this.instance=null,Object.assign(this.grid,e),this.patterns=this.resolveGrid(e),this.update()}update(e={}){const t=this.grid.size;if(t<=1||!this.grid.visible)return this.clear();const r=this.graph.matrix(),i=this.getInstance(),s=Array.isArray(e)?e:[e];this.patterns.forEach((l,c)=>{const u=`pattern_${c}`,h=r.a||1,f=r.d||1,{update:d,markup:g}=l,p=GG(l,["update","markup"]),b=Object.assign(Object.assign(Object.assign({},p),s[c]),{sx:h,sy:f,ox:r.e||0,oy:r.f||0,width:t*h,height:t*f});i.has(u)||i.add(u,Z.create("pattern",{id:u,patternUnits:"userSpaceOnUse"},Z.createVectors(g)).node);const m=i.get(u);typeof d=="function"&&d(m.childNodes[0],b);let y=b.ox%b.width;y<0&&(y+=b.width);let v=b.oy%b.height;v<0&&(v+=b.height),fe(m,{x:y,y:v,width:b.width,height:b.height})});const o=new XMLSerializer().serializeToString(i.root),a=`url(data:image/svg+xml;base64,${btoa(o)})`;this.elem.style.backgroundImage=a}getInstance(){return this.instance||(this.instance=new Nr),this.instance}resolveGrid(e){if(!e)return[];const t=e.type;if(t==null)return[Object.assign(Object.assign({},Nr.presets.dot),e.args)];const r=Nr.registry.get(t);if(r){let i=e.args||[];return Array.isArray(i)||(i=[i]),Array.isArray(r)?r.map((s,o)=>Object.assign(Object.assign({},s),i[o])):[Object.assign(Object.assign({},r),i[0])]}return Nr.registry.onNotFound(t)}dispose(){this.stopListening(),this.clear()}}qG([ft.dispose()],wf.prototype,"dispose",null);class Hw extends ft{get container(){return this.graph.view.container}get viewport(){return this.graph.view.viewport}get stage(){return this.graph.view.stage}init(){this.resize()}getMatrix(){const e=this.viewport.getAttribute("transform");return e!==this.viewportTransformString&&(this.viewportMatrix=this.viewport.getCTM(),this.viewportTransformString=e),ut(this.viewportMatrix)}setMatrix(e){const t=ut(e),r=ms(t);this.viewport.setAttribute("transform",r),this.viewportMatrix=t,this.viewportTransformString=r}resize(e,t){let r=e===void 0?this.options.width:e,i=t===void 0?this.options.height:t;this.options.width=r,this.options.height=i,typeof r=="number"&&(r=Math.round(r)),typeof i=="number"&&(i=Math.round(i)),this.container.style.width=r==null?"":`${r}px`,this.container.style.height=i==null?"":`${i}px`;const s=this.getComputedSize();return this.graph.trigger("resize",Object.assign({},s)),this}getComputedSize(){let e=this.options.width,t=this.options.height;return jb(e)||(e=this.container.clientWidth),jb(t)||(t=this.container.clientHeight),{width:e,height:t}}getScale(){return Z4(this.getMatrix())}scale(e,t=e,r=0,i=0){if(e=this.clampScale(e),t=this.clampScale(t),r||i){const o=this.getTranslation(),a=o.tx-r*(e-1),l=o.ty-i*(t-1);(a!==o.tx||l!==o.ty)&&this.translate(a,l)}const s=this.getMatrix();return s.a=e,s.d=t,this.setMatrix(s),this.graph.trigger("scale",{sx:e,sy:t,ox:r,oy:i}),this}clampScale(e){const t=this.graph.options.scaling;return Zt(e,t.min||.01,t.max||16)}getZoom(){return this.getScale().sx}zoom(e,t){t=t||{};let r=e,i=e;const s=this.getScale(),o=this.getComputedSize();let a=o.width/2,l=o.height/2;if(t.absolute||(r+=s.sx,i+=s.sy),t.scaleGrid&&(r=Math.round(r/t.scaleGrid)*t.scaleGrid,i=Math.round(i/t.scaleGrid)*t.scaleGrid),t.maxScale&&(r=Math.min(t.maxScale,r),i=Math.min(t.maxScale,i)),t.minScale&&(r=Math.max(t.minScale,r),i=Math.max(t.minScale,i)),t.center&&(a=t.center.x,l=t.center.y),r=this.clampScale(r),i=this.clampScale(i),a||l){const c=this.getTranslation(),u=a-(a-c.tx)*(r/s.sx),h=l-(l-c.ty)*(i/s.sy);(u!==c.tx||h!==c.ty)&&this.translate(u,h)}return this.scale(r,i),this}getRotation(){return eq(this.getMatrix())}rotate(e,t,r){if(t==null||r==null){const s=de.getBBox(this.stage);t=s.width/2,r=s.height/2}const i=this.getMatrix().translate(t,r).rotate(e).translate(-t,-r);return this.setMatrix(i),this}getTranslation(){return tq(this.getMatrix())}translate(e,t){const r=this.getMatrix();r.e=e||0,r.f=t||0,this.setMatrix(r);const i=this.getTranslation();return this.options.x=i.tx,this.options.y=i.ty,this.graph.trigger("translate",Object.assign({},i)),this}setOrigin(e,t){return this.translate(e||0,t||0)}fitToContent(e,t,r,i){if(typeof e=="object"){const v=e;e=v.gridWidth||1,t=v.gridHeight||1,r=v.padding||0,i=v}else e=e||1,t=t||1,r=r||0,i==null&&(i={});const s=Bn(r),o=i.border||0,a=i.contentArea?D.create(i.contentArea):this.getContentArea(i);o>0&&a.inflate(o);const l=this.getScale(),c=this.getTranslation(),u=l.sx,h=l.sy;a.x*=u,a.y*=h,a.width*=u,a.height*=h;let f=Math.max(Math.ceil((a.width+a.x)/e),1)*e,d=Math.max(Math.ceil((a.height+a.y)/t),1)*t,g=0,p=0;(i.allowNewOrigin==="negative"&&a.x<0||i.allowNewOrigin==="positive"&&a.x>=0||i.allowNewOrigin==="any")&&(g=Math.ceil(-a.x/e)*e,g+=s.left,f+=g),(i.allowNewOrigin==="negative"&&a.y<0||i.allowNewOrigin==="positive"&&a.y>=0||i.allowNewOrigin==="any")&&(p=Math.ceil(-a.y/t)*t,p+=s.top,d+=p),f+=s.right,d+=s.bottom,f=Math.max(f,i.minWidth||0),d=Math.max(d,i.minHeight||0),f=Math.min(f,i.maxWidth||Number.MAX_SAFE_INTEGER),d=Math.min(d,i.maxHeight||Number.MAX_SAFE_INTEGER);const b=this.getComputedSize(),m=f!==b.width||d!==b.height;return(g!==c.tx||p!==c.ty)&&this.translate(g,p),m&&this.resize(f,d),new D(-g/u,-p/h,f/u,d/h)}scaleContentToFit(e={}){this.scaleContentToFitImpl(e)}scaleContentToFitImpl(e={},t=!0){let r,i;if(e.contentArea){const m=e.contentArea;r=this.graph.localToGraph(m),i=P.create(m)}else r=this.getContentBBox(e),i=this.graph.graphToLocal(r);if(!r.width||!r.height)return;const s=Bn(e.padding),o=e.minScale||0,a=e.maxScale||Number.MAX_SAFE_INTEGER,l=e.minScaleX||o,c=e.maxScaleX||a,u=e.minScaleY||o,h=e.maxScaleY||a;let f;if(e.viewportArea)f=e.viewportArea;else{const m=this.getComputedSize(),y=this.getTranslation();f={x:y.tx,y:y.ty,width:m.width,height:m.height}}f=D.create(f).moveAndExpand({x:s.left,y:s.top,width:-s.left-s.right,height:-s.top-s.bottom});const d=this.getScale();let g=f.width/r.width*d.sx,p=f.height/r.height*d.sy;e.preserveAspectRatio!==!1&&(g=p=Math.min(g,p));const b=e.scaleGrid;if(b&&(g=b*Math.floor(g/b),p=b*Math.floor(p/b)),g=Zt(g,l,c),p=Zt(p,u,h),this.scale(g,p),t){const m=this.options,y=f.x-i.x*g-m.x,v=f.y-i.y*p-m.y;this.translate(y,v)}}getContentArea(e={}){return e.useCellGeometry!==!1?this.model.getAllCellsBBox()||new D:de.getBBox(this.stage)}getContentBBox(e={}){return this.graph.localToGraph(this.getContentArea(e))}getGraphArea(){const e=D.fromSize(this.getComputedSize());return this.graph.graphToLocal(e)}zoomToRect(e,t={}){const r=D.create(e),i=this.graph;t.contentArea=r,t.viewportArea==null&&(t.viewportArea={x:i.options.x,y:i.options.y,width:this.options.width,height:this.options.height}),this.scaleContentToFitImpl(t,!1);const s=r.getCenter();return this.centerPoint(s.x,s.y),this}zoomToFit(e={}){return this.zoomToRect(this.getContentArea(e),e)}centerPoint(e,t){const r=this.getComputedSize(),i=this.getScale(),s=this.getTranslation(),o=r.width/2,a=r.height/2;e=typeof e=="number"?e:o,t=typeof t=="number"?t:a,e=o-e*i.sx,t=a-t*i.sy,(s.tx!==e||s.ty!==t)&&this.translate(e,t)}centerContent(e){const r=this.graph.getContentArea(e).getCenter();this.centerPoint(r.x,r.y)}centerCell(e){return this.positionCell(e,"center")}positionPoint(e,t,r){const i=this.getComputedSize();t=Vt(t,Math.max(0,i.width)),t<0&&(t=i.width+t),r=Vt(r,Math.max(0,i.height)),r<0&&(r=i.height+r);const s=this.getTranslation(),o=this.getScale(),a=t-e.x*o.sx,l=r-e.y*o.sy;(s.tx!==a||s.ty!==l)&&this.translate(a,l)}positionRect(e,t){const r=D.create(e);switch(t){case"center":return this.positionPoint(r.getCenter(),"50%","50%");case"top":return this.positionPoint(r.getTopCenter(),"50%",0);case"top-right":return this.positionPoint(r.getTopRight(),"100%",0);case"right":return this.positionPoint(r.getRightMiddle(),"100%","50%");case"bottom-right":return this.positionPoint(r.getBottomRight(),"100%","100%");case"bottom":return this.positionPoint(r.getBottomCenter(),"50%","100%");case"bottom-left":return this.positionPoint(r.getBottomLeft(),0,"100%");case"left":return this.positionPoint(r.getLeftMiddle(),0,"50%");case"top-left":return this.positionPoint(r.getTopLeft(),0,0);default:return this}}positionCell(e,t){const r=e.getBBox();return this.positionRect(r,t)}positionContent(e,t){const r=this.graph.getContentArea(t);return this.positionRect(r,e)}}var HG=function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};class dc extends ft{get elem(){return this.view.background}init(){this.startListening(),this.options.background&&this.draw(this.options.background)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}updateBackgroundImage(e={}){let t=e.size||"auto auto",r=e.position||"center";const i=this.graph.transform.getScale(),s=this.graph.translate();if(typeof r=="object"){const o=s.tx+i.sx*(r.x||0),a=s.ty+i.sy*(r.y||0);r=`${o}px ${a}px`}typeof t=="object"&&(t=D.fromSize(t).scale(i.sx,i.sy),t=`${t.width}px ${t.height}px`),this.elem.style.backgroundSize=t,this.elem.style.backgroundPosition=r}drawBackgroundImage(e,t={}){if(!(e instanceof HTMLImageElement)){this.elem.style.backgroundImage="";return}const r=this.optionsCache;if(r&&r.image!==t.image)return;let i;const s=t.opacity,o=t.size;let a=t.repeat||"no-repeat";const l=Wo.registry.get(a);if(typeof l=="function"){const u=t.quality||1;e.width*=u,e.height*=u;const h=l(e,t);if(!(h instanceof HTMLCanvasElement))throw new Error("Background pattern must return an HTML Canvas instance");i=h.toDataURL("image/png"),t.repeat&&a!==t.repeat?a=t.repeat:a="repeat",typeof o=="object"?(o.width*=h.width/e.width,o.height*=h.height/e.height):o===void 0&&(t.size={width:h.width/u,height:h.height/u})}else i=e.src,o===void 0&&(t.size={width:e.width,height:e.height});r!=null&&typeof t.size=="object"&&t.image===r.image&&t.repeat===r.repeat&&t.quality===r.quality&&(r.size=_h(t.size));const c=this.elem.style;c.backgroundImage=`url(${i})`,c.backgroundRepeat=a,c.opacity=s==null||s>=1?"":`${s}`,this.updateBackgroundImage(t)}updateBackgroundColor(e){this.elem.style.backgroundColor=e||""}updateBackgroundOptions(e){this.graph.options.background=e}update(){this.optionsCache&&this.updateBackgroundImage(this.optionsCache)}draw(e){const t=e||{};if(this.updateBackgroundOptions(e),this.updateBackgroundColor(t.color),t.image){this.optionsCache=_h(t);const r=document.createElement("img");r.onload=()=>this.drawBackgroundImage(r,e),r.setAttribute("crossorigin","anonymous"),r.src=t.image}else this.drawBackgroundImage(null),this.optionsCache=null}clear(){this.draw()}dispose(){this.clear(),this.stopListening()}}HG([ft.dispose()],dc.prototype,"dispose",null);var UG=function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};class xf extends ft{get widgetOptions(){return this.options.panning}get pannable(){return this.widgetOptions&&this.widgetOptions.enabled===!0}init(){this.onRightMouseDown=this.onRightMouseDown.bind(this),this.startListening(),this.updateClassName()}startListening(){this.graph.on("blank:mousedown",this.onMouseDown,this),this.graph.on("node:unhandled:mousedown",this.onMouseDown,this),this.graph.on("edge:unhandled:mousedown",this.onMouseDown,this),Pe.on(this.graph.container,"mousedown",this.onRightMouseDown),this.mousewheelHandle=new D1(this.graph.container,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.mousewheelHandle.enable()}stopListening(){this.graph.off("blank:mousedown",this.onMouseDown,this),this.graph.off("node:unhandled:mousedown",this.onMouseDown,this),this.graph.off("edge:unhandled:mousedown",this.onMouseDown,this),Pe.off(this.graph.container,"mousedown",this.onRightMouseDown),this.mousewheelHandle&&this.mousewheelHandle.disable()}allowPanning(e,t){return this.pannable&&ir.isMatch(e,this.widgetOptions.modifiers,t)}startPanning(e){const t=this.view.normalizeEvent(e);this.clientX=t.clientX,this.clientY=t.clientY,this.panning=!0,this.updateClassName(),Pe.on(document.body,{"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),Pe.on(window,"mouseup.panning",this.stopPanning.bind(this))}pan(e){const t=this.view.normalizeEvent(e),r=t.clientX-this.clientX,i=t.clientY-this.clientY;this.clientX=t.clientX,this.clientY=t.clientY,this.graph.translateBy(r,i)}stopPanning(e){this.panning=!1,this.updateClassName(),Pe.off(document.body,".panning"),Pe.off(window,".panning")}updateClassName(){const e=this.view.container,t=this.view.prefixClassName("graph-panning"),r=this.view.prefixClassName("graph-pannable");this.pannable?this.panning?(J(e,t),yt(e,r)):(yt(e,t),J(e,r)):(yt(e,t),yt(e,r))}onMouseDown({e}){if(!this.allowBlankMouseDown(e))return;const t=this.graph.getPlugin("selection"),r=t&&t.allowRubberband(e,!0);(this.allowPanning(e,!0)||this.allowPanning(e)&&!r)&&this.startPanning(e)}onRightMouseDown(e){const t=this.widgetOptions.eventTypes;t!=null&&t.includes("rightMouseDown")&&e.button===2&&this.allowPanning(e,!0)&&this.startPanning(e)}onMouseWheel(e,t,r){this.graph.translateBy(-t,-r)}allowBlankMouseDown(e){const t=this.widgetOptions.eventTypes;return(t==null?void 0:t.includes("leftMouseDown"))&&e.button===0||(t==null?void 0:t.includes("mouseWheelDown"))&&e.button===1}allowMouseWheel(e){var t;return this.pannable&&!e.ctrlKey&&((t=this.widgetOptions.eventTypes)===null||t===void 0?void 0:t.includes("mouseWheel"))}autoPanning(e,t){const i=this.graph.getGraphArea();let s=0,o=0;e<=i.left+10&&(s=-10),t<=i.top+10&&(o=-10),e>=i.right-10&&(s=10),t>=i.bottom-10&&(o=10),(s!==0||o!==0)&&this.graph.translateBy(-s,-o)}enablePanning(){this.pannable||(this.widgetOptions.enabled=!0,this.updateClassName())}disablePanning(){this.pannable&&(this.widgetOptions.enabled=!1,this.updateClassName())}dispose(){this.stopListening()}}UG([ft.dispose()],xf.prototype,"dispose",null);var WG=function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};class Cf extends ft{constructor(){super(...arguments),this.cumulatedFactor=1}get widgetOptions(){return this.options.mousewheel}init(){this.container=this.graph.container,this.target=this.widgetOptions.global?document:this.container,this.mousewheelHandle=new D1(this.target,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.widgetOptions.enabled&&this.enable(!0)}get disabled(){return this.widgetOptions.enabled!==!0}enable(e){(this.disabled||e)&&(this.widgetOptions.enabled=!0,this.mousewheelHandle.enable())}disable(){this.disabled||(this.widgetOptions.enabled=!1,this.mousewheelHandle.disable())}allowMouseWheel(e){const t=this.widgetOptions.guard;return(t==null||t(e))&&ir.isMatch(e,this.widgetOptions.modifiers)}onMouseWheel(e){const t=this.widgetOptions.guard;if((t==null||t(e))&&ir.isMatch(e,this.widgetOptions.modifiers)){const r=this.widgetOptions.factor||1.2;this.currentScale==null&&(this.startPos={x:e.clientX,y:e.clientY},this.currentScale=this.graph.transform.getScale().sx),e.deltaY<0?this.currentScale<.15?this.cumulatedFactor=(this.currentScale+.01)/this.currentScale:(this.cumulatedFactor=Math.round(this.currentScale*r*20)/20/this.currentScale,this.cumulatedFactor===1&&(this.cumulatedFactor=1.05)):this.currentScale<=.15?this.cumulatedFactor=(this.currentScale-.01)/this.currentScale:(this.cumulatedFactor=Math.round(this.currentScale*(1/r)*20)/20/this.currentScale,this.cumulatedFactor===1&&(this.cumulatedFactor=.95)),this.cumulatedFactor=Math.max(.01,Math.min(this.currentScale*this.cumulatedFactor,160)/this.currentScale);const s=this.currentScale;let o=this.graph.transform.clampScale(s*this.cumulatedFactor);const a=this.widgetOptions.minScale||Number.MIN_SAFE_INTEGER,l=this.widgetOptions.maxScale||Number.MAX_SAFE_INTEGER;if(o=Zt(o,a,l),o!==s)if(this.widgetOptions.zoomAtMousePosition){const u=!!this.graph.getPlugin("scroller")?this.graph.clientToLocal(this.startPos):this.graph.clientToGraph(this.startPos);this.graph.zoom(o,{absolute:!0,center:u.clone()})}else this.graph.zoom(o,{absolute:!0});this.currentScale=null,this.cumulatedFactor=1}}dispose(){this.disable()}}WG([pn.dispose()],Cf.prototype,"dispose",null);var XG=function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};class Uw extends ft{init(){this.resetRenderArea=t4(this.resetRenderArea,200,{leading:!0}),this.resetRenderArea(),this.startListening()}startListening(){this.graph.on("translate",this.resetRenderArea,this),this.graph.on("scale",this.resetRenderArea,this),this.graph.on("resize",this.resetRenderArea,this)}stopListening(){this.graph.off("translate",this.resetRenderArea,this),this.graph.off("scale",this.resetRenderArea,this),this.graph.off("resize",this.resetRenderArea,this)}enableVirtualRender(){this.options.virtual=!0,this.resetRenderArea()}disableVirtualRender(){this.options.virtual=!1,this.graph.renderer.setRenderArea(void 0)}resetRenderArea(){if(this.options.virtual){const e=this.graph.getGraphArea();this.graph.renderer.setRenderArea(e)}}dispose(){this.stopListening()}}XG([ft.dispose()],Uw.prototype,"dispose",null);class YG{constructor(){this.isFlushing=!1,this.isFlushPending=!1,this.scheduleId=0,this.queue=[],this.frameInterval=33,this.initialTime=Date.now()}queueJob(e){if(e.priority&lr.PRIOR)e.cb();else{const t=this.findInsertionIndex(e);t>=0&&this.queue.splice(t,0,e)}}queueFlush(){!this.isFlushing&&!this.isFlushPending&&(this.isFlushPending=!0,this.scheduleJob())}queueFlushSync(){!this.isFlushing&&!this.isFlushPending&&(this.isFlushPending=!0,this.flushJobsSync())}clearJobs(){this.queue.length=0,this.isFlushing=!1,this.isFlushPending=!1,this.cancelScheduleJob()}flushJobs(){this.isFlushPending=!1,this.isFlushing=!0;const e=this.getCurrentTime();let t;for(;(t=this.queue.shift())&&(t.cb(),!(this.getCurrentTime()-e>=this.frameInterval)););this.isFlushing=!1,this.queue.length&&this.queueFlush()}flushJobsSync(){this.isFlushPending=!1,this.isFlushing=!0;let e;for(;e=this.queue.shift();)try{e.cb()}catch(t){console.log(t)}this.isFlushing=!1}findInsertionIndex(e){let t=0,r=this.queue.length,i=r-1;const s=e.priority;for(;t<=i;){const o=(i-t>>1)+t;s<=this.queue[o].priority?t=o+1:(r=o,i=o-1)}return r}scheduleJob(){"requestIdleCallback"in window?(this.scheduleId&&this.cancelScheduleJob(),this.scheduleId=window.requestIdleCallback(this.flushJobs.bind(this),{timeout:100})):(this.scheduleId&&this.cancelScheduleJob(),this.scheduleId=window.setTimeout(this.flushJobs.bind(this)))}cancelScheduleJob(){"cancelIdleCallback"in window?(this.scheduleId&&window.cancelIdleCallback(this.scheduleId),this.scheduleId=0):(this.scheduleId&&clearTimeout(this.scheduleId),this.scheduleId=0)}getCurrentTime(){return typeof performance=="object"&&typeof performance.now=="function"?performance.now():Date.now()-this.initialTime}}var lr;(function(n){n[n.Update=2]="Update",n[n.RenderEdge=4]="RenderEdge",n[n.RenderNode=8]="RenderNode",n[n.PRIOR=1048576]="PRIOR"})(lr||(lr={}));var KG=function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};class rt extends pn{get model(){return this.graph.model}get container(){return this.graph.view.stage}constructor(e){super(),this.views={},this.willRemoveViews={},this.queue=new YG,this.graph=e,this.init()}init(){this.startListening(),this.renderViews(this.model.getCells())}startListening(){this.model.on("reseted",this.onModelReseted,this),this.model.on("cell:added",this.onCellAdded,this),this.model.on("cell:removed",this.onCellRemoved,this),this.model.on("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.on("cell:change:visible",this.onCellVisibleChanged,this)}stopListening(){this.model.off("reseted",this.onModelReseted,this),this.model.off("cell:added",this.onCellAdded,this),this.model.off("cell:removed",this.onCellRemoved,this),this.model.off("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.off("cell:change:visible",this.onCellVisibleChanged,this)}onModelReseted({options:e}){this.queue.clearJobs(),this.removeZPivots(),this.resetViews();const t=this.model.getCells();this.renderViews(t,Object.assign(Object.assign({},e),{queue:t.map(r=>r.id)}))}onCellAdded({cell:e,options:t}){this.renderViews([e],t)}onCellRemoved({cell:e}){this.removeViews([e])}onCellZIndexChanged({cell:e,options:t}){const r=this.views[e.id];r&&this.requestViewUpdate(r.view,rt.FLAG_INSERT,t,lr.Update,!0)}onCellVisibleChanged({cell:e,current:t}){this.toggleVisible(e,!!t)}requestViewUpdate(e,t,r={},i=lr.Update,s=!0){const o=e.cell.id,a=this.views[o];if(!a)return;a.flag=t,a.options=r,(e.hasAction(t,["translate","resize","rotate"])||r.async===!1)&&(i=lr.PRIOR,s=!1),this.queue.queueJob({id:o,priority:i,cb:()=>{this.renderViewInArea(e,t,r);const u=r.queue;if(u){const h=u.indexOf(e.cell.id);h>=0&&u.splice(h,1),u.length===0&&this.graph.trigger("render:done")}}}),this.getEffectedEdges(e).forEach(u=>{this.requestViewUpdate(u.view,u.flag,r,i,!1)}),s&&this.flush()}setRenderArea(e){this.renderArea=e,this.flushWaitingViews()}isViewMounted(e){if(e==null)return!1;const t=this.views[e.cell.id];return t?t.state===rt.ViewState.MOUNTED:!1}renderViews(e,t={}){e.sort((r,i)=>r.isNode()&&i.isEdge()?-1:0),e.forEach(r=>{const i=r.id,s=this.views;let o=0,a=s[i];if(a)o=rt.FLAG_INSERT;else{const l=this.createCellView(r);l&&(l.graph=this.graph,o=rt.FLAG_INSERT|l.getBootstrapFlag(),a={view:l,flag:o,options:t,state:rt.ViewState.CREATED},this.views[i]=a)}a&&this.requestViewUpdate(a.view,o,t,this.getRenderPriority(a.view),!1)}),this.flush()}renderViewInArea(e,t,r={}){const i=e.cell,s=i.id,o=this.views[s];if(!o)return;let a=0;this.isUpdatable(e)?(a=this.updateView(e,t,r),o.flag=a):o.state===rt.ViewState.MOUNTED?(a=this.updateView(e,t,r),o.flag=a):o.state=rt.ViewState.WAITING,a&&i.isEdge()&&!(a&e.getFlag(["source","target"]))&&this.queue.queueJob({id:s,priority:lr.RenderEdge,cb:()=>{this.updateView(e,t,r)}})}removeViews(e){e.forEach(t=>{const r=t.id,i=this.views[r];i&&(this.willRemoveViews[r]=i,delete this.views[r],this.queue.queueJob({id:r,priority:this.getRenderPriority(i.view),cb:()=>{this.removeView(i.view)}}))}),this.flush()}flush(){this.graph.options.async?this.queue.queueFlush():this.queue.queueFlushSync()}flushWaitingViews(){Object.values(this.views).forEach(e=>{if(e&&e.state===rt.ViewState.WAITING){const{view:t,flag:r,options:i}=e;this.requestViewUpdate(t,r,i,this.getRenderPriority(t),!1)}}),this.flush()}updateView(e,t,r={}){if(e==null)return 0;if(Xe.isCellView(e)){if(t&rt.FLAG_REMOVE)return this.removeView(e.cell),0;t&rt.FLAG_INSERT&&(this.insertView(e),t^=rt.FLAG_INSERT)}return t?e.confirmUpdate(t,r):0}insertView(e){const t=this.views[e.cell.id];if(t){const r=e.cell.getZIndex(),i=this.addZPivot(r);this.container.insertBefore(e.container,i),e.cell.isVisible()||this.toggleVisible(e.cell,!1),t.state=rt.ViewState.MOUNTED,this.graph.trigger("view:mounted",{view:e})}}resetViews(){this.willRemoveViews=Object.assign(Object.assign({},this.views),this.willRemoveViews),Object.values(this.willRemoveViews).forEach(e=>{e&&this.removeView(e.view)}),this.views={},this.willRemoveViews={}}removeView(e){const t=e.cell,r=this.willRemoveViews[t.id];r&&e&&(r.view.remove(),delete this.willRemoveViews[t.id],this.graph.trigger("view:unmounted",{view:e}))}toggleVisible(e,t){const r=this.model.getConnectedEdges(e);for(let s=0,o=r.length;s<o;s+=1){const a=r[s];if(t){const l=a.getSourceCell(),c=a.getTargetCell();if(l&&!l.isVisible()||c&&!c.isVisible())continue;this.toggleVisible(a,!0)}else this.toggleVisible(a,!1)}const i=this.views[e.id];i&&ye(i.view.container,{display:t?"unset":"none"})}addZPivot(e=0){this.zPivots==null&&(this.zPivots={});const t=this.zPivots;let r=t[e];if(r)return r;r=t[e]=document.createComment(`z-index:${e+1}`);let i=-1/0;for(const o in t){const a=+o;a<e&&a>i&&(i=a,e-1)}const s=this.container;if(i!==-1/0){const o=t[i];s.insertBefore(r,o.nextSibling)}else s.insertBefore(r,s.firstChild);return r}removeZPivots(){this.zPivots&&Object.values(this.zPivots).forEach(e=>{e&&e.parentNode&&e.parentNode.removeChild(e)}),this.zPivots={}}createCellView(e){const t={graph:this.graph},r=this.graph.options.createCellView;if(r){const s=K(r,this.graph,e);if(s)return new s(e,t);if(s===null)return null}const i=e.view;if(i!=null&&typeof i=="string"){const s=Xe.registry.get(i);return s?new s(e,t):Xe.registry.onNotFound(i)}return e.isNode()?new kt(e,t):e.isEdge()?new ar(e,t):null}getEffectedEdges(e){const t=[],r=e.cell,i=this.model.getConnectedEdges(r);for(let s=0,o=i.length;s<o;s+=1){const a=i[s],l=this.views[a.id];if(!l)continue;const c=l.view;if(!this.isViewMounted(c))continue;const u=["update"];a.getTargetCell()===r&&u.push("target"),a.getSourceCell()===r&&u.push("source"),t.push({id:a.id,view:c,flag:c.getFlag(u)})}return t}isUpdatable(e){if(e.isNodeView())return this.renderArea?this.renderArea.isIntersectWithRect(e.cell.getBBox()):!0;if(e.isEdgeView()){const t=e.cell,r=t.getSourceCell(),i=t.getTargetCell();if(this.renderArea&&r&&i)return this.renderArea.isIntersectWithRect(r.getBBox())||this.renderArea.isIntersectWithRect(i.getBBox())}return!0}getRenderPriority(e){return e.cell.isNode()?lr.RenderNode:lr.RenderEdge}dispose(){this.stopListening(),Object.keys(this.views).forEach(e=>{this.views[e].view.dispose()}),this.views={}}}KG([pn.dispose()],rt.prototype,"dispose",null),function(n){n.FLAG_INSERT=1<<30,n.FLAG_REMOVE=1<<29,n.FLAG_RENDER=(1<<26)-1}(rt||(rt={})),function(n){(function(e){e[e.CREATED=0]="CREATED",e[e.MOUNTED=1]="MOUNTED",e[e.WAITING=2]="WAITING"})(n.ViewState||(n.ViewState={}))}(rt||(rt={}));var JG=function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};class Sf extends ft{constructor(){super(...arguments),this.schedule=new rt(this.graph)}requestViewUpdate(e,t,r={}){this.schedule.requestViewUpdate(e,t,r)}isViewMounted(e){return this.schedule.isViewMounted(e)}setRenderArea(e){this.schedule.setRenderArea(e)}findViewByElem(e){if(e==null)return null;const t=this.options.container,r=typeof e=="string"?t.querySelector(e):e instanceof Element?e:e[0];if(r){const i=this.graph.view.findAttr("data-cell-id",r);if(i){const s=this.schedule.views;if(s[i])return s[i].view}}return null}findViewByCell(e){if(e==null)return null;const t=le.isCell(e)?e.id:e,r=this.schedule.views;return r[t]?r[t].view:null}findViewsFromPoint(e){const t={x:e.x,y:e.y};return this.model.getCells().map(r=>this.findViewByCell(r)).filter(r=>r!=null?de.getBBox(r.container,{target:this.view.stage}).containsPoint(t):!1)}findEdgeViewsFromPoint(e,t=5){return this.model.getEdges().map(r=>this.findViewByCell(r)).filter(r=>{if(r!=null){const i=r.getClosestPoint(e);if(i)return i.distance(e)<=t}return!1})}findViewsInArea(e,t={}){const r=D.create(e);return this.model.getCells().map(i=>this.findViewByCell(i)).filter(i=>{if(i){if(t.nodeOnly&&!i.isNodeView())return!1;const s=de.getBBox(i.container,{target:this.view.stage});return s.width===0?s.inflate(1,0):s.height===0&&s.inflate(0,1),t.strict?r.containsRect(s):r.isIntersectWithRect(s)}return!1})}dispose(){this.schedule.dispose()}}JG([ft.dispose()],Sf.prototype,"dispose",null);var Ww=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class Xw extends ft{get cid(){return this.graph.view.cid}get svg(){return this.view.svg}get defs(){return this.view.defs}isDefined(e){return this.svg.getElementById(e)!=null}filter(e){let t=e.id;const r=e.name;if(t||(t=`filter-${r}-${this.cid}-${qh(JSON.stringify(e))}`),!this.isDefined(t)){const i=ws.registry.get(r);if(i==null)return ws.registry.onNotFound(r);const s=i(e.args||{}),o=Object.assign(Object.assign({x:-1,y:-1,width:3,height:3,filterUnits:"objectBoundingBox"},e.attrs),{id:t});Z.create(Ee.sanitize(s),o).appendTo(this.defs)}return t}gradient(e){let t=e.id;const r=e.type;if(t||(t=`gradient-${r}-${this.cid}-${qh(JSON.stringify(e))}`),!this.isDefined(t)){const s=e.stops.map(l=>{const c=l.opacity!=null&&Number.isFinite(l.opacity)?l.opacity:1;return`<stop offset="${l.offset}" stop-color="${l.color}" stop-opacity="${c}"/>`}),o=`<${r}>${s.join("")}</${r}>`,a=Object.assign({id:t},e.attrs);Z.create(o,a).appendTo(this.defs)}return t}marker(e){const{id:t,refX:r,refY:i,markerUnits:s,markerOrient:o,tagName:a,children:l}=e,c=Ww(e,["id","refX","refY","markerUnits","markerOrient","tagName","children"]);let u=t;if(u||(u=`marker-${this.cid}-${qh(JSON.stringify(e))}`),!this.isDefined(u)){a!=="path"&&delete c.d;const h=Z.create("marker",{refX:r,refY:i,id:u,overflow:"visible",orient:o!=null?o:"auto",markerUnits:s||"userSpaceOnUse"},l?l.map(f=>{var{tagName:d}=f,g=Ww(f,["tagName"]);return Z.create(`${d}`||"path",Lo(Object.assign(Object.assign({},c),g)))}):[Z.create(a||"path",Lo(c))]);this.defs.appendChild(h.node)}return u}remove(e){const t=this.svg.getElementById(e);t&&t.parentNode&&t.parentNode.removeChild(t)}}class Yw extends ft{getClientMatrix(){return ut(this.view.stage.getScreenCTM())}getClientOffset(){const e=this.view.svg.getBoundingClientRect();return new P(e.left,e.top)}getPageOffset(){return this.getClientOffset().translate(window.scrollX,window.scrollY)}snapToGrid(e,t){return(typeof e=="number"?this.clientToLocalPoint(e,t):this.clientToLocalPoint(e.x,e.y)).snapToGrid(this.graph.getGridSize())}localToGraphPoint(e,t){const r=P.create(e,t);return de.transformPoint(r,this.graph.matrix())}localToClientPoint(e,t){const r=P.create(e,t);return de.transformPoint(r,this.getClientMatrix())}localToPagePoint(e,t){return(typeof e=="number"?this.localToGraphPoint(e,t):this.localToGraphPoint(e)).translate(this.getPageOffset())}localToGraphRect(e,t,r,i){const s=D.create(e,t,r,i);return de.transformRectangle(s,this.graph.matrix())}localToClientRect(e,t,r,i){const s=D.create(e,t,r,i);return de.transformRectangle(s,this.getClientMatrix())}localToPageRect(e,t,r,i){return(typeof e=="number"?this.localToGraphRect(e,t,r,i):this.localToGraphRect(e)).translate(this.getPageOffset())}graphToLocalPoint(e,t){const r=P.create(e,t);return de.transformPoint(r,this.graph.matrix().inverse())}clientToLocalPoint(e,t){const r=P.create(e,t);return de.transformPoint(r,this.getClientMatrix().inverse())}clientToGraphPoint(e,t){const r=P.create(e,t);return de.transformPoint(r,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalPoint(e,t){const i=P.create(e,t).diff(this.getPageOffset());return this.graphToLocalPoint(i)}graphToLocalRect(e,t,r,i){const s=D.create(e,t,r,i);return de.transformRectangle(s,this.graph.matrix().inverse())}clientToLocalRect(e,t,r,i){const s=D.create(e,t,r,i);return de.transformRectangle(s,this.getClientMatrix().inverse())}clientToGraphRect(e,t,r,i){const s=D.create(e,t,r,i);return de.transformRectangle(s,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalRect(e,t,r,i){const s=D.create(e,t,r,i),o=this.getPageOffset();return s.x-=o.x,s.y-=o.y,this.graphToLocalRect(s)}}var QG=function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};class gc extends ft{constructor(){super(...arguments),this.highlights={}}init(){this.startListening()}startListening(){this.graph.on("cell:highlight",this.onCellHighlight,this),this.graph.on("cell:unhighlight",this.onCellUnhighlight,this)}stopListening(){this.graph.off("cell:highlight",this.onCellHighlight,this),this.graph.off("cell:unhighlight",this.onCellUnhighlight,this)}onCellHighlight({view:e,magnet:t,options:r={}}){const i=this.resolveHighlighter(r);if(!i)return;const s=this.getHighlighterId(t,i);if(!this.highlights[s]){const o=i.highlighter;o.highlight(e,t,Object.assign({},i.args)),this.highlights[s]={cellView:e,magnet:t,highlighter:o,args:i.args}}}onCellUnhighlight({magnet:e,options:t={}}){const r=this.resolveHighlighter(t);if(!r)return;const i=this.getHighlighterId(e,r);this.unhighlight(i)}resolveHighlighter(e){const t=this.options;let r=e.highlighter;if(r==null){const a=e.type;r=a&&t.highlighting[a]||t.highlighting.default}if(r==null)return null;const i=typeof r=="string"?{name:r}:r,s=i.name,o=sr.registry.get(s);return o==null?sr.registry.onNotFound(s):(sr.check(s,o),{name:s,highlighter:o,args:i.args||{}})}getHighlighterId(e,t){return Wh(e),t.name+e.id+JSON.stringify(t.args)}unhighlight(e){const t=this.highlights[e];t&&(t.highlighter.unhighlight(t.cellView,t.magnet,t.args),delete this.highlights[e])}dispose(){Object.keys(this.highlights).forEach(e=>this.unhighlight(e)),this.stopListening()}}QG([gc.dispose()],gc.prototype,"dispose",null);var ZG=function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};class Kw extends ft{getScroller(){const e=this.graph.getPlugin("scroller");return e&&e.options.enabled?e:null}getContainer(){const e=this.getScroller();return e?e.container.parentElement:this.graph.container.parentElement}getSensorTarget(){const e=this.options.autoResize;if(e)return typeof e=="boolean"?this.getContainer():e}init(){if(this.options.autoResize){const t=this.getSensorTarget();t&&Ul.bind(t,()=>{const r=t.offsetWidth,i=t.offsetHeight;this.resize(r,i)})}}resize(e,t){const r=this.getScroller();r?r.resize(e,t):this.graph.transform.resize(e,t)}dispose(){Ul.clear(this.graph.container)}}ZG([ft.dispose()],Kw.prototype,"dispose",null);var e8=function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};let q=class WM extends mt{get container(){return this.options.container}get[Symbol.toStringTag](){return WM.toStringTag}constructor(e){super(),this.installedPlugins=new Set,this.options=na.get(e),this.css=new bf(this),this.view=new xn(this),this.defs=new Xw(this),this.coord=new Yw(this),this.transform=new Hw(this),this.highlight=new gc(this),this.grid=new wf(this),this.background=new dc(this),this.options.model?this.model=this.options.model:(this.model=new wn,this.model.graph=this),this.renderer=new Sf(this),this.panning=new xf(this),this.mousewheel=new Cf(this),this.virtualRender=new Uw(this),this.size=new Kw(this)}isNode(e){return e.isNode()}isEdge(e){return e.isEdge()}resetCells(e,t={}){return this.model.resetCells(e,t),this}clearCells(e={}){return this.model.clear(e),this}toJSON(e={}){return this.model.toJSON(e)}parseJSON(e){return this.model.parseJSON(e)}fromJSON(e,t={}){return this.model.fromJSON(e,t),this}getCellById(e){return this.model.getCell(e)}addNode(e,t={}){return this.model.addNode(e,t)}addNodes(e,t={}){return this.addCell(e.map(r=>Ye.isNode(r)?r:this.createNode(r)),t)}createNode(e){return this.model.createNode(e)}removeNode(e,t={}){return this.model.removeCell(e,t)}addEdge(e,t={}){return this.model.addEdge(e,t)}addEdges(e,t={}){return this.addCell(e.map(r=>qe.isEdge(r)?r:this.createEdge(r)),t)}removeEdge(e,t={}){return this.model.removeCell(e,t)}createEdge(e){return this.model.createEdge(e)}addCell(e,t={}){return this.model.addCell(e,t),this}removeCell(e,t={}){return this.model.removeCell(e,t)}removeCells(e,t={}){return this.model.removeCells(e,t)}removeConnectedEdges(e,t={}){return this.model.removeConnectedEdges(e,t)}disconnectConnectedEdges(e,t={}){return this.model.disconnectConnectedEdges(e,t),this}hasCell(e){return this.model.has(e)}getCells(){return this.model.getCells()}getCellCount(){return this.model.total()}getNodes(){return this.model.getNodes()}getEdges(){return this.model.getEdges()}getOutgoingEdges(e){return this.model.getOutgoingEdges(e)}getIncomingEdges(e){return this.model.getIncomingEdges(e)}getConnectedEdges(e,t={}){return this.model.getConnectedEdges(e,t)}getRootNodes(){return this.model.getRoots()}getLeafNodes(){return this.model.getLeafs()}isRootNode(e){return this.model.isRoot(e)}isLeafNode(e){return this.model.isLeaf(e)}getNeighbors(e,t={}){return this.model.getNeighbors(e,t)}isNeighbor(e,t,r={}){return this.model.isNeighbor(e,t,r)}getSuccessors(e,t={}){return this.model.getSuccessors(e,t)}isSuccessor(e,t,r={}){return this.model.isSuccessor(e,t,r)}getPredecessors(e,t={}){return this.model.getPredecessors(e,t)}isPredecessor(e,t,r={}){return this.model.isPredecessor(e,t,r)}getCommonAncestor(...e){return this.model.getCommonAncestor(...e)}getSubGraph(e,t={}){return this.model.getSubGraph(e,t)}cloneSubGraph(e,t={}){return this.model.cloneSubGraph(e,t)}cloneCells(e){return this.model.cloneCells(e)}getNodesFromPoint(e,t){return this.model.getNodesFromPoint(e,t)}getNodesInArea(e,t,r,i,s){return this.model.getNodesInArea(e,t,r,i,s)}getNodesUnderNode(e,t={}){return this.model.getNodesUnderNode(e,t)}searchCell(e,t,r={}){return this.model.search(e,t,r),this}getShortestPath(e,t,r={}){return this.model.getShortestPath(e,t,r)}getAllCellsBBox(){return this.model.getAllCellsBBox()}getCellsBBox(e,t={}){return this.model.getCellsBBox(e,t)}startBatch(e,t={}){this.model.startBatch(e,t)}stopBatch(e,t={}){this.model.stopBatch(e,t)}batchUpdate(e,t,r){const i=typeof e=="string"?e:"update",s=typeof e=="string"?t:e,o=typeof t=="function"?r:t;this.startBatch(i,o);const a=s();return this.stopBatch(i,o),a}updateCellId(e,t){return this.model.updateCellId(e,t)}findView(e){return le.isCell(e)?this.findViewByCell(e):this.findViewByElem(e)}findViews(e){return D.isRectangleLike(e)?this.findViewsInArea(e):P.isPointLike(e)?this.findViewsFromPoint(e):[]}findViewByCell(e){return this.renderer.findViewByCell(e)}findViewByElem(e){return this.renderer.findViewByElem(e)}findViewsFromPoint(e,t){const r=typeof e=="number"?{x:e,y:t}:e;return this.renderer.findViewsFromPoint(r)}findViewsInArea(e,t,r,i,s){const o=typeof e=="number"?{x:e,y:t,width:r,height:i}:e,a=typeof e=="number"?s:t;return this.renderer.findViewsInArea(o,a)}matrix(e){return typeof e=="undefined"?this.transform.getMatrix():(this.transform.setMatrix(e),this)}resize(e,t){const r=this.getPlugin("scroller");return r?r.resize(e,t):this.transform.resize(e,t),this}scale(e,t=e,r=0,i=0){return typeof e=="undefined"?this.transform.getScale():(this.transform.scale(e,t,r,i),this)}zoom(e,t){const r=this.getPlugin("scroller");if(r){if(typeof e=="undefined")return r.zoom();r.zoom(e,t)}else{if(typeof e=="undefined")return this.transform.getZoom();this.transform.zoom(e,t)}return this}zoomTo(e,t={}){const r=this.getPlugin("scroller");return r?r.zoom(e,Object.assign(Object.assign({},t),{absolute:!0})):this.transform.zoom(e,Object.assign(Object.assign({},t),{absolute:!0})),this}zoomToRect(e,t={}){const r=this.getPlugin("scroller");return r?r.zoomToRect(e,t):this.transform.zoomToRect(e,t),this}zoomToFit(e={}){const t=this.getPlugin("scroller");return t?t.zoomToFit(e):this.transform.zoomToFit(e),this}rotate(e,t,r){return typeof e=="undefined"?this.transform.getRotation():(this.transform.rotate(e,t,r),this)}translate(e,t){return typeof e=="undefined"?this.transform.getTranslation():(this.transform.translate(e,t),this)}translateBy(e,t){const r=this.translate(),i=r.tx+e,s=r.ty+t;return this.translate(i,s)}getGraphArea(){return this.transform.getGraphArea()}getContentArea(e={}){return this.transform.getContentArea(e)}getContentBBox(e={}){return this.transform.getContentBBox(e)}fitToContent(e,t,r,i){return this.transform.fitToContent(e,t,r,i)}scaleContentToFit(e={}){return this.transform.scaleContentToFit(e),this}center(e){return this.centerPoint(e)}centerPoint(e,t,r){const i=this.getPlugin("scroller");return i?i.centerPoint(e,t,r):this.transform.centerPoint(e,t),this}centerContent(e){const t=this.getPlugin("scroller");return t?t.centerContent(e):this.transform.centerContent(e),this}centerCell(e,t){const r=this.getPlugin("scroller");return r?r.centerCell(e,t):this.transform.centerCell(e),this}positionPoint(e,t,r,i={}){const s=this.getPlugin("scroller");return s?s.positionPoint(e,t,r,i):this.transform.positionPoint(e,t,r),this}positionRect(e,t,r){const i=this.getPlugin("scroller");return i?i.positionRect(e,t,r):this.transform.positionRect(e,t),this}positionCell(e,t,r){const i=this.getPlugin("scroller");return i?i.positionCell(e,t,r):this.transform.positionCell(e,t),this}positionContent(e,t){const r=this.getPlugin("scroller");return r?r.positionContent(e,t):this.transform.positionContent(e,t),this}snapToGrid(e,t){return this.coord.snapToGrid(e,t)}pageToLocal(e,t,r,i){return D.isRectangleLike(e)?this.coord.pageToLocalRect(e):typeof e=="number"&&typeof t=="number"&&typeof r=="number"&&typeof i=="number"?this.coord.pageToLocalRect(e,t,r,i):this.coord.pageToLocalPoint(e,t)}localToPage(e,t,r,i){return D.isRectangleLike(e)?this.coord.localToPageRect(e):typeof e=="number"&&typeof t=="number"&&typeof r=="number"&&typeof i=="number"?this.coord.localToPageRect(e,t,r,i):this.coord.localToPagePoint(e,t)}clientToLocal(e,t,r,i){return D.isRectangleLike(e)?this.coord.clientToLocalRect(e):typeof e=="number"&&typeof t=="number"&&typeof r=="number"&&typeof i=="number"?this.coord.clientToLocalRect(e,t,r,i):this.coord.clientToLocalPoint(e,t)}localToClient(e,t,r,i){return D.isRectangleLike(e)?this.coord.localToClientRect(e):typeof e=="number"&&typeof t=="number"&&typeof r=="number"&&typeof i=="number"?this.coord.localToClientRect(e,t,r,i):this.coord.localToClientPoint(e,t)}localToGraph(e,t,r,i){return D.isRectangleLike(e)?this.coord.localToGraphRect(e):typeof e=="number"&&typeof t=="number"&&typeof r=="number"&&typeof i=="number"?this.coord.localToGraphRect(e,t,r,i):this.coord.localToGraphPoint(e,t)}graphToLocal(e,t,r,i){return D.isRectangleLike(e)?this.coord.graphToLocalRect(e):typeof e=="number"&&typeof t=="number"&&typeof r=="number"&&typeof i=="number"?this.coord.graphToLocalRect(e,t,r,i):this.coord.graphToLocalPoint(e,t)}clientToGraph(e,t,r,i){return D.isRectangleLike(e)?this.coord.clientToGraphRect(e):typeof e=="number"&&typeof t=="number"&&typeof r=="number"&&typeof i=="number"?this.coord.clientToGraphRect(e,t,r,i):this.coord.clientToGraphPoint(e,t)}defineFilter(e){return this.defs.filter(e)}defineGradient(e){return this.defs.gradient(e)}defineMarker(e){return this.defs.marker(e)}getGridSize(){return this.grid.getGridSize()}setGridSize(e){return this.grid.setGridSize(e),this}showGrid(){return this.grid.show(),this}hideGrid(){return this.grid.hide(),this}clearGrid(){return this.grid.clear(),this}drawGrid(e){return this.grid.draw(e),this}updateBackground(){return this.background.update(),this}drawBackground(e,t){const r=this.getPlugin("scroller");return r!=null&&(this.options.background==null||!t)?r.drawBackground(e,t):this.background.draw(e),this}clearBackground(e){const t=this.getPlugin("scroller");return t!=null&&(this.options.background==null||!e)?t.clearBackground(e):this.background.clear(),this}enableVirtualRender(){return this.virtualRender.enableVirtualRender(),this}disableVirtualRender(){return this.virtualRender.disableVirtualRender(),this}isMouseWheelEnabled(){return!this.mousewheel.disabled}enableMouseWheel(){return this.mousewheel.enable(),this}disableMouseWheel(){return this.mousewheel.disable(),this}toggleMouseWheel(e){return e==null?this.isMouseWheelEnabled()?this.disableMouseWheel():this.enableMouseWheel():e?this.enableMouseWheel():this.disableMouseWheel(),this}isPannable(){const e=this.getPlugin("scroller");return e?e.isPannable():this.panning.pannable}enablePanning(){const e=this.getPlugin("scroller");return e?e.enablePanning():this.panning.enablePanning(),this}disablePanning(){const e=this.getPlugin("scroller");return e?e.disablePanning():this.panning.disablePanning(),this}togglePanning(e){return e==null?this.isPannable()?this.disablePanning():this.enablePanning():e!==this.isPannable()&&(e?this.enablePanning():this.disablePanning()),this}use(e,...t){return this.installedPlugins.has(e)||(this.installedPlugins.add(e),e.init(this,...t)),this}getPlugin(e){return Array.from(this.installedPlugins).find(t=>t.name===e)}getPlugins(e){return Array.from(this.installedPlugins).filter(t=>e.includes(t.name))}enablePlugins(e){let t=e;Array.isArray(t)||(t=[t]);const r=this.getPlugins(t);return r==null||r.forEach(i=>{var s;(s=i==null?void 0:i.enable)===null||s===void 0||s.call(i)}),this}disablePlugins(e){let t=e;Array.isArray(t)||(t=[t]);const r=this.getPlugins(t);return r==null||r.forEach(i=>{var s;(s=i==null?void 0:i.disable)===null||s===void 0||s.call(i)}),this}isPluginEnabled(e){var t;const r=this.getPlugin(e);return(t=r==null?void 0:r.isEnabled)===null||t===void 0?void 0:t.call(r)}disposePlugins(e){let t=e;Array.isArray(t)||(t=[t]);const r=this.getPlugins(t);return r==null||r.forEach(i=>{i.dispose(),this.installedPlugins.delete(i)}),this}dispose(e=!0){e&&this.model.dispose(),this.css.dispose(),this.defs.dispose(),this.grid.dispose(),this.coord.dispose(),this.transform.dispose(),this.highlight.dispose(),this.background.dispose(),this.mousewheel.dispose(),this.panning.dispose(),this.view.dispose(),this.renderer.dispose(),this.installedPlugins.forEach(t=>{t.dispose()})}};e8([mt.dispose()],q.prototype,"dispose",null),function(n){n.View=xn,n.Renderer=Sf,n.MouseWheel=Cf,n.DefsManager=Xw,n.GridManager=wf,n.CoordManager=Yw,n.TransformManager=Hw,n.HighlightManager=gc,n.BackgroundManager=dc,n.PanningManager=xf}(q||(q={})),function(n){n.toStringTag=`X6.${n.name}`;function e(t){if(t==null)return!1;if(t instanceof n)return!0;const r=t[Symbol.toStringTag];return r==null||r===n.toStringTag}n.isGraph=e}(q||(q={})),function(n){function e(t,r){const i=t instanceof HTMLElement?new n({container:t}):new n(t);return r!=null&&i.fromJSON(r),i}n.render=e}(q||(q={})),function(n){n.registerNode=Ye.registry.register,n.registerEdge=qe.registry.register,n.registerView=Xe.registry.register,n.registerAttr=Vn.registry.register,n.registerGrid=Nr.registry.register,n.registerFilter=ws.registry.register,n.registerNodeTool=Ps.registry.register,n.registerEdgeTool=Es.registry.register,n.registerBackground=Wo.registry.register,n.registerHighlighter=sr.registry.register,n.registerPortLayout=Ai.registry.register,n.registerPortLabelLayout=Cs.registry.register,n.registerMarker=Ir.registry.register,n.registerRouter=Br.registry.register,n.registerConnector=Oi.registry.register,n.registerAnchor=As.registry.register,n.registerEdgeAnchor=Os.registry.register,n.registerConnectionPoint=Ms.registry.register}(q||(q={})),function(n){n.unregisterNode=Ye.registry.unregister,n.unregisterEdge=qe.registry.unregister,n.unregisterView=Xe.registry.unregister,n.unregisterAttr=Vn.registry.unregister,n.unregisterGrid=Nr.registry.unregister,n.unregisterFilter=ws.registry.unregister,n.unregisterNodeTool=Ps.registry.unregister,n.unregisterEdgeTool=Es.registry.unregister,n.unregisterBackground=Wo.registry.unregister,n.unregisterHighlighter=sr.registry.unregister,n.unregisterPortLayout=Ai.registry.unregister,n.unregisterPortLabelLayout=Cs.registry.unregister,n.unregisterMarker=Ir.registry.unregister,n.unregisterRouter=Br.registry.unregister,n.unregisterConnector=Oi.registry.unregister,n.unregisterAnchor=As.registry.unregister,n.unregisterEdgeAnchor=Os.registry.unregister,n.unregisterConnectionPoint=Ms.registry.unregister}(q||(q={}));var t8=function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},n8=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class $s extends Ye{}(function(n){class e extends kt{init(){super.init(),this.cell.on("change:*",this.onCellChangeAny,this)}onCellChangeAny({key:r}){const i=n.shapeMaps[this.cell.shape];if(i){const{effect:s}=i;(!s||s.includes(r))&&this.renderHTMLComponent()}}confirmUpdate(r){const i=super.confirmUpdate(r);return this.handleAction(i,e.action,()=>this.renderHTMLComponent())}renderHTMLComponent(){const r=this.selectors&&this.selectors.foContent;if(r){$o(r);const i=n.shapeMaps[this.cell.shape];if(!i)return;let{html:s}=i;typeof s=="function"&&(s=s(this.cell)),s&&(typeof s=="string"?r.innerHTML=s:zn(r,s))}}dispose(){this.cell.off("change:*",this.onCellChangeAny,this)}}t8([e.dispose()],e.prototype,"dispose",null),n.View=e,function(t){t.action="html",t.config({bootstrap:[t.action],actions:{html:t.action}}),kt.registry.register("html-view",t,!0)}(e=n.View||(n.View={}))})($s||($s={})),function(n){n.config({view:"html-view",markup:[{tagName:"rect",selector:"body"},Object.assign({},Ee.getForeignObjectMarkup()),{tagName:"text",selector:"label"}],attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}}}),Ye.registry.register("html",n,!0)}($s||($s={})),function(n){n.shapeMaps={};function e(t){const{shape:r,html:i,effect:s,inherit:o}=t,a=n8(t,["shape","html","effect","inherit"]);if(!r)throw new Error("should specify shape in config");n.shapeMaps[r]={html:i,effect:s},q.registerNode(r,Object.assign({inherit:o||"html"},a),!0)}n.register=e}($s||($s={}));const r8=`.x6-widget-minimap {
  position: relative;
  display: table-cell;
  box-sizing: border-box;
  overflow: hidden;
  text-align: center;
  vertical-align: middle;
  background-color: #fff;
  user-select: none;
}
.x6-widget-minimap .x6-graph {
  display: inline-block;
  box-shadow: 0 0 4px 0 #eee;
  cursor: pointer;
}
.x6-widget-minimap .x6-graph > svg {
  pointer-events: none;
  shape-rendering: optimizespeed;
}
.x6-widget-minimap .x6-graph .x6-node * {
  /* stylelint-disable-next-line */
  vector-effect: initial;
}
.x6-widget-minimap-viewport {
  position: absolute;
  box-sizing: content-box !important;
  margin: -2px 0 0 -2px;
  border: 2px solid #31d0c6;
  cursor: move;
}
.x6-widget-minimap-viewport-zoom {
  position: absolute;
  right: 0;
  bottom: 0;
  box-sizing: border-box;
  width: 12px;
  height: 12px;
  margin: 0 -6px -6px 0;
  background-color: #fff;
  border: 2px solid #31d0c6;
  border-radius: 50%;
  cursor: nwse-resize;
}
`;var i8=function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};class Jw extends ge{get scroller(){return this.graph.getPlugin("scroller")}get graphContainer(){return this.scroller?this.scroller.container:this.graph.container}constructor(e){super(),this.name="minimap",this.options=Object.assign(Object.assign({},pc.defaultOptions),e),Ho(this.name,r8)}init(e){this.graph=e,this.updateViewport=Rh(this.updateViewport.bind(this),0),this.container=document.createElement("div"),J(this.container,this.prefixClassName(ra.root));const t=document.createElement("div");this.container.appendChild(t),this.viewport=document.createElement("div"),J(this.viewport,this.prefixClassName(ra.viewport)),this.options.scalable&&(this.zoomHandle=document.createElement("div"),J(this.zoomHandle,this.prefixClassName(ra.zoom)),Tr(this.zoomHandle,this.viewport)),zn(this.container,this.viewport),ye(this.container,{width:this.options.width,height:this.options.height,padding:this.options.padding}),this.options.container&&this.options.container.appendChild(this.container),this.sourceGraph=this.graph;const r=Object.assign(Object.assign({},this.options.graphOptions),{container:t,model:this.sourceGraph.model,interacting:!1,grid:!1,background:!1,embedding:!1});this.targetGraph=this.options.createGraph?this.options.createGraph(r):new q(r),this.updatePaper(this.sourceGraph.options.width,this.sourceGraph.options.height),this.startListening()}startListening(){this.scroller?Pe.on(this.graphContainer,`scroll${this.getEventNamespace()}`,this.updateViewport):(this.sourceGraph.on("translate",this.onTransform,this),this.sourceGraph.on("scale",this.onTransform,this),this.sourceGraph.on("model:updated",this.onModelUpdated,this)),this.sourceGraph.on("resize",this.updatePaper,this),this.delegateEvents({mousedown:"startAction",touchstart:"startAction",[`mousedown .${this.prefixClassName("graph")}`]:"scrollTo",[`touchstart .${this.prefixClassName("graph")}`]:"scrollTo"})}stopListening(){this.scroller?Pe.off(this.graphContainer,this.getEventNamespace()):(this.sourceGraph.off("translate",this.onTransform,this),this.sourceGraph.off("scale",this.onTransform,this),this.sourceGraph.off("model:updated",this.onModelUpdated,this)),this.sourceGraph.off("resize",this.updatePaper,this),this.undelegateEvents()}onRemove(){this.stopListening(),this.targetGraph.dispose(!1)}onTransform(e){(e.ui||this.targetGraphTransforming)&&this.updateViewport()}onModelUpdated(){this.targetGraph.zoomToFit()}updatePaper(e,t){let r,i;typeof e=="object"?(r=e.width,i=e.height):(r=e,i=t);const s=this.sourceGraph.options,o=this.sourceGraph.transform.getScale(),a=this.options.width-2*this.options.padding,l=this.options.height-2*this.options.padding;r/=o.sx,i/=o.sy,this.ratio=Math.min(a/r,l/i);const c=this.ratio,u=s.x*c/o.sx,h=s.y*c/o.sy;return r*=c,i*=c,this.targetGraph.resize(r,i),this.targetGraph.translate(u,h),this.scroller?this.targetGraph.scale(c,c):this.targetGraph.zoomToFit(),this.updateViewport(),this}updateViewport(){const e=this.sourceGraph.transform.getScale(),t=this.targetGraph.transform.getScale();let r=null;this.scroller?r=this.scroller.clientToLocalPoint(0,0):r=this.graph.graphToLocal(0,0);const i=aq(this.targetGraph.container),s=this.targetGraph.translate();s.ty=s.ty||0,this.geometry={top:i.top+r.y*t.sy+s.ty,left:i.left+r.x*t.sx+s.tx,width:this.graphContainer.clientWidth*t.sx/e.sx,height:this.graphContainer.clientHeight*t.sy/e.sy},ye(this.viewport,this.geometry)}startAction(e){const t=this.normalizeEvent(e),r=t.target===this.zoomHandle?"zooming":"panning",{tx:i,ty:s}=this.sourceGraph.translate(),o={action:r,clientX:t.clientX,clientY:t.clientY,scrollLeft:this.graphContainer.scrollLeft,scrollTop:this.graphContainer.scrollTop,zoom:this.sourceGraph.zoom(),scale:this.sourceGraph.transform.getScale(),geometry:this.geometry,translateX:i,translateY:s};this.targetGraphTransforming=!0,this.delegateDocumentEvents(pc.documentEvents,o)}doAction(e){const t=this.normalizeEvent(e),r=t.clientX,i=t.clientY,s=t.data;switch(s.action){case"panning":{const o=this.sourceGraph.transform.getScale(),a=(r-s.clientX)*o.sx,l=(i-s.clientY)*o.sy;this.scroller?(this.graphContainer.scrollLeft=s.scrollLeft+a/this.ratio,this.graphContainer.scrollTop=s.scrollTop+l/this.ratio):this.sourceGraph.translate(s.translateX-a/this.ratio,s.translateY-l/this.ratio);break}case"zooming":{const o=s.scale,a=s.geometry,l=1+(s.clientX-r)/a.width/o.sx;s.frameId&&cancelAnimationFrame(s.frameId),s.frameId=requestAnimationFrame(()=>{this.sourceGraph.zoom(l*s.zoom,{absolute:!0,minScale:this.options.minScale,maxScale:this.options.maxScale})});break}}}stopAction(){this.undelegateDocumentEvents(),this.targetGraphTransforming=!1}scrollTo(e){const t=this.normalizeEvent(e);let r,i;const s=this.targetGraph.translate();if(s.ty=s.ty||0,t.offsetX==null){const l=Vo(this.targetGraph.container);r=t.pageX-l.left,i=t.pageY-l.top}else r=t.offsetX,i=t.offsetY;const o=(r-s.tx)/this.ratio,a=(i-s.ty)/this.ratio;this.sourceGraph.centerPoint(o,a)}dispose(){this.remove(),Uo(this.name)}}i8([ge.dispose()],Jw.prototype,"dispose",null);var ra;(function(n){n.root="widget-minimap",n.viewport=`${n.root}-viewport`,n.zoom=`${n.viewport}-zoom`})(ra||(ra={}));var pc;(function(n){n.defaultOptions={width:300,height:200,padding:10,scalable:!0,minScale:.01,maxScale:16,graphOptions:{},createGraph:e=>new q(e)},n.documentEvents={mousemove:"doAction",touchmove:"doAction",mouseup:"stopAction",touchend:"stopAction"}})(pc||(pc={}));var s8=function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},o8=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class it extends ge{get graph(){return this.options.graph}get model(){return this.graph.model}constructor(e){super(),this.padding={left:0,top:0,right:0,bottom:0},this.options=it.getOptions(e),this.onUpdate=Rh(this.onUpdate,200);const t=this.graph.transform.getScale();this.sx=t.sx,this.sy=t.sy;const r=this.options.width||this.graph.options.width,i=this.options.height||this.graph.options.height;this.container=document.createElement("div"),J(this.container,this.prefixClassName(it.containerClass)),ye(this.container,{width:r,height:i}),this.options.pageVisible&&J(this.container,this.prefixClassName(it.pagedClass)),this.options.className&&J(this.container,this.options.className);const s=this.graph.container;s.parentNode&&Io(s,this.container),this.content=document.createElement("div"),J(this.content,this.prefixClassName(it.contentClass)),ye(this.content,{width:this.graph.options.width,height:this.graph.options.height}),this.background=document.createElement("div"),J(this.background,this.prefixClassName(it.backgroundClass)),zn(this.content,this.background),this.options.pageVisible||zn(this.content,this.graph.view.grid),zn(this.content,s),Tr(this.content,this.container),this.startListening(),this.options.pageVisible||this.graph.grid.update(),this.backgroundManager=new it.Background(this),this.options.autoResize||this.update()}startListening(){const e=this.graph,t=this.model;e.on("scale",this.onScale,this),e.on("resize",this.onResize,this),e.on("before:print",this.storeScrollPosition,this),e.on("before:export",this.storeScrollPosition,this),e.on("after:print",this.restoreScrollPosition,this),e.on("after:export",this.restoreScrollPosition,this),t.on("reseted",this.onUpdate,this),t.on("cell:added",this.onUpdate,this),t.on("cell:removed",this.onUpdate,this),t.on("cell:changed",this.onUpdate,this),this.delegateBackgroundEvents()}stopListening(){const e=this.graph,t=this.model;e.off("scale",this.onScale,this),e.off("resize",this.onResize,this),e.off("beforeprint",this.storeScrollPosition,this),e.off("beforeexport",this.storeScrollPosition,this),e.off("afterprint",this.restoreScrollPosition,this),e.off("afterexport",this.restoreScrollPosition,this),t.off("reseted",this.onUpdate,this),t.off("cell:added",this.onUpdate,this),t.off("cell:removed",this.onUpdate,this),t.off("cell:changed",this.onUpdate,this),this.undelegateBackgroundEvents()}enableAutoResize(){this.options.autoResize=!0}disableAutoResize(){this.options.autoResize=!1}onUpdate(){this.options.autoResize&&this.update()}delegateBackgroundEvents(e){const t=e||xn.events;this.delegatedHandlers=Object.keys(t).reduce((r,i)=>{const s=t[i];if(i.indexOf(" ")===-1)if(typeof s=="function")r[i]=s;else{let o=this.graph.view[s];typeof o=="function"&&(o=o.bind(this.graph.view),r[i]=o)}return r},{}),this.onBackgroundEvent=this.onBackgroundEvent.bind(this),Object.keys(this.delegatedHandlers).forEach(r=>{this.delegateEvent(r,{guarded:!1},this.onBackgroundEvent)})}undelegateBackgroundEvents(){Object.keys(this.delegatedHandlers).forEach(e=>{this.undelegateEvent(e,this.onBackgroundEvent)})}onBackgroundEvent(e){let t=!1;const r=e.target;if(this.options.pageVisible)this.options.background?t=this.background===r:t=this.content===r;else{const i=this.graph.view;t=i.background===r||i.grid===r}if(t){const i=this.delegatedHandlers[e.type];typeof i=="function"&&i.apply(this.graph,arguments)}}onResize(){this.cachedCenterPoint&&(this.centerPoint(this.cachedCenterPoint.x,this.cachedCenterPoint.y),this.updatePageBreak())}onScale({sx:e,sy:t,ox:r,oy:i}){this.updateScale(e,t),(r||i)&&(this.centerPoint(r,i),this.updatePageBreak()),typeof this.options.autoResizeOptions=="function"&&this.update()}storeScrollPosition(){this.cachedScrollLeft=this.container.scrollLeft,this.cachedScrollTop=this.container.scrollTop}restoreScrollPosition(){this.container.scrollLeft=this.cachedScrollLeft,this.container.scrollTop=this.cachedScrollTop,this.cachedScrollLeft=null,this.cachedScrollTop=null}storeClientSize(){this.cachedClientSize={width:this.container.clientWidth,height:this.container.clientHeight}}restoreClientSize(){this.cachedClientSize=null}beforeManipulation(){(en.IS_IE||en.IS_EDGE)&&ye(this.container,{visibility:"hidden"})}afterManipulation(){(en.IS_IE||en.IS_EDGE)&&ye(this.container,{visibility:"visible"})}updatePageSize(e,t){e!=null&&(this.options.pageWidth=e),t!=null&&(this.options.pageHeight=t),this.updatePageBreak()}updatePageBreak(){if(this.pageBreak&&this.pageBreak.parentNode&&this.pageBreak.parentNode.removeChild(this.pageBreak),this.pageBreak=null,this.options.pageVisible&&this.options.pageBreak){const e=this.graph.options.width,t=this.graph.options.height,r=this.options.pageWidth*this.sx,i=this.options.pageHeight*this.sy;if(r===0||i===0)return;if(e>r||t>i){let s=!1;const o=document.createElement("div");for(let a=1,l=Math.floor(e/r);a<l;a+=1){const c=document.createElement("div");J(c,this.prefixClassName("graph-pagebreak-vertical")),ye(c,{left:a*r}),Tr(c,o),s=!0}for(let a=1,l=Math.floor(t/i);a<l;a+=1){const c=document.createElement("div");J(c,this.prefixClassName("graph-pagebreak-horizontal")),ye(c,{top:a*i}),Tr(c,o),s=!0}s&&(J(o,this.prefixClassName("graph-pagebreak")),C4(this.graph.view.grid,o),this.pageBreak=o)}}}update(){const e=this.getClientSize();this.cachedCenterPoint=this.clientToLocalPoint(e.width/2,e.height/2);let t=this.options.autoResizeOptions;typeof t=="function"&&(t=K(t,this,this));const r=Object.assign({gridWidth:this.options.pageWidth,gridHeight:this.options.pageHeight,allowNewOrigin:"negative"},t);this.graph.fitToContent(this.getFitToContentOptions(r))}getFitToContentOptions(e){const t=this.sx,r=this.sy;return e.gridWidth&&(e.gridWidth*=t),e.gridHeight&&(e.gridHeight*=r),e.minWidth&&(e.minWidth*=t),e.minHeight&&(e.minHeight*=r),typeof e.padding=="object"?e.padding={left:(e.padding.left||0)*t,right:(e.padding.right||0)*t,top:(e.padding.top||0)*r,bottom:(e.padding.bottom||0)*r}:typeof e.padding=="number"&&(e.padding*=t),this.options.autoResize||(e.contentArea=D.create()),e}updateScale(e,t){const r=this.graph.options,i=e/this.sx,s=t/this.sy;this.sx=e,this.sy=t,this.graph.translate(r.x*i,r.y*s),this.graph.transform.resize(r.width*i,r.height*s)}scrollbarPosition(e,t){if(e==null&&t==null)return{left:this.container.scrollLeft,top:this.container.scrollTop};const r={};return typeof e=="number"&&(r.scrollLeft=e),typeof t=="number"&&(r.scrollTop=t),ef(this.container,r),this}scrollToPoint(e,t){const r=this.getClientSize(),i=this.graph.matrix(),s={};return typeof e=="number"&&(s.scrollLeft=e-r.width/2+i.e+(this.padding.left||0)),typeof t=="number"&&(s.scrollTop=t-r.height/2+i.f+(this.padding.top||0)),ef(this.container,s),this}scrollToContent(){const e=this.sx,t=this.sy,r=this.graph.getContentArea().getCenter();return this.scrollToPoint(r.x*e,r.y*t)}scrollToCell(e){const t=this.sx,r=this.sy,i=e.getBBox().getCenter();return this.scrollToPoint(i.x*t,i.y*r)}center(e){return this.centerPoint(e)}centerPoint(e,t,r){const i=this.graph.matrix(),s=i.a,o=i.d,a=-i.e,l=-i.f,c=a+this.graph.options.width,u=l+this.graph.options.height;let h;if(this.storeClientSize(),typeof e=="number"||typeof t=="number"){h=r;const x=this.getVisibleArea().getCenter();typeof e=="number"?e*=s:e=x.x,typeof t=="number"?t*=o:t=x.y}else h=e,e=(a+c)/2,t=(l+u)/2;if(h&&h.padding)return this.positionPoint({x:e,y:t},"50%","50%",h);const f=this.getPadding(),d=this.getClientSize(),g=d.width/2,p=d.height/2,b=g-f.left-e+a,m=g-f.right+e-c,y=p-f.top-t+l,v=p-f.bottom+t-u;this.addPadding(Math.max(b,0),Math.max(m,0),Math.max(y,0),Math.max(v,0));const w=this.scrollToPoint(e,t);return this.restoreClientSize(),w}centerContent(e){return this.positionContent("center",e)}centerCell(e,t){return this.positionCell(e,"center",t)}positionContent(e,t){const r=this.graph.getContentArea(t);return this.positionRect(r,e,t)}positionCell(e,t,r){const i=e.getBBox();return this.positionRect(i,t,r)}positionRect(e,t,r){const i=D.create(e);switch(t){case"center":return this.positionPoint(i.getCenter(),"50%","50%",r);case"top":return this.positionPoint(i.getTopCenter(),"50%",0,r);case"top-right":return this.positionPoint(i.getTopRight(),"100%",0,r);case"right":return this.positionPoint(i.getRightMiddle(),"100%","50%",r);case"bottom-right":return this.positionPoint(i.getBottomRight(),"100%","100%",r);case"bottom":return this.positionPoint(i.getBottomCenter(),"50%","100%",r);case"bottom-left":return this.positionPoint(i.getBottomLeft(),0,"100%",r);case"left":return this.positionPoint(i.getLeftMiddle(),0,"50%",r);case"top-left":return this.positionPoint(i.getTopLeft(),0,0,r);default:return this}}positionPoint(e,t,r,i={}){const{padding:s}=i,o=o8(i,["padding"]),a=Bn(s),l=D.fromSize(this.getClientSize()),c=l.clone().moveAndExpand({x:a.left,y:a.top,width:-a.right-a.left,height:-a.top-a.bottom});t=Vt(t,Math.max(0,c.width)),t<0&&(t=c.width+t),r=Vt(r,Math.max(0,c.height)),r<0&&(r=c.height+r);const u=c.getTopLeft().translate(t,r),h=l.getCenter().diff(u),f=this.zoom(),d=h.scale(1/f,1/f),g=P.create(e).translate(d);return this.centerPoint(g.x,g.y,o)}zoom(e,t){if(e==null)return this.sx;t=t||{};let r,i;const s=this.getClientSize(),o=this.clientToLocalPoint(s.width/2,s.height/2);let a=e,l=e;if(t.absolute||(a+=this.sx,l+=this.sy),t.scaleGrid&&(a=Math.round(a/t.scaleGrid)*t.scaleGrid,l=Math.round(l/t.scaleGrid)*t.scaleGrid),t.maxScale&&(a=Math.min(t.maxScale,a),l=Math.min(t.maxScale,l)),t.minScale&&(a=Math.max(t.minScale,a),l=Math.max(t.minScale,l)),a=this.graph.transform.clampScale(a),l=this.graph.transform.clampScale(l),t.center){const c=a/this.sx,u=l/this.sy;r=t.center.x-(t.center.x-o.x)/c,i=t.center.y-(t.center.y-o.y)/u}else r=o.x,i=o.y;return this.beforeManipulation(),this.graph.transform.scale(a,l),this.centerPoint(r,i),this.afterManipulation(),this}zoomToRect(e,t={}){const r=D.create(e),i=this.graph;if(t.contentArea=r,t.viewportArea==null){const o=this.container.getBoundingClientRect();t.viewportArea={x:i.options.x,y:i.options.y,width:o.width,height:o.height}}this.beforeManipulation(),i.transform.scaleContentToFitImpl(t,!1);const s=r.getCenter();return this.centerPoint(s.x,s.y),this.afterManipulation(),this}zoomToFit(e={}){return this.zoomToRect(this.graph.getContentArea(e),e)}transitionToPoint(e,t,r){typeof e=="object"?(r=t,t=e.y,e=e.x):t=t,r==null&&(r={});let i,s;const o=this.sx,a=Math.max(r.scale||o,1e-6),l=this.getClientSize(),c=new P(e,t),u=this.clientToLocalPoint(l.width/2,l.height/2);if(o===a){const f=u.diff(c).scale(o,o).round();i=`translate(${f.x}px,${f.y}px)`}else{const f=a/(o-a)*c.distance(u),d=u.clone().move(c,f),g=this.localToBackgroundPoint(d).round();i=`scale(${a/o})`,s=`${g.x}px ${g.y}px`}const h=r.onTransitionEnd;return J(this.container,it.transitionClassName),Pe.off(this.content,it.transitionEventName),Pe.on(this.content,it.transitionEventName,f=>{this.syncTransition(a,{x:e,y:t}),typeof h=="function"&&K(h,this,f.originalEvent)}),ye(this.content,{transform:i,transformOrigin:s,transition:"transform",transitionDuration:r.duration||"1s",transitionDelay:r.delay,transitionTimingFunction:r.timing}),this}syncTransition(e,t){return this.beforeManipulation(),this.graph.scale(e),this.removeTransition(),this.centerPoint(t.x,t.y),this.afterManipulation(),this}removeTransition(){return yt(this.container,it.transitionClassName),Pe.off(this.content,it.transitionEventName),ye(this.content,{transform:"",transformOrigin:"",transition:"",transitionDuration:"",transitionDelay:"",transitionTimingFunction:""}),this}transitionToRect(e,t={}){const r=D.create(e),i=t.maxScale||1/0,s=t.minScale||Number.MIN_VALUE,o=t.scaleGrid||null,a=t.visibility||1,l=t.center?P.create(t.center):r.getCenter(),c=this.getClientSize(),u=c.width*a,h=c.height*a;let f=new D(l.x-u/2,l.y-h/2,u,h).getMaxUniformScaleToFit(r,l);return f=Math.min(f,i),o&&(f=Math.floor(f/o)*o),f=Math.max(s,f),this.transitionToPoint(l,Object.assign({scale:f},t))}startPanning(e){const t=this.normalizeEvent(e);this.clientX=t.clientX,this.clientY=t.clientY,this.trigger("pan:start",{e:t}),Pe.on(document.body,{"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),Pe.on(window,"mouseup.panning",this.stopPanning.bind(this))}pan(e){const t=this.normalizeEvent(e),r=t.clientX-this.clientX,i=t.clientY-this.clientY;this.container.scrollTop-=i,this.container.scrollLeft-=r,this.clientX=t.clientX,this.clientY=t.clientY,this.trigger("panning",{e:t})}stopPanning(e){Pe.off(document.body,".panning"),Pe.off(window,".panning"),this.trigger("pan:stop",{e})}clientToLocalPoint(e,t){let r=typeof e=="object"?e.x:e,i=typeof e=="object"?e.y:t;const s=this.graph.matrix();return r+=this.container.scrollLeft-this.padding.left-s.e,i+=this.container.scrollTop-this.padding.top-s.f,new P(r/s.a,i/s.d)}localToBackgroundPoint(e,t){const r=typeof e=="object"?P.create(e):new P(e,t),i=this.graph.matrix(),s=this.padding;return de.transformPoint(r,i).translate(s.left,s.top)}resize(e,t){let r=e!=null?e:this.container.offsetWidth,i=t!=null?t:this.container.offsetHeight;typeof r=="number"&&(r=Math.round(r)),typeof i=="number"&&(i=Math.round(i)),this.options.width=r,this.options.height=i,ye(this.container,{width:r,height:i}),this.update()}getClientSize(){return this.cachedClientSize?this.cachedClientSize:{width:this.container.clientWidth,height:this.container.clientHeight}}autoScroll(e,t){const i=this.container,s=i.getBoundingClientRect();let o=0,a=0;return e<=s.left+10&&(o=-10),t<=s.top+10&&(a=-10),e>=s.right-10&&(o=10),t>=s.bottom-10&&(a=10),o!==0&&(i.scrollLeft+=o),a!==0&&(i.scrollTop+=a),{scrollerX:o,scrollerY:a}}addPadding(e,t,r,i){let s=this.getPadding();this.padding={left:Math.round(s.left+(e||0)),top:Math.round(s.top+(r||0)),bottom:Math.round(s.bottom+(i||0)),right:Math.round(s.right+(t||0))},s=this.padding,ye(this.content,{width:s.left+this.graph.options.width+s.right,height:s.top+this.graph.options.height+s.bottom});const o=this.graph.container;return o.style.left=`${this.padding.left}px`,o.style.top=`${this.padding.top}px`,this}getPadding(){const e=this.options.padding;return Bn(typeof e=="function"?K(e,this,this):e)}getVisibleArea(){const e=this.graph.matrix(),t=this.getClientSize(),r={x:this.container.scrollLeft||0,y:this.container.scrollTop||0,width:t.width,height:t.height},i=de.transformRectangle(r,e.inverse());return i.x-=(this.padding.left||0)/this.sx,i.y-=(this.padding.top||0)/this.sy,i}isCellVisible(e,t={}){const r=e.getBBox(),i=this.getVisibleArea();return t.strict?i.containsRect(r):i.isIntersectWithRect(r)}isPointVisible(e){return this.getVisibleArea().containsPoint(e)}lock(){return ye(this.container,{overflow:"hidden"}),this}unlock(){return ye(this.container,{overflow:"scroll"}),this}onRemove(){this.stopListening()}dispose(){Io(this.container,this.graph.container),this.remove()}}s8([ge.dispose()],it.prototype,"dispose",null),function(n){class e extends dc{get elem(){return this.scroller.background}constructor(r){super(r.graph),this.scroller=r,r.options.background&&this.draw(r.options.background)}init(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}updateBackgroundOptions(r){this.scroller.options.background=r}}n.Background=e}(it||(it={})),function(n){n.containerClass="graph-scroller",n.panningClass=`${n.containerClass}-panning`,n.pannableClass=`${n.containerClass}-pannable`,n.pagedClass=`${n.containerClass}-paged`,n.contentClass=`${n.containerClass}-content`,n.backgroundClass=`${n.containerClass}-background`,n.transitionClassName="transition-in-progress",n.transitionEventName="transitionend.graph-scroller-transition",n.defaultOptions={padding(){const t=this.getClientSize(),r=Math.max(this.options.minVisibleWidth||0,1)||1,i=Math.max(this.options.minVisibleHeight||0,1)||1,s=Math.max(t.width-r,0),o=Math.max(t.height-i,0);return{left:s,top:o,right:s,bottom:o}},minVisibleWidth:50,minVisibleHeight:50,pageVisible:!1,pageBreak:!1,autoResize:!0};function e(t){const r=Re({},n.defaultOptions,t);r.pageWidth==null&&(r.pageWidth=t.graph.options.width),r.pageHeight==null&&(r.pageHeight=t.graph.options.height);const i=t.graph.options;return i.background&&r.enabled&&r.background==null&&(r.background=i.background,t.graph.background.clear()),r}n.getOptions=e}(it||(it={}));const a8=`.x6-graph-scroller {
  position: relative;
  box-sizing: border-box;
  overflow: scroll;
  outline: none;
}
.x6-graph-scroller-content {
  position: relative;
}
.x6-graph-scroller-background {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-scroller .x6-graph {
  position: absolute;
  display: inline-block;
  margin: 0;
  box-shadow: none;
}
.x6-graph-scroller .x6-graph > svg {
  display: block;
}
.x6-graph-scroller.x6-graph-scroller-paged .x6-graph {
  box-shadow: 0 0 4px 0 #eee;
}
.x6-graph-scroller.x6-graph-scroller-pannable[data-panning='false'] {
  cursor: grab;
}
.x6-graph-scroller.x6-graph-scroller-pannable[data-panning='true'] {
  cursor: grabbing;
  user-select: none;
}
.x6-graph-pagebreak {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-pagebreak-vertical {
  position: absolute;
  top: 0;
  bottom: 0;
  box-sizing: border-box;
  width: 1px;
  border-left: 1px dashed #bdbdbd;
}
.x6-graph-pagebreak-horizontal {
  position: absolute;
  right: 0;
  left: 0;
  box-sizing: border-box;
  height: 1px;
  border-top: 1px dashed #bdbdbd;
}
`;q.prototype.lockScroller=function(){const n=this.getPlugin("scroller");return n&&n.lockScroller(),this},q.prototype.unlockScroller=function(){const n=this.getPlugin("scroller");return n&&n.unlockScroller(),this},q.prototype.updateScroller=function(){const n=this.getPlugin("scroller");return n&&n.updateScroller(),this},q.prototype.getScrollbarPosition=function(){const n=this.getPlugin("scroller");return n?n.getScrollbarPosition():{left:0,top:0}},q.prototype.setScrollbarPosition=function(n,e){const t=this.getPlugin("scroller");return t&&t.setScrollbarPosition(n,e),this};var l8=function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};class Qw extends mt{get pannable(){return this.options?typeof this.options.pannable=="object"?this.options.pannable.enabled:!!this.options.pannable:!1}get container(){return this.scrollerImpl.container}constructor(e={}){super(),this.name="scroller",this.options=e,Ho(this.name,a8)}init(e){this.graph=e;const t=it.getOptions(Object.assign(Object.assign({enabled:!0},this.options),{graph:e}));this.options=t,this.scrollerImpl=new it(t),this.setup(),this.startListening(),this.updateClassName(),this.scrollerImpl.center()}resize(e,t){this.scrollerImpl.resize(e,t)}resizePage(e,t){this.scrollerImpl.updatePageSize(e,t)}zoom(e,t){return typeof e=="undefined"?this.scrollerImpl.zoom():(this.scrollerImpl.zoom(e,t),this)}zoomTo(e,t={}){return this.scrollerImpl.zoom(e,Object.assign(Object.assign({},t),{absolute:!0})),this}zoomToRect(e,t={}){return this.scrollerImpl.zoomToRect(e,t),this}zoomToFit(e={}){return this.scrollerImpl.zoomToFit(e),this}center(e){return this.centerPoint(e)}centerPoint(e,t,r){return this.scrollerImpl.centerPoint(e,t,r),this}centerContent(e){return this.scrollerImpl.centerContent(e),this}centerCell(e,t){return this.scrollerImpl.centerCell(e,t),this}positionPoint(e,t,r,i={}){return this.scrollerImpl.positionPoint(e,t,r,i),this}positionRect(e,t,r){return this.scrollerImpl.positionRect(e,t,r),this}positionCell(e,t,r){return this.scrollerImpl.positionCell(e,t,r),this}positionContent(e,t){return this.scrollerImpl.positionContent(e,t),this}drawBackground(e,t){return(this.graph.options.background==null||!t)&&this.scrollerImpl.backgroundManager.draw(e),this}clearBackground(e){return(this.graph.options.background==null||!e)&&this.scrollerImpl.backgroundManager.clear(),this}isPannable(){return this.pannable}enablePanning(){this.pannable||(this.options.pannable=!0,this.updateClassName())}disablePanning(){this.pannable&&(this.options.pannable=!1,this.updateClassName())}togglePanning(e){return e==null?this.isPannable()?this.disablePanning():this.enablePanning():e!==this.isPannable()&&(e?this.enablePanning():this.disablePanning()),this}lockScroller(){return this.scrollerImpl.lock(),this}unlockScroller(){return this.scrollerImpl.unlock(),this}updateScroller(){return this.scrollerImpl.update(),this}getScrollbarPosition(){return this.scrollerImpl.scrollbarPosition()}setScrollbarPosition(e,t){return this.scrollerImpl.scrollbarPosition(e,t),this}scrollToPoint(e,t){return this.scrollerImpl.scrollToPoint(e,t),this}scrollToContent(){return this.scrollerImpl.scrollToContent(),this}scrollToCell(e){return this.scrollerImpl.scrollToCell(e),this}transitionToPoint(e,t,r){return this.scrollerImpl.transitionToPoint(e,t,r),this}transitionToRect(e,t={}){return this.scrollerImpl.transitionToRect(e,t),this}enableAutoResize(){this.scrollerImpl.enableAutoResize()}disableAutoResize(){this.scrollerImpl.disableAutoResize()}autoScroll(e,t){return this.scrollerImpl.autoScroll(e,t)}clientToLocalPoint(e,t){return this.scrollerImpl.clientToLocalPoint(e,t)}setup(){this.scrollerImpl.on("*",(e,t)=>{this.trigger(e,t)})}startListening(){let e=[];const t=this.options.pannable;typeof t=="object"?e=t.eventTypes||[]:e=["leftMouseDown"],e.includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),Pe.on(this.scrollerImpl.container,"mousedown",this.onRightMouseDown))}stopListening(){let e=[];const t=this.options.pannable;typeof t=="object"?e=t.eventTypes||[]:e=["leftMouseDown"],e.includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&Pe.off(this.scrollerImpl.container,"mousedown",this.onRightMouseDown)}onRightMouseDown(e){e.button===2&&this.allowPanning(e,!0)&&(this.updateClassName(!0),this.scrollerImpl.startPanning(e),this.scrollerImpl.once("pan:stop",()=>this.updateClassName(!1)))}preparePanning({e}){const t=this.allowPanning(e,!0),r=this.graph.getPlugin("selection"),i=r&&r.allowRubberband(e,!0);(t||this.allowPanning(e)&&!i)&&(this.updateClassName(!0),this.scrollerImpl.startPanning(e),this.scrollerImpl.once("pan:stop",()=>this.updateClassName(!1)))}allowPanning(e,t){return this.pannable&&ir.isMatch(e,this.options.modifiers,t)}updateClassName(e){const t=this.scrollerImpl.container,r=rn.prefix("graph-scroller-pannable");this.pannable?(J(t,r),t.dataset.panning=(!!e).toString()):yt(t,r)}dispose(){this.scrollerImpl.dispose(),this.stopListening(),this.off(),Uo(this.name)}}l8([mt.dispose()],Qw.prototype,"dispose",null);var c8=function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};class Zw extends ge{get graph(){return this.options.graph}get boxClassName(){return this.prefixClassName($t.classNames.box)}get $boxes(){return P4(this.container,this.boxClassName)}get handleOptions(){return this.options}constructor(e){super(),this.options=e,this.options.model&&(this.options.collection=this.options.model.collection),this.options.collection?this.collection=this.options.collection:(this.collection=new fc([],{comparator:$t.depthComparator}),this.options.collection=this.collection),this.boxCount=0,this.createContainer(),this.startListening()}startListening(){const e=this.graph,t=this.collection;this.delegateEvents({[`mousedown .${this.boxClassName}`]:"onSelectionBoxMouseDown",[`touchstart .${this.boxClassName}`]:"onSelectionBoxMouseDown"},!0),e.on("scale",this.onGraphTransformed,this),e.on("translate",this.onGraphTransformed,this),e.model.on("updated",this.onModelUpdated,this),t.on("added",this.onCellAdded,this),t.on("removed",this.onCellRemoved,this),t.on("reseted",this.onReseted,this),t.on("updated",this.onCollectionUpdated,this),t.on("node:change:position",this.onNodePositionChanged,this),t.on("cell:changed",this.onCellChanged,this)}stopListening(){const e=this.graph,t=this.collection;this.undelegateEvents(),e.off("scale",this.onGraphTransformed,this),e.off("translate",this.onGraphTransformed,this),e.model.off("updated",this.onModelUpdated,this),t.off("added",this.onCellAdded,this),t.off("removed",this.onCellRemoved,this),t.off("reseted",this.onReseted,this),t.off("updated",this.onCollectionUpdated,this),t.off("node:change:position",this.onNodePositionChanged,this),t.off("cell:changed",this.onCellChanged,this)}onRemove(){this.stopListening()}onGraphTransformed(){this.updateSelectionBoxes()}onCellChanged(){this.updateSelectionBoxes()}onNodePositionChanged({node:e,options:t}){const{showNodeSelectionBox:r,pointerEvents:i}=this.options,{ui:s,selection:o,translateBy:a,snapped:l}=t,c=(r!==!0||i==="none")&&!this.translating&&!o,u=s&&a&&e.id===a;if(c&&(u||l)){this.translating=!0;const h=e.position(),f=e.previous("position"),d=h.x-f.x,g=h.y-f.y;(d!==0||g!==0)&&this.translateSelectedNodes(d,g,e,t),this.translating=!1}}onModelUpdated({removed:e}){e&&e.length&&this.unselect(e)}isEmpty(){return this.length<=0}isSelected(e){return this.collection.has(e)}get length(){return this.collection.length}get cells(){return this.collection.toArray()}select(e,t={}){t.dryrun=!0;const r=this.filter(Array.isArray(e)?e:[e]);return this.collection.add(r,t),this}unselect(e,t={}){return t.dryrun=!0,this.collection.remove(Array.isArray(e)?e:[e],t),this}reset(e,t={}){if(e){if(t.batch){const c=this.filter(Array.isArray(e)?e:[e]);return this.collection.reset(c,Object.assign(Object.assign({},t),{ui:!0})),this}const r=this.cells,i=this.filter(Array.isArray(e)?e:[e]),s={},o={};r.forEach(c=>s[c.id]=c),i.forEach(c=>o[c.id]=c);const a=[],l=[];return i.forEach(c=>{s[c.id]||a.push(c)}),r.forEach(c=>{o[c.id]||l.push(c)}),l.length&&this.unselect(l,Object.assign(Object.assign({},t),{ui:!0})),a.length&&this.select(a,Object.assign(Object.assign({},t),{ui:!0})),l.length===0&&a.length===0&&this.updateContainer(),this}return this.clean(t)}clean(e={}){return this.length&&(e.batch===!1?this.unselect(this.cells,e):this.collection.reset([],Object.assign(Object.assign({},e),{ui:!0}))),this}setFilter(e){this.options.filter=e}setContent(e){this.options.content=e}startSelecting(e){e=this.normalizeEvent(e),this.clean();let t,r;const i=this.graph.container;if(e.offsetX!=null&&e.offsetY!=null&&i.contains(e.target))t=e.offsetX,r=e.offsetY;else{const s=Vo(i),o=i.scrollLeft,a=i.scrollTop;t=e.clientX-s.left+window.pageXOffset+o,r=e.clientY-s.top+window.pageYOffset+a}ye(this.container,{top:r,left:t,width:1,height:1}),this.setEventData(e,{action:"selecting",clientX:e.clientX,clientY:e.clientY,offsetX:t,offsetY:r,scrollerX:0,scrollerY:0,moving:!1}),this.delegateDocumentEvents($t.documentEvents,e.data)}filter(e){const t=this.options.filter;return e.filter(r=>Array.isArray(t)?t.some(i=>typeof i=="string"?r.shape===i:r.id===i.id):typeof t=="function"?K(t,this.graph,r):!0)}stopSelecting(e){const t=this.graph,r=this.getEventData(e);switch(r.action){case"selecting":{let s=sq(this.container),o=oq(this.container);const a=Vo(this.container),l=t.pageToLocal(a.left,a.top),c=t.transform.getScale();s/=c.sx,o/=c.sy;const u=new D(l.x,l.y,s,o),h=this.getCellViewsInArea(u).map(f=>f.cell);this.reset(h,{batch:!0}),this.hideRubberband();break}case"translating":{const s=t.snapToGrid(e.clientX,e.clientY);if(!this.options.following){const o=r;this.updateSelectedNodesPosition({dx:o.clientX-o.originX,dy:o.clientY-o.originY})}this.graph.model.stopBatch("move-selection"),this.notifyBoxEvent("box:mouseup",e,s.x,s.y);break}default:{this.clean();break}}}onMouseUp(e){this.getEventData(e).action&&(this.stopSelecting(e),this.undelegateDocumentEvents())}onSelectionBoxMouseDown(e){this.options.following||e.stopPropagation();const t=this.normalizeEvent(e);this.options.movable&&this.startTranslating(t);const r=this.getCellViewFromElem(t.target);this.setEventData(t,{activeView:r});const i=this.graph.snapToGrid(t.clientX,t.clientY);this.notifyBoxEvent("box:mousedown",t,i.x,i.y),this.delegateDocumentEvents($t.documentEvents,t.data)}startTranslating(e){this.graph.model.startBatch("move-selection");const t=this.graph.snapToGrid(e.clientX,e.clientY);this.setEventData(e,{action:"translating",clientX:t.x,clientY:t.y,originX:t.x,originY:t.y})}getRestrictArea(){const e=this.graph.options.translating.restrict,t=typeof e=="function"?K(e,this.graph,null):e;return typeof t=="number"?this.graph.transform.getGraphArea().inflate(t):t===!0?this.graph.transform.getGraphArea():t||null}getSelectionOffset(e,t){let r=e.x-t.clientX,i=e.y-t.clientY;const s=this.getRestrictArea();if(s){const o=this.collection.toArray(),a=le.getCellsBBox(o,{deep:!0})||D.create(),l=s.x-a.x,c=s.y-a.y,u=s.x+s.width-(a.x+a.width),h=s.y+s.height-(a.y+a.height);if(r<l&&(r=l),i<c&&(i=c),u<r&&(r=u),h<i&&(i=h),!this.options.following){const f=e.x-t.originX,d=e.y-t.originY;r=f<=l||f>=u?0:r,i=d<=c||d>=h?0:i}}return{dx:r,dy:i}}updateElementPosition(e,t,r){const i=ye(e,"left"),s=ye(e,"top"),o=i?parseFloat(i):0,a=s?parseFloat(s):0;ye(e,"left",o+t),ye(e,"top",a+r)}updateSelectedNodesPosition(e){const{dx:t,dy:r}=e;if(t||r)if(this.translateSelectedNodes(t,r),this.boxesUpdated)this.collection.length>1&&this.updateSelectionBoxes();else{const i=this.graph.transform.getScale();for(let s=0,o=this.$boxes,a=o.length;s<a;s+=1)this.updateElementPosition(o[s],t*i.sx,r*i.sy);this.updateElementPosition(this.selectionContainer,t*i.sx,r*i.sy)}}autoScrollGraph(e,t){const r=this.graph.getPlugin("scroller");return r?r.autoScroll(e,t):{scrollerX:0,scrollerY:0}}adjustSelection(e){const t=this.normalizeEvent(e),r=this.getEventData(t);switch(r.action){case"selecting":{const s=r;s.moving!==!0&&(Tr(this.container,this.graph.container),this.showRubberband(),s.moving=!0);const{scrollerX:o,scrollerY:a}=this.autoScrollGraph(t.clientX,t.clientY);s.scrollerX+=o,s.scrollerY+=a;const l=t.clientX-s.clientX+s.scrollerX,c=t.clientY-s.clientY+s.scrollerY,u=parseInt(ye(this.container,"left")||"0",10),h=parseInt(ye(this.container,"top")||"0",10);ye(this.container,{left:l<0?s.offsetX+l:u,top:c<0?s.offsetY+c:h,width:Math.abs(l),height:Math.abs(c)});break}case"translating":{const s=this.graph.snapToGrid(t.clientX,t.clientY),o=r,a=this.getSelectionOffset(s,o);this.options.following?this.updateSelectedNodesPosition(a):this.updateContainerPosition(a),a.dx&&(o.clientX=s.x),a.dy&&(o.clientY=s.y),this.notifyBoxEvent("box:mousemove",e,s.x,s.y);break}}this.boxesUpdated=!1}translateSelectedNodes(e,t,r,i){const s={},o=[];if(r&&(s[r.id]=!0),this.collection.toArray().forEach(a=>{a.getDescendants({deep:!0}).forEach(l=>{s[l.id]=!0})}),i&&i.translateBy){const a=this.graph.getCellById(i.translateBy);a&&(s[a.id]=!0,a.getDescendants({deep:!0}).forEach(l=>{s[l.id]=!0}),o.push(a))}this.collection.toArray().forEach(a=>{if(!s[a.id]){const l=Object.assign(Object.assign({},i),{selection:this.cid,exclude:o});a.translate(e,t,l),this.graph.model.getConnectedEdges(a).forEach(c=>{s[c.id]||(c.translate(e,t,l),s[c.id]=!0)})}})}getCellViewsInArea(e){const t=this.graph,r={strict:this.options.strict};let i=[];return this.options.rubberNode&&(i=i.concat(t.model.getNodesInArea(e,r).map(s=>t.renderer.findViewByCell(s)).filter(s=>s!=null))),this.options.rubberEdge&&(i=i.concat(t.model.getEdgesInArea(e,r).map(s=>t.renderer.findViewByCell(s)).filter(s=>s!=null))),i}notifyBoxEvent(e,t,r,i){const o=this.getEventData(t).activeView;this.trigger(e,{e:t,view:o,x:r,y:i,cell:o.cell})}getSelectedClassName(e){return this.prefixClassName(`${e.isNode()?"node":"edge"}-selected`)}addCellSelectedClassName(e){const t=this.graph.renderer.findViewByCell(e);t&&t.addClass(this.getSelectedClassName(e))}removeCellUnSelectedClassName(e){const t=this.graph.renderer.findViewByCell(e);t&&t.removeClass(this.getSelectedClassName(e))}destroySelectionBox(e){this.removeCellUnSelectedClassName(e),this.canShowSelectionBox(e)&&(nr(this.container.querySelector(`[data-cell-id="${e.id}"]`)),this.$boxes.length===0&&this.hide(),this.boxCount=Math.max(0,this.boxCount-1))}destroyAllSelectionBoxes(e){e.forEach(t=>this.removeCellUnSelectedClassName(t)),this.hide(),nr(this.$boxes),this.boxCount=0}hide(){yt(this.container,this.prefixClassName($t.classNames.rubberband)),yt(this.container,this.prefixClassName($t.classNames.selected))}showRubberband(){J(this.container,this.prefixClassName($t.classNames.rubberband))}hideRubberband(){yt(this.container,this.prefixClassName($t.classNames.rubberband))}showSelected(){Kh(this.container,"style"),J(this.container,this.prefixClassName($t.classNames.selected))}createContainer(){this.container=document.createElement("div"),J(this.container,this.prefixClassName($t.classNames.root)),this.options.className&&J(this.container,this.options.className),this.selectionContainer=document.createElement("div"),J(this.selectionContainer,this.prefixClassName($t.classNames.inner)),this.selectionContent=document.createElement("div"),J(this.selectionContent,this.prefixClassName($t.classNames.content)),zn(this.selectionContainer,this.selectionContent),fe(this.selectionContainer,"data-selection-length",this.collection.length),y1(this.container,this.selectionContainer)}updateContainerPosition(e){(e.dx||e.dy)&&this.updateElementPosition(this.selectionContainer,e.dx,e.dy)}updateContainer(){const e={x:1/0,y:1/0},t={x:0,y:0};this.collection.toArray().filter(s=>this.canShowSelectionBox(s)).forEach(s=>{const o=this.graph.renderer.findViewByCell(s);if(o){const a=o.getBBox({useCellGeometry:!0});e.x=Math.min(e.x,a.x),e.y=Math.min(e.y,a.y),t.x=Math.max(t.x,a.x+a.width),t.y=Math.max(t.y,a.y+a.height)}}),ye(this.selectionContainer,{position:"absolute",pointerEvents:"none",left:e.x,top:e.y,width:t.x-e.x,height:t.y-e.y}),fe(this.selectionContainer,"data-selection-length",this.collection.length);const i=this.options.content;if(i)if(typeof i=="function"){const s=K(i,this.graph,this,this.selectionContent);s&&(this.selectionContent.innerHTML=s)}else this.selectionContent.innerHTML=i;this.collection.length>0&&!this.container.parentNode?Tr(this.container,this.graph.container):this.collection.length<=0&&this.container.parentNode&&this.container.parentNode.removeChild(this.container)}canShowSelectionBox(e){return e.isNode()&&this.options.showNodeSelectionBox===!0||e.isEdge()&&this.options.showEdgeSelectionBox===!0}createSelectionBox(e){if(this.addCellSelectedClassName(e),this.canShowSelectionBox(e)){const t=this.graph.renderer.findViewByCell(e);if(t){const r=t.getBBox({useCellGeometry:!0}),i=this.boxClassName,s=document.createElement("div");J(s,i),J(s,`${i}-${e.isNode()?"node":"edge"}`),fe(s,"data-cell-id",e.id),ye(s,{position:"absolute",left:r.x,top:r.y,width:r.width,height:r.height,pointerEvents:this.options.pointerEvents||"auto"}),Tr(s,this.container),this.showSelected(),this.boxCount+=1}}}updateSelectionBoxes(){this.collection.length>0&&(this.boxesUpdated=!0,this.confirmUpdate())}confirmUpdate(){if(this.boxCount){this.hide();for(let e=0,t=this.$boxes,r=t.length;e<r;e+=1){const i=t[e],s=fe(i,"data-cell-id");nr(i),this.boxCount-=1;const o=this.collection.get(s);o&&this.createSelectionBox(o)}this.updateContainer()}return 0}getCellViewFromElem(e){const t=e.getAttribute("data-cell-id");if(t){const r=this.collection.get(t);if(r)return this.graph.renderer.findViewByCell(r)}return null}onCellRemoved({cell:e}){this.destroySelectionBox(e),this.updateContainer()}onReseted({previous:e,current:t}){this.destroyAllSelectionBoxes(e),t.forEach(r=>{this.listenCellRemoveEvent(r),this.createSelectionBox(r)}),this.updateContainer()}onCellAdded({cell:e}){this.listenCellRemoveEvent(e),this.createSelectionBox(e),this.updateContainer()}listenCellRemoveEvent(e){e.off("removed",this.onCellRemoved,this),e.on("removed",this.onCellRemoved,this)}onCollectionUpdated({added:e,removed:t,options:r}){e.forEach(s=>{this.trigger("cell:selected",{cell:s,options:r}),s.isNode()?this.trigger("node:selected",{cell:s,options:r,node:s}):s.isEdge()&&this.trigger("edge:selected",{cell:s,options:r,edge:s})}),t.forEach(s=>{this.trigger("cell:unselected",{cell:s,options:r}),s.isNode()?this.trigger("node:unselected",{cell:s,options:r,node:s}):s.isEdge()&&this.trigger("edge:unselected",{cell:s,options:r,edge:s})});const i={added:e,removed:t,options:r,selected:this.cells.filter(s=>!!this.graph.getCellById(s.id))};this.trigger("selection:changed",i)}dispose(){this.clean(),this.remove(),this.off()}}c8([ge.dispose()],Zw.prototype,"dispose",null);var $t;(function(n){const e="widget-selection";n.classNames={root:e,inner:`${e}-inner`,box:`${e}-box`,content:`${e}-content`,rubberband:`${e}-rubberband`,selected:`${e}-selected`},n.documentEvents={mousemove:"adjustSelection",touchmove:"adjustSelection",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"};function t(r){return r.getAncestors().length}n.depthComparator=t})($t||($t={}));const u8=`.x6-widget-selection {
  position: absolute;
  top: 0;
  left: 0;
  display: none;
  width: 0;
  height: 0;
  touch-action: none;
}
.x6-widget-selection-rubberband {
  display: block;
  overflow: visible;
  opacity: 0.3;
}
.x6-widget-selection-selected {
  display: block;
}
.x6-widget-selection-box {
  cursor: move;
}
.x6-widget-selection-inner[data-selection-length='0'],
.x6-widget-selection-inner[data-selection-length='1'] {
  display: none;
}
.x6-widget-selection-content {
  position: absolute;
  top: 100%;
  right: -20px;
  left: -20px;
  margin-top: 30px;
  padding: 6px;
  line-height: 14px;
  text-align: center;
  border-radius: 6px;
}
.x6-widget-selection-content:empty {
  display: none;
}
.x6-widget-selection-rubberband {
  background-color: #3498db;
  border: 2px solid #2980b9;
}
.x6-widget-selection-box {
  box-sizing: content-box !important;
  margin-top: -4px;
  margin-left: -4px;
  padding-right: 4px;
  padding-bottom: 4px;
  border: 2px dashed #feb663;
  box-shadow: 2px 2px 5px #d3d3d3;
}
.x6-widget-selection-inner {
  box-sizing: content-box !important;
  margin-top: -8px;
  margin-left: -8px;
  padding-right: 12px;
  padding-bottom: 12px;
  border: 2px solid #feb663;
  box-shadow: 2px 2px 5px #d3d3d3;
}
.x6-widget-selection-content {
  color: #fff;
  font-size: 10px;
  background-color: #6a6b8a;
}
`;q.prototype.isSelectionEnabled=function(){const n=this.getPlugin("selection");return n?n.isEnabled():!1},q.prototype.enableSelection=function(){const n=this.getPlugin("selection");return n&&n.enable(),this},q.prototype.disableSelection=function(){const n=this.getPlugin("selection");return n&&n.disable(),this},q.prototype.toggleSelection=function(n){const e=this.getPlugin("selection");return e&&e.toggleEnabled(n),this},q.prototype.isMultipleSelection=function(){const n=this.getPlugin("selection");return n?n.isMultipleSelection():!1},q.prototype.enableMultipleSelection=function(){const n=this.getPlugin("selection");return n&&n.enableMultipleSelection(),this},q.prototype.disableMultipleSelection=function(){const n=this.getPlugin("selection");return n&&n.disableMultipleSelection(),this},q.prototype.toggleMultipleSelection=function(n){const e=this.getPlugin("selection");return e&&e.toggleMultipleSelection(n),this},q.prototype.isSelectionMovable=function(){const n=this.getPlugin("selection");return n?n.isSelectionMovable():!1},q.prototype.enableSelectionMovable=function(){const n=this.getPlugin("selection");return n&&n.enableSelectionMovable(),this},q.prototype.disableSelectionMovable=function(){const n=this.getPlugin("selection");return n&&n.disableSelectionMovable(),this},q.prototype.toggleSelectionMovable=function(n){const e=this.getPlugin("selection");return e&&e.toggleSelectionMovable(n),this},q.prototype.isRubberbandEnabled=function(){const n=this.getPlugin("selection");return n?n.isRubberbandEnabled():!1},q.prototype.enableRubberband=function(){const n=this.getPlugin("selection");return n&&n.enableRubberband(),this},q.prototype.disableRubberband=function(){const n=this.getPlugin("selection");return n&&n.disableRubberband(),this},q.prototype.toggleRubberband=function(n){const e=this.getPlugin("selection");return e&&e.toggleRubberband(n),this},q.prototype.isStrictRubberband=function(){const n=this.getPlugin("selection");return n?n.isStrictRubberband():!1},q.prototype.enableStrictRubberband=function(){const n=this.getPlugin("selection");return n&&n.enableStrictRubberband(),this},q.prototype.disableStrictRubberband=function(){const n=this.getPlugin("selection");return n&&n.disableStrictRubberband(),this},q.prototype.toggleStrictRubberband=function(n){const e=this.getPlugin("selection");return e&&e.toggleStrictRubberband(n),this},q.prototype.setRubberbandModifiers=function(n){const e=this.getPlugin("selection");return e&&e.setRubberbandModifiers(n),this},q.prototype.setSelectionFilter=function(n){const e=this.getPlugin("selection");return e&&e.setSelectionFilter(n),this},q.prototype.setSelectionDisplayContent=function(n){const e=this.getPlugin("selection");return e&&e.setSelectionDisplayContent(n),this},q.prototype.isSelectionEmpty=function(){const n=this.getPlugin("selection");return n?n.isEmpty():!0},q.prototype.cleanSelection=function(n){const e=this.getPlugin("selection");return e&&e.clean(n),this},q.prototype.resetSelection=function(n,e){const t=this.getPlugin("selection");return t&&t.reset(n,e),this},q.prototype.getSelectedCells=function(){const n=this.getPlugin("selection");return n?n.getSelectedCells():[]},q.prototype.getSelectedCellCount=function(){const n=this.getPlugin("selection");return n?n.getSelectedCellCount():0},q.prototype.isSelected=function(n){const e=this.getPlugin("selection");return e?e.isSelected(n):!1},q.prototype.select=function(n,e){const t=this.getPlugin("selection");return t&&t.select(n,e),this},q.prototype.unselect=function(n,e){const t=this.getPlugin("selection");return t?t.unselect(n,e):this};var h8=function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};class Is extends mt{get rubberbandDisabled(){return this.options.enabled!==!0||this.options.rubberband!==!0}get disabled(){return this.options.enabled!==!0}get length(){return this.selectionImpl.length}get cells(){return this.selectionImpl.cells}constructor(e={}){super(),this.name="selection",this.movedMap=new WeakMap,this.unselectMap=new WeakMap,this.options=Re({enabled:!0},Is.defaultOptions,e),Ho(this.name,u8)}init(e){this.graph=e,this.selectionImpl=new Zw(Object.assign(Object.assign({},this.options),{graph:e})),this.setup(),this.startListening()}isEnabled(){return!this.disabled}enable(){this.disabled&&(this.options.enabled=!0)}disable(){this.disabled||(this.options.enabled=!1)}toggleEnabled(e){return e!=null?e!==this.isEnabled()&&(e?this.enable():this.disable()):this.isEnabled()?this.disable():this.enable(),this}isMultipleSelection(){return this.isMultiple()}enableMultipleSelection(){return this.enableMultiple(),this}disableMultipleSelection(){return this.disableMultiple(),this}toggleMultipleSelection(e){return e!=null?e!==this.isMultipleSelection()&&(e?this.enableMultipleSelection():this.disableMultipleSelection()):this.isMultipleSelection()?this.disableMultipleSelection():this.enableMultipleSelection(),this}isSelectionMovable(){return this.options.movable!==!1}enableSelectionMovable(){return this.selectionImpl.options.movable=!0,this}disableSelectionMovable(){return this.selectionImpl.options.movable=!1,this}toggleSelectionMovable(e){return e!=null?e!==this.isSelectionMovable()&&(e?this.enableSelectionMovable():this.disableSelectionMovable()):this.isSelectionMovable()?this.disableSelectionMovable():this.enableSelectionMovable(),this}isRubberbandEnabled(){return!this.rubberbandDisabled}enableRubberband(){return this.rubberbandDisabled&&(this.options.rubberband=!0),this}disableRubberband(){return this.rubberbandDisabled||(this.options.rubberband=!1),this}toggleRubberband(e){return e!=null?e!==this.isRubberbandEnabled()&&(e?this.enableRubberband():this.disableRubberband()):this.isRubberbandEnabled()?this.disableRubberband():this.enableRubberband(),this}isStrictRubberband(){return this.selectionImpl.options.strict===!0}enableStrictRubberband(){return this.selectionImpl.options.strict=!0,this}disableStrictRubberband(){return this.selectionImpl.options.strict=!1,this}toggleStrictRubberband(e){return e!=null?e!==this.isStrictRubberband()&&(e?this.enableStrictRubberband():this.disableStrictRubberband()):this.isStrictRubberband()?this.disableStrictRubberband():this.enableStrictRubberband(),this}setRubberbandModifiers(e){this.setModifiers(e)}setSelectionFilter(e){return this.setFilter(e),this}setSelectionDisplayContent(e){return this.setContent(e),this}isEmpty(){return this.length<=0}clean(e={}){return this.selectionImpl.clean(e),this}reset(e,t={}){return this.selectionImpl.reset(e?this.getCells(e):[],t),this}getSelectedCells(){return this.cells}getSelectedCellCount(){return this.length}isSelected(e){return this.selectionImpl.isSelected(e)}select(e,t={}){const r=this.getCells(e);return r.length&&(this.isMultiple()?this.selectionImpl.select(r,t):this.reset(r.slice(0,1),t)),this}unselect(e,t={}){return this.selectionImpl.unselect(this.getCells(e),t),this}setup(){this.selectionImpl.on("*",(e,t)=>{this.trigger(e,t),this.graph.trigger(e,t)})}startListening(){this.graph.on("blank:mousedown",this.onBlankMouseDown,this),this.graph.on("blank:click",this.onBlankClick,this),this.graph.on("cell:mousemove",this.onCellMouseMove,this),this.graph.on("cell:mouseup",this.onCellMouseUp,this),this.selectionImpl.on("box:mousedown",this.onBoxMouseDown,this)}stopListening(){this.graph.off("blank:mousedown",this.onBlankMouseDown,this),this.graph.off("blank:click",this.onBlankClick,this),this.graph.off("cell:mousemove",this.onCellMouseMove,this),this.graph.off("cell:mouseup",this.onCellMouseUp,this),this.selectionImpl.off("box:mousedown",this.onBoxMouseDown,this)}onBlankMouseDown({e}){const t=this.graph.panning.allowPanning(e,!0),r=this.graph.getPlugin("scroller"),i=r&&r.allowPanning(e,!0);(this.allowRubberband(e,!0)||this.allowRubberband(e)&&!i&&!t)&&this.startRubberband(e)}onBlankClick(){this.clean()}allowRubberband(e,t){return!this.rubberbandDisabled&&ir.isMatch(e,this.options.modifiers,t)}allowMultipleSelection(e){return this.isMultiple()&&ir.isMatch(e,this.options.multipleSelectionModifiers)}onCellMouseMove({cell:e}){this.movedMap.set(e,!0)}onCellMouseUp({e,cell:t}){const r=this.options;let i=this.disabled;!i&&this.movedMap.has(t)&&(i=r.selectCellOnMoved===!1,i||(i=r.selectNodeOnMoved===!1&&t.isNode()),i||(i=r.selectEdgeOnMoved===!1&&t.isEdge())),i||(this.allowMultipleSelection(e)?this.unselectMap.has(t)?this.unselectMap.delete(t):this.isSelected(t)?this.unselect(t):this.select(t):this.reset(t)),this.movedMap.delete(t)}onBoxMouseDown({e,cell:t}){this.disabled||this.allowMultipleSelection(e)&&(this.unselect(t),this.unselectMap.set(t,!0))}getCells(e){return(Array.isArray(e)?e:[e]).map(t=>typeof t=="string"?this.graph.getCellById(t):t).filter(t=>t!=null)}startRubberband(e){return this.rubberbandDisabled||this.selectionImpl.startSelecting(e),this}isMultiple(){return this.options.multiple!==!1}enableMultiple(){return this.options.multiple=!0,this}disableMultiple(){return this.options.multiple=!1,this}setModifiers(e){return this.options.modifiers=e,this}setContent(e){return this.selectionImpl.setContent(e),this}setFilter(e){return this.selectionImpl.setFilter(e),this}dispose(){this.stopListening(),this.off(),this.selectionImpl.dispose(),Uo(this.name)}}h8([mt.dispose()],Is.prototype,"dispose",null),function(n){n.defaultOptions={rubberband:!1,rubberNode:!0,rubberEdge:!1,pointerEvents:"auto",multiple:!0,multipleSelectionModifiers:["ctrl","meta"],movable:!0,strict:!1,selectCellOnMoved:!1,selectNodeOnMoved:!1,selectEdgeOnMoved:!1,following:!0,content:null}}(Is||(Is={}));var f8=function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},d8=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class ex extends ge{get model(){return this.graph.model}get containerClassName(){return this.prefixClassName("widget-snapline")}get verticalClassName(){return`${this.containerClassName}-vertical`}get horizontalClassName(){return`${this.containerClassName}-horizontal`}constructor(e){super();const{graph:t}=e,r=d8(e,["graph"]);this.graph=t,this.options=Object.assign({},r),this.offset={x:0,y:0},this.render(),this.disabled||this.startListening()}get disabled(){return this.options.enabled!==!0}enable(){this.disabled&&(this.options.enabled=!0,this.startListening())}disable(){this.disabled||(this.options.enabled=!1,this.stopListening())}setFilter(e){this.options.filter=e}render(){const e=this.containerWrapper=new Z("svg"),t=this.horizontal=new Z("line"),r=this.vertical=new Z("line");e.addClass(this.containerClassName),t.addClass(this.horizontalClassName),r.addClass(this.verticalClassName),e.setAttribute("width","100%"),e.setAttribute("height","100%"),t.setAttribute("display","none"),r.setAttribute("display","none"),e.append([t,r]),this.options.className&&e.addClass(this.options.className),this.container=this.containerWrapper.node}startListening(){this.stopListening(),this.graph.on("node:mousedown",this.captureCursorOffset,this),this.graph.on("node:mousemove",this.snapOnMoving,this),this.model.on("batch:stop",this.onBatchStop,this),this.delegateDocumentEvents({mouseup:"hide",touchend:"hide"})}stopListening(){this.graph.off("node:mousedown",this.captureCursorOffset,this),this.graph.off("node:mousemove",this.snapOnMoving,this),this.model.off("batch:stop",this.onBatchStop,this),this.undelegateDocumentEvents()}onBatchStop({name:e,data:t}){e==="resize"&&this.snapOnResizing(t.cell,t)}captureCursorOffset({view:e,x:t,y:r}){const i=e.getDelegatedView();if(i&&this.isNodeMovable(i)){const s=e.cell.getPosition();this.offset={x:t-s.x,y:r-s.y}}}isNodeMovable(e){return e&&e.cell.isNode()&&e.can("nodeMovable")}getRestrictArea(e){const t=this.graph.options.translating.restrict,r=typeof t=="function"?K(t,this.graph,e):t;return typeof r=="number"?this.graph.transform.getGraphArea().inflate(r):r===!0?this.graph.transform.getGraphArea():r||null}snapOnResizing(e,t){if(this.options.resizing&&!t.snapped&&t.ui&&t.direction&&t.trueDirection){const r=this.graph.renderer.findViewByCell(e);if(r&&r.cell.isNode()){const i=e.getBBox(),s=i.bbox(e.getAngle()),o=s.getTopLeft(),a=s.getBottomRight(),l=we.normalize(e.getAngle()),c=this.options.tolerance||0;let u,h,f,d,g,p;const b={vertical:0,horizontal:0},m=t.direction,y=t.trueDirection,v=t.relativeDirection;y.indexOf("right")!==-1?b.vertical=a.x:b.vertical=o.x,y.indexOf("bottom")!==-1?b.horizontal=a.y:b.horizontal=o.y,this.model.getNodes().some(k=>{if(this.isIgnored(e,k))return!1;const B=k.getBBox().bbox(k.getAngle()),W=B.getTopLeft(),M=B.getBottomRight(),$={vertical:[W.x,M.x],horizontal:[W.y,M.y]},Y={};return Object.keys($).forEach(j=>{const F=j,U=$[F].map(ne=>({position:ne,distance:Math.abs(ne-b[F])})).filter(ne=>ne.distance<=c);Y[F]=Db(U,ne=>ne.distance)}),u==null&&Y.vertical.length>0&&(u=Y.vertical[0].position,h=Math.min(s.y,B.y),f=Math.max(a.y,M.y)-h),d==null&&Y.horizontal.length>0&&(d=Y.horizontal[0].position,g=Math.min(s.x,B.x),p=Math.max(a.x,M.x)-g),u!=null&&d!=null}),this.hide();let w=0,x=0;(d!=null||u!=null)&&(u!=null&&(w=y.indexOf("right")!==-1?u-a.x:o.x-u),d!=null&&(x=y.indexOf("bottom")!==-1?d-a.y:o.y-d));let C=0,S=0;if(l%90===0)l===90||l===270?(C=x,S=w):(C=w,S=x);else{const k=l>=0&&l<90?1:l>=90&&l<180?4:l>=180&&l<270?3:2;d!=null&&u!=null&&(w<x?(x=0,d=void 0):(w=0,u=void 0));const B=we.toRad(l%90);w&&(C=k===3?w/Math.cos(B):w/Math.sin(B)),x&&(S=k===3?x/Math.cos(B):x/Math.sin(B));const W=k===1||k===3;switch(v){case"top":case"bottom":S=x?x/(W?Math.cos(B):Math.sin(B)):w/(W?Math.sin(B):Math.cos(B));break;case"left":case"right":C=w?w/(W?Math.cos(B):Math.sin(B)):x/(W?Math.sin(B):Math.cos(B));break}}switch(v){case"top":case"bottom":C=0;break;case"left":case"right":S=0;break}const E=this.graph.getGridSize();let A=Math.max(i.width+C,E),O=Math.max(i.height+S,E);t.minWidth&&t.minWidth>E&&(A=Math.max(A,t.minWidth)),t.minHeight&&t.minHeight>E&&(O=Math.max(O,t.minHeight)),t.maxWidth&&(A=Math.min(A,t.maxWidth)),t.maxHeight&&(O=Math.min(O,t.maxHeight)),t.preserveAspectRatio&&(S<C?O=A*(i.height/i.width):A=O*(i.width/i.height)),(A!==i.width||O!==i.height)&&(e.resize(A,O,{direction:m,relativeDirection:v,trueDirection:y,snapped:!0,snaplines:this.cid,restrict:this.getRestrictArea(r)}),f&&(f+=O-i.height),p&&(p+=A-i.width));const T=e.getBBox().bbox(l);u&&Math.abs(T.x-u)>1&&Math.abs(T.width+T.x-u)>1&&(u=void 0),d&&Math.abs(T.y-d)>1&&Math.abs(T.height+T.y-d)>1&&(d=void 0),this.update({verticalLeft:u,verticalTop:h,verticalHeight:f,horizontalTop:d,horizontalLeft:g,horizontalWidth:p})}}}snapOnMoving({view:e,e:t,x:r,y:i}){const s=e.getEventData(t).delegatedView||e;if(!this.isNodeMovable(s))return;const o=s.cell,a=o.getSize(),l=o.getPosition(),c=new D(r-this.offset.x,i-this.offset.y,a.width,a.height),u=o.getAngle(),h=c.getCenter(),f=c.bbox(u),d=f.getTopLeft(),g=f.getBottomRight(),p=this.options.tolerance||0;let b,m,y,v,w,x,C=0,S=0;if(this.model.getNodes().some(E=>{if(this.isIgnored(o,E))return!1;const A=E.getBBox().bbox(E.getAngle()),O=A.getCenter(),T=A.getTopLeft(),k=A.getBottomRight();return b==null&&(Math.abs(O.x-h.x)<p?(b=O.x,C=.5):Math.abs(T.x-d.x)<p?(b=T.x,C=0):Math.abs(T.x-g.x)<p?(b=T.x,C=1):Math.abs(k.x-g.x)<p?(b=k.x,C=1):Math.abs(k.x-d.x)<p&&(b=k.x),b!=null&&(m=Math.min(f.y,A.y),y=Math.max(g.y,k.y)-m)),v==null&&(Math.abs(O.y-h.y)<p?(v=O.y,S=.5):Math.abs(T.y-d.y)<p?v=T.y:Math.abs(T.y-g.y)<p?(v=T.y,S=1):Math.abs(k.y-g.y)<p?(v=k.y,S=1):Math.abs(k.y-d.y)<p&&(v=k.y),v!=null&&(w=Math.min(f.x,A.x),x=Math.max(g.x,k.x)-w)),b!=null&&v!=null}),this.hide(),v!=null||b!=null){v!=null&&(f.y=v-S*f.height),b!=null&&(f.x=b-C*f.width);const E=f.getCenter(),A=E.x-c.width/2,O=E.y-c.height/2,T=A-l.x,k=O-l.y;(T!==0||k!==0)&&(o.translate(T,k,{snapped:!0,restrict:this.getRestrictArea(s)}),x&&(x+=T),y&&(y+=k)),this.update({verticalLeft:b,verticalTop:m,verticalHeight:y,horizontalTop:v,horizontalLeft:w,horizontalWidth:x})}}isIgnored(e,t){return t.id===e.id||t.isDescendantOf(e)||!this.filter(t)}filter(e){const t=this.options.filter;return Array.isArray(t)?t.some(r=>typeof r=="string"?e.shape===r:e.id===r.id):typeof t=="function"?K(t,this.graph,e):!0}update(e){if(e.horizontalTop){const t=this.graph.localToGraph(new P(e.horizontalLeft,e.horizontalTop)),r=this.graph.localToGraph(new P(e.horizontalLeft+e.horizontalWidth,e.horizontalTop));this.horizontal.setAttributes({x1:this.options.sharp?`${t.x}`:"0",y1:`${t.y}`,x2:this.options.sharp?`${r.x}`:"100%",y2:`${r.y}`,display:"inherit"})}else this.horizontal.setAttribute("display","none");if(e.verticalLeft){const t=this.graph.localToGraph(new P(e.verticalLeft,e.verticalTop)),r=this.graph.localToGraph(new P(e.verticalLeft,e.verticalTop+e.verticalHeight));this.vertical.setAttributes({x1:`${t.x}`,y1:this.options.sharp?`${t.y}`:"0",x2:`${r.x}`,y2:this.options.sharp?`${r.y}`:"100%",display:"inherit"})}else this.vertical.setAttribute("display","none");this.show()}resetTimer(){this.timer&&(clearTimeout(this.timer),this.timer=null)}show(){return this.resetTimer(),this.container.parentNode==null&&this.graph.container.appendChild(this.container),this}hide(){this.resetTimer(),this.vertical.setAttribute("display","none"),this.horizontal.setAttribute("display","none");const e=this.options.clean,t=typeof e=="number"?e:e!==!1?3e3:0;return t>0&&(this.timer=window.setTimeout(()=>{this.container.parentNode!==null&&this.unmount()},t)),this}onRemove(){this.stopListening(),this.hide()}dispose(){this.remove()}}f8([ge.dispose()],ex.prototype,"dispose",null);const g8=`.x6-widget-snapline {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  pointer-events: none;
}
.x6-widget-snapline-vertical,
.x6-widget-snapline-horizontal {
  stroke: #2ecc71;
  stroke-width: 1px;
}
`;q.prototype.isSnaplineEnabled=function(){const n=this.getPlugin("snapline");return n?n.isEnabled():!1},q.prototype.enableSnapline=function(){const n=this.getPlugin("snapline");return n&&n.enable(),this},q.prototype.disableSnapline=function(){const n=this.getPlugin("snapline");return n&&n.disable(),this},q.prototype.toggleSnapline=function(){const n=this.getPlugin("snapline");return n&&n.toggleEnabled(),this},q.prototype.hideSnapline=function(){const n=this.getPlugin("snapline");return n&&n.hide(),this},q.prototype.setSnaplineFilter=function(n){const e=this.getPlugin("snapline");return e&&e.setFilter(n),this},q.prototype.isSnaplineOnResizingEnabled=function(){const n=this.getPlugin("snapline");return n?n.isOnResizingEnabled():!1},q.prototype.enableSnaplineOnResizing=function(){const n=this.getPlugin("snapline");return n&&n.enableOnResizing(),this},q.prototype.disableSnaplineOnResizing=function(){const n=this.getPlugin("snapline");return n&&n.disableOnResizing(),this},q.prototype.toggleSnaplineOnResizing=function(n){const e=this.getPlugin("snapline");return e&&e.toggleOnResizing(n),this},q.prototype.isSharpSnapline=function(){const n=this.getPlugin("snapline");return n?n.isSharp():!1},q.prototype.enableSharpSnapline=function(){const n=this.getPlugin("snapline");return n&&n.enableSharp(),this},q.prototype.disableSharpSnapline=function(){const n=this.getPlugin("snapline");return n&&n.disableSharp(),this},q.prototype.toggleSharpSnapline=function(n){const e=this.getPlugin("snapline");return e&&e.toggleSharp(n),this},q.prototype.getSnaplineTolerance=function(){const n=this.getPlugin("snapline");if(n)return n.getTolerance()},q.prototype.setSnaplineTolerance=function(n){const e=this.getPlugin("snapline");return e&&e.setTolerance(n),this};var p8=function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};class tx extends pn{constructor(e={}){super(),this.name="snapline",this.options=Object.assign({enabled:!0,tolerance:10},e),Ho(this.name,g8)}init(e){this.snaplineImpl=new ex(Object.assign(Object.assign({},this.options),{graph:e}))}isEnabled(){return!this.snaplineImpl.disabled}enable(){this.snaplineImpl.enable()}disable(){this.snaplineImpl.disable()}toggleEnabled(e){if(e!=null)e!==this.isEnabled()&&(e?this.enable():this.disable());else return this.isEnabled()?this.disable():this.enable(),this}hide(){return this.snaplineImpl.hide(),this}setFilter(e){return this.snaplineImpl.setFilter(e),this}isOnResizingEnabled(){return this.snaplineImpl.options.resizing===!0}enableOnResizing(){return this.snaplineImpl.options.resizing=!0,this}disableOnResizing(){return this.snaplineImpl.options.resizing=!1,this}toggleOnResizing(e){return e!=null?e!==this.isOnResizingEnabled()&&(e?this.enableOnResizing():this.disableOnResizing()):this.isOnResizingEnabled()?this.disableOnResizing():this.enableOnResizing(),this}isSharp(){return this.snaplineImpl.options.sharp===!0}enableSharp(){return this.snaplineImpl.options.sharp=!0,this}disableSharp(){return this.snaplineImpl.options.sharp=!1,this}toggleSharp(e){return e!=null?e!==this.isSharp()&&(e?this.enableSharp():this.disableSharp()):this.isSharp()?this.disableSharp():this.enableSharp(),this}getTolerance(){return this.snaplineImpl.options.tolerance}setTolerance(e){return this.snaplineImpl.options.tolerance=e,this}captureCursorOffset(e){this.snaplineImpl.captureCursorOffset(e)}snapOnMoving(e){this.snaplineImpl.snapOnMoving(e)}dispose(){this.snaplineImpl.dispose(),Uo(this.name)}}p8([pn.dispose()],tx.prototype,"dispose",null);class nx extends Ye{}(function(n){function e(t){const r=[],i=Ee.getForeignObjectMarkup();return t?r.push({tagName:t,selector:"body"},i):r.push(i),r}n.config({view:"react-shape-view",markup:e(),attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}},propHooks(t){if(t.markup==null){const r=t.primer;if(r){t.markup=e(r);let i={};switch(r){case"circle":i={refCx:"50%",refCy:"50%",refR:"50%"};break;case"ellipse":i={refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"};break}t.attrs=Re({},{body:Object.assign({refWidth:null,refHeight:null},i)},t.attrs||{})}}return t}}),Ye.registry.register("react-shape",n,!0)})(nx||(nx={}));var rx={exports:{}},qt={},ix={exports:{}},sx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(j,F){var U=j.length;j.push(F);e:for(;0<U;){var ne=U-1>>>1,Oe=j[ne];if(0<i(Oe,F))j[ne]=F,j[U]=Oe,U=ne;else break e}}function t(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var F=j[0],U=j.pop();if(U!==F){j[0]=U;e:for(var ne=0,Oe=j.length,Nn=Oe>>>1;ne<Nn;){var at=2*(ne+1)-1,kn=j[at],lt=at+1,pt=j[lt];if(0>i(kn,U))lt<Oe&&0>i(pt,kn)?(j[ne]=pt,j[lt]=U,ne=lt):(j[ne]=kn,j[at]=U,ne=at);else if(lt<Oe&&0>i(pt,U))j[ne]=pt,j[lt]=U,ne=lt;else break e}}return F}function i(j,F){var U=j.sortIndex-F.sortIndex;return U!==0?U:j.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,f=3,d=!1,g=!1,p=!1,b=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(j){for(var F=t(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=j)r(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=t(c)}}function w(j){if(p=!1,v(j),!g)if(t(l)!==null)g=!0,$(x);else{var F=t(c);F!==null&&Y(w,F.startTime-j)}}function x(j,F){g=!1,p&&(p=!1,m(E),E=-1),d=!0;var U=f;try{for(v(F),h=t(l);h!==null&&(!(h.expirationTime>F)||j&&!T());){var ne=h.callback;if(typeof ne=="function"){h.callback=null,f=h.priorityLevel;var Oe=ne(h.expirationTime<=F);F=n.unstable_now(),typeof Oe=="function"?h.callback=Oe:h===t(l)&&r(l),v(F)}else r(l);h=t(l)}if(h!==null)var Nn=!0;else{var at=t(c);at!==null&&Y(w,at.startTime-F),Nn=!1}return Nn}finally{h=null,f=U,d=!1}}var C=!1,S=null,E=-1,A=5,O=-1;function T(){return!(n.unstable_now()-O<A)}function k(){if(S!==null){var j=n.unstable_now();O=j;var F=!0;try{F=S(!0,j)}finally{F?B():(C=!1,S=null)}}else C=!1}var B;if(typeof y=="function")B=function(){y(k)};else if(typeof MessageChannel!="undefined"){var W=new MessageChannel,M=W.port2;W.port1.onmessage=k,B=function(){M.postMessage(null)}}else B=function(){b(k,0)};function $(j){S=j,C||(C=!0,B())}function Y(j,F){E=b(function(){j(n.unstable_now())},F)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_continueExecution=function(){g||d||(g=!0,$(x))},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(j){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var U=f;f=F;try{return j()}finally{f=U}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(j,F){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var U=f;f=j;try{return F()}finally{f=U}},n.unstable_scheduleCallback=function(j,F,U){var ne=n.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?ne+U:ne):U=ne,j){case 1:var Oe=-1;break;case 2:Oe=250;break;case 5:Oe=1073741823;break;case 4:Oe=1e4;break;default:Oe=5e3}return Oe=U+Oe,j={id:u++,callback:F,priorityLevel:j,startTime:U,expirationTime:Oe,sortIndex:-1},U>ne?(j.sortIndex=U,e(c,j),t(l)===null&&j===t(c)&&(p?(m(E),E=-1):p=!0,Y(w,U-ne))):(j.sortIndex=Oe,e(l,j),g||d||(g=!0,$(x))),j},n.unstable_shouldYield=T,n.unstable_wrapCallback=function(j){var F=f;return function(){var U=f;f=F;try{return j.apply(this,arguments)}finally{f=U}}}})(sx),ix.exports=sx;var m8=ix.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ox=te,Gt=m8;function R(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ax=new Set,ia={};function Mi(n,e){Ls(n,e),Ls(n+"Capture",e)}function Ls(n,e){for(ia[n]=e,n=0;n<e.length;n++)ax.add(e[n])}var cr=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Pf=Object.prototype.hasOwnProperty,y8=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lx={},cx={};function v8(n){return Pf.call(cx,n)?!0:Pf.call(lx,n)?!1:y8.test(n)?cx[n]=!0:(lx[n]=!0,!1)}function b8(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function w8(n,e,t,r){if(e===null||typeof e=="undefined"||b8(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Tt(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){bt[n]=new Tt(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];bt[e]=new Tt(e,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){bt[n]=new Tt(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){bt[n]=new Tt(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){bt[n]=new Tt(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){bt[n]=new Tt(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){bt[n]=new Tt(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){bt[n]=new Tt(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){bt[n]=new Tt(n,5,!1,n.toLowerCase(),null,!1,!1)});var Ef=/[\-:]([a-z])/g;function Af(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Ef,Af);bt[e]=new Tt(e,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Ef,Af);bt[e]=new Tt(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Ef,Af);bt[e]=new Tt(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){bt[n]=new Tt(n,1,!1,n.toLowerCase(),null,!1,!1)}),bt.xlinkHref=new Tt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){bt[n]=new Tt(n,1,!1,n.toLowerCase(),null,!0,!0)});function Of(n,e,t,r){var i=bt.hasOwnProperty(e)?bt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(w8(e,t,i,r)&&(t=null),r||i===null?v8(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var ur=ox.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mc=Symbol.for("react.element"),Rs=Symbol.for("react.portal"),js=Symbol.for("react.fragment"),Mf=Symbol.for("react.strict_mode"),Tf=Symbol.for("react.profiler"),ux=Symbol.for("react.provider"),hx=Symbol.for("react.context"),_f=Symbol.for("react.forward_ref"),Nf=Symbol.for("react.suspense"),kf=Symbol.for("react.suspense_list"),$f=Symbol.for("react.memo"),Fr=Symbol.for("react.lazy"),fx=Symbol.for("react.offscreen"),dx=Symbol.iterator;function sa(n){return n===null||typeof n!="object"?null:(n=dx&&n[dx]||n["@@iterator"],typeof n=="function"?n:null)}var je=Object.assign,If;function oa(n){if(If===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);If=e&&e[1]||""}return`
`+If+n}var Lf=!1;function Rf(n,e){if(!n||Lf)return"";Lf=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Lf=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?oa(n):""}function x8(n){switch(n.tag){case 5:return oa(n.type);case 16:return oa("Lazy");case 13:return oa("Suspense");case 19:return oa("SuspenseList");case 0:case 2:case 15:return n=Rf(n.type,!1),n;case 11:return n=Rf(n.type.render,!1),n;case 1:return n=Rf(n.type,!0),n;default:return""}}function jf(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case js:return"Fragment";case Rs:return"Portal";case Tf:return"Profiler";case Mf:return"StrictMode";case Nf:return"Suspense";case kf:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case hx:return(n.displayName||"Context")+".Consumer";case ux:return(n._context.displayName||"Context")+".Provider";case _f:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case $f:return e=n.displayName||null,e!==null?e:jf(n.type)||"Memo";case Fr:e=n._payload,n=n._init;try{return jf(n(e))}catch(t){}}return null}function C8(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jf(e);case 8:return e===Mf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vr(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function gx(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function S8(n){var e=gx(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t!="undefined"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function yc(n){n._valueTracker||(n._valueTracker=S8(n))}function px(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=gx(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function vc(n){if(n=n||(typeof document!="undefined"?document:void 0),typeof n=="undefined")return null;try{return n.activeElement||n.body}catch(e){return n.body}}function Df(n,e){var t=e.checked;return je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t!=null?t:n._wrapperState.initialChecked})}function mx(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Vr(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function yx(n,e){e=e.checked,e!=null&&Of(n,"checked",e,!1)}function Bf(n,e){yx(n,e);var t=Vr(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?zf(n,e.type,t):e.hasOwnProperty("defaultValue")&&zf(n,e.type,Vr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function vx(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function zf(n,e,t){(e!=="number"||vc(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var aa=Array.isArray;function Ds(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Vr(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function Ff(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(R(91));return je({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function bx(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(R(92));if(aa(t)){if(1<t.length)throw Error(R(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Vr(t)}}function wx(n,e){var t=Vr(e.value),r=Vr(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function xx(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Cx(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vf(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Cx(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var bc,Sx=function(n){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(bc=bc||document.createElement("div"),bc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bc.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function la(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var ca={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},P8=["Webkit","ms","Moz","O"];Object.keys(ca).forEach(function(n){P8.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),ca[e]=ca[n]})});function Px(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||ca.hasOwnProperty(n)&&ca[n]?(""+e).trim():e+"px"}function Ex(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=Px(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var E8=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qf(n,e){if(e){if(E8[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(R(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(R(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(R(61))}if(e.style!=null&&typeof e.style!="object")throw Error(R(62))}}function Gf(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hf=null;function Uf(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Wf=null,Bs=null,zs=null;function Ax(n){if(n=Na(n)){if(typeof Wf!="function")throw Error(R(280));var e=n.stateNode;e&&(e=Vc(e),Wf(n.stateNode,n.type,e))}}function Ox(n){Bs?zs?zs.push(n):zs=[n]:Bs=n}function Mx(){if(Bs){var n=Bs,e=zs;if(zs=Bs=null,Ax(n),e)for(n=0;n<e.length;n++)Ax(e[n])}}function Tx(n,e){return n(e)}function _x(){}var Xf=!1;function Nx(n,e,t){if(Xf)return n(e,t);Xf=!0;try{return Tx(n,e,t)}finally{Xf=!1,(Bs!==null||zs!==null)&&(_x(),Mx())}}function ua(n,e){var t=n.stateNode;if(t===null)return null;var r=Vc(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(R(231,e,typeof t));return t}var Yf=!1;if(cr)try{var ha={};Object.defineProperty(ha,"passive",{get:function(){Yf=!0}}),window.addEventListener("test",ha,ha),window.removeEventListener("test",ha,ha)}catch(n){Yf=!1}function A8(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var fa=!1,wc=null,xc=!1,Kf=null,O8={onError:function(n){fa=!0,wc=n}};function M8(n,e,t,r,i,s,o,a,l){fa=!1,wc=null,A8.apply(O8,arguments)}function T8(n,e,t,r,i,s,o,a,l){if(M8.apply(this,arguments),fa){if(fa){var c=wc;fa=!1,wc=null}else throw Error(R(198));xc||(xc=!0,Kf=c)}}function Ti(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function kx(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function $x(n){if(Ti(n)!==n)throw Error(R(188))}function _8(n){var e=n.alternate;if(!e){if(e=Ti(n),e===null)throw Error(R(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return $x(i),n;if(s===r)return $x(i),e;s=s.sibling}throw Error(R(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(R(189))}}if(t.alternate!==r)throw Error(R(190))}if(t.tag!==3)throw Error(R(188));return t.stateNode.current===t?n:e}function Ix(n){return n=_8(n),n!==null?Lx(n):null}function Lx(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=Lx(n);if(e!==null)return e;n=n.sibling}return null}var Rx=Gt.unstable_scheduleCallback,jx=Gt.unstable_cancelCallback,N8=Gt.unstable_shouldYield,k8=Gt.unstable_requestPaint,Ke=Gt.unstable_now,$8=Gt.unstable_getCurrentPriorityLevel,Jf=Gt.unstable_ImmediatePriority,Dx=Gt.unstable_UserBlockingPriority,Cc=Gt.unstable_NormalPriority,I8=Gt.unstable_LowPriority,Bx=Gt.unstable_IdlePriority,Sc=null,qn=null;function L8(n){if(qn&&typeof qn.onCommitFiberRoot=="function")try{qn.onCommitFiberRoot(Sc,n,void 0,(n.current.flags&128)===128)}catch(e){}}var Cn=Math.clz32?Math.clz32:D8,R8=Math.log,j8=Math.LN2;function D8(n){return n>>>=0,n===0?32:31-(R8(n)/j8|0)|0}var Pc=64,Ec=4194304;function da(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ac(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=da(a):(s&=o,s!==0&&(r=da(s)))}else o=t&~i,o!==0?r=da(o):s!==0&&(r=da(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Cn(e),i=1<<t,r|=n[t],e&=~i;return r}function B8(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function z8(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Cn(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=B8(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function Qf(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function zx(){var n=Pc;return Pc<<=1,!(Pc&4194240)&&(Pc=64),n}function Zf(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function ga(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Cn(e),n[e]=t}function F8(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Cn(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function ed(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Cn(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var ve=0;function Fx(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Vx,td,qx,Gx,Hx,nd=!1,Oc=[],qr=null,Gr=null,Hr=null,pa=new Map,ma=new Map,Ur=[],V8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ux(n,e){switch(n){case"focusin":case"focusout":qr=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":Hr=null;break;case"pointerover":case"pointerout":pa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ma.delete(e.pointerId)}}function ya(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Na(e),e!==null&&td(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function q8(n,e,t,r,i){switch(e){case"focusin":return qr=ya(qr,n,e,t,r,i),!0;case"dragenter":return Gr=ya(Gr,n,e,t,r,i),!0;case"mouseover":return Hr=ya(Hr,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return pa.set(s,ya(pa.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ma.set(s,ya(ma.get(s)||null,n,e,t,r,i)),!0}return!1}function Wx(n){var e=_i(n.target);if(e!==null){var t=Ti(e);if(t!==null){if(e=t.tag,e===13){if(e=kx(t),e!==null){n.blockedOn=e,Hx(n.priority,function(){qx(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Mc(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=id(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);Hf=r,t.target.dispatchEvent(r),Hf=null}else return e=Na(t),e!==null&&td(e),n.blockedOn=t,!1;e.shift()}return!0}function Xx(n,e,t){Mc(n)&&t.delete(e)}function G8(){nd=!1,qr!==null&&Mc(qr)&&(qr=null),Gr!==null&&Mc(Gr)&&(Gr=null),Hr!==null&&Mc(Hr)&&(Hr=null),pa.forEach(Xx),ma.forEach(Xx)}function va(n,e){n.blockedOn===e&&(n.blockedOn=null,nd||(nd=!0,Gt.unstable_scheduleCallback(Gt.unstable_NormalPriority,G8)))}function ba(n){function e(i){return va(i,n)}if(0<Oc.length){va(Oc[0],n);for(var t=1;t<Oc.length;t++){var r=Oc[t];r.blockedOn===n&&(r.blockedOn=null)}}for(qr!==null&&va(qr,n),Gr!==null&&va(Gr,n),Hr!==null&&va(Hr,n),pa.forEach(e),ma.forEach(e),t=0;t<Ur.length;t++)r=Ur[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Ur.length&&(t=Ur[0],t.blockedOn===null);)Wx(t),t.blockedOn===null&&Ur.shift()}var Fs=ur.ReactCurrentBatchConfig,Tc=!0;function H8(n,e,t,r){var i=ve,s=Fs.transition;Fs.transition=null;try{ve=1,rd(n,e,t,r)}finally{ve=i,Fs.transition=s}}function U8(n,e,t,r){var i=ve,s=Fs.transition;Fs.transition=null;try{ve=4,rd(n,e,t,r)}finally{ve=i,Fs.transition=s}}function rd(n,e,t,r){if(Tc){var i=id(n,e,t,r);if(i===null)xd(n,e,r,_c,t),Ux(n,r);else if(q8(i,n,e,t,r))r.stopPropagation();else if(Ux(n,r),e&4&&-1<V8.indexOf(n)){for(;i!==null;){var s=Na(i);if(s!==null&&Vx(s),s=id(n,e,t,r),s===null&&xd(n,e,r,_c,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else xd(n,e,r,null,t)}}var _c=null;function id(n,e,t,r){if(_c=null,n=Uf(r),n=_i(n),n!==null)if(e=Ti(n),e===null)n=null;else if(t=e.tag,t===13){if(n=kx(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return _c=n,null}function Yx(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($8()){case Jf:return 1;case Dx:return 4;case Cc:case I8:return 16;case Bx:return 536870912;default:return 16}default:return 16}}var Wr=null,sd=null,Nc=null;function Kx(){if(Nc)return Nc;var n,e=sd,t=e.length,r,i="value"in Wr?Wr.value:Wr.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Nc=i.slice(n,1<r?1-r:void 0)}function kc(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function $c(){return!0}function Jx(){return!1}function Ht(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$c:Jx,this.isPropagationStopped=Jx,this}return je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=$c)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=$c)},persist:function(){},isPersistent:$c}),e}var Vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},od=Ht(Vs),wa=je({},Vs,{view:0,detail:0}),W8=Ht(wa),ad,ld,xa,Ic=je({},wa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ud,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==xa&&(xa&&n.type==="mousemove"?(ad=n.screenX-xa.screenX,ld=n.screenY-xa.screenY):ld=ad=0,xa=n),ad)},movementY:function(n){return"movementY"in n?n.movementY:ld}}),Qx=Ht(Ic),X8=je({},Ic,{dataTransfer:0}),Y8=Ht(X8),K8=je({},wa,{relatedTarget:0}),cd=Ht(K8),J8=je({},Vs,{animationName:0,elapsedTime:0,pseudoElement:0}),Q8=Ht(J8),Z8=je({},Vs,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),eH=Ht(Z8),tH=je({},Vs,{data:0}),Zx=Ht(tH),nH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sH(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=iH[n])?!!e[n]:!1}function ud(){return sH}var oH=je({},wa,{key:function(n){if(n.key){var e=nH[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=kc(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?rH[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ud,charCode:function(n){return n.type==="keypress"?kc(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?kc(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),aH=Ht(oH),lH=je({},Ic,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eC=Ht(lH),cH=je({},wa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ud}),uH=Ht(cH),hH=je({},Vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),fH=Ht(hH),dH=je({},Ic,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),gH=Ht(dH),pH=[9,13,27,32],hd=cr&&"CompositionEvent"in window,Ca=null;cr&&"documentMode"in document&&(Ca=document.documentMode);var mH=cr&&"TextEvent"in window&&!Ca,tC=cr&&(!hd||Ca&&8<Ca&&11>=Ca),nC=" ",rC=!1;function iC(n,e){switch(n){case"keyup":return pH.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sC(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var qs=!1;function yH(n,e){switch(n){case"compositionend":return sC(e);case"keypress":return e.which!==32?null:(rC=!0,nC);case"textInput":return n=e.data,n===nC&&rC?null:n;default:return null}}function vH(n,e){if(qs)return n==="compositionend"||!hd&&iC(n,e)?(n=Kx(),Nc=sd=Wr=null,qs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tC&&e.locale!=="ko"?null:e.data;default:return null}}var bH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oC(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!bH[n.type]:e==="textarea"}function aC(n,e,t,r){Ox(r),e=Bc(e,"onChange"),0<e.length&&(t=new od("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Sa=null,Pa=null;function wH(n){EC(n,0)}function Lc(n){var e=Xs(n);if(px(e))return n}function xH(n,e){if(n==="change")return e}var lC=!1;if(cr){var fd;if(cr){var dd="oninput"in document;if(!dd){var cC=document.createElement("div");cC.setAttribute("oninput","return;"),dd=typeof cC.oninput=="function"}fd=dd}else fd=!1;lC=fd&&(!document.documentMode||9<document.documentMode)}function uC(){Sa&&(Sa.detachEvent("onpropertychange",hC),Pa=Sa=null)}function hC(n){if(n.propertyName==="value"&&Lc(Pa)){var e=[];aC(e,Pa,n,Uf(n)),Nx(wH,e)}}function CH(n,e,t){n==="focusin"?(uC(),Sa=e,Pa=t,Sa.attachEvent("onpropertychange",hC)):n==="focusout"&&uC()}function SH(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Lc(Pa)}function PH(n,e){if(n==="click")return Lc(e)}function EH(n,e){if(n==="input"||n==="change")return Lc(e)}function AH(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Sn=typeof Object.is=="function"?Object.is:AH;function Ea(n,e){if(Sn(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!Pf.call(e,i)||!Sn(n[i],e[i]))return!1}return!0}function fC(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function dC(n,e){var t=fC(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=fC(t)}}function gC(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?gC(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function pC(){for(var n=window,e=vc();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch(r){t=!1}if(t)n=e.contentWindow;else break;e=vc(n.document)}return e}function gd(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function OH(n){var e=pC(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&gC(t.ownerDocument.documentElement,t)){if(r!==null&&gd(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=dC(t,s);var o=dC(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var MH=cr&&"documentMode"in document&&11>=document.documentMode,Gs=null,pd=null,Aa=null,md=!1;function mC(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;md||Gs==null||Gs!==vc(r)||(r=Gs,"selectionStart"in r&&gd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Aa&&Ea(Aa,r)||(Aa=r,r=Bc(pd,"onSelect"),0<r.length&&(e=new od("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Gs)))}function Rc(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Hs={animationend:Rc("Animation","AnimationEnd"),animationiteration:Rc("Animation","AnimationIteration"),animationstart:Rc("Animation","AnimationStart"),transitionend:Rc("Transition","TransitionEnd")},yd={},yC={};cr&&(yC=document.createElement("div").style,"AnimationEvent"in window||(delete Hs.animationend.animation,delete Hs.animationiteration.animation,delete Hs.animationstart.animation),"TransitionEvent"in window||delete Hs.transitionend.transition);function jc(n){if(yd[n])return yd[n];if(!Hs[n])return n;var e=Hs[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in yC)return yd[n]=e[t];return n}var vC=jc("animationend"),bC=jc("animationiteration"),wC=jc("animationstart"),xC=jc("transitionend"),CC=new Map,SC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xr(n,e){CC.set(n,e),Mi(e,[n])}for(var vd=0;vd<SC.length;vd++){var bd=SC[vd],TH=bd.toLowerCase(),_H=bd[0].toUpperCase()+bd.slice(1);Xr(TH,"on"+_H)}Xr(vC,"onAnimationEnd"),Xr(bC,"onAnimationIteration"),Xr(wC,"onAnimationStart"),Xr("dblclick","onDoubleClick"),Xr("focusin","onFocus"),Xr("focusout","onBlur"),Xr(xC,"onTransitionEnd"),Ls("onMouseEnter",["mouseout","mouseover"]),Ls("onMouseLeave",["mouseout","mouseover"]),Ls("onPointerEnter",["pointerout","pointerover"]),Ls("onPointerLeave",["pointerout","pointerover"]),Mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Mi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NH=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oa));function PC(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,T8(r,e,void 0,n),n.currentTarget=null}function EC(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;PC(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;PC(i,a,c),s=l}}}if(xc)throw n=Kf,xc=!1,Kf=null,n}function Ne(n,e){var t=e[Od];t===void 0&&(t=e[Od]=new Set);var r=n+"__bubble";t.has(r)||(AC(e,n,2,!1),t.add(r))}function wd(n,e,t){var r=0;e&&(r|=4),AC(t,n,r,e)}var Dc="_reactListening"+Math.random().toString(36).slice(2);function Ma(n){if(!n[Dc]){n[Dc]=!0,ax.forEach(function(t){t!=="selectionchange"&&(NH.has(t)||wd(t,!1,n),wd(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Dc]||(e[Dc]=!0,wd("selectionchange",!1,e))}}function AC(n,e,t,r){switch(Yx(e)){case 1:var i=H8;break;case 4:i=U8;break;default:i=rd}t=i.bind(null,e,t,n),i=void 0,!Yf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function xd(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=_i(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Nx(function(){var c=s,u=Uf(t),h=[];e:{var f=CC.get(n);if(f!==void 0){var d=od,g=n;switch(n){case"keypress":if(kc(t)===0)break e;case"keydown":case"keyup":d=aH;break;case"focusin":g="focus",d=cd;break;case"focusout":g="blur",d=cd;break;case"beforeblur":case"afterblur":d=cd;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=Qx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=Y8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=uH;break;case vC:case bC:case wC:d=Q8;break;case xC:d=fH;break;case"scroll":d=W8;break;case"wheel":d=gH;break;case"copy":case"cut":case"paste":d=eH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=eC}var p=(e&4)!==0,b=!p&&n==="scroll",m=p?f!==null?f+"Capture":null:f;p=[];for(var y=c,v;y!==null;){v=y;var w=v.stateNode;if(v.tag===5&&w!==null&&(v=w,m!==null&&(w=ua(y,m),w!=null&&p.push(Ta(y,w,v)))),b)break;y=y.return}0<p.length&&(f=new d(f,g,null,t,u),h.push({event:f,listeners:p}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",d=n==="mouseout"||n==="pointerout",f&&t!==Hf&&(g=t.relatedTarget||t.fromElement)&&(_i(g)||g[hr]))break e;if((d||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,d?(g=t.relatedTarget||t.toElement,d=c,g=g?_i(g):null,g!==null&&(b=Ti(g),g!==b||g.tag!==5&&g.tag!==6)&&(g=null)):(d=null,g=c),d!==g)){if(p=Qx,w="onMouseLeave",m="onMouseEnter",y="mouse",(n==="pointerout"||n==="pointerover")&&(p=eC,w="onPointerLeave",m="onPointerEnter",y="pointer"),b=d==null?f:Xs(d),v=g==null?f:Xs(g),f=new p(w,y+"leave",d,t,u),f.target=b,f.relatedTarget=v,w=null,_i(u)===c&&(p=new p(m,y+"enter",g,t,u),p.target=v,p.relatedTarget=b,w=p),b=w,d&&g)t:{for(p=d,m=g,y=0,v=p;v;v=Us(v))y++;for(v=0,w=m;w;w=Us(w))v++;for(;0<y-v;)p=Us(p),y--;for(;0<v-y;)m=Us(m),v--;for(;y--;){if(p===m||m!==null&&p===m.alternate)break t;p=Us(p),m=Us(m)}p=null}else p=null;d!==null&&OC(h,f,d,p,!1),g!==null&&b!==null&&OC(h,b,g,p,!0)}}e:{if(f=c?Xs(c):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var x=xH;else if(oC(f))if(lC)x=EH;else{x=SH;var C=CH}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(x=PH);if(x&&(x=x(n,c))){aC(h,x,t,u);break e}C&&C(n,f,c),n==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&zf(f,"number",f.value)}switch(C=c?Xs(c):window,n){case"focusin":(oC(C)||C.contentEditable==="true")&&(Gs=C,pd=c,Aa=null);break;case"focusout":Aa=pd=Gs=null;break;case"mousedown":md=!0;break;case"contextmenu":case"mouseup":case"dragend":md=!1,mC(h,t,u);break;case"selectionchange":if(MH)break;case"keydown":case"keyup":mC(h,t,u)}var S;if(hd)e:{switch(n){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else qs?iC(n,t)&&(E="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(E="onCompositionStart");E&&(tC&&t.locale!=="ko"&&(qs||E!=="onCompositionStart"?E==="onCompositionEnd"&&qs&&(S=Kx()):(Wr=u,sd="value"in Wr?Wr.value:Wr.textContent,qs=!0)),C=Bc(c,E),0<C.length&&(E=new Zx(E,n,null,t,u),h.push({event:E,listeners:C}),S?E.data=S:(S=sC(t),S!==null&&(E.data=S)))),(S=mH?yH(n,t):vH(n,t))&&(c=Bc(c,"onBeforeInput"),0<c.length&&(u=new Zx("onBeforeInput","beforeinput",null,t,u),h.push({event:u,listeners:c}),u.data=S))}EC(h,e)})}function Ta(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Bc(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ua(n,t),s!=null&&r.unshift(Ta(n,s,i)),s=ua(n,e),s!=null&&r.push(Ta(n,s,i))),n=n.return}return r}function Us(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function OC(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=ua(t,s),l!=null&&o.unshift(Ta(t,l,a))):i||(l=ua(t,s),l!=null&&o.push(Ta(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var kH=/\r\n?/g,$H=/\u0000|\uFFFD/g;function MC(n){return(typeof n=="string"?n:""+n).replace(kH,`
`).replace($H,"")}function zc(n,e,t){if(e=MC(e),MC(n)!==e&&t)throw Error(R(425))}function Fc(){}var Cd=null,Sd=null;function Pd(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ed=typeof setTimeout=="function"?setTimeout:void 0,IH=typeof clearTimeout=="function"?clearTimeout:void 0,TC=typeof Promise=="function"?Promise:void 0,LH=typeof queueMicrotask=="function"?queueMicrotask:typeof TC!="undefined"?function(n){return TC.resolve(null).then(n).catch(RH)}:Ed;function RH(n){setTimeout(function(){throw n})}function Ad(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),ba(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);ba(e)}function Yr(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function _C(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Ws=Math.random().toString(36).slice(2),Gn="__reactFiber$"+Ws,_a="__reactProps$"+Ws,hr="__reactContainer$"+Ws,Od="__reactEvents$"+Ws,jH="__reactListeners$"+Ws,DH="__reactHandles$"+Ws;function _i(n){var e=n[Gn];if(e)return e;for(var t=n.parentNode;t;){if(e=t[hr]||t[Gn]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=_C(n);n!==null;){if(t=n[Gn])return t;n=_C(n)}return e}n=t,t=n.parentNode}return null}function Na(n){return n=n[Gn]||n[hr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Xs(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(R(33))}function Vc(n){return n[_a]||null}var Md=[],Ys=-1;function Kr(n){return{current:n}}function ke(n){0>Ys||(n.current=Md[Ys],Md[Ys]=null,Ys--)}function Ae(n,e){Ys++,Md[Ys]=n.current,n.current=e}var Jr={},Pt=Kr(Jr),It=Kr(!1),Ni=Jr;function Ks(n,e){var t=n.type.contextTypes;if(!t)return Jr;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Lt(n){return n=n.childContextTypes,n!=null}function qc(){ke(It),ke(Pt)}function NC(n,e,t){if(Pt.current!==Jr)throw Error(R(168));Ae(Pt,e),Ae(It,t)}function kC(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(R(108,C8(n)||"Unknown",i));return je({},t,r)}function Gc(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Jr,Ni=Pt.current,Ae(Pt,n),Ae(It,It.current),!0}function $C(n,e,t){var r=n.stateNode;if(!r)throw Error(R(169));t?(n=kC(n,e,Ni),r.__reactInternalMemoizedMergedChildContext=n,ke(It),ke(Pt),Ae(Pt,n)):ke(It),Ae(It,t)}var fr=null,Hc=!1,Td=!1;function IC(n){fr===null?fr=[n]:fr.push(n)}function BH(n){Hc=!0,IC(n)}function Qr(){if(!Td&&fr!==null){Td=!0;var n=0,e=ve;try{var t=fr;for(ve=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}fr=null,Hc=!1}catch(i){throw fr!==null&&(fr=fr.slice(n+1)),Rx(Jf,Qr),i}finally{ve=e,Td=!1}}return null}var Js=[],Qs=0,Uc=null,Wc=0,on=[],an=0,ki=null,dr=1,gr="";function $i(n,e){Js[Qs++]=Wc,Js[Qs++]=Uc,Uc=n,Wc=e}function LC(n,e,t){on[an++]=dr,on[an++]=gr,on[an++]=ki,ki=n;var r=dr;n=gr;var i=32-Cn(r)-1;r&=~(1<<i),t+=1;var s=32-Cn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,dr=1<<32-Cn(e)+i|t<<i|r,gr=s+n}else dr=1<<s|t<<i|r,gr=n}function _d(n){n.return!==null&&($i(n,1),LC(n,1,0))}function Nd(n){for(;n===Uc;)Uc=Js[--Qs],Js[Qs]=null,Wc=Js[--Qs],Js[Qs]=null;for(;n===ki;)ki=on[--an],on[an]=null,gr=on[--an],on[an]=null,dr=on[--an],on[an]=null}var Ut=null,Wt=null,Ie=!1,Pn=null;function RC(n,e){var t=hn(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function jC(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Ut=n,Wt=Yr(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Ut=n,Wt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=ki!==null?{id:dr,overflow:gr}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=hn(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Ut=n,Wt=null,!0):!1;default:return!1}}function kd(n){return(n.mode&1)!==0&&(n.flags&128)===0}function $d(n){if(Ie){var e=Wt;if(e){var t=e;if(!jC(n,e)){if(kd(n))throw Error(R(418));e=Yr(t.nextSibling);var r=Ut;e&&jC(n,e)?RC(r,t):(n.flags=n.flags&-4097|2,Ie=!1,Ut=n)}}else{if(kd(n))throw Error(R(418));n.flags=n.flags&-4097|2,Ie=!1,Ut=n}}}function DC(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ut=n}function Xc(n){if(n!==Ut)return!1;if(!Ie)return DC(n),Ie=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Pd(n.type,n.memoizedProps)),e&&(e=Wt)){if(kd(n))throw BC(),Error(R(418));for(;e;)RC(n,e),e=Yr(e.nextSibling)}if(DC(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(R(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Wt=Yr(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Wt=null}}else Wt=Ut?Yr(n.stateNode.nextSibling):null;return!0}function BC(){for(var n=Wt;n;)n=Yr(n.nextSibling)}function Zs(){Wt=Ut=null,Ie=!1}function Id(n){Pn===null?Pn=[n]:Pn.push(n)}var zH=ur.ReactCurrentBatchConfig;function En(n,e){if(n&&n.defaultProps){e=je({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var Yc=Kr(null),Kc=null,eo=null,Ld=null;function Rd(){Ld=eo=Kc=null}function jd(n){var e=Yc.current;ke(Yc),n._currentValue=e}function Dd(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function to(n,e){Kc=n,Ld=eo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Rt=!0),n.firstContext=null)}function ln(n){var e=n._currentValue;if(Ld!==n)if(n={context:n,memoizedValue:e,next:null},eo===null){if(Kc===null)throw Error(R(308));eo=n,Kc.dependencies={lanes:0,firstContext:n}}else eo=eo.next=n;return e}var Ii=null;function Bd(n){Ii===null?Ii=[n]:Ii.push(n)}function zC(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,Bd(e)):(t.next=i.next,i.next=t),e.interleaved=t,pr(n,r)}function pr(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Zr=!1;function zd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function FC(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function mr(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function ei(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,pr(n,t)}return i=r.interleaved,i===null?(e.next=e,Bd(r)):(e.next=i.next,i.next=e),r.interleaved=e,pr(n,t)}function Jc(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,ed(n,t)}}function VC(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Qc(n,e,t,r){var i=n.updateQueue;Zr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,d=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=n,p=a;switch(f=e,d=t,p.tag){case 1:if(g=p.payload,typeof g=="function"){h=g.call(d,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=p.payload,f=typeof g=="function"?g.call(d,h,f):g,f==null)break e;h=je({},h,f);break e;case 2:Zr=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else d={eventTime:d,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=d,l=h):u=u.next=d,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ji|=o,n.lanes=o,n.memoizedState=h}}function qC(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(R(191,i));i.call(r)}}}var GC=new ox.Component().refs;function Fd(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:je({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Zc={isMounted:function(n){return(n=n._reactInternals)?Ti(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Nt(),i=ii(n),s=mr(r,i);s.payload=e,t!=null&&(s.callback=t),e=ei(n,s,i),e!==null&&(Mn(e,n,i,r),Jc(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Nt(),i=ii(n),s=mr(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=ei(n,s,i),e!==null&&(Mn(e,n,i,r),Jc(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Nt(),r=ii(n),i=mr(t,r);i.tag=2,e!=null&&(i.callback=e),e=ei(n,i,r),e!==null&&(Mn(e,n,r,t),Jc(e,n,r))}};function HC(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ea(t,r)||!Ea(i,s):!0}function UC(n,e,t){var r=!1,i=Jr,s=e.contextType;return typeof s=="object"&&s!==null?s=ln(s):(i=Lt(e)?Ni:Pt.current,r=e.contextTypes,s=(r=r!=null)?Ks(n,i):Jr),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Zc,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function WC(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Zc.enqueueReplaceState(e,e.state,null)}function Vd(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=GC,zd(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ln(s):(s=Lt(e)?Ni:Pt.current,i.context=Ks(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Fd(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Zc.enqueueReplaceState(i,i.state,null),Qc(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function ka(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(R(309));var r=t.stateNode}if(!r)throw Error(R(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===GC&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(R(284));if(!t._owner)throw Error(R(290,n))}return n}function eu(n,e){throw n=Object.prototype.toString.call(e),Error(R(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function XC(n){var e=n._init;return e(n._payload)}function YC(n){function e(m,y){if(n){var v=m.deletions;v===null?(m.deletions=[y],m.flags|=16):v.push(y)}}function t(m,y){if(!n)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function r(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function i(m,y){return m=oi(m,y),m.index=0,m.sibling=null,m}function s(m,y,v){return m.index=v,n?(v=m.alternate,v!==null?(v=v.index,v<y?(m.flags|=2,y):v):(m.flags|=2,y)):(m.flags|=1048576,y)}function o(m){return n&&m.alternate===null&&(m.flags|=2),m}function a(m,y,v,w){return y===null||y.tag!==6?(y=Eg(v,m.mode,w),y.return=m,y):(y=i(y,v),y.return=m,y)}function l(m,y,v,w){var x=v.type;return x===js?u(m,y,v.props.children,w,v.key):y!==null&&(y.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Fr&&XC(x)===y.type)?(w=i(y,v.props),w.ref=ka(m,y,v),w.return=m,w):(w=bu(v.type,v.key,v.props,null,m.mode,w),w.ref=ka(m,y,v),w.return=m,w)}function c(m,y,v,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=Ag(v,m.mode,w),y.return=m,y):(y=i(y,v.children||[]),y.return=m,y)}function u(m,y,v,w,x){return y===null||y.tag!==7?(y=Fi(v,m.mode,w,x),y.return=m,y):(y=i(y,v),y.return=m,y)}function h(m,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Eg(""+y,m.mode,v),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case mc:return v=bu(y.type,y.key,y.props,null,m.mode,v),v.ref=ka(m,null,y),v.return=m,v;case Rs:return y=Ag(y,m.mode,v),y.return=m,y;case Fr:var w=y._init;return h(m,w(y._payload),v)}if(aa(y)||sa(y))return y=Fi(y,m.mode,v,null),y.return=m,y;eu(m,y)}return null}function f(m,y,v,w){var x=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return x!==null?null:a(m,y,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case mc:return v.key===x?l(m,y,v,w):null;case Rs:return v.key===x?c(m,y,v,w):null;case Fr:return x=v._init,f(m,y,x(v._payload),w)}if(aa(v)||sa(v))return x!==null?null:u(m,y,v,w,null);eu(m,v)}return null}function d(m,y,v,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return m=m.get(v)||null,a(y,m,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case mc:return m=m.get(w.key===null?v:w.key)||null,l(y,m,w,x);case Rs:return m=m.get(w.key===null?v:w.key)||null,c(y,m,w,x);case Fr:var C=w._init;return d(m,y,v,C(w._payload),x)}if(aa(w)||sa(w))return m=m.get(v)||null,u(y,m,w,x,null);eu(y,w)}return null}function g(m,y,v,w){for(var x=null,C=null,S=y,E=y=0,A=null;S!==null&&E<v.length;E++){S.index>E?(A=S,S=null):A=S.sibling;var O=f(m,S,v[E],w);if(O===null){S===null&&(S=A);break}n&&S&&O.alternate===null&&e(m,S),y=s(O,y,E),C===null?x=O:C.sibling=O,C=O,S=A}if(E===v.length)return t(m,S),Ie&&$i(m,E),x;if(S===null){for(;E<v.length;E++)S=h(m,v[E],w),S!==null&&(y=s(S,y,E),C===null?x=S:C.sibling=S,C=S);return Ie&&$i(m,E),x}for(S=r(m,S);E<v.length;E++)A=d(S,m,E,v[E],w),A!==null&&(n&&A.alternate!==null&&S.delete(A.key===null?E:A.key),y=s(A,y,E),C===null?x=A:C.sibling=A,C=A);return n&&S.forEach(function(T){return e(m,T)}),Ie&&$i(m,E),x}function p(m,y,v,w){var x=sa(v);if(typeof x!="function")throw Error(R(150));if(v=x.call(v),v==null)throw Error(R(151));for(var C=x=null,S=y,E=y=0,A=null,O=v.next();S!==null&&!O.done;E++,O=v.next()){S.index>E?(A=S,S=null):A=S.sibling;var T=f(m,S,O.value,w);if(T===null){S===null&&(S=A);break}n&&S&&T.alternate===null&&e(m,S),y=s(T,y,E),C===null?x=T:C.sibling=T,C=T,S=A}if(O.done)return t(m,S),Ie&&$i(m,E),x;if(S===null){for(;!O.done;E++,O=v.next())O=h(m,O.value,w),O!==null&&(y=s(O,y,E),C===null?x=O:C.sibling=O,C=O);return Ie&&$i(m,E),x}for(S=r(m,S);!O.done;E++,O=v.next())O=d(S,m,E,O.value,w),O!==null&&(n&&O.alternate!==null&&S.delete(O.key===null?E:O.key),y=s(O,y,E),C===null?x=O:C.sibling=O,C=O);return n&&S.forEach(function(k){return e(m,k)}),Ie&&$i(m,E),x}function b(m,y,v,w){if(typeof v=="object"&&v!==null&&v.type===js&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case mc:e:{for(var x=v.key,C=y;C!==null;){if(C.key===x){if(x=v.type,x===js){if(C.tag===7){t(m,C.sibling),y=i(C,v.props.children),y.return=m,m=y;break e}}else if(C.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Fr&&XC(x)===C.type){t(m,C.sibling),y=i(C,v.props),y.ref=ka(m,C,v),y.return=m,m=y;break e}t(m,C);break}else e(m,C);C=C.sibling}v.type===js?(y=Fi(v.props.children,m.mode,w,v.key),y.return=m,m=y):(w=bu(v.type,v.key,v.props,null,m.mode,w),w.ref=ka(m,y,v),w.return=m,m=w)}return o(m);case Rs:e:{for(C=v.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){t(m,y.sibling),y=i(y,v.children||[]),y.return=m,m=y;break e}else{t(m,y);break}else e(m,y);y=y.sibling}y=Ag(v,m.mode,w),y.return=m,m=y}return o(m);case Fr:return C=v._init,b(m,y,C(v._payload),w)}if(aa(v))return g(m,y,v,w);if(sa(v))return p(m,y,v,w);eu(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(t(m,y.sibling),y=i(y,v),y.return=m,m=y):(t(m,y),y=Eg(v,m.mode,w),y.return=m,m=y),o(m)):t(m,y)}return b}var no=YC(!0),KC=YC(!1),$a={},Hn=Kr($a),Ia=Kr($a),La=Kr($a);function Li(n){if(n===$a)throw Error(R(174));return n}function qd(n,e){switch(Ae(La,e),Ae(Ia,n),Ae(Hn,$a),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vf(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Vf(e,n)}ke(Hn),Ae(Hn,e)}function ro(){ke(Hn),ke(Ia),ke(La)}function JC(n){Li(La.current);var e=Li(Hn.current),t=Vf(e,n.type);e!==t&&(Ae(Ia,n),Ae(Hn,t))}function Gd(n){Ia.current===n&&(ke(Hn),ke(Ia))}var De=Kr(0);function tu(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Hd=[];function Ud(){for(var n=0;n<Hd.length;n++)Hd[n]._workInProgressVersionPrimary=null;Hd.length=0}var nu=ur.ReactCurrentDispatcher,Wd=ur.ReactCurrentBatchConfig,Ri=0,Be=null,st=null,dt=null,ru=!1,Ra=!1,ja=0,FH=0;function Et(){throw Error(R(321))}function Xd(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Sn(n[t],e[t]))return!1;return!0}function Yd(n,e,t,r,i,s){if(Ri=s,Be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,nu.current=n===null||n.memoizedState===null?HH:UH,n=t(r,i),Ra){s=0;do{if(Ra=!1,ja=0,25<=s)throw Error(R(301));s+=1,dt=st=null,e.updateQueue=null,nu.current=WH,n=t(r,i)}while(Ra)}if(nu.current=ou,e=st!==null&&st.next!==null,Ri=0,dt=st=Be=null,ru=!1,e)throw Error(R(300));return n}function Kd(){var n=ja!==0;return ja=0,n}function Un(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?Be.memoizedState=dt=n:dt=dt.next=n,dt}function cn(){if(st===null){var n=Be.alternate;n=n!==null?n.memoizedState:null}else n=st.next;var e=dt===null?Be.memoizedState:dt.next;if(e!==null)dt=e,st=n;else{if(n===null)throw Error(R(310));st=n,n={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},dt===null?Be.memoizedState=dt=n:dt=dt.next=n}return dt}function Da(n,e){return typeof e=="function"?e(n):e}function Jd(n){var e=cn(),t=e.queue;if(t===null)throw Error(R(311));t.lastRenderedReducer=n;var r=st,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Ri&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Be.lanes|=u,ji|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Sn(r,e.memoizedState)||(Rt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,Be.lanes|=s,ji|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Qd(n){var e=cn(),t=e.queue;if(t===null)throw Error(R(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Sn(s,e.memoizedState)||(Rt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function QC(){}function ZC(n,e){var t=Be,r=cn(),i=e(),s=!Sn(r.memoizedState,i);if(s&&(r.memoizedState=i,Rt=!0),r=r.queue,Zd(nS.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||dt!==null&&dt.memoizedState.tag&1){if(t.flags|=2048,Ba(9,tS.bind(null,t,r,i,e),void 0,null),gt===null)throw Error(R(349));Ri&30||eS(t,e,i)}return i}function eS(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function tS(n,e,t,r){e.value=t,e.getSnapshot=r,rS(e)&&iS(n)}function nS(n,e,t){return t(function(){rS(e)&&iS(n)})}function rS(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Sn(n,t)}catch(r){return!0}}function iS(n){var e=pr(n,1);e!==null&&Mn(e,n,1,-1)}function sS(n){var e=Un();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:n},e.queue=n,n=n.dispatch=GH.bind(null,Be,n),[e.memoizedState,n]}function Ba(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function oS(){return cn().memoizedState}function iu(n,e,t,r){var i=Un();Be.flags|=n,i.memoizedState=Ba(1|e,t,void 0,r===void 0?null:r)}function su(n,e,t,r){var i=cn();r=r===void 0?null:r;var s=void 0;if(st!==null){var o=st.memoizedState;if(s=o.destroy,r!==null&&Xd(r,o.deps)){i.memoizedState=Ba(e,t,s,r);return}}Be.flags|=n,i.memoizedState=Ba(1|e,t,s,r)}function aS(n,e){return iu(8390656,8,n,e)}function Zd(n,e){return su(2048,8,n,e)}function lS(n,e){return su(4,2,n,e)}function cS(n,e){return su(4,4,n,e)}function uS(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function hS(n,e,t){return t=t!=null?t.concat([n]):null,su(4,4,uS.bind(null,e,n),t)}function eg(){}function fS(n,e){var t=cn();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Xd(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function dS(n,e){var t=cn();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Xd(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function gS(n,e,t){return Ri&21?(Sn(t,e)||(t=zx(),Be.lanes|=t,ji|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Rt=!0),n.memoizedState=t)}function VH(n,e){var t=ve;ve=t!==0&&4>t?t:4,n(!0);var r=Wd.transition;Wd.transition={};try{n(!1),e()}finally{ve=t,Wd.transition=r}}function pS(){return cn().memoizedState}function qH(n,e,t){var r=ii(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},mS(n))yS(e,t);else if(t=zC(n,e,t,r),t!==null){var i=Nt();Mn(t,n,r,i),vS(t,e,r)}}function GH(n,e,t){var r=ii(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(mS(n))yS(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Sn(a,o)){var l=e.interleaved;l===null?(i.next=i,Bd(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch(c){}finally{}t=zC(n,e,i,r),t!==null&&(i=Nt(),Mn(t,n,r,i),vS(t,e,r))}}function mS(n){var e=n.alternate;return n===Be||e!==null&&e===Be}function yS(n,e){Ra=ru=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function vS(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,ed(n,t)}}var ou={readContext:ln,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useInsertionEffect:Et,useLayoutEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useMutableSource:Et,useSyncExternalStore:Et,useId:Et,unstable_isNewReconciler:!1},HH={readContext:ln,useCallback:function(n,e){return Un().memoizedState=[n,e===void 0?null:e],n},useContext:ln,useEffect:aS,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,iu(4194308,4,uS.bind(null,e,n),t)},useLayoutEffect:function(n,e){return iu(4194308,4,n,e)},useInsertionEffect:function(n,e){return iu(4,2,n,e)},useMemo:function(n,e){var t=Un();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Un();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=qH.bind(null,Be,n),[r.memoizedState,n]},useRef:function(n){var e=Un();return n={current:n},e.memoizedState=n},useState:sS,useDebugValue:eg,useDeferredValue:function(n){return Un().memoizedState=n},useTransition:function(){var n=sS(!1),e=n[0];return n=VH.bind(null,n[1]),Un().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Be,i=Un();if(Ie){if(t===void 0)throw Error(R(407));t=t()}else{if(t=e(),gt===null)throw Error(R(349));Ri&30||eS(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,aS(nS.bind(null,r,s,n),[n]),r.flags|=2048,Ba(9,tS.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Un(),e=gt.identifierPrefix;if(Ie){var t=gr,r=dr;t=(r&~(1<<32-Cn(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=ja++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=FH++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},UH={readContext:ln,useCallback:fS,useContext:ln,useEffect:Zd,useImperativeHandle:hS,useInsertionEffect:lS,useLayoutEffect:cS,useMemo:dS,useReducer:Jd,useRef:oS,useState:function(){return Jd(Da)},useDebugValue:eg,useDeferredValue:function(n){var e=cn();return gS(e,st.memoizedState,n)},useTransition:function(){var n=Jd(Da)[0],e=cn().memoizedState;return[n,e]},useMutableSource:QC,useSyncExternalStore:ZC,useId:pS,unstable_isNewReconciler:!1},WH={readContext:ln,useCallback:fS,useContext:ln,useEffect:Zd,useImperativeHandle:hS,useInsertionEffect:lS,useLayoutEffect:cS,useMemo:dS,useReducer:Qd,useRef:oS,useState:function(){return Qd(Da)},useDebugValue:eg,useDeferredValue:function(n){var e=cn();return st===null?e.memoizedState=n:gS(e,st.memoizedState,n)},useTransition:function(){var n=Qd(Da)[0],e=cn().memoizedState;return[n,e]},useMutableSource:QC,useSyncExternalStore:ZC,useId:pS,unstable_isNewReconciler:!1};function io(n,e){try{var t="",r=e;do t+=x8(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function tg(n,e,t){return{value:n,source:null,stack:t!=null?t:null,digest:e!=null?e:null}}function ng(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var XH=typeof WeakMap=="function"?WeakMap:Map;function bS(n,e,t){t=mr(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){du||(du=!0,yg=r),ng(n,e)},t}function wS(n,e,t){t=mr(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){ng(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){ng(n,e),typeof r!="function"&&(ni===null?ni=new Set([this]):ni.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function xS(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new XH;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=lU.bind(null,n,e,t),e.then(n,n))}function CS(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function SS(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=mr(-1,1),e.tag=2,ei(t,e,1))),t.lanes|=1),n)}var YH=ur.ReactCurrentOwner,Rt=!1;function _t(n,e,t,r){e.child=n===null?KC(e,null,t,r):no(e,n.child,t,r)}function PS(n,e,t,r,i){t=t.render;var s=e.ref;return to(e,i),r=Yd(n,e,t,r,s,i),t=Kd(),n!==null&&!Rt?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,yr(n,e,i)):(Ie&&t&&_d(e),e.flags|=1,_t(n,e,r,i),e.child)}function ES(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!Pg(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,AS(n,e,s,r,i)):(n=bu(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Ea,t(o,r)&&n.ref===e.ref)return yr(n,e,i)}return e.flags|=1,n=oi(s,r),n.ref=e.ref,n.return=e,e.child=n}function AS(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(Ea(s,r)&&n.ref===e.ref)if(Rt=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(Rt=!0);else return e.lanes=n.lanes,yr(n,e,i)}return rg(n,e,t,r,i)}function OS(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(oo,Xt),Xt|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Ae(oo,Xt),Xt|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Ae(oo,Xt),Xt|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Ae(oo,Xt),Xt|=r;return _t(n,e,i,t),e.child}function MS(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function rg(n,e,t,r,i){var s=Lt(t)?Ni:Pt.current;return s=Ks(e,s),to(e,i),t=Yd(n,e,t,r,s,i),r=Kd(),n!==null&&!Rt?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,yr(n,e,i)):(Ie&&r&&_d(e),e.flags|=1,_t(n,e,t,i),e.child)}function TS(n,e,t,r,i){if(Lt(t)){var s=!0;Gc(e)}else s=!1;if(to(e,i),e.stateNode===null)lu(n,e),UC(e,t,r),Vd(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=ln(c):(c=Lt(t)?Ni:Pt.current,c=Ks(e,c));var u=t.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&WC(e,o,r,c),Zr=!1;var f=e.memoizedState;o.state=f,Qc(e,r,o,i),l=e.memoizedState,a!==r||f!==l||It.current||Zr?(typeof u=="function"&&(Fd(e,t,u,r),l=e.memoizedState),(a=Zr||HC(e,t,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,FC(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:En(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=ln(l):(l=Lt(t)?Ni:Pt.current,l=Ks(e,l));var d=t.getDerivedStateFromProps;(u=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&WC(e,o,r,l),Zr=!1,f=e.memoizedState,o.state=f,Qc(e,r,o,i);var g=e.memoizedState;a!==h||f!==g||It.current||Zr?(typeof d=="function"&&(Fd(e,t,d,r),g=e.memoizedState),(c=Zr||HC(e,t,c,r,f,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),r=!1)}return ig(n,e,t,r,s,i)}function ig(n,e,t,r,i,s){MS(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&$C(e,t,!1),yr(n,e,s);r=e.stateNode,YH.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=no(e,n.child,null,s),e.child=no(e,null,a,s)):_t(n,e,a,s),e.memoizedState=r.state,i&&$C(e,t,!0),e.child}function _S(n){var e=n.stateNode;e.pendingContext?NC(n,e.pendingContext,e.pendingContext!==e.context):e.context&&NC(n,e.context,!1),qd(n,e.containerInfo)}function NS(n,e,t,r,i){return Zs(),Id(i),e.flags|=256,_t(n,e,t,r),e.child}var sg={dehydrated:null,treeContext:null,retryLane:0};function og(n){return{baseLanes:n,cachePool:null,transitions:null}}function kS(n,e,t){var r=e.pendingProps,i=De.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Ae(De,i&1),n===null)return $d(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=wu(o,r,0,null),n=Fi(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=og(t),e.memoizedState=sg,n):ag(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return KH(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=oi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=oi(a,s):(s=Fi(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?og(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=sg,r}return s=n.child,n=s.sibling,r=oi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function ag(n,e){return e=wu({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function au(n,e,t,r){return r!==null&&Id(r),no(e,n.child,null,t),n=ag(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function KH(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=tg(Error(R(422))),au(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=wu({mode:"visible",children:r.children},i,0,null),s=Fi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&no(e,n.child,null,o),e.child.memoizedState=og(o),e.memoizedState=sg,s);if(!(e.mode&1))return au(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(R(419)),r=tg(s,r,void 0),au(n,e,o,r)}if(a=(o&n.childLanes)!==0,Rt||a){if(r=gt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,pr(n,i),Mn(r,n,i,-1))}return Sg(),r=tg(Error(R(421))),au(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=cU.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,Wt=Yr(i.nextSibling),Ut=e,Ie=!0,Pn=null,n!==null&&(on[an++]=dr,on[an++]=gr,on[an++]=ki,dr=n.id,gr=n.overflow,ki=e),e=ag(e,r.children),e.flags|=4096,e)}function $S(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),Dd(n.return,e,t)}function lg(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function IS(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(_t(n,e,r.children,t),r=De.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&$S(n,t,e);else if(n.tag===19)$S(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Ae(De,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&tu(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),lg(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&tu(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}lg(e,!0,t,null,s);break;case"together":lg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function lu(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function yr(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),ji|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(R(153));if(e.child!==null){for(n=e.child,t=oi(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=oi(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function JH(n,e,t){switch(e.tag){case 3:_S(e),Zs();break;case 5:JC(e);break;case 1:Lt(e.type)&&Gc(e);break;case 4:qd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ae(Yc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ae(De,De.current&1),e.flags|=128,null):t&e.child.childLanes?kS(n,e,t):(Ae(De,De.current&1),n=yr(n,e,t),n!==null?n.sibling:null);Ae(De,De.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return IS(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ae(De,De.current),r)break;return null;case 22:case 23:return e.lanes=0,OS(n,e,t)}return yr(n,e,t)}var LS,cg,RS,jS;LS=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}},cg=function(){},RS=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Li(Hn.current);var s=null;switch(t){case"input":i=Df(n,i),r=Df(n,r),s=[];break;case"select":i=je({},i,{value:void 0}),r=je({},r,{value:void 0}),s=[];break;case"textarea":i=Ff(n,i),r=Ff(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Fc)}qf(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ia.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ia.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ne("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}},jS=function(n,e,t,r){t!==r&&(e.flags|=4)};function za(n,e){if(!Ie)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function At(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function QH(n,e,t){var r=e.pendingProps;switch(Nd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(e),null;case 1:return Lt(e.type)&&qc(),At(e),null;case 3:return r=e.stateNode,ro(),ke(It),ke(Pt),Ud(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Xc(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pn!==null&&(wg(Pn),Pn=null))),cg(n,e),At(e),null;case 5:Gd(e);var i=Li(La.current);if(t=e.type,n!==null&&e.stateNode!=null)RS(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(R(166));return At(e),null}if(n=Li(Hn.current),Xc(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Gn]=e,r[_a]=s,n=(e.mode&1)!==0,t){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(i=0;i<Oa.length;i++)Ne(Oa[i],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":mx(r,s),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ne("invalid",r);break;case"textarea":bx(r,s),Ne("invalid",r)}qf(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&zc(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&zc(r.textContent,a,n),i=["children",""+a]):ia.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ne("scroll",r)}switch(t){case"input":yc(r),vx(r,s,!0);break;case"textarea":yc(r),xx(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Fc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Cx(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Gn]=e,n[_a]=r,LS(n,e,!1,!1),e.stateNode=n;e:{switch(o=Gf(t,r),t){case"dialog":Ne("cancel",n),Ne("close",n),i=r;break;case"iframe":case"object":case"embed":Ne("load",n),i=r;break;case"video":case"audio":for(i=0;i<Oa.length;i++)Ne(Oa[i],n);i=r;break;case"source":Ne("error",n),i=r;break;case"img":case"image":case"link":Ne("error",n),Ne("load",n),i=r;break;case"details":Ne("toggle",n),i=r;break;case"input":mx(n,r),i=Df(n,r),Ne("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=je({},r,{value:void 0}),Ne("invalid",n);break;case"textarea":bx(n,r),i=Ff(n,r),Ne("invalid",n);break;default:i=r}qf(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Ex(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Sx(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&la(n,l):typeof l=="number"&&la(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ia.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ne("scroll",n):l!=null&&Of(n,s,l,o))}switch(t){case"input":yc(n),vx(n,r,!1);break;case"textarea":yc(n),xx(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Vr(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Ds(n,!!r.multiple,s,!1):r.defaultValue!=null&&Ds(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Fc)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return At(e),null;case 6:if(n&&e.stateNode!=null)jS(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(R(166));if(t=Li(La.current),Li(Hn.current),Xc(e)){if(r=e.stateNode,t=e.memoizedProps,r[Gn]=e,(s=r.nodeValue!==t)&&(n=Ut,n!==null))switch(n.tag){case 3:zc(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&zc(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Gn]=e,e.stateNode=r}return At(e),null;case 13:if(ke(De),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ie&&Wt!==null&&e.mode&1&&!(e.flags&128))BC(),Zs(),e.flags|=98560,s=!1;else if(s=Xc(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(R(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(R(317));s[Gn]=e}else Zs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;At(e),s=!1}else Pn!==null&&(wg(Pn),Pn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||De.current&1?ot===0&&(ot=3):Sg())),e.updateQueue!==null&&(e.flags|=4),At(e),null);case 4:return ro(),cg(n,e),n===null&&Ma(e.stateNode.containerInfo),At(e),null;case 10:return jd(e.type._context),At(e),null;case 17:return Lt(e.type)&&qc(),At(e),null;case 19:if(ke(De),s=e.memoizedState,s===null)return At(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)za(s,!1);else{if(ot!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=tu(n),o!==null){for(e.flags|=128,za(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Ae(De,De.current&1|2),e.child}n=n.sibling}s.tail!==null&&Ke()>ao&&(e.flags|=128,r=!0,za(s,!1),e.lanes=4194304)}else{if(!r)if(n=tu(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),za(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ie)return At(e),null}else 2*Ke()-s.renderingStartTime>ao&&t!==1073741824&&(e.flags|=128,r=!0,za(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ke(),e.sibling=null,t=De.current,Ae(De,r?t&1|2:t&1),e):(At(e),null);case 22:case 23:return Cg(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Xt&1073741824&&(At(e),e.subtreeFlags&6&&(e.flags|=8192)):At(e),null;case 24:return null;case 25:return null}throw Error(R(156,e.tag))}function ZH(n,e){switch(Nd(e),e.tag){case 1:return Lt(e.type)&&qc(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return ro(),ke(It),ke(Pt),Ud(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Gd(e),null;case 13:if(ke(De),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(R(340));Zs()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ke(De),null;case 4:return ro(),null;case 10:return jd(e.type._context),null;case 22:case 23:return Cg(),null;case 24:return null;default:return null}}var cu=!1,Ot=!1,eU=typeof WeakSet=="function"?WeakSet:Set,G=null;function so(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Ge(n,e,r)}else t.current=null}function ug(n,e,t){try{t()}catch(r){Ge(n,e,r)}}var DS=!1;function tU(n,e){if(Cd=Tc,n=pC(),gd(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch(w){t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=n,f=null;t:for(;;){for(var d;h!==t||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(d=h.firstChild)!==null;)f=h,h=d;for(;;){if(h===n)break t;if(f===t&&++c===i&&(a=o),f===s&&++u===r&&(l=o),(d=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=d}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Sd={focusedElem:n,selectionRange:t},Tc=!1,G=e;G!==null;)if(e=G,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,G=n;else for(;G!==null;){e=G;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var p=g.memoizedProps,b=g.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?p:En(e.type,p),b);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(w){Ge(e,e.return,w)}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}return g=DS,DS=!1,g}function Fa(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&ug(e,t,s)}i=i.next}while(i!==r)}}function uu(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function hg(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function BS(n){var e=n.alternate;e!==null&&(n.alternate=null,BS(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Gn],delete e[_a],delete e[Od],delete e[jH],delete e[DH])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function zS(n){return n.tag===5||n.tag===3||n.tag===4}function FS(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||zS(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function fg(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Fc));else if(r!==4&&(n=n.child,n!==null))for(fg(n,e,t),n=n.sibling;n!==null;)fg(n,e,t),n=n.sibling}function dg(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(dg(n,e,t),n=n.sibling;n!==null;)dg(n,e,t),n=n.sibling}var wt=null,An=!1;function ti(n,e,t){for(t=t.child;t!==null;)VS(n,e,t),t=t.sibling}function VS(n,e,t){if(qn&&typeof qn.onCommitFiberUnmount=="function")try{qn.onCommitFiberUnmount(Sc,t)}catch(a){}switch(t.tag){case 5:Ot||so(t,e);case 6:var r=wt,i=An;wt=null,ti(n,e,t),wt=r,An=i,wt!==null&&(An?(n=wt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):wt.removeChild(t.stateNode));break;case 18:wt!==null&&(An?(n=wt,t=t.stateNode,n.nodeType===8?Ad(n.parentNode,t):n.nodeType===1&&Ad(n,t),ba(n)):Ad(wt,t.stateNode));break;case 4:r=wt,i=An,wt=t.stateNode.containerInfo,An=!0,ti(n,e,t),wt=r,An=i;break;case 0:case 11:case 14:case 15:if(!Ot&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ug(t,e,o),i=i.next}while(i!==r)}ti(n,e,t);break;case 1:if(!Ot&&(so(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Ge(t,e,a)}ti(n,e,t);break;case 21:ti(n,e,t);break;case 22:t.mode&1?(Ot=(r=Ot)||t.memoizedState!==null,ti(n,e,t),Ot=r):ti(n,e,t);break;default:ti(n,e,t)}}function qS(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new eU),e.forEach(function(r){var i=uU.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function On(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:wt=a.stateNode,An=!1;break e;case 3:wt=a.stateNode.containerInfo,An=!0;break e;case 4:wt=a.stateNode.containerInfo,An=!0;break e}a=a.return}if(wt===null)throw Error(R(160));VS(s,o,i),wt=null,An=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ge(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)GS(e,n),e=e.sibling}function GS(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(On(e,n),Wn(n),r&4){try{Fa(3,n,n.return),uu(3,n)}catch(p){Ge(n,n.return,p)}try{Fa(5,n,n.return)}catch(p){Ge(n,n.return,p)}}break;case 1:On(e,n),Wn(n),r&512&&t!==null&&so(t,t.return);break;case 5:if(On(e,n),Wn(n),r&512&&t!==null&&so(t,t.return),n.flags&32){var i=n.stateNode;try{la(i,"")}catch(p){Ge(n,n.return,p)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&yx(i,s),Gf(a,o);var c=Gf(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?Ex(i,h):u==="dangerouslySetInnerHTML"?Sx(i,h):u==="children"?la(i,h):Of(i,u,h,c)}switch(a){case"input":Bf(i,s);break;case"textarea":wx(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?Ds(i,!!s.multiple,d,!1):f!==!!s.multiple&&(s.defaultValue!=null?Ds(i,!!s.multiple,s.defaultValue,!0):Ds(i,!!s.multiple,s.multiple?[]:"",!1))}i[_a]=s}catch(p){Ge(n,n.return,p)}}break;case 6:if(On(e,n),Wn(n),r&4){if(n.stateNode===null)throw Error(R(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(p){Ge(n,n.return,p)}}break;case 3:if(On(e,n),Wn(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{ba(e.containerInfo)}catch(p){Ge(n,n.return,p)}break;case 4:On(e,n),Wn(n);break;case 13:On(e,n),Wn(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(mg=Ke())),r&4&&qS(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(Ot=(c=Ot)||u,On(e,n),Ot=c):On(e,n),Wn(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(G=n,u=n.child;u!==null;){for(h=G=u;G!==null;){switch(f=G,d=f.child,f.tag){case 0:case 11:case 14:case 15:Fa(4,f,f.return);break;case 1:so(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,t=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(p){Ge(r,t,p)}}break;case 5:so(f,f.return);break;case 22:if(f.memoizedState!==null){WS(h);continue}}d!==null?(d.return=f,G=d):WS(h)}u=u.sibling}e:for(u=null,h=n;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Px("display",o))}catch(p){Ge(n,n.return,p)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(p){Ge(n,n.return,p)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:On(e,n),Wn(n),r&4&&qS(n);break;case 21:break;default:On(e,n),Wn(n)}}function Wn(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(zS(t)){var r=t;break e}t=t.return}throw Error(R(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(la(i,""),r.flags&=-33);var s=FS(n);dg(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=FS(n);fg(n,a,o);break;default:throw Error(R(161))}}catch(l){Ge(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function nU(n,e,t){G=n,HS(n)}function HS(n,e,t){for(var r=(n.mode&1)!==0;G!==null;){var i=G,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||cu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ot;a=cu;var c=Ot;if(cu=o,(Ot=l)&&!c)for(G=i;G!==null;)o=G,l=o.child,o.tag===22&&o.memoizedState!==null?XS(i):l!==null?(l.return=o,G=l):XS(i);for(;s!==null;)G=s,HS(s),s=s.sibling;G=i,cu=a,Ot=c}US(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,G=s):US(n)}}function US(n){for(;G!==null;){var e=G;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ot||uu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ot)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:En(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&qC(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}qC(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&ba(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}Ot||e.flags&512&&hg(e)}catch(f){Ge(e,e.return,f)}}if(e===n){G=null;break}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}}function WS(n){for(;G!==null;){var e=G;if(e===n){G=null;break}var t=e.sibling;if(t!==null){t.return=e.return,G=t;break}G=e.return}}function XS(n){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{uu(4,e)}catch(l){Ge(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ge(e,i,l)}}var s=e.return;try{hg(e)}catch(l){Ge(e,s,l)}break;case 5:var o=e.return;try{hg(e)}catch(l){Ge(e,o,l)}}}catch(l){Ge(e,e.return,l)}if(e===n){G=null;break}var a=e.sibling;if(a!==null){a.return=e.return,G=a;break}G=e.return}}var rU=Math.ceil,hu=ur.ReactCurrentDispatcher,gg=ur.ReactCurrentOwner,un=ur.ReactCurrentBatchConfig,he=0,gt=null,tt=null,xt=0,Xt=0,oo=Kr(0),ot=0,Va=null,ji=0,fu=0,pg=0,qa=null,jt=null,mg=0,ao=1/0,vr=null,du=!1,yg=null,ni=null,gu=!1,ri=null,pu=0,Ga=0,vg=null,mu=-1,yu=0;function Nt(){return he&6?Ke():mu!==-1?mu:mu=Ke()}function ii(n){return n.mode&1?he&2&&xt!==0?xt&-xt:zH.transition!==null?(yu===0&&(yu=zx()),yu):(n=ve,n!==0||(n=window.event,n=n===void 0?16:Yx(n.type)),n):1}function Mn(n,e,t,r){if(50<Ga)throw Ga=0,vg=null,Error(R(185));ga(n,t,r),(!(he&2)||n!==gt)&&(n===gt&&(!(he&2)&&(fu|=t),ot===4&&si(n,xt)),Dt(n,r),t===1&&he===0&&!(e.mode&1)&&(ao=Ke()+500,Hc&&Qr()))}function Dt(n,e){var t=n.callbackNode;z8(n,e);var r=Ac(n,n===gt?xt:0);if(r===0)t!==null&&jx(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&jx(t),e===1)n.tag===0?BH(KS.bind(null,n)):IC(KS.bind(null,n)),LH(function(){!(he&6)&&Qr()}),t=null;else{switch(Fx(r)){case 1:t=Jf;break;case 4:t=Dx;break;case 16:t=Cc;break;case 536870912:t=Bx;break;default:t=Cc}t=iP(t,YS.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function YS(n,e){if(mu=-1,yu=0,he&6)throw Error(R(327));var t=n.callbackNode;if(lo()&&n.callbackNode!==t)return null;var r=Ac(n,n===gt?xt:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=vu(n,r);else{e=r;var i=he;he|=2;var s=QS();(gt!==n||xt!==e)&&(vr=null,ao=Ke()+500,Bi(n,e));do try{oU();break}catch(a){JS(n,a)}while(!0);Rd(),hu.current=s,he=i,tt!==null?e=0:(gt=null,xt=0,e=ot)}if(e!==0){if(e===2&&(i=Qf(n),i!==0&&(r=i,e=bg(n,i))),e===1)throw t=Va,Bi(n,0),si(n,r),Dt(n,Ke()),t;if(e===6)si(n,r);else{if(i=n.current.alternate,!(r&30)&&!iU(i)&&(e=vu(n,r),e===2&&(s=Qf(n),s!==0&&(r=s,e=bg(n,s))),e===1))throw t=Va,Bi(n,0),si(n,r),Dt(n,Ke()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(R(345));case 2:zi(n,jt,vr);break;case 3:if(si(n,r),(r&130023424)===r&&(e=mg+500-Ke(),10<e)){if(Ac(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Nt(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=Ed(zi.bind(null,n,jt,vr),e);break}zi(n,jt,vr);break;case 4:if(si(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Cn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*rU(r/1960))-r,10<r){n.timeoutHandle=Ed(zi.bind(null,n,jt,vr),r);break}zi(n,jt,vr);break;case 5:zi(n,jt,vr);break;default:throw Error(R(329))}}}return Dt(n,Ke()),n.callbackNode===t?YS.bind(null,n):null}function bg(n,e){var t=qa;return n.current.memoizedState.isDehydrated&&(Bi(n,e).flags|=256),n=vu(n,e),n!==2&&(e=jt,jt=t,e!==null&&wg(e)),n}function wg(n){jt===null?jt=n:jt.push.apply(jt,n)}function iU(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Sn(s(),i))return!1}catch(o){return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function si(n,e){for(e&=~pg,e&=~fu,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Cn(e),r=1<<t;n[t]=-1,e&=~r}}function KS(n){if(he&6)throw Error(R(327));lo();var e=Ac(n,0);if(!(e&1))return Dt(n,Ke()),null;var t=vu(n,e);if(n.tag!==0&&t===2){var r=Qf(n);r!==0&&(e=r,t=bg(n,r))}if(t===1)throw t=Va,Bi(n,0),si(n,e),Dt(n,Ke()),t;if(t===6)throw Error(R(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,zi(n,jt,vr),Dt(n,Ke()),null}function xg(n,e){var t=he;he|=1;try{return n(e)}finally{he=t,he===0&&(ao=Ke()+500,Hc&&Qr())}}function Di(n){ri!==null&&ri.tag===0&&!(he&6)&&lo();var e=he;he|=1;var t=un.transition,r=ve;try{if(un.transition=null,ve=1,n)return n()}finally{ve=r,un.transition=t,he=e,!(he&6)&&Qr()}}function Cg(){Xt=oo.current,ke(oo)}function Bi(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,IH(t)),tt!==null)for(t=tt.return;t!==null;){var r=t;switch(Nd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&qc();break;case 3:ro(),ke(It),ke(Pt),Ud();break;case 5:Gd(r);break;case 4:ro();break;case 13:ke(De);break;case 19:ke(De);break;case 10:jd(r.type._context);break;case 22:case 23:Cg()}t=t.return}if(gt=n,tt=n=oi(n.current,null),xt=Xt=e,ot=0,Va=null,pg=fu=ji=0,jt=qa=null,Ii!==null){for(e=0;e<Ii.length;e++)if(t=Ii[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}Ii=null}return n}function JS(n,e){do{var t=tt;try{if(Rd(),nu.current=ou,ru){for(var r=Be.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ru=!1}if(Ri=0,dt=st=Be=null,Ra=!1,ja=0,gg.current=null,t===null||t.return===null){ot=1,Va=e,tt=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=xt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var d=CS(o);if(d!==null){d.flags&=-257,SS(d,o,a,s,e),d.mode&1&&xS(s,c,e),e=d,l=c;var g=e.updateQueue;if(g===null){var p=new Set;p.add(l),e.updateQueue=p}else g.add(l);break e}else{if(!(e&1)){xS(s,c,e),Sg();break e}l=Error(R(426))}}else if(Ie&&a.mode&1){var b=CS(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),SS(b,o,a,s,e),Id(io(l,a));break e}}s=l=io(l,a),ot!==4&&(ot=2),qa===null?qa=[s]:qa.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=bS(s,l,e);VC(s,m);break e;case 1:a=l;var y=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ni===null||!ni.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=wS(s,a,e);VC(s,w);break e}}s=s.return}while(s!==null)}eP(t)}catch(x){e=x,tt===t&&t!==null&&(tt=t=t.return);continue}break}while(!0)}function QS(){var n=hu.current;return hu.current=ou,n===null?ou:n}function Sg(){(ot===0||ot===3||ot===2)&&(ot=4),gt===null||!(ji&268435455)&&!(fu&268435455)||si(gt,xt)}function vu(n,e){var t=he;he|=2;var r=QS();(gt!==n||xt!==e)&&(vr=null,Bi(n,e));do try{sU();break}catch(i){JS(n,i)}while(!0);if(Rd(),he=t,hu.current=r,tt!==null)throw Error(R(261));return gt=null,xt=0,ot}function sU(){for(;tt!==null;)ZS(tt)}function oU(){for(;tt!==null&&!N8();)ZS(tt)}function ZS(n){var e=rP(n.alternate,n,Xt);n.memoizedProps=n.pendingProps,e===null?eP(n):tt=e,gg.current=null}function eP(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=ZH(t,e),t!==null){t.flags&=32767,tt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ot=6,tt=null;return}}else if(t=QH(t,e,Xt),t!==null){tt=t;return}if(e=e.sibling,e!==null){tt=e;return}tt=e=n}while(e!==null);ot===0&&(ot=5)}function zi(n,e,t){var r=ve,i=un.transition;try{un.transition=null,ve=1,aU(n,e,t,r)}finally{un.transition=i,ve=r}return null}function aU(n,e,t,r){do lo();while(ri!==null);if(he&6)throw Error(R(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(R(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(F8(n,s),n===gt&&(tt=gt=null,xt=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||gu||(gu=!0,iP(Cc,function(){return lo(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=un.transition,un.transition=null;var o=ve;ve=1;var a=he;he|=4,gg.current=null,tU(n,t),GS(t,n),OH(Sd),Tc=!!Cd,Sd=Cd=null,n.current=t,nU(t),k8(),he=a,ve=o,un.transition=s}else n.current=t;if(gu&&(gu=!1,ri=n,pu=i),s=n.pendingLanes,s===0&&(ni=null),L8(t.stateNode),Dt(n,Ke()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(du)throw du=!1,n=yg,yg=null,n;return pu&1&&n.tag!==0&&lo(),s=n.pendingLanes,s&1?n===vg?Ga++:(Ga=0,vg=n):Ga=0,Qr(),null}function lo(){if(ri!==null){var n=Fx(pu),e=un.transition,t=ve;try{if(un.transition=null,ve=16>n?16:n,ri===null)var r=!1;else{if(n=ri,ri=null,pu=0,he&6)throw Error(R(331));var i=he;for(he|=4,G=n.current;G!==null;){var s=G,o=s.child;if(G.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(G=c;G!==null;){var u=G;switch(u.tag){case 0:case 11:case 15:Fa(8,u,s)}var h=u.child;if(h!==null)h.return=u,G=h;else for(;G!==null;){u=G;var f=u.sibling,d=u.return;if(BS(u),u===c){G=null;break}if(f!==null){f.return=d,G=f;break}G=d}}}var g=s.alternate;if(g!==null){var p=g.child;if(p!==null){g.child=null;do{var b=p.sibling;p.sibling=null,p=b}while(p!==null)}}G=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,G=o;else e:for(;G!==null;){if(s=G,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Fa(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,G=m;break e}G=s.return}}var y=n.current;for(G=y;G!==null;){o=G;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,G=v;else e:for(o=y;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:uu(9,a)}}catch(x){Ge(a,a.return,x)}if(a===o){G=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,G=w;break e}G=a.return}}if(he=i,Qr(),qn&&typeof qn.onPostCommitFiberRoot=="function")try{qn.onPostCommitFiberRoot(Sc,n)}catch(x){}r=!0}return r}finally{ve=t,un.transition=e}}return!1}function tP(n,e,t){e=io(t,e),e=bS(n,e,1),n=ei(n,e,1),e=Nt(),n!==null&&(ga(n,1,e),Dt(n,e))}function Ge(n,e,t){if(n.tag===3)tP(n,n,t);else for(;e!==null;){if(e.tag===3){tP(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ni===null||!ni.has(r))){n=io(t,n),n=wS(e,n,1),e=ei(e,n,1),n=Nt(),e!==null&&(ga(e,1,n),Dt(e,n));break}}e=e.return}}function lU(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Nt(),n.pingedLanes|=n.suspendedLanes&t,gt===n&&(xt&t)===t&&(ot===4||ot===3&&(xt&130023424)===xt&&500>Ke()-mg?Bi(n,0):pg|=t),Dt(n,e)}function nP(n,e){e===0&&(n.mode&1?(e=Ec,Ec<<=1,!(Ec&130023424)&&(Ec=4194304)):e=1);var t=Nt();n=pr(n,e),n!==null&&(ga(n,e,t),Dt(n,t))}function cU(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),nP(n,t)}function uU(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(R(314))}r!==null&&r.delete(e),nP(n,t)}var rP;rP=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||It.current)Rt=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Rt=!1,JH(n,e,t);Rt=!!(n.flags&131072)}else Rt=!1,Ie&&e.flags&1048576&&LC(e,Wc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;lu(n,e),n=e.pendingProps;var i=Ks(e,Pt.current);to(e,t),i=Yd(null,e,r,n,i,t);var s=Kd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Lt(r)?(s=!0,Gc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,zd(e),i.updater=Zc,e.stateNode=i,i._reactInternals=e,Vd(e,r,n,t),e=ig(null,e,r,!0,s,t)):(e.tag=0,Ie&&s&&_d(e),_t(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(lu(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=fU(r),n=En(r,n),i){case 0:e=rg(null,e,r,n,t);break e;case 1:e=TS(null,e,r,n,t);break e;case 11:e=PS(null,e,r,n,t);break e;case 14:e=ES(null,e,r,En(r.type,n),t);break e}throw Error(R(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:En(r,i),rg(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:En(r,i),TS(n,e,r,i,t);case 3:e:{if(_S(e),n===null)throw Error(R(387));r=e.pendingProps,s=e.memoizedState,i=s.element,FC(n,e),Qc(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=io(Error(R(423)),e),e=NS(n,e,r,t,i);break e}else if(r!==i){i=io(Error(R(424)),e),e=NS(n,e,r,t,i);break e}else for(Wt=Yr(e.stateNode.containerInfo.firstChild),Ut=e,Ie=!0,Pn=null,t=KC(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Zs(),r===i){e=yr(n,e,t);break e}_t(n,e,r,t)}e=e.child}return e;case 5:return JC(e),n===null&&$d(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,Pd(r,i)?o=null:s!==null&&Pd(r,s)&&(e.flags|=32),MS(n,e),_t(n,e,o,t),e.child;case 6:return n===null&&$d(e),null;case 13:return kS(n,e,t);case 4:return qd(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=no(e,null,r,t):_t(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:En(r,i),PS(n,e,r,i,t);case 7:return _t(n,e,e.pendingProps,t),e.child;case 8:return _t(n,e,e.pendingProps.children,t),e.child;case 12:return _t(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ae(Yc,r._currentValue),r._currentValue=o,s!==null)if(Sn(s.value,o)){if(s.children===i.children&&!It.current){e=yr(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=mr(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),Dd(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(R(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Dd(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}_t(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,to(e,t),i=ln(i),r=r(i),e.flags|=1,_t(n,e,r,t),e.child;case 14:return r=e.type,i=En(r,e.pendingProps),i=En(r.type,i),ES(n,e,r,i,t);case 15:return AS(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:En(r,i),lu(n,e),e.tag=1,Lt(r)?(n=!0,Gc(e)):n=!1,to(e,t),UC(e,r,i),Vd(e,r,i,t),ig(null,e,r,!0,n,t);case 19:return IS(n,e,t);case 22:return OS(n,e,t)}throw Error(R(156,e.tag))};function iP(n,e){return Rx(n,e)}function hU(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(n,e,t,r){return new hU(n,e,t,r)}function Pg(n){return n=n.prototype,!(!n||!n.isReactComponent)}function fU(n){if(typeof n=="function")return Pg(n)?1:0;if(n!=null){if(n=n.$$typeof,n===_f)return 11;if(n===$f)return 14}return 2}function oi(n,e){var t=n.alternate;return t===null?(t=hn(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function bu(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")Pg(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case js:return Fi(t.children,i,s,e);case Mf:o=8,i|=8;break;case Tf:return n=hn(12,t,e,i|2),n.elementType=Tf,n.lanes=s,n;case Nf:return n=hn(13,t,e,i),n.elementType=Nf,n.lanes=s,n;case kf:return n=hn(19,t,e,i),n.elementType=kf,n.lanes=s,n;case fx:return wu(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ux:o=10;break e;case hx:o=9;break e;case _f:o=11;break e;case $f:o=14;break e;case Fr:o=16,r=null;break e}throw Error(R(130,n==null?n:typeof n,""))}return e=hn(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Fi(n,e,t,r){return n=hn(7,n,r,e),n.lanes=t,n}function wu(n,e,t,r){return n=hn(22,n,r,e),n.elementType=fx,n.lanes=t,n.stateNode={isHidden:!1},n}function Eg(n,e,t){return n=hn(6,n,null,e),n.lanes=t,n}function Ag(n,e,t){return e=hn(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function dU(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zf(0),this.expirationTimes=Zf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Og(n,e,t,r,i,s,o,a,l){return n=new dU(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=hn(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},zd(s),n}function gU(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rs,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function sP(n){if(!n)return Jr;n=n._reactInternals;e:{if(Ti(n)!==n||n.tag!==1)throw Error(R(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Lt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(R(171))}if(n.tag===1){var t=n.type;if(Lt(t))return kC(n,t,e)}return e}function oP(n,e,t,r,i,s,o,a,l){return n=Og(t,r,!0,n,i,s,o,a,l),n.context=sP(null),t=n.current,r=Nt(),i=ii(t),s=mr(r,i),s.callback=e!=null?e:null,ei(t,s,i),n.current.lanes=i,ga(n,i,r),Dt(n,r),n}function xu(n,e,t,r){var i=e.current,s=Nt(),o=ii(i);return t=sP(t),e.context===null?e.context=t:e.pendingContext=t,e=mr(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=ei(i,e,o),n!==null&&(Mn(n,i,o,s),Jc(n,i,o)),o}function Cu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function aP(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Mg(n,e){aP(n,e),(n=n.alternate)&&aP(n,e)}function pU(){return null}var lP=typeof reportError=="function"?reportError:function(n){console.error(n)};function Tg(n){this._internalRoot=n}Su.prototype.render=Tg.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(R(409));xu(n,e,null,null)},Su.prototype.unmount=Tg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Di(function(){xu(null,n,null,null)}),e[hr]=null}};function Su(n){this._internalRoot=n}Su.prototype.unstable_scheduleHydration=function(n){if(n){var e=Gx();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Ur.length&&e!==0&&e<Ur[t].priority;t++);Ur.splice(t,0,n),t===0&&Wx(n)}};function _g(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Pu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function cP(){}function mU(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Cu(o);s.call(c)}}var o=oP(e,r,n,0,null,!1,!1,"",cP);return n._reactRootContainer=o,n[hr]=o.current,Ma(n.nodeType===8?n.parentNode:n),Di(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Cu(l);a.call(c)}}var l=Og(n,0,!1,null,null,!1,!1,"",cP);return n._reactRootContainer=l,n[hr]=l.current,Ma(n.nodeType===8?n.parentNode:n),Di(function(){xu(e,l,t,r)}),l}function Eu(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Cu(o);a.call(l)}}xu(e,o,n,i)}else o=mU(t,e,n,i,r);return Cu(o)}Vx=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=da(e.pendingLanes);t!==0&&(ed(e,t|1),Dt(e,Ke()),!(he&6)&&(ao=Ke()+500,Qr()))}break;case 13:Di(function(){var r=pr(n,1);if(r!==null){var i=Nt();Mn(r,n,1,i)}}),Mg(n,1)}},td=function(n){if(n.tag===13){var e=pr(n,134217728);if(e!==null){var t=Nt();Mn(e,n,134217728,t)}Mg(n,134217728)}},qx=function(n){if(n.tag===13){var e=ii(n),t=pr(n,e);if(t!==null){var r=Nt();Mn(t,n,e,r)}Mg(n,e)}},Gx=function(){return ve},Hx=function(n,e){var t=ve;try{return ve=n,e()}finally{ve=t}},Wf=function(n,e,t){switch(e){case"input":if(Bf(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=Vc(r);if(!i)throw Error(R(90));px(r),Bf(r,i)}}}break;case"textarea":wx(n,t);break;case"select":e=t.value,e!=null&&Ds(n,!!t.multiple,e,!1)}},Tx=xg,_x=Di;var yU={usingClientEntryPoint:!1,Events:[Na,Xs,Vc,Ox,Mx,xg]},Ha={findFiberByHostInstance:_i,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vU={bundleType:Ha.bundleType,version:Ha.version,rendererPackageName:Ha.rendererPackageName,rendererConfig:Ha.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ur.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Ix(n),n===null?null:n.stateNode},findFiberByHostInstance:Ha.findFiberByHostInstance||pU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Au=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Au.isDisabled&&Au.supportsFiber)try{Sc=Au.inject(vU),qn=Au}catch(n){}}qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yU,qt.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_g(e))throw Error(R(200));return gU(n,e,null,t)},qt.createRoot=function(n,e){if(!_g(n))throw Error(R(299));var t=!1,r="",i=lP;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Og(n,1,!1,null,null,t,!1,r,i),n[hr]=e.current,Ma(n.nodeType===8?n.parentNode:n),new Tg(e)},qt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(R(188)):(n=Object.keys(n).join(","),Error(R(268,n)));return n=Ix(e),n=n===null?null:n.stateNode,n},qt.flushSync=function(n){return Di(n)},qt.hydrate=function(n,e,t){if(!Pu(e))throw Error(R(200));return Eu(null,n,e,!0,t)},qt.hydrateRoot=function(n,e,t){if(!_g(n))throw Error(R(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=lP;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=oP(e,null,n,1,t!=null?t:null,i,!1,s,o),n[hr]=e.current,Ma(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Su(e)},qt.render=function(n,e,t){if(!Pu(e))throw Error(R(200));return Eu(null,n,e,!1,t)},qt.unmountComponentAtNode=function(n){if(!Pu(n))throw Error(R(40));return n._reactRootContainer?(Di(function(){Eu(null,null,n,!1,function(){n._reactRootContainer=null,n[hr]=null})}),!0):!1},qt.unstable_batchedUpdates=xg,qt.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Pu(t))throw Error(R(200));if(n==null||n._reactInternals===void 0)throw Error(R(38));return Eu(n,e,t,!1,r)},qt.version="18.2.0-next-9e3b772b8-20220608";function uP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uP)}catch(n){console.error(n)}}uP(),rx.exports=qt;var hP=rx.exports,fP,dP=hP;fP=dP.createRoot,dP.hydrateRoot;var co;(function(n){let e=!1,t;const r=(l,c)=>{const u=c.payload;switch(c.type){case"add":{const h=l.findIndex(f=>f.id===u.id);return h>=0?(l[h]=u,[...l]):[...l,u]}case"remove":{const h=l.findIndex(f=>f.id===u.id);if(h>=0){const f=[...l];return f.splice(h,1),f}break}}return l};function i(l,c){e&&t({type:"add",payload:{id:l,portal:c}})}n.connect=i;function s(l){e&&t({type:"remove",payload:{id:l}})}n.disconnect=s;function o(){return e}n.isActive=o;function a(){return()=>{e=!0;const[l,c]=te.useReducer(r,[]);return t=c,te.createElement(te.Fragment,{children:l.map(u=>u.portal)})}}n.getProvider=a})(co||(co={}));var bU=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const Ng={};function wU(n){const{shape:e,component:t,effect:r,inherit:i}=n,s=bU(n,["shape","component","effect","inherit"]);if(!e)throw new Error("should specify shape in config");Ng[e]={component:t,effect:r},q.registerNode(e,Object.assign({inherit:i||"react-shape"},s),!0)}class xU extends te.PureComponent{constructor(e){super(e),this.state={tick:0}}componentDidMount(){const{node:e}=this.props;e.on("change:*",({key:t})=>{const r=Ng[e.shape];if(r){const{effect:i}=r;(!i||i.includes(t))&&this.setState({tick:this.state.tick+1})}})}clone(e){const{node:t,graph:r}=this.props;return typeof e.type=="string"?te.cloneElement(e):te.cloneElement(e,{node:t,graph:r})}render(){const{node:e}=this.props,t=Ng[e.shape];if(!t)return null;const{component:r}=t;if(te.isValidElement(r))return this.clone(r);const i=r;return this.clone(te.createElement(i,null))}}class Ou extends kt{targetId(){return`${this.graph.view.cid}:${this.cell.id}`}getComponentContainer(){return this.selectors&&this.selectors.foContent}confirmUpdate(e){const t=super.confirmUpdate(e);return this.handleAction(t,Ou.action,()=>{this.renderReactComponent()})}renderReactComponent(){this.unmountReactComponent();const e=this.getComponentContainer(),t=this.cell;if(e){const r=te.createElement(xU,{node:t,graph:this.graph});if(co.isActive()){const i=hP.createPortal(r,e);co.connect(this.targetId(),i)}else this.root=fP(e),this.root.render(r)}}unmountReactComponent(){this.getComponentContainer()&&this.root&&(this.root.unmount(),this.root=void 0)}onMouseDown(e,t,r){const i=e.target;if(i.tagName.toLowerCase()==="input"){const o=i.getAttribute("type");if(o==null||["text","password","number","email","search","tel","url"].includes(o))return}super.onMouseDown(e,t,r)}unmount(){return co.isActive()&&co.disconnect(this.targetId()),this.unmountReactComponent(),super.unmount(),this}}(function(n){n.action="react",n.config({bootstrap:[n.action],actions:{component:n.action}}),kt.registry.register("react-shape-view",n,!0)})(Ou||(Ou={}));function kg(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var $g,gP;function CU(){if(gP)return $g;gP=1;var n=Uv,e=4;function t(r){return n(r,e)}return $g=t,$g}var Ig,pP;function Lg(){if(pP)return Ig;pP=1;function n(e){return function(){return e}}return Ig=n,Ig}var Rg,mP;function SU(){if(mP)return Rg;mP=1;function n(e){return function(t,r,i){for(var s=-1,o=Object(t),a=i(t),l=a.length;l--;){var c=a[e?l:++s];if(r(o[c],c,o)===!1)break}return t}}return Rg=n,Rg}var jg,yP;function Dg(){if(yP)return jg;yP=1;var n=SU(),e=n();return jg=e,jg}var Bg,vP;function zg(){if(vP)return Bg;vP=1;var n=Dg(),e=Er;function t(r,i){return r&&n(r,i,e)}return Bg=t,Bg}var Fg,bP;function PU(){if(bP)return Fg;bP=1;var n=Yn;function e(t,r){return function(i,s){if(i==null)return i;if(!n(i))return t(i,s);for(var o=i.length,a=r?o:-1,l=Object(i);(r?a--:++a<o)&&s(l[a],a,l)!==!1;);return i}}return Fg=e,Fg}var Vg,wP;function Mu(){if(wP)return Vg;wP=1;var n=zg(),e=PU(),t=e(n);return Vg=t,Vg}var qg,xP;function Vi(){if(xP)return qg;xP=1;function n(e){return e}return qg=n,qg}var Gg,CP;function SP(){if(CP)return Gg;CP=1;var n=Vi();function e(t){return typeof t=="function"?t:n}return Gg=e,Gg}var Hg,PP;function EP(){if(PP)return Hg;PP=1;var n=Zu,e=Mu(),t=SP(),r=Qe;function i(s,o){var a=r(s)?n:e;return a(s,t(o))}return Hg=i,Hg}var Ug,AP;function OP(){return AP||(AP=1,Ug=EP()),Ug}var Wg,MP;function EU(){if(MP)return Wg;MP=1;var n=Mu();function e(t,r){var i=[];return n(t,function(s,o,a){r(s,o,a)&&i.push(s)}),i}return Wg=e,Wg}var Xg,TP;function AU(){if(TP)return Xg;TP=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return Xg=e,Xg}var Yg,_P;function OU(){if(_P)return Yg;_P=1;function n(e){return this.__data__.has(e)}return Yg=n,Yg}var Kg,NP;function kP(){if(NP)return Kg;NP=1;var n=Qu,e=AU(),t=OU();function r(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new n;++s<o;)this.add(i[s])}return r.prototype.add=r.prototype.push=e,r.prototype.has=t,Kg=r,Kg}var Jg,$P;function MU(){if($P)return Jg;$P=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}return Jg=n,Jg}var Qg,IP;function LP(){if(IP)return Qg;IP=1;function n(e,t){return e.has(t)}return Qg=n,Qg}var Zg,RP;function jP(){if(RP)return Zg;RP=1;var n=kP(),e=MU(),t=LP(),r=1,i=2;function s(o,a,l,c,u,h){var f=l&r,d=o.length,g=a.length;if(d!=g&&!(f&&g>d))return!1;var p=h.get(o),b=h.get(a);if(p&&b)return p==a&&b==o;var m=-1,y=!0,v=l&i?new n:void 0;for(h.set(o,a),h.set(a,o);++m<d;){var w=o[m],x=a[m];if(c)var C=f?c(x,w,m,a,o,h):c(w,x,m,o,a,h);if(C!==void 0){if(C)continue;y=!1;break}if(v){if(!e(a,function(S,E){if(!t(v,E)&&(w===S||u(w,S,l,c,h)))return v.push(E)})){y=!1;break}}else if(!(w===x||u(w,x,l,c,h))){y=!1;break}}return h.delete(o),h.delete(a),y}return Zg=s,Zg}var ep,DP;function TU(){if(DP)return ep;DP=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i,s){r[++t]=[s,i]}),r}return ep=n,ep}var tp,BP;function np(){if(BP)return tp;BP=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}return tp=n,tp}var rp,zP;function _U(){if(zP)return rp;zP=1;var n=Xi,e=_v,t=Ui,r=jP(),i=TU(),s=np(),o=1,a=2,l="[object Boolean]",c="[object Date]",u="[object Error]",h="[object Map]",f="[object Number]",d="[object RegExp]",g="[object Set]",p="[object String]",b="[object Symbol]",m="[object ArrayBuffer]",y="[object DataView]",v=n?n.prototype:void 0,w=v?v.valueOf:void 0;function x(C,S,E,A,O,T,k){switch(E){case y:if(C.byteLength!=S.byteLength||C.byteOffset!=S.byteOffset)return!1;C=C.buffer,S=S.buffer;case m:return!(C.byteLength!=S.byteLength||!T(new e(C),new e(S)));case l:case c:case f:return t(+C,+S);case u:return C.name==S.name&&C.message==S.message;case d:case p:return C==S+"";case h:var B=i;case g:var W=A&o;if(B||(B=s),C.size!=S.size&&!W)return!1;var M=k.get(C);if(M)return M==S;A|=a,k.set(C,S);var $=r(B(C),B(S),A,O,T,k);return k.delete(C),$;case b:if(w)return w.call(C)==w.call(S)}return!1}return rp=x,rp}var ip,FP;function NU(){if(FP)return ip;FP=1;var n=Cv,e=1,t=Object.prototype,r=t.hasOwnProperty;function i(s,o,a,l,c,u){var h=a&e,f=n(s),d=f.length,g=n(o),p=g.length;if(d!=p&&!h)return!1;for(var b=d;b--;){var m=f[b];if(!(h?m in o:r.call(o,m)))return!1}var y=u.get(s),v=u.get(o);if(y&&v)return y==o&&v==s;var w=!0;u.set(s,o),u.set(o,s);for(var x=h;++b<d;){m=f[b];var C=s[m],S=o[m];if(l)var E=h?l(S,C,m,o,s,u):l(C,S,m,s,o,u);if(!(E===void 0?C===S||c(C,S,a,l,u):E)){w=!1;break}x||(x=m=="constructor")}if(w&&!x){var A=s.constructor,O=o.constructor;A!=O&&"constructor"in s&&"constructor"in o&&!(typeof A=="function"&&A instanceof A&&typeof O=="function"&&O instanceof O)&&(w=!1)}return u.delete(s),u.delete(o),w}return ip=i,ip}var sp,VP;function kU(){if(VP)return sp;VP=1;var n=al,e=jP(),t=_U(),r=NU(),i=es,s=Qe,o=Qi,a=xo,l=1,c="[object Arguments]",u="[object Array]",h="[object Object]",f=Object.prototype,d=f.hasOwnProperty;function g(p,b,m,y,v,w){var x=s(p),C=s(b),S=x?u:i(p),E=C?u:i(b);S=S==c?h:S,E=E==c?h:E;var A=S==h,O=E==h,T=S==E;if(T&&o(p)){if(!o(b))return!1;x=!0,A=!1}if(T&&!A)return w||(w=new n),x||a(p)?e(p,b,m,y,v,w):t(p,b,S,m,y,v,w);if(!(m&l)){var k=A&&d.call(p,"__wrapped__"),B=O&&d.call(b,"__wrapped__");if(k||B){var W=k?p.value():p,M=B?b.value():b;return w||(w=new n),v(W,M,m,y,w)}}return T?(w||(w=new n),r(p,b,m,y,v,w)):!1}return sp=g,sp}var op,qP;function GP(){if(qP)return op;qP=1;var n=kU(),e=Rn;function t(r,i,s,o,a){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:n(r,i,s,o,t,a)}return op=t,op}var ap,HP;function $U(){if(HP)return ap;HP=1;var n=al,e=GP(),t=1,r=2;function i(s,o,a,l){var c=a.length,u=c,h=!l;if(s==null)return!u;for(s=Object(s);c--;){var f=a[c];if(h&&f[2]?f[1]!==s[f[0]]:!(f[0]in s))return!1}for(;++c<u;){f=a[c];var d=f[0],g=s[d],p=f[1];if(h&&f[2]){if(g===void 0&&!(d in s))return!1}else{var b=new n;if(l)var m=l(g,p,d,s,o,b);if(!(m===void 0?e(p,g,t|r,l,b):m))return!1}}return!0}return ap=i,ap}var lp,UP;function WP(){if(UP)return lp;UP=1;var n=Jt;function e(t){return t===t&&!n(t)}return lp=e,lp}var cp,XP;function IU(){if(XP)return cp;XP=1;var n=WP(),e=Er;function t(r){for(var i=e(r),s=i.length;s--;){var o=i[s],a=r[o];i[s]=[o,a,n(a)]}return i}return cp=t,cp}var up,YP;function KP(){if(YP)return up;YP=1;function n(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}return up=n,up}var hp,JP;function LU(){if(JP)return hp;JP=1;var n=$U(),e=IU(),t=KP();function r(i){var s=e(i);return s.length==1&&s[0][2]?t(s[0][0],s[0][1]):function(o){return o===i||n(o,i,s)}}return hp=r,hp}var fp,QP;function uo(){if(QP)return fp;QP=1;var n=fi,e=Rn,t="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&n(i)==t}return fp=r,fp}var dp,ZP;function gp(){if(ZP)return dp;ZP=1;var n=Qe,e=uo(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,o){if(n(s))return!1;var a=typeof s;return a=="number"||a=="symbol"||a=="boolean"||s==null||e(s)?!0:r.test(s)||!t.test(s)||o!=null&&s in Object(o)}return dp=i,dp}var pp,eE;function RU(){if(eE)return pp;eE=1;var n=Qu,e="Expected a function";function t(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var o=arguments,a=i?i.apply(this,o):o[0],l=s.cache;if(l.has(a))return l.get(a);var c=r.apply(this,o);return s.cache=l.set(a,c)||l,c};return s.cache=new(t.Cache||n),s}return t.Cache=n,pp=t,pp}var mp,tE;function jU(){if(tE)return mp;tE=1;var n=RU(),e=500;function t(r){var i=n(r,function(o){return s.size===e&&s.clear(),o}),s=i.cache;return i}return mp=t,mp}var yp,nE;function DU(){if(nE)return yp;nE=1;var n=jU(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,r=n(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(o,a,l,c){s.push(l?c.replace(t,"$1"):a||o)}),s});return yp=r,yp}var vp,rE;function Tu(){if(rE)return vp;rE=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,s=Array(i);++r<i;)s[r]=t(e[r],r,e);return s}return vp=n,vp}var bp,iE;function BU(){if(iE)return bp;iE=1;var n=Xi,e=Tu(),t=Qe,r=uo(),i=1/0,s=n?n.prototype:void 0,o=s?s.toString:void 0;function a(l){if(typeof l=="string")return l;if(t(l))return e(l,a)+"";if(r(l))return o?o.call(l):"";var c=l+"";return c=="0"&&1/l==-i?"-0":c}return bp=a,bp}var wp,sE;function oE(){if(sE)return wp;sE=1;var n=BU();function e(t){return t==null?"":n(t)}return wp=e,wp}var xp,aE;function _u(){if(aE)return xp;aE=1;var n=Qe,e=gp(),t=DU(),r=oE();function i(s,o){return n(s)?s:e(s,o)?[s]:t(r(s))}return xp=i,xp}var Cp,lE;function Ua(){if(lE)return Cp;lE=1;var n=uo(),e=1/0;function t(r){if(typeof r=="string"||n(r))return r;var i=r+"";return i=="0"&&1/r==-e?"-0":i}return Cp=t,Cp}var Sp,cE;function Nu(){if(cE)return Sp;cE=1;var n=_u(),e=Ua();function t(r,i){i=n(i,r);for(var s=0,o=i.length;r!=null&&s<o;)r=r[e(i[s++])];return s&&s==o?r:void 0}return Sp=t,Sp}var Pp,uE;function zU(){if(uE)return Pp;uE=1;var n=Nu();function e(t,r,i){var s=t==null?void 0:n(t,r);return s===void 0?i:s}return Pp=e,Pp}var Ep,hE;function FU(){if(hE)return Ep;hE=1;function n(e,t){return e!=null&&t in Object(e)}return Ep=n,Ep}var Ap,fE;function dE(){if(fE)return Ap;fE=1;var n=_u(),e=wo,t=Qe,r=hl,i=eh,s=Ua();function o(a,l,c){l=n(l,a);for(var u=-1,h=l.length,f=!1;++u<h;){var d=s(l[u]);if(!(f=a!=null&&c(a,d)))break;a=a[d]}return f||++u!=h?f:(h=a==null?0:a.length,!!h&&i(h)&&r(d,h)&&(t(a)||e(a)))}return Ap=o,Ap}var Op,gE;function pE(){if(gE)return Op;gE=1;var n=FU(),e=dE();function t(r,i){return r!=null&&e(r,i,n)}return Op=t,Op}var Mp,mE;function VU(){if(mE)return Mp;mE=1;var n=GP(),e=zU(),t=pE(),r=gp(),i=WP(),s=KP(),o=Ua(),a=1,l=2;function c(u,h){return r(u)&&i(h)?s(o(u),h):function(f){var d=e(f,u);return d===void 0&&d===h?t(f,u):n(h,d,a|l)}}return Mp=c,Mp}var Tp,yE;function vE(){if(yE)return Tp;yE=1;function n(e){return function(t){return t==null?void 0:t[e]}}return Tp=n,Tp}var _p,bE;function qU(){if(bE)return _p;bE=1;var n=Nu();function e(t){return function(r){return n(r,t)}}return _p=e,_p}var Np,wE;function GU(){if(wE)return Np;wE=1;var n=vE(),e=qU(),t=gp(),r=Ua();function i(s){return t(s)?n(r(s)):e(s)}return Np=i,Np}var kp,xE;function br(){if(xE)return kp;xE=1;var n=LU(),e=VU(),t=Vi(),r=Qe,i=GU();function s(o){return typeof o=="function"?o:o==null?t:typeof o=="object"?r(o)?e(o[0],o[1]):n(o):i(o)}return kp=s,kp}var $p,CE;function SE(){if(CE)return $p;CE=1;var n=yv,e=EU(),t=br(),r=Qe;function i(s,o){var a=r(s)?n:e;return a(s,t(o,3))}return $p=i,$p}var Ip,PE;function HU(){if(PE)return Ip;PE=1;var n=Object.prototype,e=n.hasOwnProperty;function t(r,i){return r!=null&&e.call(r,i)}return Ip=t,Ip}var Lp,EE;function AE(){if(EE)return Lp;EE=1;var n=HU(),e=dE();function t(r,i){return r!=null&&e(r,i,n)}return Lp=t,Lp}var Rp,OE;function UU(){if(OE)return Rp;OE=1;var n=nh,e=es,t=wo,r=Qe,i=Yn,s=Qi,o=gl,a=xo,l="[object Map]",c="[object Set]",u=Object.prototype,h=u.hasOwnProperty;function f(d){if(d==null)return!0;if(i(d)&&(r(d)||typeof d=="string"||typeof d.splice=="function"||s(d)||a(d)||t(d)))return!d.length;var g=e(d);if(g==l||g==c)return!d.size;if(o(d))return!n(d).length;for(var p in d)if(h.call(d,p))return!1;return!0}return Rp=f,Rp}var jp,ME;function TE(){if(ME)return jp;ME=1;function n(e){return e===void 0}return jp=n,jp}var Dp,_E;function NE(){if(_E)return Dp;_E=1;var n=Mu(),e=Yn;function t(r,i){var s=-1,o=e(r)?Array(r.length):[];return n(r,function(a,l,c){o[++s]=i(a,l,c)}),o}return Dp=t,Dp}var Bp,kE;function $E(){if(kE)return Bp;kE=1;var n=Tu(),e=br(),t=NE(),r=Qe;function i(s,o){var a=r(s)?n:t;return a(s,e(o,3))}return Bp=i,Bp}var zp,IE;function WU(){if(IE)return zp;IE=1;function n(e,t,r,i){var s=-1,o=e==null?0:e.length;for(i&&o&&(r=e[++s]);++s<o;)r=t(r,e[s],s,e);return r}return zp=n,zp}var Fp,LE;function XU(){if(LE)return Fp;LE=1;function n(e,t,r,i,s){return s(e,function(o,a,l){r=i?(i=!1,o):t(r,o,a,l)}),r}return Fp=n,Fp}var Vp,RE;function jE(){if(RE)return Vp;RE=1;var n=WU(),e=Mu(),t=br(),r=XU(),i=Qe;function s(o,a,l){var c=i(o)?n:r,u=arguments.length<3;return c(o,t(a,4),l,u,e)}return Vp=s,Vp}var qp,DE;function YU(){if(DE)return qp;DE=1;var n=fi,e=Qe,t=Rn,r="[object String]";function i(s){return typeof s=="string"||!e(s)&&t(s)&&n(s)==r}return qp=i,qp}var Gp,BE;function KU(){if(BE)return Gp;BE=1;var n=vE(),e=n("length");return Gp=e,Gp}var Hp,zE;function JU(){if(zE)return Hp;zE=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+t+r,s="\\ufe0e\\ufe0f",o="\\u200d",a=RegExp("["+o+n+i+s+"]");function l(c){return a.test(c)}return Hp=l,Hp}var Up,FE;function QU(){if(FE)return Up;FE=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+t+r,s="\\ufe0e\\ufe0f",o="["+n+"]",a="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",c="(?:"+a+"|"+l+")",u="[^"+n+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",d="\\u200d",g=c+"?",p="["+s+"]?",b="(?:"+d+"(?:"+[u,h,f].join("|")+")"+p+g+")*",m=p+g+b,y="(?:"+[u+a+"?",a,h,f,o].join("|")+")",v=RegExp(l+"(?="+l+")|"+y+m,"g");function w(x){for(var C=v.lastIndex=0;v.test(x);)++C;return C}return Up=w,Up}var Wp,VE;function ZU(){if(VE)return Wp;VE=1;var n=KU(),e=JU(),t=QU();function r(i){return e(i)?t(i):n(i)}return Wp=r,Wp}var Xp,qE;function eW(){if(qE)return Xp;qE=1;var n=nh,e=es,t=Yn,r=YU(),i=ZU(),s="[object Map]",o="[object Set]";function a(l){if(l==null)return 0;if(t(l))return r(l)?i(l):l.length;var c=e(l);return c==s||c==o?l.size:n(l).length}return Xp=a,Xp}var Yp,GE;function tW(){if(GE)return Yp;GE=1;var n=Zu,e=jv,t=zg(),r=br(),i=ml,s=Qe,o=Qi,a=vo,l=Jt,c=xo;function u(h,f,d){var g=s(h),p=g||o(h)||c(h);if(f=r(f,4),d==null){var b=h&&h.constructor;p?d=g?new b:[]:l(h)?d=a(b)?e(i(h)):{}:d={}}return(p?n:t)(h,function(m,y,v){return f(d,m,y,v)}),d}return Yp=u,Yp}var Kp,HE;function nW(){if(HE)return Kp;HE=1;var n=Xi,e=wo,t=Qe,r=n?n.isConcatSpreadable:void 0;function i(s){return t(s)||e(s)||!!(r&&s&&s[r])}return Kp=i,Kp}var Jp,UE;function Qp(){if(UE)return Jp;UE=1;var n=ih,e=nW();function t(r,i,s,o,a){var l=-1,c=r.length;for(s||(s=e),a||(a=[]);++l<c;){var u=r[l];i>0&&s(u)?i>1?t(u,i-1,s,o,a):n(a,u):o||(a[a.length]=u)}return a}return Jp=t,Jp}var Zp,WE;function rW(){if(WE)return Zp;WE=1;function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}return Zp=n,Zp}var em,XE;function YE(){if(XE)return em;XE=1;var n=rW(),e=Math.max;function t(r,i,s){return i=e(i===void 0?r.length-1:i,0),function(){for(var o=arguments,a=-1,l=e(o.length-i,0),c=Array(l);++a<l;)c[a]=o[i+a];a=-1;for(var u=Array(i+1);++a<i;)u[a]=o[a];return u[i]=s(c),n(r,this,u)}}return em=t,em}var tm,KE;function iW(){if(KE)return tm;KE=1;var n=Lg(),e=av,t=Vi(),r=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:n(s),writable:!0})}:t;return tm=r,tm}var nm,JE;function sW(){if(JE)return nm;JE=1;var n=800,e=16,t=Date.now;function r(i){var s=0,o=0;return function(){var a=t(),l=e-(a-o);if(o=a,l>0){if(++s>=n)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return nm=r,nm}var rm,QE;function ZE(){if(QE)return rm;QE=1;var n=iW(),e=sW(),t=e(n);return rm=t,rm}var im,eA;function ku(){if(eA)return im;eA=1;var n=Vi(),e=YE(),t=ZE();function r(i,s){return t(e(i,s,n),i+"")}return im=r,im}var sm,tA;function nA(){if(tA)return sm;tA=1;function n(e,t,r,i){for(var s=e.length,o=r+(i?1:-1);i?o--:++o<s;)if(t(e[o],o,e))return o;return-1}return sm=n,sm}var om,rA;function oW(){if(rA)return om;rA=1;function n(e){return e!==e}return om=n,om}var am,iA;function aW(){if(iA)return am;iA=1;function n(e,t,r){for(var i=r-1,s=e.length;++i<s;)if(e[i]===t)return i;return-1}return am=n,am}var lm,sA;function lW(){if(sA)return lm;sA=1;var n=nA(),e=oW(),t=aW();function r(i,s,o){return s===s?t(i,s,o):n(i,e,o)}return lm=r,lm}var cm,oA;function cW(){if(oA)return cm;oA=1;var n=lW();function e(t,r){var i=t==null?0:t.length;return!!i&&n(t,r,0)>-1}return cm=e,cm}var um,aA;function uW(){if(aA)return um;aA=1;function n(e,t,r){for(var i=-1,s=e==null?0:e.length;++i<s;)if(r(t,e[i]))return!0;return!1}return um=n,um}var hm,lA;function hW(){if(lA)return hm;lA=1;function n(){}return hm=n,hm}var fm,cA;function fW(){if(cA)return fm;cA=1;var n=Sv,e=hW(),t=np(),r=1/0,i=n&&1/t(new n([,-0]))[1]==r?function(s){return new n(s)}:e;return fm=i,fm}var dm,uA;function dW(){if(uA)return dm;uA=1;var n=kP(),e=cW(),t=uW(),r=LP(),i=fW(),s=np(),o=200;function a(l,c,u){var h=-1,f=e,d=l.length,g=!0,p=[],b=p;if(u)g=!1,f=t;else if(d>=o){var m=c?null:i(l);if(m)return s(m);g=!1,f=r,b=new n}else b=c?[]:p;e:for(;++h<d;){var y=l[h],v=c?c(y):y;if(y=u||y!==0?y:0,g&&v===v){for(var w=b.length;w--;)if(b[w]===v)continue e;c&&b.push(v),p.push(y)}else f(b,v,u)||(b!==p&&b.push(v),p.push(y))}return p}return dm=a,dm}var gm,hA;function fA(){if(hA)return gm;hA=1;var n=Yn,e=Rn;function t(r){return e(r)&&n(r)}return gm=t,gm}var pm,dA;function gW(){if(dA)return pm;dA=1;var n=Qp(),e=ku(),t=dW(),r=fA(),i=e(function(s){return t(n(s,1,r,!0))});return pm=i,pm}var mm,gA;function pW(){if(gA)return mm;gA=1;var n=Tu();function e(t,r){return n(r,function(i){return t[i]})}return mm=e,mm}var ym,pA;function mA(){if(pA)return ym;pA=1;var n=pW(),e=Er;function t(r){return r==null?[]:n(r,e(r))}return ym=t,ym}var vm,yA;function fn(){if(yA)return vm;yA=1;var n;if(typeof kg=="function")try{n={clone:CU(),constant:Lg(),each:OP(),filter:SE(),has:AE(),isArray:Qe,isEmpty:UU(),isFunction:vo,isUndefined:TE(),keys:Er,map:$E(),reduce:jE(),size:eW(),transform:tW(),union:gW(),values:mA()}}catch(e){}return n||(n=window._),vm=n,vm}var bm,vA;function wm(){if(vA)return bm;vA=1;var n=fn();bm=i;var e="\0",t="\0",r="";function i(u){this._isDirected=n.has(u,"directed")?u.directed:!0,this._isMultigraph=n.has(u,"multigraph")?u.multigraph:!1,this._isCompound=n.has(u,"compound")?u.compound:!1,this._label=void 0,this._defaultNodeLabelFn=n.constant(void 0),this._defaultEdgeLabelFn=n.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[t]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(u){return this._label=u,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(u){return n.isFunction(u)||(u=n.constant(u)),this._defaultNodeLabelFn=u,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return n.keys(this._nodes)},i.prototype.sources=function(){var u=this;return n.filter(this.nodes(),function(h){return n.isEmpty(u._in[h])})},i.prototype.sinks=function(){var u=this;return n.filter(this.nodes(),function(h){return n.isEmpty(u._out[h])})},i.prototype.setNodes=function(u,h){var f=arguments,d=this;return n.each(u,function(g){f.length>1?d.setNode(g,h):d.setNode(g)}),this},i.prototype.setNode=function(u,h){return n.has(this._nodes,u)?(arguments.length>1&&(this._nodes[u]=h),this):(this._nodes[u]=arguments.length>1?h:this._defaultNodeLabelFn(u),this._isCompound&&(this._parent[u]=t,this._children[u]={},this._children[t][u]=!0),this._in[u]={},this._preds[u]={},this._out[u]={},this._sucs[u]={},++this._nodeCount,this)},i.prototype.node=function(u){return this._nodes[u]},i.prototype.hasNode=function(u){return n.has(this._nodes,u)},i.prototype.removeNode=function(u){var h=this;if(n.has(this._nodes,u)){var f=function(d){h.removeEdge(h._edgeObjs[d])};delete this._nodes[u],this._isCompound&&(this._removeFromParentsChildList(u),delete this._parent[u],n.each(this.children(u),function(d){h.setParent(d)}),delete this._children[u]),n.each(n.keys(this._in[u]),f),delete this._in[u],delete this._preds[u],n.each(n.keys(this._out[u]),f),delete this._out[u],delete this._sucs[u],--this._nodeCount}return this},i.prototype.setParent=function(u,h){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(n.isUndefined(h))h=t;else{h+="";for(var f=h;!n.isUndefined(f);f=this.parent(f))if(f===u)throw new Error("Setting "+h+" as parent of "+u+" would create a cycle");this.setNode(h)}return this.setNode(u),this._removeFromParentsChildList(u),this._parent[u]=h,this._children[h][u]=!0,this},i.prototype._removeFromParentsChildList=function(u){delete this._children[this._parent[u]][u]},i.prototype.parent=function(u){if(this._isCompound){var h=this._parent[u];if(h!==t)return h}},i.prototype.children=function(u){if(n.isUndefined(u)&&(u=t),this._isCompound){var h=this._children[u];if(h)return n.keys(h)}else{if(u===t)return this.nodes();if(this.hasNode(u))return[]}},i.prototype.predecessors=function(u){var h=this._preds[u];if(h)return n.keys(h)},i.prototype.successors=function(u){var h=this._sucs[u];if(h)return n.keys(h)},i.prototype.neighbors=function(u){var h=this.predecessors(u);if(h)return n.union(h,this.successors(u))},i.prototype.isLeaf=function(u){var h;return this.isDirected()?h=this.successors(u):h=this.neighbors(u),h.length===0},i.prototype.filterNodes=function(u){var h=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});h.setGraph(this.graph());var f=this;n.each(this._nodes,function(p,b){u(b)&&h.setNode(b,p)}),n.each(this._edgeObjs,function(p){h.hasNode(p.v)&&h.hasNode(p.w)&&h.setEdge(p,f.edge(p))});var d={};function g(p){var b=f.parent(p);return b===void 0||h.hasNode(b)?(d[p]=b,b):b in d?d[b]:g(b)}return this._isCompound&&n.each(h.nodes(),function(p){h.setParent(p,g(p))}),h},i.prototype.setDefaultEdgeLabel=function(u){return n.isFunction(u)||(u=n.constant(u)),this._defaultEdgeLabelFn=u,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return n.values(this._edgeObjs)},i.prototype.setPath=function(u,h){var f=this,d=arguments;return n.reduce(u,function(g,p){return d.length>1?f.setEdge(g,p,h):f.setEdge(g,p),p}),this},i.prototype.setEdge=function(){var u,h,f,d,g=!1,p=arguments[0];typeof p=="object"&&p!==null&&"v"in p?(u=p.v,h=p.w,f=p.name,arguments.length===2&&(d=arguments[1],g=!0)):(u=p,h=arguments[1],f=arguments[3],arguments.length>2&&(d=arguments[2],g=!0)),u=""+u,h=""+h,n.isUndefined(f)||(f=""+f);var b=a(this._isDirected,u,h,f);if(n.has(this._edgeLabels,b))return g&&(this._edgeLabels[b]=d),this;if(!n.isUndefined(f)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(u),this.setNode(h),this._edgeLabels[b]=g?d:this._defaultEdgeLabelFn(u,h,f);var m=l(this._isDirected,u,h,f);return u=m.v,h=m.w,Object.freeze(m),this._edgeObjs[b]=m,s(this._preds[h],u),s(this._sucs[u],h),this._in[h][b]=m,this._out[u][b]=m,this._edgeCount++,this},i.prototype.edge=function(u,h,f){var d=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,u,h,f);return this._edgeLabels[d]},i.prototype.hasEdge=function(u,h,f){var d=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,u,h,f);return n.has(this._edgeLabels,d)},i.prototype.removeEdge=function(u,h,f){var d=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,u,h,f),g=this._edgeObjs[d];return g&&(u=g.v,h=g.w,delete this._edgeLabels[d],delete this._edgeObjs[d],o(this._preds[h],u),o(this._sucs[u],h),delete this._in[h][d],delete this._out[u][d],this._edgeCount--),this},i.prototype.inEdges=function(u,h){var f=this._in[u];if(f){var d=n.values(f);return h?n.filter(d,function(g){return g.v===h}):d}},i.prototype.outEdges=function(u,h){var f=this._out[u];if(f){var d=n.values(f);return h?n.filter(d,function(g){return g.w===h}):d}},i.prototype.nodeEdges=function(u,h){var f=this.inEdges(u,h);if(f)return f.concat(this.outEdges(u,h))};function s(u,h){u[h]?u[h]++:u[h]=1}function o(u,h){--u[h]||delete u[h]}function a(u,h,f,d){var g=""+h,p=""+f;if(!u&&g>p){var b=g;g=p,p=b}return g+r+p+r+(n.isUndefined(d)?e:d)}function l(u,h,f,d){var g=""+h,p=""+f;if(!u&&g>p){var b=g;g=p,p=b}var m={v:g,w:p};return d&&(m.name=d),m}function c(u,h){return a(u,h.v,h.w,h.name)}return bm}var xm,bA;function mW(){return bA||(bA=1,xm="2.1.8"),xm}var Cm,wA;function yW(){return wA||(wA=1,Cm={Graph:wm(),version:mW()}),Cm}var Sm,xA;function vW(){if(xA)return Sm;xA=1;var n=fn(),e=wm();Sm={write:t,read:s};function t(o){var a={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:r(o),edges:i(o)};return n.isUndefined(o.graph())||(a.value=n.clone(o.graph())),a}function r(o){return n.map(o.nodes(),function(a){var l=o.node(a),c=o.parent(a),u={v:a};return n.isUndefined(l)||(u.value=l),n.isUndefined(c)||(u.parent=c),u})}function i(o){return n.map(o.edges(),function(a){var l=o.edge(a),c={v:a.v,w:a.w};return n.isUndefined(a.name)||(c.name=a.name),n.isUndefined(l)||(c.value=l),c})}function s(o){var a=new e(o.options).setGraph(o.value);return n.each(o.nodes,function(l){a.setNode(l.v,l.value),l.parent&&a.setParent(l.v,l.parent)}),n.each(o.edges,function(l){a.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),a}return Sm}var Pm,CA;function bW(){if(CA)return Pm;CA=1;var n=fn();Pm=e;function e(t){var r={},i=[],s;function o(a){n.has(r,a)||(r[a]=!0,s.push(a),n.each(t.successors(a),o),n.each(t.predecessors(a),o))}return n.each(t.nodes(),function(a){s=[],o(a),s.length&&i.push(s)}),i}return Pm}var Em,SA;function PA(){if(SA)return Em;SA=1;var n=fn();Em=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(t){return t.key})},e.prototype.has=function(t){return n.has(this._keyIndices,t)},e.prototype.priority=function(t){var r=this._keyIndices[t];if(r!==void 0)return this._arr[r].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(t,r){var i=this._keyIndices;if(t=String(t),!n.has(i,t)){var s=this._arr,o=s.length;return i[t]=o,s.push({key:t,priority:r}),this._decrease(o),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},e.prototype.decrease=function(t,r){var i=this._keyIndices[t];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},e.prototype._heapify=function(t){var r=this._arr,i=2*t,s=i+1,o=t;i<r.length&&(o=r[i].priority<r[o].priority?i:o,s<r.length&&(o=r[s].priority<r[o].priority?s:o),o!==t&&(this._swap(t,o),this._heapify(o)))},e.prototype._decrease=function(t){for(var r=this._arr,i=r[t].priority,s;t!==0&&(s=t>>1,!(r[s].priority<i));)this._swap(t,s),t=s},e.prototype._swap=function(t,r){var i=this._arr,s=this._keyIndices,o=i[t],a=i[r];i[t]=a,i[r]=o,s[a.key]=t,s[o.key]=r},Em}var Am,EA;function AA(){if(EA)return Am;EA=1;var n=fn(),e=PA();Am=r;var t=n.constant(1);function r(s,o,a,l){return i(s,String(o),a||t,l||function(c){return s.outEdges(c)})}function i(s,o,a,l){var c={},u=new e,h,f,d=function(g){var p=g.v!==h?g.v:g.w,b=c[p],m=a(g),y=f.distance+m;if(m<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+g+" Weight: "+m);y<b.distance&&(b.distance=y,b.predecessor=h,u.decrease(p,y))};for(s.nodes().forEach(function(g){var p=g===o?0:Number.POSITIVE_INFINITY;c[g]={distance:p},u.add(g,p)});u.size()>0&&(h=u.removeMin(),f=c[h],f.distance!==Number.POSITIVE_INFINITY);)l(h).forEach(d);return c}return Am}var Om,OA;function wW(){if(OA)return Om;OA=1;var n=AA(),e=fn();Om=t;function t(r,i,s){return e.transform(r.nodes(),function(o,a){o[a]=n(r,a,i,s)},{})}return Om}var Mm,MA;function TA(){if(MA)return Mm;MA=1;var n=fn();Mm=e;function e(t){var r=0,i=[],s={},o=[];function a(l){var c=s[l]={onStack:!0,lowlink:r,index:r++};if(i.push(l),t.successors(l).forEach(function(f){n.has(s,f)?s[f].onStack&&(c.lowlink=Math.min(c.lowlink,s[f].index)):(a(f),c.lowlink=Math.min(c.lowlink,s[f].lowlink))}),c.lowlink===c.index){var u=[],h;do h=i.pop(),s[h].onStack=!1,u.push(h);while(l!==h);o.push(u)}}return t.nodes().forEach(function(l){n.has(s,l)||a(l)}),o}return Mm}var Tm,_A;function xW(){if(_A)return Tm;_A=1;var n=fn(),e=TA();Tm=t;function t(r){return n.filter(e(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return Tm}var _m,NA;function CW(){if(NA)return _m;NA=1;var n=fn();_m=t;var e=n.constant(1);function t(i,s,o){return r(i,s||e,o||function(a){return i.outEdges(a)})}function r(i,s,o){var a={},l=i.nodes();return l.forEach(function(c){a[c]={},a[c][c]={distance:0},l.forEach(function(u){c!==u&&(a[c][u]={distance:Number.POSITIVE_INFINITY})}),o(c).forEach(function(u){var h=u.v===c?u.w:u.v,f=s(u);a[c][h]={distance:f,predecessor:c}})}),l.forEach(function(c){var u=a[c];l.forEach(function(h){var f=a[h];l.forEach(function(d){var g=f[c],p=u[d],b=f[d],m=g.distance+p.distance;m<b.distance&&(b.distance=m,b.predecessor=p.predecessor)})})}),a}return _m}var Nm,kA;function $A(){if(kA)return Nm;kA=1;var n=fn();Nm=e,e.CycleException=t;function e(r){var i={},s={},o=[];function a(l){if(n.has(s,l))throw new t;n.has(i,l)||(s[l]=!0,i[l]=!0,n.each(r.predecessors(l),a),delete s[l],o.push(l))}if(n.each(r.sinks(),a),n.size(i)!==r.nodeCount())throw new t;return o}function t(){}return t.prototype=new Error,Nm}var km,IA;function SW(){if(IA)return km;IA=1;var n=$A();km=e;function e(t){try{n(t)}catch(r){if(r instanceof n.CycleException)return!1;throw r}return!0}return km}var $m,LA;function RA(){if(LA)return $m;LA=1;var n=fn();$m=e;function e(r,i,s){n.isArray(i)||(i=[i]);var o=(r.isDirected()?r.successors:r.neighbors).bind(r),a=[],l={};return n.each(i,function(c){if(!r.hasNode(c))throw new Error("Graph does not have node: "+c);t(r,c,s==="post",l,o,a)}),a}function t(r,i,s,o,a,l){n.has(o,i)||(o[i]=!0,s||l.push(i),n.each(a(i),function(c){t(r,c,s,o,a,l)}),s&&l.push(i))}return $m}var Im,jA;function PW(){if(jA)return Im;jA=1;var n=RA();Im=e;function e(t,r){return n(t,r,"post")}return Im}var Lm,DA;function EW(){if(DA)return Lm;DA=1;var n=RA();Lm=e;function e(t,r){return n(t,r,"pre")}return Lm}var Rm,BA;function AW(){if(BA)return Rm;BA=1;var n=fn(),e=wm(),t=PA();Rm=r;function r(i,s){var o=new e,a={},l=new t,c;function u(f){var d=f.v===c?f.w:f.v,g=l.priority(d);if(g!==void 0){var p=s(f);p<g&&(a[d]=c,l.decrease(d,p))}}if(i.nodeCount()===0)return o;n.each(i.nodes(),function(f){l.add(f,Number.POSITIVE_INFINITY),o.setNode(f)}),l.decrease(i.nodes()[0],0);for(var h=!1;l.size()>0;){if(c=l.removeMin(),n.has(a,c))o.setEdge(c,a[c]);else{if(h)throw new Error("Input graph is not connected: "+i);h=!0}i.nodeEdges(c).forEach(u)}return o}return Rm}var jm,zA;function OW(){return zA||(zA=1,jm={components:bW(),dijkstra:AA(),dijkstraAll:wW(),findCycles:xW(),floydWarshall:CW(),isAcyclic:SW(),postorder:PW(),preorder:EW(),prim:AW(),tarjan:TA(),topsort:$A()}),jm}var Dm,FA;function MW(){if(FA)return Dm;FA=1;var n=yW();return Dm={Graph:n.Graph,json:vW(),alg:OW(),version:n.version},Dm}var $u;if(typeof kg=="function")try{$u=MW()}catch(n){}$u||($u=window.graphlib);var Tn=$u,Bm,VA;function Iu(){if(VA)return Bm;VA=1;var n=Ui,e=Yn,t=hl,r=Jt;function i(s,o,a){if(!r(a))return!1;var l=typeof o;return(l=="number"?e(a)&&t(o,a.length):l=="string"&&o in a)?n(a[o],s):!1}return Bm=i,Bm}var zm,qA;function TW(){if(qA)return zm;qA=1;var n=ku(),e=Ui,t=Iu(),r=gi,i=Object.prototype,s=i.hasOwnProperty,o=n(function(a,l){a=Object(a);var c=-1,u=l.length,h=u>2?l[2]:void 0;for(h&&t(l[0],l[1],h)&&(u=1);++c<u;)for(var f=l[c],d=r(f),g=-1,p=d.length;++g<p;){var b=d[g],m=a[b];(m===void 0||e(m,i[b])&&!s.call(a,b))&&(a[b]=f[b])}return a});return zm=o,zm}var Fm,GA;function _W(){if(GA)return Fm;GA=1;var n=br(),e=Yn,t=Er;function r(i){return function(s,o,a){var l=Object(s);if(!e(s)){var c=n(o,3);s=t(s),o=function(h){return c(l[h],h,l)}}var u=i(s,o,a);return u>-1?l[c?s[u]:u]:void 0}}return Fm=r,Fm}var Vm,HA;function NW(){if(HA)return Vm;HA=1;var n=/\s/;function e(t){for(var r=t.length;r--&&n.test(t.charAt(r)););return r}return Vm=e,Vm}var qm,UA;function kW(){if(UA)return qm;UA=1;var n=NW(),e=/^\s+/;function t(r){return r&&r.slice(0,n(r)+1).replace(e,"")}return qm=t,qm}var Gm,WA;function $W(){if(WA)return Gm;WA=1;var n=kW(),e=Jt,t=uo(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt;function l(c){if(typeof c=="number")return c;if(t(c))return r;if(e(c)){var u=typeof c.valueOf=="function"?c.valueOf():c;c=e(u)?u+"":u}if(typeof c!="string")return c===0?c:+c;c=n(c);var h=s.test(c);return h||o.test(c)?a(c.slice(2),h?2:8):i.test(c)?r:+c}return Gm=l,Gm}var Hm,XA;function YA(){if(XA)return Hm;XA=1;var n=$W(),e=1/0,t=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=n(i),i===e||i===-e){var s=i<0?-1:1;return s*t}return i===i?i:0}return Hm=r,Hm}var Um,KA;function IW(){if(KA)return Um;KA=1;var n=YA();function e(t){var r=n(t),i=r%1;return r===r?i?r-i:r:0}return Um=e,Um}var Wm,JA;function LW(){if(JA)return Wm;JA=1;var n=nA(),e=br(),t=IW(),r=Math.max;function i(s,o,a){var l=s==null?0:s.length;if(!l)return-1;var c=a==null?0:t(a);return c<0&&(c=r(l+c,0)),n(s,e(o,3),c)}return Wm=i,Wm}var Xm,QA;function RW(){if(QA)return Xm;QA=1;var n=_W(),e=LW(),t=n(e);return Xm=t,Xm}var Ym,ZA;function eO(){if(ZA)return Ym;ZA=1;var n=Qp();function e(t){var r=t==null?0:t.length;return r?n(t,1):[]}return Ym=e,Ym}var Km,tO;function jW(){if(tO)return Km;tO=1;var n=Dg(),e=SP(),t=gi;function r(i,s){return i==null?i:n(i,e(s),t)}return Km=r,Km}var Jm,nO;function DW(){if(nO)return Jm;nO=1;function n(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}return Jm=n,Jm}var Qm,rO;function BW(){if(rO)return Qm;rO=1;var n=ll,e=zg(),t=br();function r(i,s){var o={};return s=t(s,3),e(i,function(a,l,c){n(o,l,s(a,l,c))}),o}return Qm=r,Qm}var Zm,iO;function ey(){if(iO)return Zm;iO=1;var n=uo();function e(t,r,i){for(var s=-1,o=t.length;++s<o;){var a=t[s],l=r(a);if(l!=null&&(c===void 0?l===l&&!n(l):i(l,c)))var c=l,u=a}return u}return Zm=e,Zm}var ty,sO;function zW(){if(sO)return ty;sO=1;function n(e,t){return e>t}return ty=n,ty}var ny,oO;function FW(){if(oO)return ny;oO=1;var n=ey(),e=zW(),t=Vi();function r(i){return i&&i.length?n(i,t,e):void 0}return ny=r,ny}var ry,aO;function lO(){if(aO)return ry;aO=1;var n=ll,e=Ui;function t(r,i,s){(s!==void 0&&!e(r[i],s)||s===void 0&&!(i in r))&&n(r,i,s)}return ry=t,ry}var iy,cO;function VW(){if(cO)return iy;cO=1;var n=fi,e=ml,t=Rn,r="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,a=s.hasOwnProperty,l=o.call(Object);function c(u){if(!t(u)||n(u)!=r)return!1;var h=e(u);if(h===null)return!0;var f=a.call(h,"constructor")&&h.constructor;return typeof f=="function"&&f instanceof f&&o.call(f)==l}return iy=c,iy}var sy,uO;function hO(){if(uO)return sy;uO=1;function n(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}return sy=n,sy}var oy,fO;function qW(){if(fO)return oy;fO=1;var n=bo,e=gi;function t(r){return n(r,e(r))}return oy=t,oy}var ay,dO;function GW(){if(dO)return ay;dO=1;var n=lO(),e=pv,t=Lv,r=mv,i=Dv,s=wo,o=Qe,a=fA(),l=Qi,c=vo,u=Jt,h=VW(),f=xo,d=hO(),g=qW();function p(b,m,y,v,w,x,C){var S=d(b,y),E=d(m,y),A=C.get(E);if(A){n(b,y,A);return}var O=x?x(S,E,y+"",b,m,C):void 0,T=O===void 0;if(T){var k=o(E),B=!k&&l(E),W=!k&&!B&&f(E);O=E,k||B||W?o(S)?O=S:a(S)?O=r(S):B?(T=!1,O=e(E,!0)):W?(T=!1,O=t(E,!0)):O=[]:h(E)||s(E)?(O=S,s(S)?O=g(S):(!u(S)||c(S))&&(O=i(E))):T=!1}T&&(C.set(E,O),w(O,E,v,x,C),C.delete(E)),n(b,y,O)}return ay=p,ay}var ly,gO;function HW(){if(gO)return ly;gO=1;var n=al,e=lO(),t=Dg(),r=GW(),i=Jt,s=gi,o=hO();function a(l,c,u,h,f){l!==c&&t(c,function(d,g){if(f||(f=new n),i(d))r(l,c,g,u,a,h,f);else{var p=h?h(o(l,g),d,g+"",l,c,f):void 0;p===void 0&&(p=d),e(l,g,p)}},s)}return ly=a,ly}var cy,pO;function UW(){if(pO)return cy;pO=1;var n=ku(),e=Iu();function t(r){return n(function(i,s){var o=-1,a=s.length,l=a>1?s[a-1]:void 0,c=a>2?s[2]:void 0;for(l=r.length>3&&typeof l=="function"?(a--,l):void 0,c&&e(s[0],s[1],c)&&(l=a<3?void 0:l,a=1),i=Object(i);++o<a;){var u=s[o];u&&r(i,u,o,l)}return i})}return cy=t,cy}var uy,mO;function WW(){if(mO)return uy;mO=1;var n=HW(),e=UW(),t=e(function(r,i,s){n(r,i,s)});return uy=t,uy}var hy,yO;function vO(){if(yO)return hy;yO=1;function n(e,t){return e<t}return hy=n,hy}var fy,bO;function XW(){if(bO)return fy;bO=1;var n=ey(),e=vO(),t=Vi();function r(i){return i&&i.length?n(i,t,e):void 0}return fy=r,fy}var dy,wO;function YW(){if(wO)return dy;wO=1;var n=ey(),e=br(),t=vO();function r(i,s){return i&&i.length?n(i,e(s,2),t):void 0}return dy=r,dy}var gy,xO;function KW(){if(xO)return gy;xO=1;var n=gn,e=function(){return n.Date.now()};return gy=e,gy}var py,CO;function JW(){if(CO)return py;CO=1;var n=cl,e=_u(),t=hl,r=Jt,i=Ua();function s(o,a,l,c){if(!r(o))return o;a=e(a,o);for(var u=-1,h=a.length,f=h-1,d=o;d!=null&&++u<h;){var g=i(a[u]),p=l;if(g==="__proto__"||g==="constructor"||g==="prototype")return o;if(u!=f){var b=d[g];p=c?c(b,g,d):void 0,p===void 0&&(p=r(b)?b:t(a[u+1])?[]:{})}n(d,g,p),d=d[g]}return o}return py=s,py}var my,SO;function QW(){if(SO)return my;SO=1;var n=Nu(),e=JW(),t=_u();function r(i,s,o){for(var a=-1,l=s.length,c={};++a<l;){var u=s[a],h=n(i,u);o(h,u)&&e(c,t(u,i),h)}return c}return my=r,my}var yy,PO;function ZW(){if(PO)return yy;PO=1;var n=QW(),e=pE();function t(r,i){return n(r,i,function(s,o){return e(r,o)})}return yy=t,yy}var vy,EO;function e9(){if(EO)return vy;EO=1;var n=eO(),e=YE(),t=ZE();function r(i){return t(e(i,void 0,n),i+"")}return vy=r,vy}var by,AO;function t9(){if(AO)return by;AO=1;var n=ZW(),e=e9(),t=e(function(r,i){return r==null?{}:n(r,i)});return by=t,by}var wy,OO;function n9(){if(OO)return wy;OO=1;var n=Math.ceil,e=Math.max;function t(r,i,s,o){for(var a=-1,l=e(n((i-r)/(s||1)),0),c=Array(l);l--;)c[o?l:++a]=r,r+=s;return c}return wy=t,wy}var xy,MO;function r9(){if(MO)return xy;MO=1;var n=n9(),e=Iu(),t=YA();function r(i){return function(s,o,a){return a&&typeof a!="number"&&e(s,o,a)&&(o=a=void 0),s=t(s),o===void 0?(o=s,s=0):o=t(o),a=a===void 0?s<o?1:-1:t(a),n(s,o,a,i)}}return xy=r,xy}var Cy,TO;function i9(){if(TO)return Cy;TO=1;var n=r9(),e=n();return Cy=e,Cy}var Sy,_O;function s9(){if(_O)return Sy;_O=1;function n(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}return Sy=n,Sy}var Py,NO;function o9(){if(NO)return Py;NO=1;var n=uo();function e(t,r){if(t!==r){var i=t!==void 0,s=t===null,o=t===t,a=n(t),l=r!==void 0,c=r===null,u=r===r,h=n(r);if(!c&&!h&&!a&&t>r||a&&l&&u&&!c&&!h||s&&l&&u||!i&&u||!o)return 1;if(!s&&!a&&!h&&t<r||h&&i&&o&&!s&&!a||c&&i&&o||!l&&o||!u)return-1}return 0}return Py=e,Py}var Ey,kO;function a9(){if(kO)return Ey;kO=1;var n=o9();function e(t,r,i){for(var s=-1,o=t.criteria,a=r.criteria,l=o.length,c=i.length;++s<l;){var u=n(o[s],a[s]);if(u){if(s>=c)return u;var h=i[s];return u*(h=="desc"?-1:1)}}return t.index-r.index}return Ey=e,Ey}var Ay,$O;function l9(){if($O)return Ay;$O=1;var n=Tu(),e=Nu(),t=br(),r=NE(),i=s9(),s=fl,o=a9(),a=Vi(),l=Qe;function c(u,h,f){h.length?h=n(h,function(p){return l(p)?function(b){return e(b,p.length===1?p[0]:p)}:p}):h=[a];var d=-1;h=n(h,s(t));var g=r(u,function(p,b,m){var y=n(h,function(v){return v(p)});return{criteria:y,index:++d,value:p}});return i(g,function(p,b){return o(p,b,f)})}return Ay=c,Ay}var Oy,IO;function c9(){if(IO)return Oy;IO=1;var n=Qp(),e=l9(),t=ku(),r=Iu(),i=t(function(s,o){if(s==null)return[];var a=o.length;return a>1&&r(s,o[0],o[1])?o=[]:a>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),e(s,n(o,1),[])});return Oy=i,Oy}var My,LO;function u9(){if(LO)return My;LO=1;var n=oE(),e=0;function t(r){var i=++e;return n(r)+i}return My=t,My}var Ty,RO;function h9(){if(RO)return Ty;RO=1;function n(e,t,r){for(var i=-1,s=e.length,o=t.length,a={};++i<s;){var l=i<o?t[i]:void 0;r(a,e[i],l)}return a}return Ty=n,Ty}var _y,jO;function f9(){if(jO)return _y;jO=1;var n=cl,e=h9();function t(r,i){return e(r||[],i||[],n)}return _y=t,_y}var Lu;if(typeof kg=="function")try{Lu={cloneDeep:Wv,constant:Lg(),defaults:TW(),each:OP(),filter:SE(),find:RW(),flatten:eO(),forEach:EP(),forIn:jW(),has:AE(),isUndefined:TE(),last:DW(),map:$E(),mapValues:BW(),max:FW(),merge:WW(),min:XW(),minBy:YW(),now:KW(),pick:t9(),range:i9(),reduce:jE(),sortBy:c9(),uniqueId:u9(),values:mA(),zipObject:f9()}}catch(n){}Lu||(Lu=window._);var Le=Lu,d9=Ru;function Ru(){var n={};n._next=n._prev=n,this._sentinel=n}Ru.prototype.dequeue=function(){var n=this._sentinel,e=n._prev;if(e!==n)return DO(e),e},Ru.prototype.enqueue=function(n){var e=this._sentinel;n._prev&&n._next&&DO(n),n._next=e._next,e._next._prev=n,e._next=n,n._prev=e},Ru.prototype.toString=function(){for(var n=[],e=this._sentinel,t=e._prev;t!==e;)n.push(JSON.stringify(t,g9)),t=t._prev;return"["+n.join(", ")+"]"};function DO(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function g9(n,e){if(n!=="_next"&&n!=="_prev")return e}var wr=Le,p9=Tn.Graph,m9=d9,y9=b9,v9=wr.constant(1);function b9(n,e){if(n.nodeCount()<=1)return[];var t=x9(n,e||v9),r=w9(t.graph,t.buckets,t.zeroIdx);return wr.flatten(wr.map(r,function(i){return n.outEdges(i.v,i.w)}),!0)}function w9(n,e,t){for(var r=[],i=e[e.length-1],s=e[0],o;n.nodeCount();){for(;o=s.dequeue();)Ny(n,e,t,o);for(;o=i.dequeue();)Ny(n,e,t,o);if(n.nodeCount()){for(var a=e.length-2;a>0;--a)if(o=e[a].dequeue(),o){r=r.concat(Ny(n,e,t,o,!0));break}}}return r}function Ny(n,e,t,r,i){var s=i?[]:void 0;return wr.forEach(n.inEdges(r.v),function(o){var a=n.edge(o),l=n.node(o.v);i&&s.push({v:o.v,w:o.w}),l.out-=a,ky(e,t,l)}),wr.forEach(n.outEdges(r.v),function(o){var a=n.edge(o),l=o.w,c=n.node(l);c.in-=a,ky(e,t,c)}),n.removeNode(r.v),s}function x9(n,e){var t=new p9,r=0,i=0;wr.forEach(n.nodes(),function(a){t.setNode(a,{v:a,in:0,out:0})}),wr.forEach(n.edges(),function(a){var l=t.edge(a.v,a.w)||0,c=e(a),u=l+c;t.setEdge(a.v,a.w,u),i=Math.max(i,t.node(a.v).out+=c),r=Math.max(r,t.node(a.w).in+=c)});var s=wr.range(i+r+3).map(function(){return new m9}),o=r+1;return wr.forEach(t.nodes(),function(a){ky(s,o,t.node(a))}),{graph:t,buckets:s,zeroIdx:o}}function ky(n,e,t){t.out?t.in?n[t.out-t.in+e].enqueue(t):n[n.length-1].enqueue(t):n[0].enqueue(t)}var qi=Le,C9=y9,S9={run:P9,undo:A9};function P9(n){var e=n.graph().acyclicer==="greedy"?C9(n,t(n)):E9(n);qi.forEach(e,function(r){var i=n.edge(r);n.removeEdge(r),i.forwardName=r.name,i.reversed=!0,n.setEdge(r.w,r.v,i,qi.uniqueId("rev"))});function t(r){return function(i){return r.edge(i).weight}}}function E9(n){var e=[],t={},r={};function i(s){qi.has(r,s)||(r[s]=!0,t[s]=!0,qi.forEach(n.outEdges(s),function(o){qi.has(t,o.w)?e.push(o):i(o.w)}),delete t[s])}return qi.forEach(n.nodes(),i),e}function A9(n){qi.forEach(n.edges(),function(e){var t=n.edge(e);if(t.reversed){n.removeEdge(e);var r=t.forwardName;delete t.reversed,delete t.forwardName,n.setEdge(e.w,e.v,t,r)}})}var pe=Le,BO=Tn.Graph,Bt={addDummyNode:zO,simplify:O9,asNonCompoundGraph:M9,successorWeights:T9,predecessorWeights:_9,intersectRect:N9,buildLayerMatrix:k9,normalizeRanks:$9,removeEmptyRanks:I9,addBorderNode:L9,maxRank:FO,partition:R9,time:j9,notime:D9};function zO(n,e,t,r){var i;do i=pe.uniqueId(r);while(n.hasNode(i));return t.dummy=e,n.setNode(i,t),i}function O9(n){var e=new BO().setGraph(n.graph());return pe.forEach(n.nodes(),function(t){e.setNode(t,n.node(t))}),pe.forEach(n.edges(),function(t){var r=e.edge(t.v,t.w)||{weight:0,minlen:1},i=n.edge(t);e.setEdge(t.v,t.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),e}function M9(n){var e=new BO({multigraph:n.isMultigraph()}).setGraph(n.graph());return pe.forEach(n.nodes(),function(t){n.children(t).length||e.setNode(t,n.node(t))}),pe.forEach(n.edges(),function(t){e.setEdge(t,n.edge(t))}),e}function T9(n){var e=pe.map(n.nodes(),function(t){var r={};return pe.forEach(n.outEdges(t),function(i){r[i.w]=(r[i.w]||0)+n.edge(i).weight}),r});return pe.zipObject(n.nodes(),e)}function _9(n){var e=pe.map(n.nodes(),function(t){var r={};return pe.forEach(n.inEdges(t),function(i){r[i.v]=(r[i.v]||0)+n.edge(i).weight}),r});return pe.zipObject(n.nodes(),e)}function N9(n,e){var t=n.x,r=n.y,i=e.x-t,s=e.y-r,o=n.width/2,a=n.height/2;if(!i&&!s)throw new Error("Not possible to find intersection inside of the rectangle");var l,c;return Math.abs(s)*o>Math.abs(i)*a?(s<0&&(a=-a),l=a*i/s,c=a):(i<0&&(o=-o),l=o,c=o*s/i),{x:t+l,y:r+c}}function k9(n){var e=pe.map(pe.range(FO(n)+1),function(){return[]});return pe.forEach(n.nodes(),function(t){var r=n.node(t),i=r.rank;pe.isUndefined(i)||(e[i][r.order]=t)}),e}function $9(n){var e=pe.min(pe.map(n.nodes(),function(t){return n.node(t).rank}));pe.forEach(n.nodes(),function(t){var r=n.node(t);pe.has(r,"rank")&&(r.rank-=e)})}function I9(n){var e=pe.min(pe.map(n.nodes(),function(s){return n.node(s).rank})),t=[];pe.forEach(n.nodes(),function(s){var o=n.node(s).rank-e;t[o]||(t[o]=[]),t[o].push(s)});var r=0,i=n.graph().nodeRankFactor;pe.forEach(t,function(s,o){pe.isUndefined(s)&&o%i!==0?--r:r&&pe.forEach(s,function(a){n.node(a).rank+=r})})}function L9(n,e,t,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=t,i.order=r),zO(n,"border",i,e)}function FO(n){return pe.max(pe.map(n.nodes(),function(e){var t=n.node(e).rank;if(!pe.isUndefined(t))return t}))}function R9(n,e){var t={lhs:[],rhs:[]};return pe.forEach(n,function(r){e(r)?t.lhs.push(r):t.rhs.push(r)}),t}function j9(n,e){var t=pe.now();try{return e()}finally{console.log(n+" time: "+(pe.now()-t)+"ms")}}function D9(n,e){return e()}var VO=Le,B9=Bt,z9={run:F9,undo:q9};function F9(n){n.graph().dummyChains=[],VO.forEach(n.edges(),function(e){V9(n,e)})}function V9(n,e){var t=e.v,r=n.node(t).rank,i=e.w,s=n.node(i).rank,o=e.name,a=n.edge(e),l=a.labelRank;if(s!==r+1){n.removeEdge(e);var c,u,h;for(h=0,++r;r<s;++h,++r)a.points=[],u={width:0,height:0,edgeLabel:a,edgeObj:e,rank:r},c=B9.addDummyNode(n,"edge",u,"_d"),r===l&&(u.width=a.width,u.height=a.height,u.dummy="edge-label",u.labelpos=a.labelpos),n.setEdge(t,c,{weight:a.weight},o),h===0&&n.graph().dummyChains.push(c),t=c;n.setEdge(t,i,{weight:a.weight},o)}}function q9(n){VO.forEach(n.graph().dummyChains,function(e){var t=n.node(e),r=t.edgeLabel,i;for(n.setEdge(t.edgeObj,r);t.dummy;)i=n.successors(e)[0],n.removeNode(e),r.points.push({x:t.x,y:t.y}),t.dummy==="edge-label"&&(r.x=t.x,r.y=t.y,r.width=t.width,r.height=t.height),e=i,t=n.node(e)})}var ju=Le,Du={longestPath:G9,slack:H9};function G9(n){var e={};function t(r){var i=n.node(r);if(ju.has(e,r))return i.rank;e[r]=!0;var s=ju.min(ju.map(n.outEdges(r),function(o){return t(o.w)-n.edge(o).minlen}));return(s===Number.POSITIVE_INFINITY||s===void 0||s===null)&&(s=0),i.rank=s}ju.forEach(n.sources(),t)}function H9(n,e){return n.node(e.w).rank-n.node(e.v).rank-n.edge(e).minlen}var Bu=Le,U9=Tn.Graph,zu=Du.slack,qO=W9;function W9(n){var e=new U9({directed:!1}),t=n.nodes()[0],r=n.nodeCount();e.setNode(t,{});for(var i,s;X9(e,n)<r;)i=Y9(e,n),s=e.hasNode(i.v)?zu(n,i):-zu(n,i),K9(e,n,s);return e}function X9(n,e){function t(r){Bu.forEach(e.nodeEdges(r),function(i){var s=i.v,o=r===s?i.w:s;!n.hasNode(o)&&!zu(e,i)&&(n.setNode(o,{}),n.setEdge(r,o,{}),t(o))})}return Bu.forEach(n.nodes(),t),n.nodeCount()}function Y9(n,e){return Bu.minBy(e.edges(),function(t){if(n.hasNode(t.v)!==n.hasNode(t.w))return zu(e,t)})}function K9(n,e,t){Bu.forEach(n.nodes(),function(r){e.node(r).rank+=t})}var xr=Le,J9=qO,Q9=Du.slack,Z9=Du.longestPath,e7=Tn.alg.preorder,t7=Tn.alg.postorder,n7=Bt.simplify,r7=Gi;Gi.initLowLimValues=Iy,Gi.initCutValues=$y,Gi.calcCutValue=GO,Gi.leaveEdge=UO,Gi.enterEdge=WO,Gi.exchangeEdges=XO;function Gi(n){n=n7(n),Z9(n);var e=J9(n);Iy(e),$y(e,n);for(var t,r;t=UO(e);)r=WO(e,n,t),XO(e,n,t,r)}function $y(n,e){var t=t7(n,n.nodes());t=t.slice(0,t.length-1),xr.forEach(t,function(r){i7(n,e,r)})}function i7(n,e,t){var r=n.node(t),i=r.parent;n.edge(t,i).cutvalue=GO(n,e,t)}function GO(n,e,t){var r=n.node(t),i=r.parent,s=!0,o=e.edge(t,i),a=0;return o||(s=!1,o=e.edge(i,t)),a=o.weight,xr.forEach(e.nodeEdges(t),function(l){var c=l.v===t,u=c?l.w:l.v;if(u!==i){var h=c===s,f=e.edge(l).weight;if(a+=h?f:-f,o7(n,t,u)){var d=n.edge(t,u).cutvalue;a+=h?-d:d}}}),a}function Iy(n,e){arguments.length<2&&(e=n.nodes()[0]),HO(n,{},1,e)}function HO(n,e,t,r,i){var s=t,o=n.node(r);return e[r]=!0,xr.forEach(n.neighbors(r),function(a){xr.has(e,a)||(t=HO(n,e,t,a,r))}),o.low=s,o.lim=t++,i?o.parent=i:delete o.parent,t}function UO(n){return xr.find(n.edges(),function(e){return n.edge(e).cutvalue<0})}function WO(n,e,t){var r=t.v,i=t.w;e.hasEdge(r,i)||(r=t.w,i=t.v);var s=n.node(r),o=n.node(i),a=s,l=!1;s.lim>o.lim&&(a=o,l=!0);var c=xr.filter(e.edges(),function(u){return l===YO(n,n.node(u.v),a)&&l!==YO(n,n.node(u.w),a)});return xr.minBy(c,function(u){return Q9(e,u)})}function XO(n,e,t,r){var i=t.v,s=t.w;n.removeEdge(i,s),n.setEdge(r.v,r.w,{}),Iy(n),$y(n,e),s7(n,e)}function s7(n,e){var t=xr.find(n.nodes(),function(i){return!e.node(i).parent}),r=e7(n,t);r=r.slice(1),xr.forEach(r,function(i){var s=n.node(i).parent,o=e.edge(i,s),a=!1;o||(o=e.edge(s,i),a=!0),e.node(i).rank=e.node(s).rank+(a?o.minlen:-o.minlen)})}function o7(n,e,t){return n.hasEdge(e,t)}function YO(n,e,t){return t.low<=e.lim&&e.lim<=t.lim}var a7=Du,KO=a7.longestPath,l7=qO,c7=r7,u7=h7;function h7(n){switch(n.graph().ranker){case"network-simplex":JO(n);break;case"tight-tree":d7(n);break;case"longest-path":f7(n);break;default:JO(n)}}var f7=KO;function d7(n){KO(n),l7(n)}function JO(n){c7(n)}var Ly=Le,g7=p7;function p7(n){var e=y7(n);Ly.forEach(n.graph().dummyChains,function(t){for(var r=n.node(t),i=r.edgeObj,s=m7(n,e,i.v,i.w),o=s.path,a=s.lca,l=0,c=o[l],u=!0;t!==i.w;){if(r=n.node(t),u){for(;(c=o[l])!==a&&n.node(c).maxRank<r.rank;)l++;c===a&&(u=!1)}if(!u){for(;l<o.length-1&&n.node(c=o[l+1]).minRank<=r.rank;)l++;c=o[l]}n.setParent(t,c),t=n.successors(t)[0]}})}function m7(n,e,t,r){var i=[],s=[],o=Math.min(e[t].low,e[r].low),a=Math.max(e[t].lim,e[r].lim),l,c;l=t;do l=n.parent(l),i.push(l);while(l&&(e[l].low>o||a>e[l].lim));for(c=l,l=r;(l=n.parent(l))!==c;)s.push(l);return{path:i.concat(s.reverse()),lca:c}}function y7(n){var e={},t=0;function r(i){var s=t;Ly.forEach(n.children(i),r),e[i]={low:s,lim:t++}}return Ly.forEach(n.children(),r),e}var Cr=Le,Ry=Bt,v7={run:b7,cleanup:C7};function b7(n){var e=Ry.addDummyNode(n,"root",{},"_root"),t=w7(n),r=Cr.max(Cr.values(t))-1,i=2*r+1;n.graph().nestingRoot=e,Cr.forEach(n.edges(),function(o){n.edge(o).minlen*=i});var s=x7(n)+1;Cr.forEach(n.children(),function(o){QO(n,e,i,s,r,t,o)}),n.graph().nodeRankFactor=i}function QO(n,e,t,r,i,s,o){var a=n.children(o);if(!a.length){o!==e&&n.setEdge(e,o,{weight:0,minlen:t});return}var l=Ry.addBorderNode(n,"_bt"),c=Ry.addBorderNode(n,"_bb"),u=n.node(o);n.setParent(l,o),u.borderTop=l,n.setParent(c,o),u.borderBottom=c,Cr.forEach(a,function(h){QO(n,e,t,r,i,s,h);var f=n.node(h),d=f.borderTop?f.borderTop:h,g=f.borderBottom?f.borderBottom:h,p=f.borderTop?r:2*r,b=d!==g?1:i-s[o]+1;n.setEdge(l,d,{weight:p,minlen:b,nestingEdge:!0}),n.setEdge(g,c,{weight:p,minlen:b,nestingEdge:!0})}),n.parent(o)||n.setEdge(e,l,{weight:0,minlen:i+s[o]})}function w7(n){var e={};function t(r,i){var s=n.children(r);s&&s.length&&Cr.forEach(s,function(o){t(o,i+1)}),e[r]=i}return Cr.forEach(n.children(),function(r){t(r,1)}),e}function x7(n){return Cr.reduce(n.edges(),function(e,t){return e+n.edge(t).weight},0)}function C7(n){var e=n.graph();n.removeNode(e.nestingRoot),delete e.nestingRoot,Cr.forEach(n.edges(),function(t){var r=n.edge(t);r.nestingEdge&&n.removeEdge(t)})}var jy=Le,S7=Bt,P7=E7;function E7(n){function e(t){var r=n.children(t),i=n.node(t);if(r.length&&jy.forEach(r,e),jy.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var s=i.minRank,o=i.maxRank+1;s<o;++s)ZO(n,"borderLeft","_bl",t,i,s),ZO(n,"borderRight","_br",t,i,s)}}jy.forEach(n.children(),e)}function ZO(n,e,t,r,i,s){var o={width:0,height:0,rank:s,borderType:e},a=i[e][s-1],l=S7.addDummyNode(n,"border",o,t);i[e][s]=l,n.setParent(l,r),a&&n.setEdge(a,l,{weight:1})}var Xn=Le,A7={adjust:O7,undo:M7};function O7(n){var e=n.graph().rankdir.toLowerCase();(e==="lr"||e==="rl")&&eM(n)}function M7(n){var e=n.graph().rankdir.toLowerCase();(e==="bt"||e==="rl")&&T7(n),(e==="lr"||e==="rl")&&(_7(n),eM(n))}function eM(n){Xn.forEach(n.nodes(),function(e){tM(n.node(e))}),Xn.forEach(n.edges(),function(e){tM(n.edge(e))})}function tM(n){var e=n.width;n.width=n.height,n.height=e}function T7(n){Xn.forEach(n.nodes(),function(e){Dy(n.node(e))}),Xn.forEach(n.edges(),function(e){var t=n.edge(e);Xn.forEach(t.points,Dy),Xn.has(t,"y")&&Dy(t)})}function Dy(n){n.y=-n.y}function _7(n){Xn.forEach(n.nodes(),function(e){By(n.node(e))}),Xn.forEach(n.edges(),function(e){var t=n.edge(e);Xn.forEach(t.points,By),Xn.has(t,"x")&&By(t)})}function By(n){var e=n.x;n.x=n.y,n.y=e}var Sr=Le,N7=k7;function k7(n){var e={},t=Sr.filter(n.nodes(),function(a){return!n.children(a).length}),r=Sr.max(Sr.map(t,function(a){return n.node(a).rank})),i=Sr.map(Sr.range(r+1),function(){return[]});function s(a){if(!Sr.has(e,a)){e[a]=!0;var l=n.node(a);i[l.rank].push(a),Sr.forEach(n.successors(a),s)}}var o=Sr.sortBy(t,function(a){return n.node(a).rank});return Sr.forEach(o,s),i}var ai=Le,$7=I7;function I7(n,e){for(var t=0,r=1;r<e.length;++r)t+=L7(n,e[r-1],e[r]);return t}function L7(n,e,t){for(var r=ai.zipObject(t,ai.map(t,function(c,u){return u})),i=ai.flatten(ai.map(e,function(c){return ai.sortBy(ai.map(n.outEdges(c),function(u){return{pos:r[u.w],weight:n.edge(u).weight}}),"pos")}),!0),s=1;s<t.length;)s<<=1;var o=2*s-1;s-=1;var a=ai.map(new Array(o),function(){return 0}),l=0;return ai.forEach(i.forEach(function(c){var u=c.pos+s;a[u]+=c.weight;for(var h=0;u>0;)u%2&&(h+=a[u+1]),u=u-1>>1,a[u]+=c.weight;l+=c.weight*h})),l}var nM=Le,R7=j7;function j7(n,e){return nM.map(e,function(t){var r=n.inEdges(t);if(r.length){var i=nM.reduce(r,function(s,o){var a=n.edge(o),l=n.node(o.v);return{sum:s.sum+a.weight*l.order,weight:s.weight+a.weight}},{sum:0,weight:0});return{v:t,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:t}})}var Yt=Le,D7=B7;function B7(n,e){var t={};Yt.forEach(n,function(i,s){var o=t[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:s};Yt.isUndefined(i.barycenter)||(o.barycenter=i.barycenter,o.weight=i.weight)}),Yt.forEach(e.edges(),function(i){var s=t[i.v],o=t[i.w];!Yt.isUndefined(s)&&!Yt.isUndefined(o)&&(o.indegree++,s.out.push(t[i.w]))});var r=Yt.filter(t,function(i){return!i.indegree});return z7(r)}function z7(n){var e=[];function t(s){return function(o){o.merged||(Yt.isUndefined(o.barycenter)||Yt.isUndefined(s.barycenter)||o.barycenter>=s.barycenter)&&F7(s,o)}}function r(s){return function(o){o.in.push(s),--o.indegree===0&&n.push(o)}}for(;n.length;){var i=n.pop();e.push(i),Yt.forEach(i.in.reverse(),t(i)),Yt.forEach(i.out,r(i))}return Yt.map(Yt.filter(e,function(s){return!s.merged}),function(s){return Yt.pick(s,["vs","i","barycenter","weight"])})}function F7(n,e){var t=0,r=0;n.weight&&(t+=n.barycenter*n.weight,r+=n.weight),e.weight&&(t+=e.barycenter*e.weight,r+=e.weight),n.vs=e.vs.concat(n.vs),n.barycenter=t/r,n.weight=r,n.i=Math.min(e.i,n.i),e.merged=!0}var Wa=Le,V7=Bt,q7=G7;function G7(n,e){var t=V7.partition(n,function(u){return Wa.has(u,"barycenter")}),r=t.lhs,i=Wa.sortBy(t.rhs,function(u){return-u.i}),s=[],o=0,a=0,l=0;r.sort(H7(!!e)),l=rM(s,i,l),Wa.forEach(r,function(u){l+=u.vs.length,s.push(u.vs),o+=u.barycenter*u.weight,a+=u.weight,l=rM(s,i,l)});var c={vs:Wa.flatten(s,!0)};return a&&(c.barycenter=o/a,c.weight=a),c}function rM(n,e,t){for(var r;e.length&&(r=Wa.last(e)).i<=t;)e.pop(),n.push(r.vs),t++;return t}function H7(n){return function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:n?t.i-e.i:e.i-t.i}}var li=Le,U7=R7,W7=D7,X7=q7,Y7=iM;function iM(n,e,t,r){var i=n.children(e),s=n.node(e),o=s?s.borderLeft:void 0,a=s?s.borderRight:void 0,l={};o&&(i=li.filter(i,function(g){return g!==o&&g!==a}));var c=U7(n,i);li.forEach(c,function(g){if(n.children(g.v).length){var p=iM(n,g.v,t,r);l[g.v]=p,li.has(p,"barycenter")&&J7(g,p)}});var u=W7(c,t);K7(u,l);var h=X7(u,r);if(o&&(h.vs=li.flatten([o,h.vs,a],!0),n.predecessors(o).length)){var f=n.node(n.predecessors(o)[0]),d=n.node(n.predecessors(a)[0]);li.has(h,"barycenter")||(h.barycenter=0,h.weight=0),h.barycenter=(h.barycenter*h.weight+f.order+d.order)/(h.weight+2),h.weight+=2}return h}function K7(n,e){li.forEach(n,function(t){t.vs=li.flatten(t.vs.map(function(r){return e[r]?e[r].vs:r}),!0)})}function J7(n,e){li.isUndefined(n.barycenter)?(n.barycenter=e.barycenter,n.weight=e.weight):(n.barycenter=(n.barycenter*n.weight+e.barycenter*e.weight)/(n.weight+e.weight),n.weight+=e.weight)}var Xa=Le,Q7=Tn.Graph,Z7=eX;function eX(n,e,t){var r=tX(n),i=new Q7({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(s){return n.node(s)});return Xa.forEach(n.nodes(),function(s){var o=n.node(s),a=n.parent(s);(o.rank===e||o.minRank<=e&&e<=o.maxRank)&&(i.setNode(s),i.setParent(s,a||r),Xa.forEach(n[t](s),function(l){var c=l.v===s?l.w:l.v,u=i.edge(c,s),h=Xa.isUndefined(u)?0:u.weight;i.setEdge(c,s,{weight:n.edge(l).weight+h})}),Xa.has(o,"minRank")&&i.setNode(s,{borderLeft:o.borderLeft[e],borderRight:o.borderRight[e]}))}),i}function tX(n){for(var e;n.hasNode(e=Xa.uniqueId("_root")););return e}var nX=Le,rX=iX;function iX(n,e,t){var r={},i;nX.forEach(t,function(s){for(var o=n.parent(s),a,l;o;){if(a=n.parent(o),a?(l=r[a],r[a]=o):(l=i,i=o),l&&l!==o){e.setEdge(l,o);return}o=a}})}var ci=Le,sX=N7,oX=$7,aX=Y7,lX=Z7,cX=rX,uX=Tn.Graph,sM=Bt,hX=fX;function fX(n){var e=sM.maxRank(n),t=oM(n,ci.range(1,e+1),"inEdges"),r=oM(n,ci.range(e-1,-1,-1),"outEdges"),i=sX(n);aM(n,i);for(var s=Number.POSITIVE_INFINITY,o,a=0,l=0;l<4;++a,++l){dX(a%2?t:r,a%4>=2),i=sM.buildLayerMatrix(n);var c=oX(n,i);c<s&&(l=0,o=ci.cloneDeep(i),s=c)}aM(n,o)}function oM(n,e,t){return ci.map(e,function(r){return lX(n,r,t)})}function dX(n,e){var t=new uX;ci.forEach(n,function(r){var i=r.graph().root,s=aX(r,i,t,e);ci.forEach(s.vs,function(o,a){r.node(o).order=a}),cX(r,t,s.vs)})}function aM(n,e){ci.forEach(e,function(t){ci.forEach(t,function(r,i){n.node(r).order=i})})}var se=Le,gX=Tn.Graph,pX=Bt,mX={positionX:bX,findType1Conflicts:lM,findType2Conflicts:cM,addConflict:zy,hasConflict:uM,verticalAlignment:hM,horizontalCompaction:fM,alignCoordinates:gM,findSmallestWidthAlignment:dM,balance:pM};function lM(n,e){var t={};function r(i,s){var o=0,a=0,l=i.length,c=se.last(s);return se.forEach(s,function(u,h){var f=yX(n,u),d=f?n.node(f).order:l;(f||u===c)&&(se.forEach(s.slice(a,h+1),function(g){se.forEach(n.predecessors(g),function(p){var b=n.node(p),m=b.order;(m<o||d<m)&&!(b.dummy&&n.node(g).dummy)&&zy(t,p,g)})}),a=h+1,o=d)}),s}return se.reduce(e,r),t}function cM(n,e){var t={};function r(s,o,a,l,c){var u;se.forEach(se.range(o,a),function(h){u=s[h],n.node(u).dummy&&se.forEach(n.predecessors(u),function(f){var d=n.node(f);d.dummy&&(d.order<l||d.order>c)&&zy(t,f,u)})})}function i(s,o){var a=-1,l,c=0;return se.forEach(o,function(u,h){if(n.node(u).dummy==="border"){var f=n.predecessors(u);f.length&&(l=n.node(f[0]).order,r(o,c,h,a,l),c=h,a=l)}r(o,c,o.length,l,s.length)}),o}return se.reduce(e,i),t}function yX(n,e){if(n.node(e).dummy)return se.find(n.predecessors(e),function(t){return n.node(t).dummy})}function zy(n,e,t){if(e>t){var r=e;e=t,t=r}var i=n[e];i||(n[e]=i={}),i[t]=!0}function uM(n,e,t){if(e>t){var r=e;e=t,t=r}return se.has(n[e],t)}function hM(n,e,t,r){var i={},s={},o={};return se.forEach(e,function(a){se.forEach(a,function(l,c){i[l]=l,s[l]=l,o[l]=c})}),se.forEach(e,function(a){var l=-1;se.forEach(a,function(c){var u=r(c);if(u.length){u=se.sortBy(u,function(p){return o[p]});for(var h=(u.length-1)/2,f=Math.floor(h),d=Math.ceil(h);f<=d;++f){var g=u[f];s[c]===c&&l<o[g]&&!uM(t,c,g)&&(s[g]=c,s[c]=i[c]=i[g],l=o[g])}}})}),{root:i,align:s}}function fM(n,e,t,r,i){var s={},o=vX(n,e,t,i),a=i?"borderLeft":"borderRight";function l(h,f){for(var d=o.nodes(),g=d.pop(),p={};g;)p[g]?h(g):(p[g]=!0,d.push(g),d=d.concat(f(g))),g=d.pop()}function c(h){s[h]=o.inEdges(h).reduce(function(f,d){return Math.max(f,s[d.v]+o.edge(d))},0)}function u(h){var f=o.outEdges(h).reduce(function(g,p){return Math.min(g,s[p.w]-o.edge(p))},Number.POSITIVE_INFINITY),d=n.node(h);f!==Number.POSITIVE_INFINITY&&d.borderType!==a&&(s[h]=Math.max(s[h],f))}return l(c,o.predecessors.bind(o)),l(u,o.successors.bind(o)),se.forEach(r,function(h){s[h]=s[t[h]]}),s}function vX(n,e,t,r){var i=new gX,s=n.graph(),o=wX(s.nodesep,s.edgesep,r);return se.forEach(e,function(a){var l;se.forEach(a,function(c){var u=t[c];if(i.setNode(u),l){var h=t[l],f=i.edge(h,u);i.setEdge(h,u,Math.max(o(n,c,l),f||0))}l=c})}),i}function dM(n,e){return se.minBy(se.values(e),function(t){var r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return se.forIn(t,function(s,o){var a=xX(n,o)/2;r=Math.max(s+a,r),i=Math.min(s-a,i)}),r-i})}function gM(n,e){var t=se.values(e),r=se.min(t),i=se.max(t);se.forEach(["u","d"],function(s){se.forEach(["l","r"],function(o){var a=s+o,l=n[a],c;if(l!==e){var u=se.values(l);c=o==="l"?r-se.min(u):i-se.max(u),c&&(n[a]=se.mapValues(l,function(h){return h+c}))}})})}function pM(n,e){return se.mapValues(n.ul,function(t,r){if(e)return n[e.toLowerCase()][r];var i=se.sortBy(se.map(n,r));return(i[1]+i[2])/2})}function bX(n){var e=pX.buildLayerMatrix(n),t=se.merge(lM(n,e),cM(n,e)),r={},i;se.forEach(["u","d"],function(o){i=o==="u"?e:se.values(e).reverse(),se.forEach(["l","r"],function(a){a==="r"&&(i=se.map(i,function(h){return se.values(h).reverse()}));var l=(o==="u"?n.predecessors:n.successors).bind(n),c=hM(n,i,t,l),u=fM(n,i,c.root,c.align,a==="r");a==="r"&&(u=se.mapValues(u,function(h){return-h})),r[o+a]=u})});var s=dM(n,r);return gM(r,s),pM(r,n.graph().align)}function wX(n,e,t){return function(r,i,s){var o=r.node(i),a=r.node(s),l=0,c;if(l+=o.width/2,se.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":c=-o.width/2;break;case"r":c=o.width/2;break}if(c&&(l+=t?c:-c),c=0,l+=(o.dummy?e:n)/2,l+=(a.dummy?e:n)/2,l+=a.width/2,se.has(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":c=a.width/2;break;case"r":c=-a.width/2;break}return c&&(l+=t?c:-c),c=0,l}}function xX(n,e){return n.node(e).width}var Ya=Le,mM=Bt,CX=mX.positionX,SX=PX;function PX(n){n=mM.asNonCompoundGraph(n),EX(n),Ya.forEach(CX(n),function(e,t){n.node(t).x=e})}function EX(n){var e=mM.buildLayerMatrix(n),t=n.graph().ranksep,r=0;Ya.forEach(e,function(i){var s=Ya.max(Ya.map(i,function(o){return n.node(o).height}));Ya.forEach(i,function(o){n.node(o).y=r+s/2}),r+=s+t})}var ae=Le,yM=S9,vM=z9,AX=u7,OX=Bt.normalizeRanks,MX=g7,TX=Bt.removeEmptyRanks,bM=v7,_X=P7,wM=A7,NX=hX,kX=SX,ui=Bt,$X=Tn.Graph,IX=LX;function LX(n,e){var t=e&&e.debugTiming?ui.time:ui.notime;t("layout",function(){var r=t("  buildLayoutGraph",function(){return UX(n)});t("  runLayout",function(){RX(r,t)}),t("  updateInputGraph",function(){jX(n,r)})})}function RX(n,e){e("    makeSpaceForEdgeLabels",function(){WX(n)}),e("    removeSelfEdges",function(){nY(n)}),e("    acyclic",function(){yM.run(n)}),e("    nestingGraph.run",function(){bM.run(n)}),e("    rank",function(){AX(ui.asNonCompoundGraph(n))}),e("    injectEdgeLabelProxies",function(){XX(n)}),e("    removeEmptyRanks",function(){TX(n)}),e("    nestingGraph.cleanup",function(){bM.cleanup(n)}),e("    normalizeRanks",function(){OX(n)}),e("    assignRankMinMax",function(){YX(n)}),e("    removeEdgeLabelProxies",function(){KX(n)}),e("    normalize.run",function(){vM.run(n)}),e("    parentDummyChains",function(){MX(n)}),e("    addBorderSegments",function(){_X(n)}),e("    order",function(){NX(n)}),e("    insertSelfEdges",function(){rY(n)}),e("    adjustCoordinateSystem",function(){wM.adjust(n)}),e("    position",function(){kX(n)}),e("    positionSelfEdges",function(){iY(n)}),e("    removeBorderNodes",function(){tY(n)}),e("    normalize.undo",function(){vM.undo(n)}),e("    fixupEdgeLabelCoords",function(){ZX(n)}),e("    undoCoordinateSystem",function(){wM.undo(n)}),e("    translateGraph",function(){JX(n)}),e("    assignNodeIntersects",function(){QX(n)}),e("    reversePoints",function(){eY(n)}),e("    acyclic.undo",function(){yM.undo(n)})}function jX(n,e){ae.forEach(n.nodes(),function(t){var r=n.node(t),i=e.node(t);r&&(r.x=i.x,r.y=i.y,e.children(t).length&&(r.width=i.width,r.height=i.height))}),ae.forEach(n.edges(),function(t){var r=n.edge(t),i=e.edge(t);r.points=i.points,ae.has(i,"x")&&(r.x=i.x,r.y=i.y)}),n.graph().width=e.graph().width,n.graph().height=e.graph().height}var DX=["nodesep","edgesep","ranksep","marginx","marginy"],BX={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},zX=["acyclicer","ranker","rankdir","align"],FX=["width","height"],VX={width:0,height:0},qX=["minlen","weight","width","height","labeloffset"],GX={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},HX=["labelpos"];function UX(n){var e=new $X({multigraph:!0,compound:!0}),t=Vy(n.graph());return e.setGraph(ae.merge({},BX,Fy(t,DX),ae.pick(t,zX))),ae.forEach(n.nodes(),function(r){var i=Vy(n.node(r));e.setNode(r,ae.defaults(Fy(i,FX),VX)),e.setParent(r,n.parent(r))}),ae.forEach(n.edges(),function(r){var i=Vy(n.edge(r));e.setEdge(r,ae.merge({},GX,Fy(i,qX),ae.pick(i,HX)))}),e}function WX(n){var e=n.graph();e.ranksep/=2,ae.forEach(n.edges(),function(t){var r=n.edge(t);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(e.rankdir==="TB"||e.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function XX(n){ae.forEach(n.edges(),function(e){var t=n.edge(e);if(t.width&&t.height){var r=n.node(e.v),i=n.node(e.w),s={rank:(i.rank-r.rank)/2+r.rank,e};ui.addDummyNode(n,"edge-proxy",s,"_ep")}})}function YX(n){var e=0;ae.forEach(n.nodes(),function(t){var r=n.node(t);r.borderTop&&(r.minRank=n.node(r.borderTop).rank,r.maxRank=n.node(r.borderBottom).rank,e=ae.max(e,r.maxRank))}),n.graph().maxRank=e}function KX(n){ae.forEach(n.nodes(),function(e){var t=n.node(e);t.dummy==="edge-proxy"&&(n.edge(t.e).labelRank=t.rank,n.removeNode(e))})}function JX(n){var e=Number.POSITIVE_INFINITY,t=0,r=Number.POSITIVE_INFINITY,i=0,s=n.graph(),o=s.marginx||0,a=s.marginy||0;function l(c){var u=c.x,h=c.y,f=c.width,d=c.height;e=Math.min(e,u-f/2),t=Math.max(t,u+f/2),r=Math.min(r,h-d/2),i=Math.max(i,h+d/2)}ae.forEach(n.nodes(),function(c){l(n.node(c))}),ae.forEach(n.edges(),function(c){var u=n.edge(c);ae.has(u,"x")&&l(u)}),e-=o,r-=a,ae.forEach(n.nodes(),function(c){var u=n.node(c);u.x-=e,u.y-=r}),ae.forEach(n.edges(),function(c){var u=n.edge(c);ae.forEach(u.points,function(h){h.x-=e,h.y-=r}),ae.has(u,"x")&&(u.x-=e),ae.has(u,"y")&&(u.y-=r)}),s.width=t-e+o,s.height=i-r+a}function QX(n){ae.forEach(n.edges(),function(e){var t=n.edge(e),r=n.node(e.v),i=n.node(e.w),s,o;t.points?(s=t.points[0],o=t.points[t.points.length-1]):(t.points=[],s=i,o=r),t.points.unshift(ui.intersectRect(r,s)),t.points.push(ui.intersectRect(i,o))})}function ZX(n){ae.forEach(n.edges(),function(e){var t=n.edge(e);if(ae.has(t,"x"))switch((t.labelpos==="l"||t.labelpos==="r")&&(t.width-=t.labeloffset),t.labelpos){case"l":t.x-=t.width/2+t.labeloffset;break;case"r":t.x+=t.width/2+t.labeloffset;break}})}function eY(n){ae.forEach(n.edges(),function(e){var t=n.edge(e);t.reversed&&t.points.reverse()})}function tY(n){ae.forEach(n.nodes(),function(e){if(n.children(e).length){var t=n.node(e),r=n.node(t.borderTop),i=n.node(t.borderBottom),s=n.node(ae.last(t.borderLeft)),o=n.node(ae.last(t.borderRight));t.width=Math.abs(o.x-s.x),t.height=Math.abs(i.y-r.y),t.x=s.x+t.width/2,t.y=r.y+t.height/2}}),ae.forEach(n.nodes(),function(e){n.node(e).dummy==="border"&&n.removeNode(e)})}function nY(n){ae.forEach(n.edges(),function(e){if(e.v===e.w){var t=n.node(e.v);t.selfEdges||(t.selfEdges=[]),t.selfEdges.push({e,label:n.edge(e)}),n.removeEdge(e)}})}function rY(n){var e=ui.buildLayerMatrix(n);ae.forEach(e,function(t){var r=0;ae.forEach(t,function(i,s){var o=n.node(i);o.order=s+r,ae.forEach(o.selfEdges,function(a){ui.addDummyNode(n,"selfedge",{width:a.label.width,height:a.label.height,rank:o.rank,order:s+ ++r,e:a.e,label:a.label},"_se")}),delete o.selfEdges})})}function iY(n){ae.forEach(n.nodes(),function(e){var t=n.node(e);if(t.dummy==="selfedge"){var r=n.node(t.e.v),i=r.x+r.width/2,s=r.y,o=t.x-i,a=r.height/2;n.setEdge(t.e,t.label),n.removeNode(e),t.label.points=[{x:i+2*o/3,y:s-a},{x:i+5*o/6,y:s-a},{x:i+o,y:s},{x:i+5*o/6,y:s+a},{x:i+2*o/3,y:s+a}],t.label.x=t.x,t.label.y=t.y}})}function Fy(n,e){return ae.mapValues(ae.pick(n,e),Number)}function Vy(n){var e={};return ae.forEach(n,function(t,r){e[r.toLowerCase()]=t}),e}var Fu=Le,sY=Bt,oY=Tn.Graph,aY={debugOrdering:lY};function lY(n){var e=sY.buildLayerMatrix(n),t=new oY({compound:!0,multigraph:!0}).setGraph({});return Fu.forEach(n.nodes(),function(r){t.setNode(r,{label:r}),t.setParent(r,"layer"+n.node(r).rank)}),Fu.forEach(n.edges(),function(r){t.setEdge(r.v,r.w,{},r.name)}),Fu.forEach(e,function(r,i){var s="layer"+i;t.setNode(s,{rank:"same"}),Fu.reduce(r,function(o,a){return t.setEdge(o,a,{style:"invis"}),a})}),t}var cY="0.8.5",uY={graphlib:Tn,layout:IX,debug:aY,util:{time:Bt.time,notime:Bt.notime},version:cY};const Vu=Jy(uY),{groupBy:hY,reduce:fY,uniq:dY,uniqBy:xM}=Yu,gY={ER:"er-rect",EDGE:"edge"},hi=()=>el.useTranslation("graph-collection-manager"),CM=(n,e)=>{const t=[],r=i=>{const s=n==null?void 0:n.find(o=>o.name===i);if(s){const{inherits:o}=s;if(o)for(let a=0;a<o.length;a++){const l=o[a];t.push(l),r(l)}}return dY(t)};return r(e)},pY=(n,e)=>{const t=[],r=i=>(n.filter(o=>{var a;return(a=o.inherits)==null?void 0:a.includes(i)}).forEach(o=>{const a=o.name;return t.push(o),r(a)}),t);return r(e)},SM=n=>{const e=[],t=[],r=n.map(o=>{const a=[],l=[...o.fields],c=CM(n,o.name),u=fY(c,(f,d)=>{var b;const g=f,p=(b=n.find(m=>m.name===d))==null?void 0:b.fields.map(m=>$e(re({},m),{sourceCollectionName:o.name}));return p?g.concat(p):g},[]);xM(l.concat(u),"name").forEach(f=>{f.uiSchema&&a.push(re({id:f.name,group:"list"},f)),["obo","oho","o2o","o2m","m2o","m2m","linkTo"].includes(f.interface)&&e.push(f)}),t.push(o.name);const h=mY(a);return{id:o.name,shape:gY.ER,name:o.name,title:o.title,width:250,ports:[...h.initPorts||[],...h.morePorts||[]],item:o}}),i=vY(e,t,r),s=yY(n);return{nodesData:r,edgesData:i,inheritEdges:s}},mY=n=>hY(n,t=>t.isForeignKey||t.primaryKey||["obo","oho","o2o","o2m","m2o","m2m","linkTo","id"].includes(t.interface)?"initPorts":"morePorts"),yY=n=>{const e={attrs:{line:{strokeWidth:1,textAnchor:"middle",textVerticalAnchor:"middle",stroke:"#ddd",sourceMarker:null}},router:{name:"smooth",args:{direction:"H"}},labels:[{markup:[{tagName:"ellipse",selector:"labelBody",style:{cursor:"pointer"}},{tagName:"text",selector:"labelText",style:{cursor:"pointer"}}],attrs:{labelText:{text:"inherits",fill:"rgba(0, 0, 0, 0.3)",textAnchor:"middle",textVerticalAnchor:"middle"},labelBody:{ref:"labelText",refWidth:"100%",refHeight:"100%",fill:"var(--nb-box-bg)"}},position:{distance:.5,args:{keepGradient:!0,ensureLegibility:!0}}}]},t=[];return n.forEach(r=>{const i=r.inherits||[];i.length&&i.forEach(s=>{t.push(re({id:r.name+s,source:{cell:r.name,connectionPoint:"rect"},target:{cell:s,connectionPoint:"rect"},connector:{name:"normal",zIndex:1e3},connectionType:"inherited"},e))})}),t},vY=(n,e,t)=>{var i,s,o,a,l,c,u,h,f;const r=[];for(let d=0;d<n.length;d++)if(e.includes(n[d].target)){const g=t.find(y=>y.name===n[d].target),p=t.find(y=>y.name===(n[d].sourceCollectionName||n[d].collectionName));if(!g||!p)break;const b={attrs:{line:{strokeWidth:1,textAnchor:"middle",textVerticalAnchor:"middle",stroke:"#ddd",sourceMarker:null,targetMarker:null}},router:p.id===g.id?{name:"oneSide",args:{side:"left"}}:{name:"er",args:{direction:"H"}},labels:[{markup:[{tagName:"ellipse",selector:"labelBody",style:{cursor:"pointer"}},{tagName:"text",selector:"labelText",style:{cursor:"pointer"}}],attrs:{labelText:{text:PM(n[d].interface)[0],fill:"rgba(0, 0, 0, 0.3)",textAnchor:"middle",textVerticalAnchor:"middle"},labelBody:{ref:"labelText",refWidth:"100%",refHeight:"100%",stroke:"#ddd",fill:"var(--nb-box-bg)",strokeWidth:1,rx:10,ry:10}},position:{distance:.3,args:{keepGradient:!0,ensureLegibility:!0}}},{markup:[{tagName:"ellipse",selector:"labelBody",style:{cursor:"pointer"}},{tagName:"text",selector:"labelText",style:{cursor:"pointer"}}],attrs:{labelText:{text:PM(n[d].interface)[1],fill:"rgba(0, 0, 0, 0.3)",textAnchor:"middle",textVerticalAnchor:"middle"},labelBody:{ref:"labelText",refWidth:"100%",refHeight:"100%",stroke:"#ddd",fill:"var(--nb-box-bg)",rx:10,ry:10,strokeWidth:1}},position:{distance:.7,args:{keepGradient:!0,ensureLegibility:!0}}}],connector:{name:"normal",zIndex:1e3}},m=y=>{const v=r.find(w=>w.id===y);return v?(v.associated.push(n[d].name),!1):!0};if(["m2m","linkTo"].includes(n[d].interface)){const y=t.find(v=>v.name===n[d].through);if(y){const v=p.id,w=y.id,x=(i=p.ports.find(B=>B.name===n[d].sourceKey))==null?void 0:i.id,C=(s=y.ports.find(B=>B.name===n[d].foreignKey))==null?void 0:s.id,S=g.id,E=y.id,A=(o=g.ports.find(B=>B.name===n[d].targetKey))==null?void 0:o.id,O=(a=y.ports.find(B=>B.name===n[d].otherKey))==null?void 0:a.id,T=v+x+w+C,k=S+A+E+O;r.push(re({id:T,source:{cell:v,port:x,anchor:{name:"right"}},target:{cell:w,port:C,anchor:{name:"left"}},associated:[n[d].name],m2m:[T,k]},b)),r.push(re({id:k,source:{cell:S,port:A,anchor:{name:"right"}},target:{cell:E,port:O,anchor:{name:"left"}},associated:[n[d].name],m2m:[T,k]},b))}}else{const y=(c=(l=t.find(B=>B.name==(n[d].sourceCollectionName||n[d].collectionName)))==null?void 0:l.ports)==null?void 0:c.find(B=>B.name===n[d].foreignKey),v=p.id,w=g.id,x=y==null?void 0:y.id,C=(u=g.ports.find(B=>B.name===n[d].targetKey))==null?void 0:u.id,S=p.id,E=g.id,A=(h=p.ports.find(B=>B.name===n[d].sourceKey))==null?void 0:h.id,O=(f=g.ports.find(B=>B.name===n[d].foreignKey))==null?void 0:f.id,T=v+x+w+C,k=S+A+E+O;m(w+C+v+x)&&y&&C&&r.push(re({id:T,source:{cell:v,port:x,anchor:{name:"right"}},target:{cell:w,port:C,anchor:{name:"left"}},associated:[n[d].name]},b)),m(E+O+S+A)&&A&&O&&r.push(re({id:k,source:{cell:S,port:A,anchor:{name:"right"}},target:{cell:E,port:O,anchor:{name:"left"}},associated:[n[d].name]},b))}}return xM(r,"id")},PM=n=>{switch(n){case"m2m":case"linkTo":return["1","N"];case"o2m":return["1","N"];case"m2o":return["N","1"];case"obo":case"oho":return["1","1"];default:return[]}},bY=(n,e)=>{const t=[],r=n.length,i=e.length;for(let s=0;s<r;s++)if(!e.find(o=>o.id===n[s].id))t.push({status:"add",node:n[s]});else{const o=e.find(c=>c.id===n[s].id),a=o==null?void 0:o.ports.items,l=n[s].ports;if(o){for(let c=0;c<l.length;c++)a.find(u=>u.id===l[c].id)||t.push({status:"insertPort",node:n[s],port:{index:c,port:l[c]}});for(let c=0;c<a.length;c++)l.find(u=>u.id===a[c].id)||t.push({status:"deletePort",node:n[s],port:a[c]});o.title!==n[s].title&&t.push({status:"updateNode",node:n[s]})}}for(let s=0;s<i;s++)n.find(o=>o.id===e[s].id)||t.push({status:"delete",node:e[s]});return t},EM=(n,e)=>{const t=n.length,r=e==null?void 0:e.length,i=[];for(let s=0;s<t;s++)e.find(o=>o.id===n[s].id)||i.push({status:"add",edge:n[s]});for(let s=0;s<r;s++)n.find(o=>o.id===e[s].id)||i.push({status:"delete",edge:e[s]});return i};let qu;const nt=()=>qu||(qu=document.getElementById("graph_container")),wY=()=>{qu=null},AM={name:"collections",filterTargetKey:"name",targetKey:"name",sortable:!0,fields:[{type:"integer",name:"title",interface:"input",uiSchema:{title:'{{ t("Collection display name") }}',type:"number","x-component":"Input",required:!0}},{type:"string",name:"name",interface:"input",uiSchema:{title:'{{ t("Collection name") }}',type:"string","x-component":"Input",description:'{{t("Randomly generated and can be modified. Support letters, numbers and underscores, must start with an letter.")}}'}},{type:"string",name:"template",interface:"input",uiSchema:{title:'{{ t("Collection Template") }}',type:"string","x-component":"Input"}},{type:"hasMany",name:"fields",target:"fields",collectionName:"collections",sourceKey:"name",targetKey:"name",uiSchema:{}},{type:"hasMany",name:"inherits",interface:"select",uiSchema:{title:'{{ t("Inherits") }}',type:"string","x-component":"Select","x-component-props":{mode:"multiple"}}},{type:"string",name:"description",interface:"input",uiSchema:{title:'{{ t("Description") }}',type:"string","x-component":"Input"}}]},xY=({item:n})=>_.jsx(L.AddCollection,{trigger:["click"],align:{overflow:{adjustY:!1}},item:n,scope:{useCancelAction:Kn},getContainer:nt,children:_.jsx(ce.Button,{type:"primary",children:_.jsx(ue.PlusOutlined,{})})}),CY=n=>{const{onClick:e}=n,{t}=hi(),r=[{key:Qa.Both,label:"All relationships"},{key:Qa.Entity,label:"Entity relationship only"},{key:Qa.Inherit,label:"Inheritance relationship only"}],i=_.jsx("div",{children:_.jsx(ce.Menu,{defaultSelectedKeys:[Qa.Both],selectable:!0,className:Pr.css`
          .ant-menu-item {
            height: 32px;
            line-height: 32px;
          }
        `,style:{maxHeight:"70vh",overflowY:"auto",border:"none"},items:[{type:"divider"},...r.map(s=>({key:s.key,label:t(s.label),onClick:o=>{e==null||e(s.key)}}))]})});return _.jsx(ce.Popover,{content:i,autoAdjustOverflow:!0,placement:"bottomRight",trigger:["click"],getPopupContainer:nt,overlayClassName:Pr.css`
        .ant-popover-inner-content {
          padding: 0;
        }
      `,children:_.jsx(ce.Button,{children:_.jsx(ue.ShareAltOutlined,{})})})},SY=n=>{const{onClick:e}=n,{t}=hi(),r=[{key:Ja.Both,label:"All directions"},{key:Ja.Target,label:"Target index"},{key:Ja.Source,label:"Source index"}],i=_.jsx("div",{children:_.jsx(ce.Menu,{defaultSelectedKeys:[Ja.Target],selectable:!0,className:Pr.css`
          .ant-menu-item {
            height: 32px;
            line-height: 32px;
          }
        `,style:{maxHeight:"70vh",overflowY:"auto",border:"none"},items:[{type:"divider"},...r.map(s=>({key:s.key,label:t(s.label),onClick:()=>{e==null||e(s.key)}}))]})});return _.jsx(ce.Popover,{content:i,autoAdjustOverflow:!0,placement:"bottomRight",trigger:["click"],getPopupContainer:nt,overlayClassName:Pr.css`
        .ant-popover-inner-content {
          padding: 0;
        }
      `,children:_.jsx(ce.Button,{children:_.jsx(ue.LineHeightOutlined,{})})})},qy=L.createStyles(({token:n,css:e})=>({graphMinimap:e`
      .x6-widget-minimap {
        background-color: ${n.colorBgContainer};
      }
    `,addButtonClass:e`
      flex-shrink: 0;
      padding: 2em 0;
    `,entityContainer:e`
      .btn-del {
        border-color: transparent;
        background-color: ${n.colorErrorBg};
        color: ${n.colorErrorText};
        height: 20px;
        width: 20px;
        &:hover {
          background-color: ${n.colorErrorBgHover};
        }
      }
      .btn-add {
        background: ${n.colorSuccessBg};
        border-color: transparent;
        color: ${n.colorSuccessText};
        width: 20px;
        &:hover {
          background-color: ${n.colorSuccessBgHover};
        }
      }
      .btn-edit {
        color: ${n.colorText};
        display: flex;
        &:hover {
          background: ${n.colorBgTextHover};
        }
      }
      .btn-edit-in-head {
        border-color: transparent;
        color: ${n.colorText};
        height: 20px;
        width: 22px;
        margin: 0px 5px 4px;
        line-height: 25px;
        &:hover {
          background: ${n.colorBgTextHover};
        }
      }
      .btn-inheriedParent {
        background: ${n.colorInfoBg};
        border-color: transparent;
        color: ${n.colorInfo};
        width: 20px;
        height: 20px;
        line-height: 25px;
        &:hover {
          background-color: ${n.colorInfoBgHover};
        }
      }
      .btn-inheriedChild {
        background: ${n.colorInfoBg};
        border-color: transparent;
        color: ${n.colorInfo};
        width: 20px;
        height: 20px;
        margin: 0px 5px 4px;
        &:hover {
          background-color: ${n.colorInfoBgHover};
        }
      }
      width: 250px;
      height: 100%;
      border-radius: ${n.borderRadiusLG}px;
      background-color: ${n.colorBgContainer};
      border: 0;
      overflow: hidden;
      &:hover {
        box-shadow: ${n.boxShadowTertiary};
      }
      .body {
        width: 100%;
        height: 100%;
        background-color: ${n.colorBgContainer};
        cursor: pointer;
        .morePorts {
          max-height: 300px;
          overflow: auto;
        }
        .body-item {
          display: inline-table;
          width: 100%;
          max-width: 250px;
          height: 40px;
          font-size: 14px;
          color: ${n.colorText};
          border-top: 1px solid ${n.colorBorderSecondary};
          text-overflow: ellipsis;
          display: flex;
          flex-direction: row;
          align-items: center;
          justify-content: space-between;

          .field-operator {
            display: none;
          }
          &:hover {
            .field-operator {
              display: flex;
              flex-direction: row-reverse;
              height: 32px;
              line-height: 32px;
              z-index: 999;
              cursor: pointer;
              text-align: right;
              background: ${n.colorBgContainer};
              padding-right: 3px;
              span {
                margin: 3px;
                margin-left: 4px;
                padding: 3px;
                height: 20px;
                width: 20px;
              }
              .btn-override {
                border-color: transparent;
                width: 20px;
                color: ${n.colorText};
                &:hover {
                  background-color: ${n.colorBgTextHover};
                }
              }
              .btn-view {
                border-color: transparent;
                color: ${n.colorText};
                width: 20px;
              }
              .btn-view:hover {
                background: ${n.colorBgTextHover};
              }
              .btn-assocition {
                border-color: transparent;
                color: ${n.colorPrimary};
                width: 20px;
              }
              .btn-assocition:hover {
                background: ${n.colorBgTextHover};
              }
            }
            .field_type {
              display: none;
            }
          }

          .name {
            text-overflow: ellipsis;
            white-space: nowrap;
            overflow: hidden;
            margin-left: 8px;
            min-width: 50%;
            .ant-badge {
              padding-right: 5px;
            }
          }

          .type {
            color: ${n.colorTextTertiary};
            margin-right: 8px;
            text-overflow: ellipsis;
            white-space: nowrap;
            overflow: hidden;
          }
        }
      }
    `,headClass:e`
      height: 50px;
      font-size: 14px;
      font-weight: 500;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      background: ${n.colorFillAlter};
      color: ${n.colorTextHeading};
      padding: 0 8px;
    `,tableNameClass:e`
      max-width: 80%;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      font-weight: 500;
    `,tableBtnClass:e`
      display: flex;
      span {
        cursor: pointer;
      }
    `,collectionPopoverClass:e`
      div.field-content {
        font-size: 14px;
        color: ${n.colorTextSecondary};
        opacity: 0.8;
        display: block;
        .field-type {
          color: ${n.colorText};
          float: right;
        }
      }
    `,collectionListClass:e`
      .nb-action-bar {
        float: right;
        position: fixed;
        margin-top: 24px;
        right: 24px;
        z-index: 1000;
        .trigger {
          float: right;
          margin: 2px 4px;
          font-size: 16px;
        }
        .ant-input {
          margin: 4px;
        }
        .ant-menu-inline {
          border-top: 1px solid ${n.colorBorderSecondary};
        }
        .ant-layout-sider {
          margin-top: 24px;
        }
        .ant-menu-item {
          height: 32px;
        }
        .ant-btn {
          border: 0;
        }
      }
    `,graphCollectionContainerClass:e`
      overflow: hidden;
      #container {
        height: 100% !important;
      }
      .x6-graph-scroller {
        height: calc(100vh) !important;
        width: calc(100vw) !important;
      }
    `})),PY=n=>{const e=n.collectionName,{run:t}=Kv(e,n.key);return{run(){return ze(this,null,function*(){yield t()})}}},EY=({item:n,database:e})=>_.jsx(L.AddFieldAction,{trigger:["click"],align:{overflow:{adjustY:!1}},item:n,database:e,scope:{useCancelAction:Kn,useCreateCollectionField:()=>PY(n)},getContainer:nt,children:_.jsx(ue.PlusOutlined,{className:"btn-add",id:"graph_btn_add_field"})}),AY=n=>{const{targetGraph:e,item:t}=n;return _.jsx(ue.BranchesOutlined,{className:"btn-assocition",onClick:()=>{e.onConnectionAssociation(t)}})},OY=n=>{const{targetGraph:e,item:t}=n,{t:r}=hi(),{getChildrenCollections:i}=L.useCollectionManager_deprecated(),s=i(t.name);return(s==null?void 0:s.some(({name:a})=>!e.hasCell(a)))?_.jsx(ce.Tooltip,{title:r("Show child"),getPopupContainer:nt,children:_.jsx(ue.FallOutlined,{className:"btn-inheriedChild",onClick:()=>{e.onConnectionChilds(s.map(a=>a.name))}})}):""},MY=n=>{const{targetGraph:e,item:t}=n,{t:r}=hi(),{getInheritCollections:i}=L.useCollectionManager_deprecated(),s=i(t.name);return(s==null?void 0:s.some(a=>!e.hasCell(a)))?_.jsx(ce.Tooltip,{title:r("Show parent"),getPopupContainer:nt,children:_.jsx(ue.RiseOutlined,{className:"btn-inheriedParent",onClick:()=>{e.onConnectionParents(s)}})}):""},TY=r=>{var i=r,{item:n,className:e}=i,t=Ky(i,["item","className"]);return _.jsx(L.DeleteCollection,$e(re({item:n,scope:{useCancelAction:Kn,useUpdateCollectionActionAndRefreshCM:vl,createOnly:!1},getContainer:nt},t),{children:_.jsx(ue.DeleteOutlined,{className:e})}))},_Y=({item:n,className:e})=>_.jsx(L.EditCollection,{item:n,scope:{useCancelAction:Kn,useUpdateCollectionActionAndRefreshCM:vl,createOnly:!1},getContainer:nt,children:_.jsx(ue.EditOutlined,{className:e})}),NY=n=>{const e=n.collectionName,{run:t}=lR({collectionName:e,name:n.name,key:n.id});return{run(){return ze(this,null,function*(){yield t()})}}},kY=({item:n,parentItem:e})=>_.jsx(L.EditFieldAction,{item:n,parentItem:e,scope:{useCancelAction:Kn,useUpdateCollectionField:()=>NY(n)},getContainer:nt,children:_.jsx(ue.EditOutlined,{className:"btn-edit"})}),$Y=Ft.observer(n=>{const{schemaKey:e}=n,{getInterface:t}=L.useCollectionManager_deprecated(),r=L.useCompile(),{t:i}=el.useTranslation(),s=t(e);return s?_.jsxs("div",{className:L.css`
          background: #f6f6f6;
          margin-bottom: 24px;
          padding: 16px;
        `,children:[_.jsxs("div",{className:L.css``,children:[i("Field interface"),": ",_.jsx(ce.Tag,{children:r(s.title)})]}),s.description?_.jsx("div",{className:L.css`
              margin-top: 8px;
              color: rgba(0, 0, 0, 0.45);
            `,children:r(s.description)}):null]}):null},{displayName:"FieldSummary"}),IY=n=>{const e=n.targetCollection,{run:t}=Kv(e);return{run(){return ze(this,null,function*(){yield t()})}}},LY=({item:n,parentItem:e})=>_.jsx(L.OverridingFieldAction,{item:re({},n),parentItem:e,scope:{useCancelAction:Kn,useOverridingCollectionField:()=>IY(n)},getContainer:nt,children:_.jsx(ue.CopyOutlined,{className:"btn-override"})}),RY=({item:n,parentItem:e})=>_.jsx(L.ViewFieldAction,{item:re({},n),parentItem:e,getContainer:nt,children:_.jsx(ue.EyeOutlined,{className:"btn-view"})}),OM=te.memo(n=>{const{property:e,loadCollections:t,collectionData:r,setTargetNode:i,node:s,handelOpenPorts:o,title:a,name:l,targetGraph:c,isReferenced:u}=n,h=e.collectionName===l,f=te.useContext(Ft.SchemaOptionsContext),g=["hasOne","hasMany","belongsTo","belongsToMany"].includes(e.type)&&!(e.through?c.hasCell(e.through):c.hasCell(e.target)),{data:{database:p}}=L.useCurrentAppInfo(),b=y=>`${y||""}${po.uid()}`,m=()=>{const y=L.useRecord(),{getCollectionFields:v}=L.useCollectionManager_deprecated();return v(y.collectionName||y.name)};return _.jsx("div",{className:"field-operator",children:_.jsx(L.SchemaComponentProvider,{components:re({Select:y=>_.jsx(L.Select,$e(re({popupMatchSelectWidth:!1},y),{getPopupContainer:nt})),FieldSummary:$Y,AddFieldAction:EY,OverrideFieldAction:LY,ViewFieldAction:RY,EditFieldAction:kY,ConnectAssociationAction:AY},f.components),scope:re({useAsyncDataSource:hh,loadCollections:t,useCancelAction:Kn,useNewId:b,useCurrentFields:m,useValuesFromRecord:aR,useUpdateCollectionActionAndRefreshCM:vl,isInheritField:h,isShowAssocition:g,isReferenced:u},f.scope),children:_.jsx(Xv,{record:r.current,setTargetNode:i,node:s,handelOpenPorts:()=>o(!0),children:_.jsx(L.SchemaComponent,{scope:Kn,schema:{type:"object",properties:{create:{type:"void","x-action":"create","x-component":"AddFieldAction","x-visible":"{{isInheritField && !isReferenced}}","x-component-props":{item:$e(re({},e),{title:a}),database:p}},update:{type:"void","x-action":"update","x-component":"EditFieldAction","x-visible":"{{isInheritField && !isReferenced}}","x-component-props":{item:$e(re({},e),{title:a}),parentItem:r.current}},delete:{type:"void","x-action":"destroy","x-component":"Action.Link","x-visible":"{{isInheritField && !isReferenced}}","x-component-props":{component:ue.DeleteOutlined,icon:"DeleteOutlined",className:"btn-del",confirm:{getContainer:nt,title:"{{t('Delete record')}}",content:"{{t('Are you sure you want to delete it?')}}"},useAction:()=>fR({collectionName:e.collectionName,name:e.name})}},override:{type:"void","x-action":"create","x-visible":"{{!isInheritField && !isReferenced}}","x-component":"OverrideFieldAction","x-component-props":{icon:"ReconciliationOutlined",item:$e(re({},e),{title:a,targetCollection:l}),parentItem:r.current}},view:{type:"void","x-action":"view","x-visible":"{{!isInheritField}}","x-component":"ViewFieldAction","x-component-props":{icon:"ReconciliationOutlined",item:$e(re({},e),{title:a}),parentItem:r.current}},connectAssociation:{type:"void","x-action":"view","x-visible":"{{isShowAssocition && !isReferenced}}","x-component":"ConnectAssociationAction","x-component-props":{item:$e(re({},e),{title:a,__parent:r.current}),targetGraph:c}}}}})})})})});OM.displayName="OperationButton";const Gy=te.forwardRef((n,e)=>{var x,C,S,E;const w=n,{property:t,node:r}=w,i=Ky(w,["property","node"]),{store:{data:{title:s,name:o,sourcePort:a,associated:l,targetPort:c,item:u}}}=r,{isReferenced:h}=u,f=L.useCompile(),{styles:d}=qy(),{getInterface:g}=L.useCollectionManager_deprecated(),[p,b]=te.useState(!1),m=te.useCallback(A=>{const{type:O,name:T,primaryKey:k,allowNull:B,autoIncrement:W}=A;return _.jsxs("div",{className:d.collectionPopoverClass,children:[_.jsxs("div",{className:"field-content",children:[_.jsxs("div",{children:[_.jsx("span",{children:"name"}),": ",_.jsx("span",{className:"field-type",children:T})]}),_.jsxs("div",{children:[_.jsx("span",{children:"type"}),": ",_.jsx("span",{className:"field-type",children:O})]})]}),_.jsxs("p",{children:[k&&_.jsx(ce.Tag,{color:"green",children:"PRIMARY"}),B&&_.jsx(ce.Tag,{color:"geekblue",children:"ALLOWNULL"}),W&&_.jsx(ce.Tag,{color:"purple",children:"AUTOINCREMENT"})]})]})},[]),y=re({title:s,name:o,node:r,isReferenced:h},i),v=A=>{if(A.isForeignKey||A.primaryKey||A.interface==="id")return"red";if(["obo","oho","o2o","o2m","m2o","m2m","linkTo"].includes(A.interface))return"orange"};return _.jsx("div",{children:_.jsxs("div",{className:"body-item",id:t.id,style:{background:c||a===t.id||l!=null&&l.includes(t.name)?"#e6f7ff":null},onMouseEnter:()=>{b(!0)},onMouseLeave:()=>b(!1),children:[_.jsx(L.StablePopover,{content:m(t),getPopupContainer:nt,mouseLeaveDelay:0,title:_.jsxs("div",{children:[f((x=t.uiSchema)==null?void 0:x.title),_.jsx("span",{style:{color:"#ffa940",float:"right"},children:f((C=g(t.interface))==null?void 0:C.title)})]}),placement:"right",children:_.jsxs("div",{className:"name",children:[_.jsx(ce.Badge,{color:v(t)}),f((S=t.uiSchema)==null?void 0:S.title)]})},t.id),_.jsx("div",{className:"type  field_type",children:f((E=g(t.interface))==null?void 0:E.title)}),p&&_.jsx(OM,re({property:t},y))]},t.id)})});Gy.displayName="PopoverContent";const jY=te.memo(({targetGraph:n,collectionData:e,setTargetNode:t,node:r,loadCollections:i})=>{var p,b;const{store:{data:{item:s,ports:o,data:a}}}=r,[l,c]=te.useState(!1),{t:u}=hi(),h=Yu.groupBy(o.items,m=>m.isForeignKey||m.primaryKey||["obo","oho","o2o","o2m","m2o","m2m","linkTo","id"].includes(m.interface)?"initPorts":"morePorts"),f=m=>{var v;(v=n.getCellById(s.name))==null||v.toFront(),c(m);const y=n.collapseNodes||[];y.push({[s.name]:m}),n.collapseNodes=y,n.getCellById(s.name).setData({collapse:!0})},d=l&&(a==null?void 0:a.collapse),g={collectionData:e,setTargetNode:t,loadCollections:i,handelOpenPorts:f,node:r,targetGraph:n};return _.jsxs("div",{className:"body",children:[(p=h.initPorts)==null?void 0:p.map(m=>m.uiSchema&&te.createElement(Gy,$e(re({},g),{property:m,key:m.id}))),_.jsx("div",{className:"morePorts",children:d&&((b=h.morePorts)==null?void 0:b.map(m=>m.uiSchema&&te.createElement(Gy,$e(re({},g),{property:m,key:m.id}))))}),_.jsx("a",{className:Pr.css`
          display: block;
          color: #958f8f;
          padding: 10px 5px;
          &:hover {
            color: rgb(99 90 88);
          }
        `,onClick:()=>f(!d),children:d?[_.jsx(ue.UpOutlined,{style:{margin:"0px 8px 0px 5px"}},"icon"),_.jsx("span",{children:u("Association Fields")},"associate")]:[_.jsx(ue.DownOutlined,{style:{margin:"0px 8px 0px 5px"}},"icon"),_.jsx("span",{children:u("All Fields")},"all")]})]})}),DY=n=>{const{styles:e}=qy(),t=te.useContext(Ft.SchemaOptionsContext),{node:r,setTargetNode:i,targetGraph:s}=n,{store:{data:{title:o,name:a,item:l,attrs:c,select:u,actived:h}},id:f}=r,{isReferenced:d}=l,{data:{database:g}}=L.useCurrentAppInfo(),p=te.useRef(),b=te.useContext(L.CollectionCategroriesContext);p.current=$e(re({},l),{title:o,inherits:l.inherits&&new Proxy(l.inherits,{})});const{category:m=[]}=l,y=L.useCompile(),v=C=>ze(this,null,function*(){var S;return(S=s.collections)==null?void 0:S.map(E=>({label:y(E.title),value:E.name}))}),w=()=>ze(this,null,function*(){return b==null?void 0:b.data.map(C=>({label:y(C.name),value:C.id}))}),x={targetGraph:s,collectionData:p,setTargetNode:i,node:r,loadCollections:v};return _.jsxs("div",{className:e.entityContainer,style:{boxShadow:c==null?void 0:c.boxShadow,border:u?"2px dashed #f5a20a":0},children:[m==null?void 0:m.map((C,S)=>_.jsx(ce.Badge.Ribbon,{color:C.color,style:{width:"103%",height:"3px",marginTop:S*5-8,borderRadius:0},placement:"start"},S)),_.jsxs("div",{className:e.headClass,style:{background:c!=null&&c.hightLight?"#1890ff":null,paddingTop:m.length*3},children:[_.jsx("span",{className:e.tableNameClass,children:y(o)}),_.jsx("div",{className:e.tableBtnClass,children:_.jsx(L.SchemaComponentProvider,{children:_.jsx(Xv,{setTargetNode:i,node:r,children:_.jsx(L.CollectionProvider_deprecated,{collection:AM,children:_.jsx(L.SchemaComponent,{scope:{useUpdateCollectionActionAndRefreshCM:vl,useCancelAction:Kn,loadCollections:v,loadCategories:w,useAsyncDataSource:hh,enableInherits:(g==null?void 0:g.dialect)==="postgres",actived:h===!0,isReferenced:d},components:re({EditOutlined:ue.EditOutlined,EditCollectionAction:_Y,DeleteCollectionAction:TY,ConnectChildAction:OY,ConnectParentAction:MY},t.components),schema:{type:"object",name:r.id,properties:{connectParent:{type:"void","x-visible":"{{actived && !isReferenced}}","x-component":"ConnectParentAction","x-component-props":{item:p.current,targetGraph:s}},connectChild:{type:"void","x-component":"ConnectChildAction","x-component-props":{item:p.current,targetGraph:s},"x-visible":"{{actived && !isReferenced}}"},update:{type:"void",title:'{{ t("Edit") }}',"x-component":"EditCollectionAction","x-component-props":{type:"primary",item:p.current,className:"btn-edit-in-head"},"x-visible":"{{!isReferenced}}"},delete:{type:"void","x-action":"destroy","x-component":"DeleteCollectionAction","x-component-props":{className:"btn-del",getContainer:nt,item:p.current,useAction:()=>uR({name:a,id:f})},"x-visible":"{{!isReferenced}}"}}}})})})})})]}),_.jsx(jY,re({},x))]})},MM=te.forwardRef(()=>{const{t:n}=hi(),[e,{toggleFullscreen:t}]=XM.useFullscreen(document.getElementById("graph_container"));return _.jsx(ce.Tooltip,{title:n("Full Screen"),getPopupContainer:nt,children:_.jsx(ce.Button,{onClick:()=>{t()},children:e?_.jsx(ue.FullscreenExitOutlined,{}):_.jsx(ue.FullscreenOutlined,{})})})});MM.displayName="FullscreenAction";const BY=n=>{const{handleFiterCollections:e}=n,{handleSearchCollection:t,collectionList:r}=te.useContext(Uu),[i,s]=te.useState([]),{t:o}=hi(),a=L.useCompile(),l=_.jsxs("div",{children:[_.jsx(ce.Input,{style:{margin:"4px 0"},bordered:!1,placeholder:o("Collection Search"),onChange:t}),_.jsx(ce.Menu,{selectedKeys:i,selectable:!0,className:Pr.css`
          .ant-menu-item {
            height: 32px;
            line-height: 32px;
          }
        `,style:{maxHeight:"70vh",overflowY:"auto",border:"none"},items:[{type:"divider"},...r.map(c=>({key:c.name,label:a(c.title),onClick:u=>{u.key!==i[0]?(s([u.key]),e(u.key)):(e(!1),s([]))}}))]})]});return _.jsx(ce.Popover,{content:l,autoAdjustOverflow:!0,placement:"bottomRight",trigger:["click"],getPopupContainer:nt,overlayClassName:Pr.css`
        .ant-popover-inner-content {
          padding: 0;
        }
      `,children:_.jsx(ce.Button,{children:_.jsx(ue.MenuOutlined,{})})})},zY=n=>{const{collectionList:e}=te.useContext(Uu),t=L.useCompile(),[r,i]=tl.useSearchParams(),s=r.get("collections"),o=s==null?void 0:s.split(","),a=o==null?void 0:o.filter(u=>e.find(h=>h.name===u)),l=te.useMemo(()=>e.map(u=>({label:t(u.title),value:u.name})),[e]),c=u=>{i([["collections",u.toString()]])};return _.jsx(L.Select,{value:a,showSearch:!0,getPopupContainer:nt,mode:"multiple",allowClear:!0,options:l,onChange:c,style:{minWidth:200,position:"fixed",margin:"24px",zIndex:1e3,maxWidth:"60%"}})};class FY extends kt{renderMarkup(){return this.renderJSONMarkup({tagName:"rect",selector:"body"})}update(){const t=this.cell.getAttrs().hightLight?"#1890ff":"gray";super.update({body:{refWidth:"50px",refHeight:"100px",fill:t}})}}const{drop:TM,groupBy:_M,last:VY,maxBy:Ka,minBy:Hy,take:NM,uniq:Uy}=Yu,Wy=40,Xy=250;let N,_n;const qY="TB";var Ja=(n=>(n.Both="both",n.Target="target",n.Source="source",n))(Ja||{}),Qa=(n=>(n.Both="both",n.Inherit="inherited",n.Entity="entity",n))(Qa||{});const Gu=(n,e)=>{const t=[];for(;(e==null?void 0:e.length)>0&&n;)t.push(e.splice(0,n));return t};function GY(n,e){return ze(this,null,function*(){const{positions:t}=N;let r=[];const i=N.getNodes(),s=N.getEdges(),o=new Vu.graphlib.Graph;if(!i||i.length===0)return;o.setGraph({rankdir:qY,nodesep:50,edgesep:50,rankSep:50,align:"DL",controlPoints:!0}),o.setDefaultEdgeLabel(()=>({})),i.forEach((l,c)=>{const u=Xy,h=l.getPorts().length*32+30;o.setNode(l.id,{width:u,height:h})}),Vu.layout(o),Gu(15,o.nodes()).forEach((l,c)=>{l.forEach((u,h)=>{const f=N.getCellById(u),d=h%15;if(f){const g=t&&t.find(b=>b.collectionName===f.store.data.name)||{},p={x:d*325+50,y:c*400+100};f.position(g.x||p.x,g.y||p.y),t&&!t.find(b=>b.collectionName===f.store.data.name)&&r.push({collectionName:f.store.data.name,x:p.x,y:p.y})}})}),s.forEach(l=>{Hu(l)}),_n?typeof _n=="string"?N.positionCell(VY(i),"top",{padding:100}):N.positionCell(_n,"top",{padding:100}):N.positionCell(i[0],"top-left",{padding:100}),r.length>0&&e&&(yield n(r),r=[])})}function Hu(n){var u,h;const{store:{data:{connectionType:e}}}=n,t=n.getSource(),r=n.getTarget(),i=(u=N.getCellById(t.cell))==null?void 0:u.position().x,s=(h=N.getCellById(r.cell))==null?void 0:h.position().x,o=e?{name:"topLeft",args:{dy:20}}:{name:"left"},a=e?{name:"topRight",args:{dy:20}}:"right",l=e?"normal":"er";if(n.getVertices().forEach(()=>n.removeVertexAt(0)),i-100>s)n.setSource({cell:t.cell,port:t.port,anchor:o}),n.setTarget({cell:r.cell,port:r.port,anchor:a}),n.setRouter(l,{direction:"H"});else if(Math.abs(i-s)<100){const f=N.getCellById(t.cell),d=N.getCellById(r.cell);n.setSource({cell:t.cell,port:t.port,anchor:o}),n.setTarget({cell:r.cell,port:r.port,anchor:o}),e?(n.setVertices([{x:f.position().x-30,y:f.position().y+20},{x:d.position().x-30,y:d.position().y+20}]),n.setRouter("normal")):n.setRouter("oneSide",{side:"left"})}else n.setSource({cell:t.cell,port:t.port,anchor:a}),n.setTarget({cell:r.cell,port:r.port,anchor:o}),n.setRouter(l,{direction:"H"})}const Uu=te.createContext({});Uu.displayName="CollapsedContext";const HY=()=>{const n=[],e=N.getEdges(),t=N.getNodes();return e.forEach(i=>{n.push(i.getSourceCellId()),n.push(i.getTargetCellId())}),_M(t,i=>n.includes(i.id)?"linkNodes":"rawNodes")},kM=n=>{var y;const{linkNodes:e=[],rawNodes:t=[]}=HY(),{positions:r}=N,i=e.concat(t||[]),s=N.getEdges(),o=new Vu.graphlib.Graph;let a,l,c,u,h;const f=[];o.setGraph({rankdir:"TB",nodesep:50,edgesep:50,rankSep:50,align:"DL",controlPoints:!0});const d=250,g=400;i.forEach(v=>{o.setNode(v.id,{width:d,height:g})}),s.forEach(v=>{const w=v.getSource(),x=v.getTarget();o.setEdge(w.cell,x.cell,{})}),Vu.layout(o);const p=o.nodes(),b=NM(p,e.length),m=TM(p,e.length);if(b.forEach(v=>{var C;const w=N.getCellById(v),x=(C=r.find(S=>S.collectionName===w.id))==null?void 0:C.id;if(w){const S=o.node(v);f.push({id:x,collectionName:w.id,x:S.x,y:S.y}),w.position(S==null?void 0:S.x,S==null?void 0:S.y)}}),b.length){h=N.getCellById(Ka(b,C=>N.getCellById(C).position().y)).position().y,u=N.getCellById(Hy(b,C=>N.getCellById(C).position().x)).position().x;const v=N.getCellById(Ka(b,C=>N.getCellById(C).position().x)).position().x,w=b.filter(C=>Math.abs(N.getCellById(C).position().y-h)<50),x=(y=N.getCellById(Ka(w,C=>N.getCellById(C).position().x)))==null?void 0:y.position();if(c=Math.round(v/320)||1,a=Math.floor((4500-(v+100-x.x))/280),l=Gu(c,t),a>=1){const C=NM(m,a);l=Gu(c,TM(m,a)),C.forEach((S,E)=>{var O;const A=N.getCellById(S);if(A){const T={x:x.x+320*E+280,y:x.y};A.position(T.x,T.y);const k=(O=r.find(B=>B.collectionName===A.id))==null?void 0:O.id;f.push({id:k,collectionName:A.id,x:T.x,y:T.y})}})}}else c=15,a=0,l=Gu(15,t),u=50,h=50;if(l.forEach((v,w)=>{v.forEach((x,C)=>{var A;const S=N.getCellById(x),E=C%c;if(S){const O={x:E*325+u,y:w*300+h+300};S.position(O.x,O.y);const T=(A=r.find(k=>k.collectionName===S.id))==null?void 0:A.id;f.push({id:T,collectionName:S.id,x:O.x,y:O.y})}})}),s.forEach(v=>{Hu(v)}),N.positionCell(i[0],"top-left",{padding:100}),!n){const v=f.filter(x=>x.id),w=f.filter(x=>!x.id);v.length>0&&N.updatePositionAction(v,!0),w.length>0&&N.saveGraphPositionAction(w)}},$M=te.memo(()=>{var DM;const{theme:n}=L.useGlobalTheme(),{styles:e}=qy(),[t,r]=tl.useSearchParams(),i=t.get("collections"),s=te.useContext(Ft.SchemaOptionsContext),o=L.useAPIClient(),a=L.useCompile(),{t:l}=hi(),[c,u]=te.useState([]),[h,f]=te.useState([]),[d,g]=te.useState(!1),{collections:p,getCollections:b}=L.useCollectionManager_deprecated(),m=L.useDataSourceManager(),y=L.useCurrentAppInfo(),v=L.useApp(),{appGroupList:w}=L.useAppMenu(),x=tl.useMatch("/app/settings/*"),{appName:C}=tl.useParams(),S=(DM=L.getAppInfoByName(w,C))==null?void 0:DM.id,{data:{database:E}}=y,A=te.useContext(L.CollectionCategroriesContext),O=re({},s==null?void 0:s.scope),T=re({},s==null?void 0:s.components),k=I=>ze(this,null,function*(){yield o.resource("graphPositions").create({values:I}),yield W()}),B=(I,z=!1)=>ze(this,null,function*(){i||(z?yield o.resource("graphPositions").update({values:I}):yield o.resource("graphPositions").update({filter:{collectionName:I.collectionName},values:re({},I)}),yield W())}),W=()=>ze(this,null,function*(){const{data:I}=yield o.resource("graphPositions").list({paginate:!1});return N.positions=I.data,Promise.resolve()}),M=I=>{_n=I,I==="destory"&&W()},$=I=>ze(this,null,function*(){var oe,me;let z=[];try{const Me=yield o.request({url:"collections:list_app_reference",params:{paginate:!1},headers:{"X-Application":C}});z=(me=(oe=Me==null?void 0:Me.data)==null?void 0:oe.data)==null?void 0:me.map(be=>be.key)}catch(Me){}const H=b().filter(({key:Me,associatedApp:be})=>x||(be==null?void 0:be.applicationsId)===S||z.includes(Me)).map(Me=>$e(re({},Me),{isReferenced:z.includes(Me.key)}));if(!N)return;N.collections=H,N.updatePositionAction=B,N.saveGraphPositionAction=k;const ee=N.getNodes();u(H),f(H),!ee.length||I?i||at(H):kn(H)}),Y=L.useDataSource(),j=()=>{N=new q({container:document.getElementById("container"),moveThreshold:0,virtual:!1,async:!0,connecting:{anchor:{name:"midSide"}},mousewheel:{enabled:!0,modifiers:["ctrl","meta"]},interacting:{magnetConnectable:!1},preventDefaultBlankAction:!0}),N.connectionType="both",N.direction="target",N.cacheCollection={},N.onConnectionAssociation=F,N.onConnectionChilds=U,N.onConnectionParents=ne,q.registerPortLayout("erPortPosition",I=>I.map((z,H)=>({position:{x:0,y:(H+1)*Wy},angle:0})),!0),wU({shape:"er-rect",width:Xy,height:Wy,ports:{groups:{list:{markup:[{tagName:"rect",selector:"portBody"}],attrs:{portBody:{width:Xy,height:Wy,strokeWidth:1,visibility:"hidden"}},position:"erPortPosition"}}},body:{refWidth:100,refHeight:100},component:I=>_.jsx(L.CurrentAppInfoContext.Provider,{value:y,children:_.jsx(L.DataSourceApplicationProvider,{dataSourceManager:m,dataSource:Y==null?void 0:Y.key,children:_.jsx(L.APIClientProvider,{apiClient:o,children:_.jsx(L.SchemaComponentOptions,{inherit:!0,scope:O,components:T,children:_.jsx(L.CollectionCategroriesProvider,$e(re({},A),{children:_.jsx(ce.ConfigProvider,{theme:n,children:_.jsx("div",{style:{height:"auto"},children:_.jsx(ce.App,{children:_.jsx(L.ApplicationContext.Provider,{value:v,children:_.jsx(DY,$e(re({},I),{setTargetNode:M,targetGraph:N}))})})})})}))})})})})}),N.use(new Qw({autoResize:!0,enabled:!0,pannable:!0,pageVisible:!0,pageBreak:!1,padding:{top:10,left:500,right:300,bottom:300}})),N.use(new Jw({container:document.getElementById("graph-minimap"),width:300,height:200,padding:10,graphOptions:{async:!0,createCellView(I){if(I.isEdge())return null;if(I.isNode())return FY}}})),N.use(new Is({enabled:!1,multiple:!0,rubberband:!0,movable:!0,className:"node-selecting",modifiers:"shift"})),N.use(new tx({enabled:!0})),N.on("edge:mouseleave",({e:I,edge:z})=>{I.stopPropagation(),Oe(z)}),N.on("node:mouseleave",({e:I,node:z})=>{I.stopPropagation(),z.setProp({actived:!1})}),N.on("node:moved",({e:I,node:z})=>{I.stopPropagation();const H=N.getConnectedEdges(z),ee=z.position(),oe=N.positions.find(me=>me.collectionName===z.store.data.name);oe?(oe.x!==ee.x||oe.y!==ee.y)&&B(re({collectionName:z.store.data.name},ee)):k(re({collectionName:z.store.data.name},ee)),H.forEach(me=>{Hu(me)})}),N.on("cell:mouseenter",({e:I,cell:z,edge:H,node:ee})=>{I.stopPropagation(),z.toFront(),ee&&z.setProp({actived:!0}),H&&Nn(H)}),N.on("blank:click",I=>{var z;N!=null&&N.activeEdge&&Oe(N==null?void 0:N.activeEdge),(z=N.collapseNodes)==null||z.map(H=>{const ee=N.getCellById(Object.keys(H)[0]);Object.values(H)[0]&&(ee==null||ee.setData({collapse:!1}))}),N.cleanSelection()}),N.on("node:selected",({e:I,node:z})=>{z.setProp({select:!0})}),N.on("node:unselected",({e:I,node:z})=>{z.setProp({select:!1})})},F=({target:I,through:z})=>{var oe;const H=((oe=N.selectedCollections)==null?void 0:oe.split(","))||[];H.push(I),z&&H.push(z);const ee=Uy(H).toString();r([["collections",ee]]),N.selectedCollections=ee},U=I=>{let z=N.selectedCollections.split(",")||[];z=z.concat(I);const H=Uy(z).toString();r([["collections",H]]),N.selectedCollections=H},ne=I=>{let z=N.selectedCollections.split(",")||[];z=z.concat(I);const H=Uy(z).toString();r([["collections",H]]),N.selectedCollections=H},Oe=I=>{var Me,be;N.activeEdge=null;const{m2m:z,connectionType:H}=(be=(Me=I.store)==null?void 0:Me.data)!=null?be:{},ee=z==null?void 0:z.find(Je=>Je!==I.id),oe=N.getCellById(ee),me=Je=>{const He=N.getCellById(Je.store.data.target.cell),zt=N.getCellById(Je.store.data.source.cell);He.setProp({targetPort:!1,associated:null}),zt.setProp({sourcePort:!1,associated:null}),Je.setAttrs({line:{stroke:"#ddd",targetMarker:H==="inherited"?{name:"classic",fill:"#ddd"}:null}}),Je.setLabels(Je.getLabels().map(Mt=>$e(re({},Mt),{attrs:{labelText:$e(re({},Mt.attrs.labelText),{fill:"rgba(0, 0, 0, 0.3)"}),labelBody:$e(re({},Mt.attrs.labelBody),{stroke:"#ddd"})}})))};me(I),oe&&me(oe)},Nn=I=>{var be,Je;N.activeEdge=I;const{associated:z,m2m:H,connectionType:ee}=(Je=(be=I.store)==null?void 0:be.data)!=null?Je:{},oe=H==null?void 0:H.find(He=>He!==I.id),me=N.getCellById(oe),Me=He=>{He.toFront(),He.setAttrs({line:{stroke:"#1890ff",strokeWidth:1,textAnchor:"middle",textVerticalAnchor:"middle",sourceMarker:null,targetMarker:ee==="inherited"?{name:"classic",fill:"#1890ff"}:null}}),He.setLabels(He.getLabels().map(Kt=>$e(re({},Kt),{attrs:{labelText:$e(re({},Kt.attrs.labelText),{fill:"#1890ff"}),labelBody:$e(re({},Kt.attrs.labelBody),{stroke:"#1890ff"})}})));const zt=N.getCellById(He.store.data.target.cell),Mt=N.getCellById(He.store.data.source.cell);zt.toFront(),Mt.toFront(),zt.setProp({targetPort:He.store.data.target.port,associated:z}),Mt.setProp({sourcePort:He.store.data.source.port,associated:z})};Me(I),me&&Me(me)},at=(I,z=!0)=>{N.clearCells();const{nodesData:H,edgesData:ee,inheritEdges:oe}=SM(I);N.data={nodes:H,edges:ee},N.fromJSON({nodes:H}),N.addEdges(ee),N.addEdges(oe),GY(k,z)},kn=I=>{var zM,FM;const{positions:z}=N,{nodesData:H,edgesData:ee,inheritEdges:oe}=SM(I),me=N.getNodes().map(Ln=>Ln.store.data),Me=N.getEdges().map(Ln=>Ln.store.data),be=_M(Me,Ln=>Ln.connectionType?"currentInheritEdges":"currentRelateEdges"),Je=bY(H,me),He=EM(ee,be.currentRelateEdges||[]),zt=EM(oe,be.currentInheritEdges||[]),Mt=(zM=Ka(z,"y"))==null?void 0:zM.y,Kt=(FM=Hy(z,"x"))==null?void 0:FM.x,BM=z.filter(Ln=>Math.abs(Ln.y-Mt)<100);let In=Ka(BM,"x"),Wu;Je.forEach(({status:Ln,node:Hi,port:go})=>{const Za=N.getCellById(Hi.id);switch(Ln){case"add":(In==null?void 0:In.x)>4500?(In=Hy(BM,"x"),Wu={x:Kt,y:In.y+400}):Wu={x:(In==null?void 0:In.x)+350,y:In==null?void 0:In.y},_n=N.addNode($e(re({},Hi),{position:Wu})),i||k(re({collectionName:Hi.name},Wu)),N&&N.positionCell(_n,"top",{padding:200});break;case"insertPort":Za.insertPort(go.index,go.port);break;case"deletePort":Za.removePort(go.id);break;case"updateNode":Za.setProp({title:Hi.title});break;case"delete":N.removeCell(Hi.id);break;default:return null}});const JY=Ln=>{Ln.forEach(({status:Hi,edge:go})=>{const Za=N.addEdge(re({},go));switch(Hi){case"add":Hu(Za);break;case"delete":N.removeCell(go.id);break;default:return null}})};setTimeout(()=>{JY(He.concat(zt))},300)},lt=I=>{const z=I.target.value.toLowerCase();if(z){const H=c.filter(ee=>a(ee.title).toLowerCase().includes(z));f(H)}else f(c)},pt=(I,z)=>{z==="target"?CM(N.collections,I).forEach(ee=>{var oe;(oe=N.getCellById(ee))==null||oe.setAttrs({hightLight:!0,direction:z,connectionType:"inherited"})}):pY(N.collections,I).forEach(ee=>{var oe;(oe=N.getCellById(ee.name))==null||oe.setAttrs({hightLight:!0,direction:z,connectionType:"inherited"})})},ho=I=>{const z=N.getCellById(I);N.cacheCollection[I]=!0,N.getConnectedEdges(z).filter(oe=>{var me;return!((me=oe.store.data)!=null&&me.connectionType)&&oe.getTargetCellId()===I}).forEach(oe=>{var be;oe.store.data.m2m&&oe.store.data.m2m.forEach(Je=>{var zt;const He=N.getCellById(Je);if(He.getTargetCellId()===I){const Mt=He.getSourceCellId(),Kt=N.getCellById(Mt);(zt=Kt.store.data.attrs)!=null&&zt.hightLight||(Kt.setAttrs({hightLight:!0,direction:"target",connectionType:"entity"}),ho(Mt))}});const me=oe.getSourceCellId(),Me=N.getCellById(me);(be=Me.store.data.attrs)!=null&&be.hightLight||(Me.setAttrs({hightLight:!0,direction:"target",connectionType:"entity"}),ho(me))})},fo=I=>{const z=N.getCellById(I);N.getConnectedEdges(z).filter(oe=>{var me;return!((me=oe.store.data)!=null&&me.connectionType)&&oe.getSourceCellId()===I}).forEach(oe=>{var be;oe.store.data.m2m&&oe.store.data.m2m.forEach(Je=>{var zt;const He=N.getCellById(Je);if(He.getSourceCellId()===I){const Mt=He.getTargetCellId(),Kt=N.getCellById(Mt);(zt=Kt.store.data.attrs)!=null&&zt.hightLight||(Kt.setAttrs({hightLight:!0,direction:"source",connectionType:"entity"}),fo(Mt))}});const me=oe.getTargetCellId(),Me=N.getCellById(me);(be=Me.store.data.attrs)!=null&&be.hightLight||(Me.setAttrs({hightLight:!0,direction:"source",connectionType:"entity"}),fo(me))})},$n=(I,z)=>{z==="target"?ho(I):fo(I)},jM=(I,z,H)=>{var me,Me;const ee=N.getNodes().filter(be=>{var Je;return(Je=be.store.data.attrs)==null?void 0:Je.hightLight}),oe=ee.length;for(let be=0;be<oe;be++){const{direction:Je,connectionType:He}=ee[be].getAttrs(),zt=ee[be].id!==I,Mt=I&&((me=N.filterConfig)==null?void 0:me.key)===I?Je!==z:!0,Kt=I&&((Me=N.filterConfig)==null?void 0:Me.key)===I?He!==H:!0;ee[be].id!==I&&setTimeout(()=>{zt&&(Mt||Kt)&&ee[be].setAttrs({hightLight:!1})},0)}},Yy=I=>{const{connectionType:z,direction:H,filterConfig:ee}=N,oe=I===(ee==null?void 0:ee.key)&&H==="both",me=I===(ee==null?void 0:ee.key)&&(z==="both"||z===ee.connectionType);I?((!oe||!me)&&jM(I,H,z),_n=N.getCellById(I),N.positionCell(_n,"center",{padding:0}),_n.setAttrs({hightLight:!0,connectionType:z}),setTimeout(()=>{["entity","both"].includes(z)&&(H==="both"?($n(I,"target"),$n(I,"source")):(H==="target"&&$n(I,H),H==="source"&&$n(I,H))),["inherited","both"].includes(z)&&(H==="both"?(pt(I,"target"),pt(I,"source")):pt(I,H)),N.filterConfig={key:I,direction:H,connectionType:z}},0)):(N.filterConfig=null,jM())},WY=I=>{N.connectionType=I;const{filterConfig:z}=N;z&&Yy(z.key),XY(I)},XY=I=>{_n=null,N.getEdges().forEach(H=>{const{store:{data:{connectionType:ee}}}=H;I==="entity"?ee?H.setVisible(!1):H.setVisible(!0):I==="inherited"?ee?H.setVisible(!0):H.setVisible(!1):H.setVisible(!0)})},YY=I=>{N.direction=I;const{filterConfig:z}=N;z&&Yy(z.key)};te.useLayoutEffect(()=>(j(),()=>{N.off("cell:mouseenter"),N.off("edge:mouseleave"),N.off("node:moved"),N.off("blank:click"),N=null,_n=null}),[]),te.useEffect(()=>(Y.addReloadCallback($),()=>{Y.removeReloadCallback($)}),[]),te.useEffect(()=>(g(!0),W().then(()=>ze(this,null,function*(){if(i&&h.length){const I=i==null?void 0:i.split(","),z=h.filter(H=>I.includes(H.name));at(z,!1),kM(!0),N.selectedCollections=i}else!i&&$(!0);g(!1)})).catch(I=>{throw g(!1),I}),()=>{wY()}),[t]);const KY=()=>ze(this,null,function*(){var I;return(I=N.collections)==null?void 0:I.map(z=>({label:a(z.title),value:z.name}))});return _.jsx(ce.Layout,{children:_.jsx("div",{className:e.graphCollectionContainerClass,children:_.jsxs(ce.Spin,{spinning:d,children:[_.jsx(L.DataSourceApplicationProvider,{dataSourceManager:m,children:_.jsx(Uu.Provider,{value:{collectionList:h,handleSearchCollection:lt},children:_.jsx("div",{className:Pr.cx(e.collectionListClass),children:_.jsx(L.SchemaComponent,{components:{Select:I=>_.jsx(L.Select,$e(re({popupMatchSelectWidth:!1},I),{getPopupContainer:nt})),AddCollectionAction:xY,LocateCollectionAction:BY,SelectCollectionsAction:zY,DirectionAction:SY,ConnectorAction:CY,FullscreenAction:MM},schema:{type:"void",properties:{block1:{type:"void","x-collection":"collections","x-decorator":"ResourceActionProvider","x-decorator-props":{collection:AM,request:{resource:"collections",action:"list",params:{pageSize:50,filter:{inherit:!1},sort:["sort"],appends:[]}}},properties:{selectCollections:{type:"array","x-component":"SelectCollectionsAction"},actions:{type:"void","x-component":"ActionBar","x-component-props":{style:{fontSize:16}},properties:{create:{type:"void",title:'{{ t("Create collection") }}',"x-component":"AddCollectionAction","x-component-props":{type:"primary"}},fullScreen:{type:"void","x-component":"FullscreenAction"},locateCollection:{type:"void","x-component":"LocateCollectionAction","x-component-props":{handleFiterCollections:Yy,icon:"MenuOutlined",useAction:()=>({run(){}})}},autoLayout:{type:"void","x-component":"Action","x-component-props":{component:()=>_.jsx(ce.Tooltip,{title:l("Auto layout"),getPopupContainer:nt,children:_.jsx(ce.Button,{onClick:()=>{kM()},children:_.jsx(ue.ApartmentOutlined,{})})}),useAction:()=>({run(){}})}},connectionType:{type:"void","x-component":"ConnectorAction","x-component-props":{onClick:WY,icon:"MenuOutlined",useAction:()=>({run(){}})}},direction:{type:"void","x-component":"DirectionAction","x-component-props":{onClick:YY}},selectMode:{type:"void","x-component":()=>_.jsx(ce.Tooltip,{title:l("Selection"),children:_.jsx(ce.Switch,{onChange:I=>{N.toggleSelection()}})})}}}}}}},scope:{useAsyncDataSource:hh,loadCollections:KY,useCreateActionAndRefreshCM:()=>Yv(M),enableInherits:(E==null?void 0:E.dialect)==="postgres"}})})})}),_.jsx("div",{id:"container",style:{width:"100vw"}}),_.jsx("div",{id:"graph-minimap",className:e.graphMinimap,style:{width:"300px",height:"250px",right:"10px",bottom:"20px",position:"fixed"}})]})})})});$M.displayName="GraphDrawPage";const UY=n=>{const{visible:e}=L.useActionContext(),t=L.useRequest(()=>Promise.resolve({data:{name:`t_${po.uid()}`,createdBy:!0,updatedBy:!0,sortable:!0,logging:!0,fields:[{name:"id",type:"integer",autoIncrement:!0,primaryKey:!0,allowNull:!1,uiSchema:{type:"number",title:'{{t("ID")}}',"x-component":"InputNumber","x-read-pretty":!0},interface:"id"},{interface:"createdAt",type:"date",field:"createdAt",name:"createdAt",uiSchema:{type:"datetime",title:'{{t("Created at")}}',"x-component":"DatePicker","x-component-props":{},"x-read-pretty":!0}},{interface:"createdBy",type:"belongsTo",target:"users",foreignKey:"createdById",name:"createdBy",uiSchema:{type:"object",title:'{{t("Created by")}}',"x-component":"RecordPicker","x-component-props":{fieldNames:{value:"id",label:"nickname"}},"x-read-pretty":!0}},{type:"date",field:"updatedAt",name:"updatedAt",interface:"updatedAt",uiSchema:{type:"string",title:'{{t("Last updated at")}}',"x-component":"DatePicker","x-component-props":{},"x-read-pretty":!0}},{type:"belongsTo",target:"users",foreignKey:"updatedById",name:"updatedBy",interface:"updatedBy",uiSchema:{type:"object",title:'{{t("Last updated by")}}',"x-component":"RecordPicker","x-component-props":{fieldNames:{value:"id",label:"nickname"}},"x-read-pretty":!0}}]}}),$e(re({},n),{manual:!0}));return te.useEffect(()=>{e&&t.run()},[e]),t},IM=()=>_.jsx("div",{className:L.css`
        height: calc(100vh - 160px);
        overflow: auto;
        margin: calc(var(--nb-spacing) * -1);
        position: relative;
      `,id:"graph_container",children:_.jsx(L.SchemaComponent,{schema:{type:"void","x-component":"div",properties:{editor:{type:"void","x-component":"GraphDrawPage"}}},components:{GraphDrawPage:$M,DeleteOutlined:ue.DeleteOutlined},scope:{useCollectionValues:UY,useCreateActionAndRefreshCM:Yv}})}),LM="graph-collection-manager";class RM extends L.Plugin{load(){return ze(this,null,function*(){this.app.addComponents({GraphCollectionPane:IM}),this.app.pluginSettingsManager.add("data-source-manager/main.graph",{title:`{{t("Graphical interface", { ns: "${LM}" })}}`,Component:IM,topLevelName:"data-source-manager/main",pluginKey:LM,skipAclConfigure:!0,aclSnippet:"pm.data-source-manager.graph-collection-manager"})})}}Q.PluginGraphCollectionPlugin=RM,Q.default=RM,Object.defineProperties(Q,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
