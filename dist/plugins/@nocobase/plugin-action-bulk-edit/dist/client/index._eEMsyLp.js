(function(a,e){typeof exports=="object"&&typeof module!="undefined"?e(exports,require("@nocobase/client"),require("react/jsx-runtime"),require("@formily/react"),require("react-i18next"),require("@ant-design/icons"),require("@formily/shared"),require("@nocobase/utils/client"),require("antd"),require("react"),require("react-router-dom"),require("@formily/antd-v5"),require("lodash"),require("@emotion/css")):typeof define=="function"&&define.amd?define(["exports","@nocobase/client","react/jsx-runtime","@formily/react","react-i18next","@ant-design/icons","@formily/shared","@nocobase/utils/client","antd","react","react-router-dom","@formily/antd-v5","lodash","@emotion/css"],e):(a=typeof globalThis!="undefined"?globalThis:a||self,e(a["@nocobase/plugin-action-bulk-edit"]={},a["@nocobase/client"],a.jsxRuntime,a["@formily/react"],a["react-i18next"],a["@ant-design/icons"],a["@formily/shared"],a["@nocobase/utils"],a.antd,a.react,a["react-router-dom"],a["@formily/antd-v5"],a.lodash,a["@emotion/css"]))})(this,function(a,e,s,d,k,D,v,w,C,y,ne,G,O,re){"use strict";var Fe=Object.defineProperty,Ie=Object.defineProperties;var ze=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var te=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var ee=(a,e,s)=>e in a?Fe(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s,I=(a,e)=>{for(var s in e||(e={}))te.call(e,s)&&ee(a,s,e[s]);if(P)for(var s of P(e))oe.call(e,s)&&ee(a,s,e[s]);return a},z=(a,e)=>Ie(a,ze(e));var ie=(a,e)=>{var s={};for(var d in a)te.call(a,d)&&e.indexOf(d)<0&&(s[d]=a[d]);if(a!=null&&P)for(var d of P(a))e.indexOf(d)<0&&oe.call(a,d)&&(s[d]=a[d]);return s};var T=(a,e,s)=>new Promise((d,k)=>{var D=C=>{try{w(s.next(C))}catch(y){k(y)}},v=C=>{try{w(s.throw(C))}catch(y){k(y)}},w=C=>C.done?d(C.value):Promise.resolve(C.value).then(D,v);w((s=s.apply(a,e)).next())});function N(){var i;const{dn:t}=e.useDesignable(),{t:n}=k.useTranslation(),o=d.useFieldSchema();return s.jsx(e.SchemaSettingsSelectItem,{title:n("Data will be updated"),options:[{label:n("Selected"),value:"selected"},{label:n("All"),value:"all"}],value:(i=o==null?void 0:o["x-action-settings"])==null?void 0:i.updateMode,onChange:c=>{o["x-action-settings"].updateMode=c,t.emit("patch",{schema:{"x-uid":o["x-uid"],"x-action-settings":o["x-action-settings"]}}),t.refresh()}})}function V(t={}){const{t:n}=k.useTranslation(),o=d.useFieldSchema();return!((o==null?void 0:o.parent["x-component"])==="CollectionField")&&s.jsxs(s.Fragment,{children:[s.jsx(e.SchemaSettingsDivider,{}),s.jsx(e.SchemaSettingsRemove,{removeParentsIfNoChildren:!0,breakRemoveOn:c=>c["x-component"]==="Space"||c["x-component"].endsWith("ActionBar"),confirm:{title:n("Delete action"),onOk:t.onConfirmOk}})]})}const ae=new e.SchemaSettings({name:"ActionSettings:customize:bulkEdit",items:[{name:"editButton",Component:e.ActionDesigner.ButtonEditor,useComponentProps(){const{buttonEditorProps:t}=e.useSchemaToolbar();return t}},{name:"openMode",Component:e.SchemaInitializerOpenModeSchemaItems,useComponentProps(){const t=d.useFieldSchema(),n=["create","update","view","customize:popup","duplicate","customize:create"].includes(t["x-action"]||"");return{openMode:n,openSize:n}}},{name:"updateMode",Component:N},{name:"remove",sort:100,Component:V,useComponentProps(){const{removeButtonProps:t}=e.useSchemaToolbar();return t}}]}),se=new e.SchemaSettings({name:"actionSettings:bulkEdit",items:[{name:"editButton",Component:e.ActionDesigner.ButtonEditor,useComponentProps(){const{buttonEditorProps:t}=e.useSchemaToolbar();return t}},{name:"openMode",Component:e.SchemaInitializerOpenModeSchemaItems,useComponentProps(){const t=d.useFieldSchema(),n=["create","update","view","customize:popup","duplicate","customize:create"].includes(t["x-action"]||"");return{openMode:n,openSize:n}}},{name:"updateMode",Component:N},{name:"remove",sort:100,Component:V,useComponentProps(){const{removeButtonProps:t}=e.useSchemaToolbar();return t}}]}),ce=()=>{const{t}=k.useTranslation(),n={type:"void",title:'{{t("Bulk edit")}}',"x-component":"Action","x-action":"customize:bulkEdit","x-action-settings":{updateMode:"selected"},"x-component-props":{openMode:"drawer",icon:"EditOutlined"},properties:{drawer:{type:"void",title:t("Bulk edit"),"x-component":"Action.Container","x-component-props":{className:"nb-action-popup",enablePageTabs:!0},"x-settings":"fieldSettings:Drawer",properties:{tabs:{type:"void","x-component":"Tabs","x-component-props":{},"x-initializer":"popup:addTab","x-initializer-props":{gridInitializer:"popup:bulkEdit:addBlock"},"x-index":1,properties:{tab1:{type:"void",title:'{{t("Bulk edit")}}',"x-component":"Tabs.TabPane","x-designer":"Tabs.Designer","x-component-props":{},properties:{grid:{type:"void","x-component":"Grid","x-initializer":"popup:bulkEdit:addBlock",properties:{}}}}}},grid:{type:"void","x-component":"Grid","x-initializer":"popup:bulkEdit:addBlock","x-display":"hidden","x-index":2}}}}},o=e.useSchemaInitializerItem();return s.jsx(e.BlockInitializer,z(I({},o),{schema:n,item:o}))};function de(t){const{collectionName:n,association:o,dataSource:i}=t,c=o||n;if(!n||!i)throw new Error("collectionName and dataSource are required");return{type:"void","x-acl-action-props":{skipScopeCheck:!0},"x-acl-action":`${c}:update`,"x-decorator":"FormBlockProvider","x-decorator-props":{dataSource:i,collection:n,association:o},"x-toolbar":"BlockSchemaToolbar","x-settings":"blockSettings:createForm","x-component":"CardItem",properties:{[v.uid()]:{type:"void","x-component":"FormV2","x-use-component-props":"useCreateFormBlockProps",properties:{grid:{type:"void","x-component":"Grid","x-initializer":"bulkEditForm:configureFields",properties:{}},[v.uid()]:{type:"void","x-initializer":"bulkEditForm:configureActions","x-component":"ActionBar","x-component-props":{layout:"one-column",style:{marginTop:24}}}}}}}}const q=()=>{const h=e.useSchemaInitializerItem(),{onCreateBlockSchema:n,componentType:o,createBlockSchema:i}=h,c=ie(h,["onCreateBlockSchema","componentType","createBlockSchema"]),{insert:p}=e.useSchemaInitializer(),{getTemplateSchemaByMode:m}=e.useSchemaTemplateManager(),u=e.useAssociationName(),l=e.useCollection_deprecated();return s.jsx(e.SchemaInitializerItem,z(I({icon:s.jsx(D.FormOutlined,{})},c),{onClick:S=>T(this,[S],function*({item:r}){if(r.template){const g=yield m(r);if(r.template.componentName==="FormItem"){const b=e.createCreateFormBlockUISchema(u?{association:u,dataSource:l.dataSource,templateSchema:g}:{collectionName:l.name,dataSource:l.dataSource,templateSchema:g});r.mode==="reference"&&(b["x-template-key"]=r.template.key),p(b)}else p(g)}else p(de({association:u,collectionName:l.name,dataSource:l.dataSource}))}),items:e.useRecordCollectionDataSourceItems("FormItem")}))},le=new e.SchemaInitializer({name:"CreateFormBulkEditBlockInitializers",wrap:e.gridRowColWrap,title:'{{t("Add block")}}',icon:"PlusOutlined",items:[{type:"itemGroup",title:'{{t("Data blocks")}}',name:"dataBlocks",children:[{name:"form",title:'{{t("Form")}}',Component:q}]},{type:"itemGroup",title:'{{t("Other blocks")}}',name:"otherBlocks",children:[{name:"markdown",title:'{{t("Markdown")}}',Component:"MarkdownBlockInitializer"}]}]}),_=new e.CompatibleSchemaInitializer({name:"BulkEditBlockInitializers",wrap:e.gridRowColWrap,title:'{{t("Add block")}}',icon:"PlusOutlined",items:[{type:"itemGroup",title:'{{t("Data blocks")}}',name:"dataBlocks",children:[{name:"form",title:'{{t("Form")}}',Component:q}]},{type:"itemGroup",title:'{{t("Other blocks")}}',name:"otherBlocks",children:[{name:"markdown",title:'{{t("Markdown")}}',Component:"MarkdownBlockInitializer"}]}]}),pe=new e.CompatibleSchemaInitializer({name:"popup:bulkEdit:addBlock",wrap:e.gridRowColWrap,title:'{{t("Add block")}}',icon:"PlusOutlined",items:[{type:"itemGroup",title:'{{t("Data blocks")}}',name:"dataBlocks",children:[{name:"form",title:'{{t("Form")}}',Component:q}]},{type:"itemGroup",title:'{{t("Other blocks")}}',name:"otherBlocks",children:[{name:"markdown",title:'{{t("Markdown")}}',Component:"MarkdownBlockInitializer"}]}]},_),j=t=>{const n={title:'{{ t("Submit") }}',"x-action":"submit","x-component":"Action","x-use-component-props":"useCustomizeBulkEditActionProps","x-toolbar":"ActionSchemaToolbar","x-settings":"actionSettings:updateSubmit","x-component-props":{type:"primary",htmlType:"submit"}};return s.jsx(e.ActionInitializer,z(I({},t),{schema:n}))},$=new e.CompatibleSchemaInitializer({name:"BulkEditFormActionInitializers",title:'{{t("Configure actions")}}',icon:"SettingOutlined",items:[{type:"itemGroup",title:'{{t("Enable actions")}}',name:"enableActions",children:[{name:"submit",title:'{{t("Submit")}}',Component:j,schema:{"x-action-settings":{}}}]}]}),me=new e.CompatibleSchemaInitializer({name:"bulkEditForm:configureActions",title:'{{t("Configure actions")}}',icon:"SettingOutlined",items:[{type:"itemGroup",title:'{{t("Enable actions")}}',name:"enableActions",children:[{name:"submit",title:'{{t("Submit")}}',Component:j,schema:{"x-action-settings":{}}}]}]},$),U=t=>{const{name:n,fields:o}=e.useCollection_deprecated(),{getInterface:i,getCollection:c}=e.useCollectionManager_deprecated(),p=d.useForm(),{readPretty:m=p.readPretty,block:u="Form"}=t||{},l=e.useRemoveGridFormItem();return y.useMemo(()=>o==null?void 0:o.filter(r=>{var S;return(r==null?void 0:r.interface)&&!((S=r==null?void 0:r.uiSchema)!=null&&S["x-read-pretty"])&&r.interface!=="snapshot"&&r.type!=="sequence"}).map(r=>{var b,f,F;const S=i(r.interface),g={type:"string",name:r.name,title:((b=r==null?void 0:r.uiSchema)==null?void 0:b.title)||r.name,"x-toolbar":"FormItemSchemaToolbar","x-settings":"fieldSettings:BulkEditFormItem","x-component":"BulkEditField","x-decorator":"FormItem","x-collection-field":`${n}.${r.name}`};return{name:((f=r==null?void 0:r.uiSchema)==null?void 0:f.title)||r.name,type:"item",title:((F=r==null?void 0:r.uiSchema)==null?void 0:F.title)||r.name,Component:"CollectionFieldInitializer",remove:l,schemaInitialize:B=>{var E;(E=S==null?void 0:S.schemaInitialize)==null||E.call(S,B,{field:r,block:u,readPretty:m,targetCollection:c(r.target)})},schema:g}}),[o])},ue=()=>{var E,J,H,K;const t=d.useForm(),{t:n}=k.useTranslation(),{field:o,resource:i,__parent:c}=e.useBlockRequestContext(),p=y.useContext(d.SchemaExpressionScopeContext),m=e.useActionContext(),u=ne.useNavigate(),l=e.useCompile(),h=d.useField(),r=e.useTableBlockContext(),{modal:S}=C.App.useApp(),{rowKey:g}=r,b=(K=(H=(J=(E=r.field)==null?void 0:E.data)==null?void 0:J.selectedRowKeys)!=null?H:p==null?void 0:p.selectedRecordKeys)!=null?K:{},{setVisible:f,fieldSchema:F,setSubmitted:B}=m;return{onClick(){return T(this,null,function*(){var Q,X,Y,Z,A,R;const{onSuccess:x,skipValidator:Se,updateMode:be}=(Q=F==null?void 0:F["x-action-settings"])!=null?Q:{},{filter:ye}=(Y=(X=c.service.params)==null?void 0:X[0])!=null?Y:{};Se||(yield t.submit()),h.data=o.data||{},h.data.loading=!0;try{const M={values:t.values,filter:ye,forceUpdate:!1};if(be==="selected"){if(!(b!=null&&b.length)){C.message.error(n("Please select the records to be updated"));return}M.filter={$and:[{[g||"id"]:{$in:b}}]}}if(M.filter||(M.forceUpdate=!0),yield i.update(M),h.data.loading=!1,i instanceof e.TableFieldResource||(R=(A=(Z=c==null?void 0:c.__parent)==null?void 0:Z.service)==null?void 0:A.refresh)==null||R.call(A),f==null||f(!1),B(!0),!(x!=null&&x.successMessage))return;x!=null&&x.manualClose?S.success({title:l(x==null?void 0:x.successMessage),onOk:()=>T(this,null,function*(){yield t.reset(),x!=null&&x.redirecting&&(x!=null&&x.redirectTo)&&(w.isURL(x.redirectTo)?window.location.href=x.redirectTo:u(x.redirectTo))})}):C.message.success(l(x==null?void 0:x.successMessage))}finally{h.data.loading=!1}})}}},W=new e.CompatibleSchemaInitializer({name:"BulkEditFormItemInitializers",wrap:e.gridRowColWrap,icon:"SettingOutlined",title:'{{t("Configure fields")}}',items:[{name:"displayFields",type:"itemGroup",title:'{{t("Display fields")}}',useChildren:U},{name:"divider",type:"divider"},{name:"addText",title:'{{t("Add text")}}',Component:"BlockItemInitializer",schema:{type:"void","x-editable":!1,"x-decorator":"FormItem","x-toolbar":"FormItemSchemaToolbar","x-settings":"blockSettings:markdown","x-component":"Markdown.Void","x-component-props":{content:'{{t("This is a demo text, **supports Markdown syntax**.")}}'}}}]}),he=new e.CompatibleSchemaInitializer({name:"bulkEditForm:configureFields",wrap:e.gridRowColWrap,icon:"SettingOutlined",title:'{{t("Configure fields")}}',items:[{name:"displayFields",type:"itemGroup",title:'{{t("Display fields")}}',useChildren:U},{name:"divider",type:"divider"},{name:"addText",title:'{{t("Add text")}}',Component:"BlockItemInitializer",schema:{type:"void","x-editable":!1,"x-decorator":"FormItem","x-toolbar":"FormItemSchemaToolbar","x-settings":"blockSettings:markdown","x-component":"Markdown.Void","x-component-props":{content:'{{t("This is a demo text, **supports Markdown syntax**.")}}'}}}]},W),xe=new e.SchemaSettings({name:"fieldSettings:BulkEditFormItem",items:[{name:"decoratorOptions",type:"itemGroup",hideIfNoChildren:!0,useComponentProps(){const{t}=k.useTranslation();return{title:t("Generic properties")}},useChildren(){return[{name:"editFieldTitle",type:"modal",useComponentProps(){var u;const{t}=k.useTranslation(),{dn:n}=e.useDesignable(),o=d.useField(),i=d.useFieldSchema(),{getCollectionJoinField:c}=e.useCollectionManager_deprecated(),{dataSource:p}=e.useCollection_deprecated(),m=c(i["x-collection-field"],p);return{title:t("Edit field title"),schema:{type:"object",title:t("Edit field title"),properties:{title:{title:t("Field title"),default:o==null?void 0:o.title,description:`${t("Original field title: ")}${(u=m==null?void 0:m.uiSchema)==null?void 0:u.title}`,"x-decorator":"FormItem","x-component":"Input","x-component-props":{}}}},onSubmit({title:l}){l&&(o.title=l,i.title=l,n.emit("patch",{schema:{"x-uid":i["x-uid"],title:i.title}})),n.refresh()}}}},{name:"displayTitle",type:"switch",useComponentProps(){var c,p;const{t}=k.useTranslation(),{dn:n}=e.useDesignable(),o=d.useField(),i=d.useFieldSchema();return{title:t("Display title"),checked:(p=(c=i["x-decorator-props"])==null?void 0:c.showTitle)!=null?p:!0,onChange(m){i["x-decorator-props"]=i["x-decorator-props"]||{},i["x-decorator-props"].showTitle=m,o.decoratorProps.showTitle=m,n.emit("patch",{schema:{"x-uid":i["x-uid"],"x-decorator-props":z(I({},i["x-decorator-props"]),{showTitle:m})}}),n.refresh()}}}},{name:"editDescription",type:"modal",useComponentProps(){const{t}=k.useTranslation(),{dn:n}=e.useDesignable(),o=d.useField(),i=d.useFieldSchema();return{title:t("Edit description"),schema:{type:"object",title:t("Edit description"),properties:{description:{default:o==null?void 0:o.description,"x-decorator":"FormItem","x-component":"Input.TextArea","x-component-props":{}}}},onSubmit({description:c}){o.description=c,i.description=c,n.emit("patch",{schema:{"x-uid":i["x-uid"],description:i.description}}),n.refresh()}}}},{name:"editTooltip",type:"modal",useComponentProps(){var c;const{t}=k.useTranslation(),{dn:n}=e.useDesignable(),o=d.useField(),i=d.useFieldSchema();return{title:t("Edit tooltip"),schema:{type:"object",title:t("Edit tooltip"),properties:{tooltip:{default:(c=i==null?void 0:i["x-decorator-props"])==null?void 0:c.tooltip,"x-decorator":"FormItem","x-component":"Input.TextArea","x-component-props":{}}}},onSubmit({tooltip:p}){o.decoratorProps.tooltip=p,i["x-decorator-props"]=i["x-decorator-props"]||{},i["x-decorator-props"].tooltip=p,n.emit("patch",{schema:{"x-uid":i["x-uid"],"x-decorator-props":i["x-decorator-props"]}}),n.refresh()}}}},{name:"setValidationRules",type:"modal",useComponentProps(){const{t}=k.useTranslation(),n=d.useField(),o=d.useFieldSchema(),{dn:i,refresh:c}=e.useDesignable(),p=e.useValidateSchema(),{getCollectionJoinField:m}=e.useCollectionManager_deprecated(),{dataSource:u}=e.useCollection_deprecated(),l=m(o["x-collection-field"],u);return{title:t("Set validation rules"),components:{ArrayCollapse:G.ArrayCollapse,FormLayout:G.FormLayout},schema:{type:"object",title:t("Set validation rules"),properties:{rules:{type:"array",default:o==null?void 0:o["x-validator"],"x-component":"ArrayCollapse","x-decorator":"FormItem","x-component-props":{accordion:!0},maxItems:3,items:{type:"object","x-component":"ArrayCollapse.CollapsePanel","x-component-props":{header:'{{ t("Validation rule") }}'},properties:{index:{type:"void","x-component":"ArrayCollapse.Index"},layout:{type:"void","x-component":"FormLayout","x-component-props":{labelStyle:{marginTop:"6px"},labelCol:8,wrapperCol:16},properties:z(I({},p),{message:{type:"string",title:'{{ t("Error message") }}',"x-decorator":"FormItem","x-component":"Input.TextArea","x-component-props":{autoSize:{minRows:2,maxRows:2}}}})},remove:{type:"void","x-component":"ArrayCollapse.Remove"},moveUp:{type:"void","x-component":"ArrayCollapse.MoveUp"},moveDown:{type:"void","x-component":"ArrayCollapse.MoveDown"}}},properties:{add:{type:"void",title:'{{ t("Add validation rule") }}',"x-component":"ArrayCollapse.Addition","x-reactions":{dependencies:["rules"],fulfill:{state:{disabled:"{{$deps[0].length >= 3}}"}}}}}}}},onSubmit(h){var b;const r=[];for(const f of h.rules)r.push(O.pickBy(f,O.identity));const S={"x-uid":o["x-uid"]};if(["percent"].includes(l==null?void 0:l.interface))for(const f of r)(f.maxValue||f.minValue)&&(f.percentMode=!0),f.percentFormat&&(f.percentFormats=!0);const g=O.concat([],((b=l==null?void 0:l.uiSchema)==null?void 0:b["x-validator"])||[],r);n.validator=g,o["x-validator"]=r,S["x-validator"]=r,i.emit("patch",{schema:S}),c()}}},useVisible(){const{form:t}=e.useFormBlockContext(),n=e.useIsFormReadPretty(),o=e.useValidateSchema();return t&&!n&&o}}]}},{name:"componentOptions",type:"itemGroup",hideIfNoChildren:!0,useComponentProps(){const{t}=k.useTranslation();return{title:t("Specific properties")}},useChildren(){const t=e.useApp(),n=e.useFieldComponentName(),o=t.schemaSettingsManager.get(`fieldSettings:component:${n}`);return(o==null?void 0:o.items)||[]}},{name:"divider",type:"divider"},{name:"delete",type:"remove",sort:100,useComponentProps(){const{t}=k.useTranslation();return{removeParentsIfNoChildren:!0,confirm:{title:t("Delete field")},breakRemoveOn:{"x-component":"Grid"}}}}]}),ge=t=>{const n=d.useField(),o=d.useFieldSchema(),{uiSchema:i}=e.useCollectionField_deprecated(),c=e.useComponent(i==null?void 0:i["x-component"]),p=e.useCompile(),m=(l,h)=>{n[l]=typeof n[l]=="undefined"?h:n[l]},u=e.useFormBlockContext();return y.useEffect(()=>{u!=null&&u.field&&(u.field.added=u.field.added||new Set,u.field.added.add(o.name))}),y.useEffect(()=>{if(!i)return;m("content",i["x-content"]),m("description",i.description),m("initialValue",i.default),o["x-disabled"]===!0&&(n.disabled=!0),o["x-read-pretty"]===!0&&(n.readPretty=!0),n.required=!0,n.dataSource=i.enum;const l=p(i["x-component-props"])||{},h=v.merge(l,n.componentProps||{});n.componentProps=h},[JSON.stringify(i)]),i?y.createElement(c,t,t.children):null},Ce=d.connect(t=>{const n=d.useFieldSchema();return s.jsx(e.CollectionFieldProvider,{name:n.name,children:s.jsx(ge,I({},t))})}),fe=t=>{const{t:n}=k.useTranslation(),o=d.useFieldSchema(),i=d.useField(),[c,p]=y.useState(2),[m,u]=y.useState(null),{getField:l}=e.useCollection_deprecated(),h=l(o.name)||{};y.useEffect(()=>{i.value=ke({[c]:m}),i.required&&(i.value?(i.modify(),i.form.clearErrors(i.address)):i.modified&&i.form.validate(i.address))},[i,c,m]);const r=g=>{p(g),i.required=g===2},S=g=>{var b,f,F,B;u((B=(F=(b=g==null?void 0:g.target)==null?void 0:b.value)!=null?F:(f=g==null?void 0:g.target)==null?void 0:f.checked)!=null?B:g)};return s.jsxs(C.Space,{className:re.css`
        display: flex;
        > .ant-space-item {
          width: 100%;
        }
      `,children:[s.jsxs(C.Select,{defaultValue:c,value:c,onChange:r,children:[s.jsx(C.Select.Option,{value:1,children:n("Remains the same")}),s.jsx(C.Select.Option,{value:2,children:n("Changed to")}),s.jsx(C.Select.Option,{value:3,children:n("Clear")})]}),[2,4].includes(c)&&(h==null?void 0:h.interface)!=="checkbox"&&s.jsx(Ce,z(I({},t),{value:m,onChange:S,style:{minWidth:150}})),[2,4].includes(c)&&(h==null?void 0:h.interface)==="checkbox"&&s.jsx(C.Checkbox,{checked:m,onChange:S})]})};function ke(t){if(3 in t)return null;if(2 in t)return t[2];if(1 in t)return}class L extends e.Plugin{load(){return T(this,null,function*(){this.app.addComponents({BulkEditField:fe}),this.app.addScopes({useCustomizeBulkEditActionProps:ue}),this.app.schemaSettingsManager.add(ae),this.app.schemaSettingsManager.add(se),this.app.schemaSettingsManager.add(xe),this.app.schemaInitializerManager.add(W),this.app.schemaInitializerManager.add(he),this.app.schemaInitializerManager.add(le),this.app.schemaInitializerManager.add(_),this.app.schemaInitializerManager.add(pe),this.app.schemaInitializerManager.add($),this.app.schemaInitializerManager.add(me);const n={type:"item",title:'{{t("Bulk edit")}}',name:"bulkEdit",Component:ce,schema:{"x-align":"right","x-decorator":"ACLActionProvider","x-action":"customize:bulkEdit","x-toolbar":"ActionSchemaToolbar","x-settings":"actionSettings:bulkEdit","x-acl-action":"update","x-acl-action-props":{skipScopeCheck:!0}},useVisible(){const o=e.useCollection_deprecated();return(o.template!=="view"||(o==null?void 0:o.writableView))&&o.template!=="file"&&o.template!=="sql"}};this.app.schemaInitializerManager.addItem("table:configureActions","customize.bulkEdit",n),this.app.schemaInitializerManager.addItem("gantt:configureActions","customize.bulkEdit",n),this.app.schemaInitializerManager.addItem("map:configureActions","customize.bulkEdit",n)})}}a.PluginActionBulkEditClient=L,a.default=L,Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
