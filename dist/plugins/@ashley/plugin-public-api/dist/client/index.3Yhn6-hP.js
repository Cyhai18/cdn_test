(function(e,i){typeof exports=="object"&&typeof module!="undefined"?i(exports,require("react/jsx-runtime"),require("@nocobase/client"),require("react")):typeof define=="function"&&define.amd?define(["exports","react/jsx-runtime","@nocobase/client","react"],i):(e=typeof globalThis!="undefined"?globalThis:e||self,i(e["@ashley/plugin-public-api"]={},e.jsxRuntime,e["@nocobase/client"],e.react))})(this,function(e,i,n,r){"use strict";var l=(e,i,n)=>new Promise((r,s)=>{var a=t=>{try{u(n.next(t))}catch(c){s(c)}},o=t=>{try{u(n.throw(t))}catch(c){s(c)}},u=t=>t.done?r(t.value):Promise.resolve(t.value).then(a,o);u((n=n.apply(e,i)).next())});const s=()=>{var t;const o=n.useAPIClient(),u=(t=location==null?void 0:location.search)!=null?t:"";return r.useEffect(()=>{o.request({url:"/public:checklist"+u}).then(c=>{var f,p;const{link:d=""}=(p=(f=c==null?void 0:c.data)==null?void 0:f.data)!=null?p:{};d&&(location.href=d)})},[]),i.jsx("div",{children:"loading..."})};class a extends n.Plugin{afterAdd(){return l(this,null,function*(){})}beforeLoad(){return l(this,null,function*(){})}load(){return l(this,null,function*(){this.app.router.add("checklist",{path:"/checklist",Component:s})})}}e.PluginPublicApiClient=a,e.default=a,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
