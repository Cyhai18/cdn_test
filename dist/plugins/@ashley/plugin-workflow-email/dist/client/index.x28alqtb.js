(function(e,t){typeof exports=="object"&&typeof module!="undefined"?t(exports,require("@nocobase/client"),require("react/jsx-runtime"),require("@ant-design/icons"),require("@nocobase/plugin-workflow/client"),require("@formily/antd-v5"),require("react-i18next")):typeof define=="function"&&define.amd?define(["exports","@nocobase/client","react/jsx-runtime","@ant-design/icons","@nocobase/plugin-workflow/client","@formily/antd-v5","react-i18next"],t):(e=typeof globalThis!="undefined"?globalThis:e||self,t(e["@ashley/plugin-workflow-email"]={},e["@nocobase/client"],e.jsxRuntime,e["@ant-design/icons"],e["@nocobase/plugin-workflow"],e["@formily/antd-v5"]))})(this,function(e,t,o,d,a,p){"use strict";var f=Object.defineProperty;var x=(e,t,o)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var i=(e,t,o)=>(x(e,typeof t!="symbol"?t+"":t,o),o);var m=(e,t,o)=>new Promise((d,a)=>{var p=r=>{try{s(o.next(r))}catch(l){a(l)}},n=r=>{try{s(o.throw(r))}catch(l){a(l)}},s=r=>r.done?d(r.value):Promise.resolve(r.value).then(p,n);s((o=o.apply(e,t)).next())});const n="@ashley/plugin-workflow-email",s=t.css`
  width: 100%;

  .ant-space-item:nth-child(2) {
    flex-grow: 1;
  }
`;class r extends a.Instruction{constructor(){super(...arguments);i(this,"title",`{{t("Email Notification", { ns: "${n}" })}}`);i(this,"type","email");i(this,"group","notification");i(this,"description","");i(this,"icon",o.jsx(d.MailOutlined,{style:{}}));i(this,"fieldset",{to:{type:"array",title:`{{t("To", { ns: "${n}" })}}`,required:!0,"x-decorator":"FormItem","x-component":"ArrayItems",items:{type:"void","x-component":"Space","x-component-props":{className:s},properties:{sort:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.SortHandle"},input:{type:"string","x-decorator":"FormItem","x-component":"WorkflowVariableInput","x-component-props":{useTypedConstant:["string"],placeholder:'{{t("Email address")}}'}},remove:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.Remove"}}},properties:{add:{type:"void",title:'{{t("Add email address")}}',"x-component":"ArrayItems.Addition"}},default:[]},cc:{type:"array",title:`{{t("CC", { ns: "${n}" })}}`,"x-decorator":"FormItem","x-component":"ArrayItems",items:{type:"void","x-component":"Space","x-component-props":{className:s},properties:{sort:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.SortHandle"},input:{type:"string","x-decorator":"FormItem","x-component":"WorkflowVariableInput","x-component-props":{useTypedConstant:["string"],placeholder:'{{t("Email address")}}'}},remove:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.Remove"}}},properties:{add:{type:"void",title:'{{t("Add email address")}}',"x-component":"ArrayItems.Addition"}},default:[]},title:{type:"string",required:!0,title:`{{t("Title", { ns: "${n}" })}}`,"x-decorator":"FormItem","x-component":"WorkflowVariableTextArea"},content:{type:"string",required:!0,title:`{{t("Content", { ns: "${n}" })}}`,"x-decorator":"FormItem","x-component":"WorkflowVariableRichTextArea"},file_url:{type:"string",required:!1,title:`{{t("File URL", { ns: "${n}" })}}`,"x-decorator":"FormItem","x-component":"WorkflowVariableTextArea"}});i(this,"components",{ArrayItems:p.ArrayItems,WorkflowVariableInput:a.WorkflowVariableInput,WorkflowVariableTextArea:a.WorkflowVariableTextArea,WorkflowVariableRichTextArea:a.WorkflowVariableRichTextArea})}isAvailable({engine:y,workflow:w}){return!0}}class l extends t.Plugin{afterAdd(){return m(this,null,function*(){})}beforeLoad(){return m(this,null,function*(){})}load(){return m(this,null,function*(){this.app.pm.get("workflow").registerInstruction("email",r)})}}e.PluginWorkflowEmailClient=l,e.default=l,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
