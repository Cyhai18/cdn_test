(function(c,i){typeof exports=="object"&&typeof module!="undefined"?i(exports,require("@nocobase/client"),require("react/jsx-runtime"),require("@formily/react"),require("@formily/shared"),require("antd"),require("react"),require("react-i18next")):typeof define=="function"&&define.amd?define(["exports","@nocobase/client","react/jsx-runtime","@formily/react","@formily/shared","antd","react","react-i18next"],i):(c=typeof globalThis!="undefined"?globalThis:c||self,i(c["@ashley/plugin-google-recaptcha"]={},c["@nocobase/client"],c.jsxRuntime,c["@formily/react"],c["@formily/shared"],c.antd,c.react,c["react-i18next"]))})(this,function(c,i,f,Z,D,F,L,w){"use strict";var $p=Object.defineProperty,bp=Object.defineProperties;var hp=Object.getOwnPropertyDescriptors;var yt=Object.getOwnPropertySymbols;var dp=Object.prototype.hasOwnProperty,_p=Object.prototype.propertyIsEnumerable;var $t=(c,i,f)=>i in c?$p(c,i,{enumerable:!0,configurable:!0,writable:!0,value:f}):c[i]=f,X=(c,i)=>{for(var f in i||(i={}))dp.call(i,f)&&$t(c,f,i[f]);if(yt)for(var f of yt(i))_p.call(i,f)&&$t(c,f,i[f]);return c},bt=(c,i)=>bp(c,hp(i));var M=(c,i,f)=>new Promise((Z,D)=>{var F=y=>{try{w(f.next(y))}catch(m){D(m)}},L=y=>{try{w(f.throw(y))}catch(m){D(m)}},w=y=>y.done?Z(y.value):Promise.resolve(y.value).then(F,L);w((f=f.apply(c,i)).next())});var y=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function m(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ht(){this.__data__=[],this.size=0}var dt=ht;function _t(e,t){return e===t||e!==e&&t!==t}var $e=_t,Tt=$e;function mt(e,t){for(var r=e.length;r--;)if(Tt(e[r][0],t))return r;return-1}var G=mt,jt=G,At=Array.prototype,St=At.splice;function Ct(e){var t=this.__data__,r=jt(t,e);if(r<0)return!1;var a=t.length-1;return r==a?t.pop():St.call(t,r,1),--this.size,!0}var Ot=Ct,wt=G;function xt(e){var t=this.__data__,r=wt(t,e);return r<0?void 0:t[r][1]}var It=xt,Pt=G;function Et(e){return Pt(this.__data__,e)>-1}var Mt=Et,Dt=G;function Ft(e,t){var r=this.__data__,a=Dt(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this}var Lt=Ft,Gt=dt,Bt=Ot,Kt=It,Ut=Mt,Nt=Lt;function j(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}j.prototype.clear=Gt,j.prototype.delete=Bt,j.prototype.get=Kt,j.prototype.has=Ut,j.prototype.set=Nt;var B=j,Vt=B;function Rt(){this.__data__=new Vt,this.size=0}var Ht=Rt;function kt(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var qt=kt;function zt(e){return this.__data__.get(e)}var Wt=zt;function Jt(e){return this.__data__.has(e)}var Yt=Jt,Xt=typeof y=="object"&&y&&y.Object===Object&&y,be=Xt,Zt=be,Qt=typeof self=="object"&&self&&self.Object===Object&&self,er=Zt||Qt||Function("return this")(),$=er,tr=$,rr=tr.Symbol,Q=rr,he=Q,de=Object.prototype,ar=de.hasOwnProperty,nr=de.toString,x=he?he.toStringTag:void 0;function or(e){var t=ar.call(e,x),r=e[x];try{e[x]=void 0;var a=!0}catch(n){}var o=nr.call(e);return a&&(t?e[x]=r:delete e[x]),o}var sr=or,ir=Object.prototype,cr=ir.toString;function ur(e){return cr.call(e)}var pr=ur,_e=Q,lr=sr,fr=pr,vr="[object Null]",gr="[object Undefined]",Te=_e?_e.toStringTag:void 0;function yr(e){return e==null?e===void 0?gr:vr:Te&&Te in Object(e)?lr(e):fr(e)}var K=yr;function $r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var I=$r,br=K,hr=I,dr="[object AsyncFunction]",_r="[object Function]",Tr="[object GeneratorFunction]",mr="[object Proxy]";function jr(e){if(!hr(e))return!1;var t=br(e);return t==_r||t==Tr||t==dr||t==mr}var me=jr,Ar=$,Sr=Ar["__core-js_shared__"],Cr=Sr,ee=Cr,je=function(){var e=/[^.]+$/.exec(ee&&ee.keys&&ee.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Or(e){return!!je&&je in e}var wr=Or,xr=Function.prototype,Ir=xr.toString;function Pr(e){if(e!=null){try{return Ir.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var Ae=Pr,Er=me,Mr=wr,Dr=I,Fr=Ae,Lr=/[\\^$.*+?()[\]{}|]/g,Gr=/^\[object .+?Constructor\]$/,Br=Function.prototype,Kr=Object.prototype,Ur=Br.toString,Nr=Kr.hasOwnProperty,Vr=RegExp("^"+Ur.call(Nr).replace(Lr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Rr(e){if(!Dr(e)||Mr(e))return!1;var t=Er(e)?Vr:Gr;return t.test(Fr(e))}var Hr=Rr;function kr(e,t){return e==null?void 0:e[t]}var qr=kr,zr=Hr,Wr=qr;function Jr(e,t){var r=Wr(e,t);return zr(r)?r:void 0}var d=Jr,Yr=d,Xr=$,Zr=Yr(Xr,"Map"),te=Zr,Qr=d,ea=Qr(Object,"create"),U=ea,Se=U;function ta(){this.__data__=Se?Se(null):{},this.size=0}var ra=ta;function aa(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var na=aa,oa=U,sa="__lodash_hash_undefined__",ia=Object.prototype,ca=ia.hasOwnProperty;function ua(e){var t=this.__data__;if(oa){var r=t[e];return r===sa?void 0:r}return ca.call(t,e)?t[e]:void 0}var pa=ua,la=U,fa=Object.prototype,va=fa.hasOwnProperty;function ga(e){var t=this.__data__;return la?t[e]!==void 0:va.call(t,e)}var ya=ga,$a=U,ba="__lodash_hash_undefined__";function ha(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=$a&&t===void 0?ba:t,this}var da=ha,_a=ra,Ta=na,ma=pa,ja=ya,Aa=da;function A(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}A.prototype.clear=_a,A.prototype.delete=Ta,A.prototype.get=ma,A.prototype.has=ja,A.prototype.set=Aa;var Sa=A,Ce=Sa,Ca=B,Oa=te;function wa(){this.size=0,this.__data__={hash:new Ce,map:new(Oa||Ca),string:new Ce}}var xa=wa;function Ia(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Pa=Ia,Ea=Pa;function Ma(e,t){var r=e.__data__;return Ea(t)?r[typeof t=="string"?"string":"hash"]:r.map}var N=Ma,Da=N;function Fa(e){var t=Da(this,e).delete(e);return this.size-=t?1:0,t}var La=Fa,Ga=N;function Ba(e){return Ga(this,e).get(e)}var Ka=Ba,Ua=N;function Na(e){return Ua(this,e).has(e)}var Va=Na,Ra=N;function Ha(e,t){var r=Ra(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this}var ka=Ha,qa=xa,za=La,Wa=Ka,Ja=Va,Ya=ka;function S(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}S.prototype.clear=qa,S.prototype.delete=za,S.prototype.get=Wa,S.prototype.has=Ja,S.prototype.set=Ya;var Xa=S,Za=B,Qa=te,en=Xa,tn=200;function rn(e,t){var r=this.__data__;if(r instanceof Za){var a=r.__data__;if(!Qa||a.length<tn-1)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new en(a)}return r.set(e,t),this.size=r.size,this}var an=rn,nn=B,on=Ht,sn=qt,cn=Wt,un=Yt,pn=an;function C(e){var t=this.__data__=new nn(e);this.size=t.size}C.prototype.clear=on,C.prototype.delete=sn,C.prototype.get=cn,C.prototype.has=un,C.prototype.set=pn;var ln=C;function fn(e,t){for(var r=-1,a=e==null?0:e.length;++r<a&&t(e[r],r,e)!==!1;);return e}var vn=fn,gn=d,yn=function(){try{var e=gn(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),$n=yn,Oe=$n;function bn(e,t,r){t=="__proto__"&&Oe?Oe(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var we=bn,hn=we,dn=$e,_n=Object.prototype,Tn=_n.hasOwnProperty;function mn(e,t,r){var a=e[t];(!(Tn.call(e,t)&&dn(a,r))||r===void 0&&!(t in e))&&hn(e,t,r)}var xe=mn,jn=xe,An=we;function Sn(e,t,r,a){var o=!r;r||(r={});for(var n=-1,s=t.length;++n<s;){var p=t[n],g=a?a(r[p],e[p],p,r,e):void 0;g===void 0&&(g=e[p]),o?An(r,p,g):jn(r,p,g)}return r}var V=Sn;function Cn(e,t){for(var r=-1,a=Array(e);++r<e;)a[r]=t(r);return a}var On=Cn;function wn(e){return e!=null&&typeof e=="object"}var P=wn,xn=K,In=P,Pn="[object Arguments]";function En(e){return In(e)&&xn(e)==Pn}var Mn=En,Ie=Mn,Dn=P,Pe=Object.prototype,Fn=Pe.hasOwnProperty,Ln=Pe.propertyIsEnumerable,Gn=Ie(function(){return arguments}())?Ie:function(e){return Dn(e)&&Fn.call(e,"callee")&&!Ln.call(e,"callee")},Ee=Gn,Bn=Array.isArray,R=Bn,H={exports:{}};function Kn(){return!1}var Un=Kn;H.exports,function(e,t){var r=$,a=Un,o=t&&!t.nodeType&&t,n=o&&!0&&e&&!e.nodeType&&e,s=n&&n.exports===o,p=s?r.Buffer:void 0,g=p?p.isBuffer:void 0,v=g||a;e.exports=v}(H,H.exports);var re=H.exports,Nn=9007199254740991,Vn=/^(?:0|[1-9]\d*)$/;function Rn(e,t){var r=typeof e;return t=t==null?Nn:t,!!t&&(r=="number"||r!="symbol"&&Vn.test(e))&&e>-1&&e%1==0&&e<t}var Hn=Rn,kn=9007199254740991;function qn(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=kn}var Me=qn,zn=K,Wn=Me,Jn=P,Yn="[object Arguments]",Xn="[object Array]",Zn="[object Boolean]",Qn="[object Date]",eo="[object Error]",to="[object Function]",ro="[object Map]",ao="[object Number]",no="[object Object]",oo="[object RegExp]",so="[object Set]",io="[object String]",co="[object WeakMap]",uo="[object ArrayBuffer]",po="[object DataView]",lo="[object Float32Array]",fo="[object Float64Array]",vo="[object Int8Array]",go="[object Int16Array]",yo="[object Int32Array]",$o="[object Uint8Array]",bo="[object Uint8ClampedArray]",ho="[object Uint16Array]",_o="[object Uint32Array]",l={};l[lo]=l[fo]=l[vo]=l[go]=l[yo]=l[$o]=l[bo]=l[ho]=l[_o]=!0,l[Yn]=l[Xn]=l[uo]=l[Zn]=l[po]=l[Qn]=l[eo]=l[to]=l[ro]=l[ao]=l[no]=l[oo]=l[so]=l[io]=l[co]=!1;function To(e){return Jn(e)&&Wn(e.length)&&!!l[zn(e)]}var mo=To;function jo(e){return function(t){return e(t)}}var ae=jo,k={exports:{}};k.exports,function(e,t){var r=be,a=t&&!t.nodeType&&t,o=a&&!0&&e&&!e.nodeType&&e,n=o&&o.exports===a,s=n&&r.process,p=function(){try{var g=o&&o.require&&o.require("util").types;return g||s&&s.binding&&s.binding("util")}catch(v){}}();e.exports=p}(k,k.exports);var ne=k.exports,Ao=mo,So=ae,De=ne,Fe=De&&De.isTypedArray,Co=Fe?So(Fe):Ao,Le=Co,Oo=On,wo=Ee,xo=R,Io=re,Po=Hn,Eo=Le,Mo=Object.prototype,Do=Mo.hasOwnProperty;function Fo(e,t){var r=xo(e),a=!r&&wo(e),o=!r&&!a&&Io(e),n=!r&&!a&&!o&&Eo(e),s=r||a||o||n,p=s?Oo(e.length,String):[],g=p.length;for(var v in e)(t||Do.call(e,v))&&!(s&&(v=="length"||o&&(v=="offset"||v=="parent")||n&&(v=="buffer"||v=="byteLength"||v=="byteOffset")||Po(v,g)))&&p.push(v);return p}var Ge=Fo,Lo=Object.prototype;function Go(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Lo;return e===r}var q=Go;function Bo(e,t){return function(r){return e(t(r))}}var Be=Bo,Ko=Be,Uo=Ko(Object.keys,Object),No=Uo,Vo=q,Ro=No,Ho=Object.prototype,ko=Ho.hasOwnProperty;function qo(e){if(!Vo(e))return Ro(e);var t=[];for(var r in Object(e))ko.call(e,r)&&r!="constructor"&&t.push(r);return t}var Ke=qo,zo=me,Wo=Me;function Jo(e){return e!=null&&Wo(e.length)&&!zo(e)}var oe=Jo,Yo=Ge,Xo=Ke,Zo=oe;function Qo(e){return Zo(e)?Yo(e):Xo(e)}var se=Qo,es=V,ts=se;function rs(e,t){return e&&es(t,ts(t),e)}var as=rs;function ns(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var os=ns,ss=I,is=q,cs=os,us=Object.prototype,ps=us.hasOwnProperty;function ls(e){if(!ss(e))return cs(e);var t=is(e),r=[];for(var a in e)a=="constructor"&&(t||!ps.call(e,a))||r.push(a);return r}var fs=ls,vs=Ge,gs=fs,ys=oe;function $s(e){return ys(e)?vs(e,!0):gs(e)}var ie=$s,bs=V,hs=ie;function ds(e,t){return e&&bs(t,hs(t),e)}var _s=ds,z={exports:{}};z.exports,function(e,t){var r=$,a=t&&!t.nodeType&&t,o=a&&!0&&e&&!e.nodeType&&e,n=o&&o.exports===a,s=n?r.Buffer:void 0,p=s?s.allocUnsafe:void 0;function g(v,Y){if(Y)return v.slice();var b=v.length,E=p?p(b):new v.constructor(b);return v.copy(E),E}e.exports=g}(z,z.exports);var Ts=z.exports;function ms(e,t){var r=-1,a=e.length;for(t||(t=Array(a));++r<a;)t[r]=e[r];return t}var js=ms;function As(e,t){for(var r=-1,a=e==null?0:e.length,o=0,n=[];++r<a;){var s=e[r];t(s,r,e)&&(n[o++]=s)}return n}var Ss=As;function Cs(){return[]}var Ue=Cs,Os=Ss,ws=Ue,xs=Object.prototype,Is=xs.propertyIsEnumerable,Ne=Object.getOwnPropertySymbols,Ps=Ne?function(e){return e==null?[]:(e=Object(e),Os(Ne(e),function(t){return Is.call(e,t)}))}:ws,ce=Ps,Es=V,Ms=ce;function Ds(e,t){return Es(e,Ms(e),t)}var Fs=Ds;function Ls(e,t){for(var r=-1,a=t.length,o=e.length;++r<a;)e[o+r]=t[r];return e}var Ve=Ls,Gs=Be,Bs=Gs(Object.getPrototypeOf,Object),Re=Bs,Ks=Ve,Us=Re,Ns=ce,Vs=Ue,Rs=Object.getOwnPropertySymbols,Hs=Rs?function(e){for(var t=[];e;)Ks(t,Ns(e)),e=Us(e);return t}:Vs,He=Hs,ks=V,qs=He;function zs(e,t){return ks(e,qs(e),t)}var Ws=zs,Js=Ve,Ys=R;function Xs(e,t,r){var a=t(e);return Ys(e)?a:Js(a,r(e))}var ke=Xs,Zs=ke,Qs=ce,ei=se;function ti(e){return Zs(e,ei,Qs)}var ri=ti,ai=ke,ni=He,oi=ie;function si(e){return ai(e,oi,ni)}var ii=si,ci=d,ui=$,pi=ci(ui,"DataView"),li=pi,fi=d,vi=$,gi=fi(vi,"Promise"),yi=gi,$i=d,bi=$,hi=$i(bi,"Set"),di=hi,_i=d,Ti=$,mi=_i(Ti,"WeakMap"),ji=mi,ue=li,pe=te,le=yi,fe=di,ve=ji,qe=K,O=Ae,ze="[object Map]",Ai="[object Object]",We="[object Promise]",Je="[object Set]",Ye="[object WeakMap]",Xe="[object DataView]",Si=O(ue),Ci=O(pe),Oi=O(le),wi=O(fe),xi=O(ve),_=qe;(ue&&_(new ue(new ArrayBuffer(1)))!=Xe||pe&&_(new pe)!=ze||le&&_(le.resolve())!=We||fe&&_(new fe)!=Je||ve&&_(new ve)!=Ye)&&(_=function(e){var t=qe(e),r=t==Ai?e.constructor:void 0,a=r?O(r):"";if(a)switch(a){case Si:return Xe;case Ci:return ze;case Oi:return We;case wi:return Je;case xi:return Ye}return t});var W=_,Ii=Object.prototype,Pi=Ii.hasOwnProperty;function Ei(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&Pi.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var Mi=Ei,Di=$,Fi=Di.Uint8Array,Li=Fi,Ze=Li;function Gi(e){var t=new e.constructor(e.byteLength);return new Ze(t).set(new Ze(e)),t}var ge=Gi,Bi=ge;function Ki(e,t){var r=t?Bi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var Ui=Ki,Ni=/\w*$/;function Vi(e){var t=new e.constructor(e.source,Ni.exec(e));return t.lastIndex=e.lastIndex,t}var Ri=Vi,Qe=Q,et=Qe?Qe.prototype:void 0,tt=et?et.valueOf:void 0;function Hi(e){return tt?Object(tt.call(e)):{}}var ki=Hi,qi=ge;function zi(e,t){var r=t?qi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var Wi=zi,Ji=ge,Yi=Ui,Xi=Ri,Zi=ki,Qi=Wi,ec="[object Boolean]",tc="[object Date]",rc="[object Map]",ac="[object Number]",nc="[object RegExp]",oc="[object Set]",sc="[object String]",ic="[object Symbol]",cc="[object ArrayBuffer]",uc="[object DataView]",pc="[object Float32Array]",lc="[object Float64Array]",fc="[object Int8Array]",vc="[object Int16Array]",gc="[object Int32Array]",yc="[object Uint8Array]",$c="[object Uint8ClampedArray]",bc="[object Uint16Array]",hc="[object Uint32Array]";function dc(e,t,r){var a=e.constructor;switch(t){case cc:return Ji(e);case ec:case tc:return new a(+e);case uc:return Yi(e,r);case pc:case lc:case fc:case vc:case gc:case yc:case $c:case bc:case hc:return Qi(e,r);case rc:return new a;case ac:case sc:return new a(e);case nc:return Xi(e);case oc:return new a;case ic:return Zi(e)}}var _c=dc,Tc=I,rt=Object.create,mc=function(){function e(){}return function(t){if(!Tc(t))return{};if(rt)return rt(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),jc=mc,Ac=jc,Sc=Re,Cc=q;function Oc(e){return typeof e.constructor=="function"&&!Cc(e)?Ac(Sc(e)):{}}var wc=Oc,xc=W,Ic=P,Pc="[object Map]";function Ec(e){return Ic(e)&&xc(e)==Pc}var Mc=Ec,Dc=Mc,Fc=ae,at=ne,nt=at&&at.isMap,Lc=nt?Fc(nt):Dc,Gc=Lc,Bc=W,Kc=P,Uc="[object Set]";function Nc(e){return Kc(e)&&Bc(e)==Uc}var Vc=Nc,Rc=Vc,Hc=ae,ot=ne,st=ot&&ot.isSet,kc=st?Hc(st):Rc,qc=kc,zc=ln,Wc=vn,Jc=xe,Yc=as,Xc=_s,Zc=Ts,Qc=js,eu=Fs,tu=Ws,ru=ri,au=ii,nu=W,ou=Mi,su=_c,iu=wc,cu=R,uu=re,pu=Gc,lu=I,fu=qc,vu=se,gu=ie,yu=1,$u=2,bu=4,it="[object Arguments]",hu="[object Array]",du="[object Boolean]",_u="[object Date]",Tu="[object Error]",ct="[object Function]",mu="[object GeneratorFunction]",ju="[object Map]",Au="[object Number]",ut="[object Object]",Su="[object RegExp]",Cu="[object Set]",Ou="[object String]",wu="[object Symbol]",xu="[object WeakMap]",Iu="[object ArrayBuffer]",Pu="[object DataView]",Eu="[object Float32Array]",Mu="[object Float64Array]",Du="[object Int8Array]",Fu="[object Int16Array]",Lu="[object Int32Array]",Gu="[object Uint8Array]",Bu="[object Uint8ClampedArray]",Ku="[object Uint16Array]",Uu="[object Uint32Array]",u={};u[it]=u[hu]=u[Iu]=u[Pu]=u[du]=u[_u]=u[Eu]=u[Mu]=u[Du]=u[Fu]=u[Lu]=u[ju]=u[Au]=u[ut]=u[Su]=u[Cu]=u[Ou]=u[wu]=u[Gu]=u[Bu]=u[Ku]=u[Uu]=!0,u[Tu]=u[ct]=u[xu]=!1;function J(e,t,r,a,o,n){var s,p=t&yu,g=t&$u,v=t&bu;if(r&&(s=o?r(e,a,o,n):r(e)),s!==void 0)return s;if(!lu(e))return e;var Y=cu(e);if(Y){if(s=ou(e),!p)return Qc(e,s)}else{var b=nu(e),E=b==ct||b==mu;if(uu(e))return Zc(e,p);if(b==ut||b==it||E&&!o){if(s=g||E?{}:iu(e),!p)return g?tu(e,Xc(s,e)):eu(e,Yc(s,e))}else{if(!u[b])return o?e:{};s=su(e,b,p)}}n||(n=new zc);var vt=n.get(e);if(vt)return vt;n.set(e,s),fu(e)?e.forEach(function(h){s.add(J(h,t,r,h,e,n))}):pu(e)&&e.forEach(function(h,T){s.set(T,J(h,t,r,T,e,n))});var yp=v?g?au:ru:g?gu:vu,gt=Y?void 0:yp(e);return Wc(gt||e,function(h,T){gt&&(T=h,h=e[T]),Jc(s,T,J(h,t,r,T,e,n))}),s}var Nu=J,Vu=Nu,Ru=1,Hu=4;function ku(e){return Vu(e,Ru|Hu)}var qu=ku;const zu=m(qu);var Wu=Ke,Ju=W,Yu=Ee,Xu=R,Zu=oe,Qu=re,ep=q,tp=Le,rp="[object Map]",ap="[object Set]",np=Object.prototype,op=np.hasOwnProperty;function sp(e){if(e==null)return!0;if(Zu(e)&&(Xu(e)||typeof e=="string"||typeof e.splice=="function"||Qu(e)||tp(e)||Yu(e)))return!e.length;var t=Ju(e);if(t==rp||t==ap)return!e.size;if(ep(e))return!Wu(e).length;for(var r in e)if(op.call(e,r))return!1;return!0}var ip=sp;const cp=m(ip),ye=L.createContext(null);ye.displayName="GoogleReCaptchaSettingsContext";const pt=()=>L.useContext(ye),up=e=>{var o,n;const t=i.useCurrentUserContext(),r=i.useApp();if(cp((o=t==null?void 0:t.data)==null?void 0:o.data))return f.jsx(f.Fragment,{children:e.children});const a=i.useRequest({url:"googleRecaptcha:get"});return a.loading?(n=r==null?void 0:r.renderComponent)==null?void 0:n.call(r,"AppSkeleton"):f.jsx(ye.Provider,{value:a,children:e.children})},lt="@ashley/plugin-google-recaptcha";function pp(e={}){return w.useTranslation(lt,e)}const lp={type:"object",properties:{[D.uid()]:{"x-decorator":"Form","x-decorator-props":{useValues:"{{ useCaptchaSettingsValues }}"},"x-component":"div",type:"void",title:'{{t("reCAPTCHA settings")}}',properties:{siteKey:{type:"string",title:"{{t('Site Key')}}","x-decorator":"FormItem","x-component":"Input.Password",required:!0},secret:{type:"string",title:"{{t('Secret')}}","x-decorator":"FormItem","x-component":"Input.Password",required:!0},projectId:{type:"string",title:"{{t('Project ID')}}","x-decorator":"FormItem","x-component":"Input.Password",required:!0},status:{type:"boolean",title:"{{t('Status')}}","x-component":"Select","x-decorator":"FormItem",enum:[{label:"{{t('Enable')}}",value:!0},{label:"{{t('Disable')}}",value:!1}],default:!1,required:!0},siteVerifyLink:{type:"string",title:"{{t('Site Verify Link')}}","x-decorator":"FormItem","x-component":"Input"},footer1:{type:"void","x-component":"ActionBar","x-component-props":{layout:"one-column"},properties:{submit:{title:'{{t("Submit")}}',"x-component":"Action","x-component-props":{type:"primary",htmlType:"submit",useAction:"{{ useSaveCaptchaSettingsValues }}"}}}}}}}},fp=e=>{var a;const{visible:t}=i.useActionContext(),r=pt();return(a=r==null?void 0:r.data)!=null&&a.data||(r.data={data:{siteVerifyLink:"https://recaptcha.net/recaptcha/api/siteverify"}}),i.useRequest(()=>Promise.resolve(r==null?void 0:r.data),bt(X({},e),{refreshDeps:[t]}))},vp=()=>{var p;const e=Z.useForm(),t=i.useAPIClient(),{t:r}=pp(),{setVisible:a}=i.useActionContext(),{mutate:o,data:n}=pt(),s=(p=n==null?void 0:n.data)!=null&&p.id?`googleRecaptcha:update/${n.data.id}`:"googleRecaptcha:create";return{run(){return M(this,null,function*(){yield e.submit();const v=zu(e.values);o({data:X(X({},n==null?void 0:n.data),v)}),yield t.request({url:s,method:"post",data:v}),F.message.success(r("Saved successfully")),a(!1)})}}},gp=()=>f.jsx(i.SchemaComponentContext.Provider,{value:{designable:!0},children:f.jsx(F.Card,{children:f.jsx(i.SchemaComponent,{scope:{useSaveCaptchaSettingsValues:vp,useCaptchaSettingsValues:fp},schema:lp})})});class ft extends i.Plugin{afterAdd(){return M(this,null,function*(){})}beforeLoad(){return M(this,null,function*(){this.app.pluginSettingsManager.add("google-recaptcha",{icon:"SettingOutlined",title:i.tval("reCAPTCHA",{ns:lt}),aclSnippet:"pm.system-settings.system-settings",Component:gp})})}load(){return M(this,null,function*(){this.app.use(up,this.options)})}}c.PluginGoogleRecaptchaClient=ft,c.default=ft,Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
